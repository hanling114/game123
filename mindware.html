<!DOCTYPE html>
<html data-init="no-js">
<head>
<meta charset="UTF-8" />
<title>MINDWARE</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!--

SugarCube (v2.36.1): A free (gratis and libre) story format.

Copyright © 2013–2021 Thomas Michael Edwards <thomasmedwards@gmail.com>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.setAttribute("data-init", "loading");
/*! @source http://purl.eligrey.com/github/classList.js/blob/1.2.20171210/classList.js */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],s=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},c=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(""===e)throw new c("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new c("INVALID_CHARACTER_ERR","The token must not contain space characters.");return o.call(t,e)},l=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,s=n.length;s>i;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=l[n]=[],h=function(){return new l(this)};if(c[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return~a(this,t+"")},u.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do t=e[n]+"",~a(this,t)||(this.push(t),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do for(t=n[i]+"",e=a(this,t);~e;)this.splice(e,1),r=!0,e=a(this,t);while(++i<s);r&&this._updateClassName()},u.toggle=function(t,e){var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!n},u.replace=function(t,e){var n=a(t+"");~n&&(this.splice(n,1,e),this._updateClassName())},u.toString=function(){return this.join(" ")},s.defineProperty){var f={get:h,enumerable:!0,configurable:!0};try{s.defineProperty(i,e,f)}catch(p){void 0!==p.number&&-2146823252!==p.number||(f.enumerable=!1,s.defineProperty(i,e,f))}}else s[n].__defineGetter__&&i.__defineGetter__(e,h)}}(self),function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;i>n;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var n=this.toString().split(" "),i=n.indexOf(t+"");~i&&(n=n.slice(i),this.remove.apply(this,n),this.add(e),this.add.apply(this,n.slice(1)))}),t=null}());
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2020 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.14/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var S=Function.prototype.toString,x=/^\s*class /,O=function isES6ClassFn(t){try{var r=S.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return x.test(i)}catch(a){return false}},E=function tryFunctionObject(t){try{if(O(t)){return false}S.call(t);return true}catch(r){return false}},j="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return E(t)}if(O(t)){return false}var r=T.call(t);return r===j||r===I};var M;var U=RegExp.prototype.exec,$=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},F="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?$(t):T.call(t)===F};var N;var C=String.prototype.valueOf,k=function tryStringObject(t){try{C.call(t);return true}catch(r){return false}},A="[object String]";N=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?k(t):T.call(t)===A};var R=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var P=function(t){var r;if(R){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function isActualNaN(t){return t!==t};var z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var Z=function Empty(){};P(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){Z.prototype=r.prototype;a.prototype=new Z;Z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var H=d.bind(n.toString);var W=d.bind(s);var B=g.bind(s);if(typeof document==="object"&&document&&document.documentElement){try{W(document.documentElement.childNodes)}catch(X){var L=W;var q=B;W=function arraySliceIE(t){var r=[];var e=t.length;while(e-- >0){r[e]=t[e]}return q(r,L(arguments,1))};B=function arraySliceApplyIE(t,r){return q(W(t),r)}}}var K=d.bind(f.slice);var Q=d.bind(f.split);var V=d.bind(f.indexOf);var _=d.bind(v);var tt=d.bind(n.propertyIsEnumerable);var rt=d.bind(r.sort);var et=t.isArray||function isArray(t){return H(t)==="[object Array]"};var nt=[].unshift(0)!==1;P(r,{unshift:function(){h.apply(this,arguments);return this.length}},nt);P(t,{isArray:et});var it=e("a");var at=it[0]!=="a"||!(0 in it);var ot=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};P(r,{forEach:function forEach(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=-1;var i=z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!ot(r.forEach));P(r,{map:function map(r){var e=z.ToObject(this);var n=at&&N(this)?Q(this,""):e;var i=z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!ot(r.map));P(r,{filter:function filter(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){_(i,a)}}}return i}},!ot(r.filter));P(r,{every:function every(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!ot(r.every));P(r,{some:function some(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!ot(r.some));var ft=false;if(r.reduce){ft=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduce:function reduce(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!ft);var ut=false;if(r.reduceRight){ut=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduceRight:function reduceRight(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!ut);var lt=r.indexOf&&[0,1].indexOf(1,2)!==-1;P(r,{indexOf:function indexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},lt);var st=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;P(r,{lastIndexOf:function lastIndexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},st);var ct=function(){var t=[1,2];var r=t.splice();return t.length===2&&et(r)&&r.length===0}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ct);var vt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=W(arguments);if(e.length<2){_(e,this.length-t)}else{e[1]=z.ToInteger(r)}}return c.apply(this,e)}},!vt);var ht=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var pt=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();P(r,{splice:function splice(t,r){var e=z.ToObject(this);var n=[];var i=z.ToUint32(e.length);var a=z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=arguments.length===0?0:arguments.length===1?i-f:b(w(z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=W(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!ht||!pt);var yt=r.join;var dt;try{dt=Array.prototype.join.call("123",",")!=="1,2,3"}catch(X){dt=true}if(dt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(N(this)?Q(this,""):this,r)}},dt)}var gt=[1,2].join(undefined)!=="1,2";if(gt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(this,r)}},gt)}var wt=function push(t){var r=z.ToObject(this);var e=z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var bt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:function push(t){if(et(this)){return v.apply(this,arguments)}return wt.apply(this,arguments)}},bt);var Tt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:wt},Tt);P(r,{slice:function(t,r){var e=N(this)?Q(this,""):this;return B(e,arguments)}},at);var mt=function(){try{[1,2].sort(null)}catch(t){try{[1,2].sort({})}catch(r){return false}}return true}();var Dt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var St=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();P(r,{sort:function sort(t){if(typeof t==="undefined"){return rt(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return rt(this,t)}},mt||!St||!Dt);var xt=!tt({toString:null},"toString");var Ot=tt(function(){},"prototype");var Et=!G("x","0");var jt=function(t){var r=t.constructor;return r&&r.prototype===t};var It={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true,$width:true,$height:true,$top:true,$localStorage:true};var Mt=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!It["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){jt(window[t])}}catch(r){return true}}return false}();var Ut=function(t){if(typeof window==="undefined"||!Mt){return jt(t)}try{return jt(t)}catch(r){return false}};var $t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ft=$t.length;var Nt=function isArguments(t){return H(t)==="[object Arguments]"};var Ct=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!et(t)&&D(t.callee)};var kt=Nt(arguments)?Nt:Ct;P(e,{keys:function keys(t){var r=D(t);var e=kt(t);var n=t!==null&&typeof t==="object";var i=n&&N(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=Ot&&r;if(i&&Et||e){for(var u=0;u<t.length;++u){_(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){_(a,o(l))}}}if(xt){var s=Ut(t);for(var c=0;c<Ft;c++){var v=$t[c];if(!(s&&v==="constructor")&&G(t,v)){_(a,v)}}}return a}});var At=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var Rt=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var Pt=e.keys;P(e,{keys:function keys(t){if(kt(t)){return Pt(W(t))}else{return Pt(t)}}},!At||Rt);var Jt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var Yt=new Date(-0x55d318d56a724);var zt=new Date(14496624e5);var Zt=Yt.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Gt;var Ht;var Wt=Yt.getTimezoneOffset();if(Wt<-720){Gt=Yt.toDateString()!=="Tue Jan 02 -45875";Ht=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}else{Gt=Yt.toDateString()!=="Mon Jan 01 -45875";Ht=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}var Bt=d.bind(Date.prototype.getFullYear);var Xt=d.bind(Date.prototype.getMonth);var Lt=d.bind(Date.prototype.getDate);var qt=d.bind(Date.prototype.getUTCFullYear);var Kt=d.bind(Date.prototype.getUTCMonth);var Qt=d.bind(Date.prototype.getUTCDate);var Vt=d.bind(Date.prototype.getUTCDay);var _t=d.bind(Date.prototype.getUTCHours);var tr=d.bind(Date.prototype.getUTCMinutes);var rr=d.bind(Date.prototype.getUTCSeconds);var er=d.bind(Date.prototype.getUTCMilliseconds);var nr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var ir=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var ar=function daysInMonth(t,r){return Lt(new Date(r,t,0))};P(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Xt(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);var e=Lt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);if(t<0&&Kt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);var e=Qt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e}},Jt);P(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Vt(this);var r=Qt(this);var e=Kt(this);var n=qt(this);var i=_t(this);var a=tr(this);var o=rr(this);return nr[t]+", "+(r<10?"0"+r:r)+" "+ir[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Jt||Zt);P(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n}},Jt||Gt);if(Jt||Ht){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(R){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var or=-621987552e5;var fr="-000001";var ur=Date.prototype.toISOString&&new Date(or).toISOString().indexOf(fr)===-1;var lr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var sr=d.bind(Date.prototype.getTime);P(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(sr(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=qt(this);var r=Kt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,Qt(this),_t(this),tr(this),rr(this)];t=(t<0?"-":t>9999?"+":"")+K("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=K("00"+e[n],-2)}return t+"-"+W(e,0,2).join("-")+"T"+W(e,2).join(":")+"."+K("000"+er(this),-3)+"Z"}},ur||lr);var cr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(or).toJSON().indexOf(fr)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!cr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var vr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var hr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var pr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(pr||hr||!vr){var yr=Math.pow(2,31)-1;var dr=Y(new Date(1970,0,1,0,0,0,yr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(dr&&s>=7&&l>yr){var p=Math.floor(l/yr)*yr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){P(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(dr&&n>yr){var i=Math.floor(n/yr)*yr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}P(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;P(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};P(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var gr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(1000000000000000128).toFixed(0)!=="1000000000000000128");var wr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<wr.size){n+=t*wr.data[e];wr.data[e]=n%wr.base;n=Math.floor(n/wr.base)}},divide:function divide(t){var r=wr.size;var e=0;while(--r>=0){e+=wr.data[r];wr.data[r]=Math.floor(e/t);e=e%t*wr.base}},numToString:function numToString(){var t=wr.size;var r="";while(--t>=0){if(r!==""||t===0||wr.data[t]!==0){var e=o(wr.data[t]);if(r===""){r=e}else{r+=K("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var br=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=wr.log(e*wr.pow(2,69,1))-69;f=a<0?e*wr.pow(2,-a,1):e/wr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){wr.multiply(0,f);l=r;while(l>=7){wr.multiply(1e7,0);l-=7}wr.multiply(wr.pow(10,l,1),0);l=a-1;while(l>=23){wr.divide(1<<23);l-=23}wr.divide(1<<l);wr.multiply(1,1);wr.divide(2);i=wr.numToString()}else{wr.multiply(0,f);wr.multiply(1<<-a,0);i=wr.numToString()+K("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+K("0.0000000000000000000",0,r-s+2)+i}else{i=n+K(i,0,s-r)+"."+K(i,s-r)}}else{i=n+i}return i};P(l,{toFixed:br},gr);var Tr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var mr=l.toPrecision;P(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?mr.call(this):mr.call(this,t)}},Tr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return Q(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){_(a,K(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,W(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){_(a,"")}}else{_(a,K(i,f))}return a.length>p?W(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return Q(this,t,r)}}var Dr=f.replace;var Sr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){_(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!Sr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Dr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;_(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Dr.call(this,t,i)}}}var xr=f.substr;var Or="".substr&&"0b".substr(-1)!=="b";P(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return xr.call(this,e,r)}},Or);var Er="\t\n\x0B\f\r \xa0\u1680\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var jr="\u200b";var Ir="["+Er+"]";var Mr=new RegExp("^"+Ir+Ir+"*");var Ur=new RegExp(Ir+Ir+"*$");var $r=f.trim&&(Er.trim()||!jr.trim());P(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(Mr,"").replace(Ur,"")}},$r);var Fr=d.bind(String.prototype.trim);var Nr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;P(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=V(K(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Nr);var Cr=f.lastIndexOf;P(f,{lastIndexOf:function lastIndexOf(t){return Cr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(Er+"08")!==8||parseInt(Er+"0x16")!==22){parseInt=function(t){var r=/^[-+]?0[xX]/;return function parseInt(e,n){if(typeof e==="symbol"){""+e}var i=Fr(String(e));var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Fr(String(r));var n=t(e);return n===0&&K(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var kr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=kr}if(R){var Ar=function(t,r){if(tt(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);if(e.configurable){e.enumerable=false;Object.defineProperty(t,r,e)}}};Ar(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}Ar(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Rr=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Rr}});
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.4/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){return Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var L=Math.exp;var F=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Map;var H=G&&G.prototype["delete"];var V=G&&G.prototype.get;var B=G&&G.prototype.has;var U=G&&G.prototype.set;var $=S.Symbol||{};var J=$.species||"@@species";var X=Number.isNaN||function isNaN(e){return e!==e};var K=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Z=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(X(t)){return t}return t<0?-1:1};var Y=function log1p(e){var t=Number(e);if(t<-1||X(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(F(1+t)/(1+t-1))};var Q=function isArguments(e){return g(e)==="[object Arguments]"};var ee=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var te=Q(arguments)?Q:ee;var re={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var ne=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var oe=typeof $==="function"&&typeof $["for"]==="function"&&re.symbol($());var ie=re.symbol($.iterator)?$.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){ie="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ae=S.Reflect;var ue=String;var fe=typeof document==="undefined"||!document?null:document.all;var se=fe==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==fe};var ce={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!ce.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(se(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===fe},ToObject:function(e,t){return Object(ce.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return ce.IsCallable(e)},ToInt32:function(e){return ce.ToNumber(e)>>0},ToUint32:function(e){return ce.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=ce.ToNumber(e);if(X(t)){return 0}if(t===0||!K(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=ce.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return X(e)&&X(t)},SameValueZero:function(e,t){return e===t||X(e)&&X(t)},IsIterable:function(e){return ce.TypeIsObject(e)&&(typeof e[ie]!=="undefined"||te(e))},GetIterator:function(e){if(te(e)){return new q(e,"value")}var t=ce.GetMethod(e,ie);if(!ce.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=ce.Call(t,e);if(!ce.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=ce.ToObject(e)[t];if(se(r)){return void 0}if(!ce.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=ce.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=ce.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!ce.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ce.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=ce.IteratorNext(e);var r=ce.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ae.construct){return ae.construct(e,t,o)}var i=o.prototype;if(!ce.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=ce.Call(e,a,t);return ce.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!ce.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[J];if(se(n)){return t}if(!ce.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=ce.ToString(e);var i="<"+t;if(r!==""){var a=ce.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!ce.TypeIsObject(e)){return false}var t=e[$.match];if(typeof t!=="undefined"){return!!t}return re.regex(e)},ToString:function ToString(e){return ue(e)}};if(s&&oe){var le=function defineWellKnownSymbol(e){if(re.symbol($[e])){return $[e]}var t=$["for"]("Symbol."+e);Object.defineProperty($,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!re.symbol($.search)){var pe=le("search");var ve=String.prototype.search;h(RegExp.prototype,pe,function search(e){return ce.Call(ve,e,[this])});var ye=function search(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,pe);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(ve,t,[ce.ToString(e)])};ne(String.prototype,"search",ye)}if(!re.symbol($.replace)){var he=le("replace");var be=String.prototype.replace;h(RegExp.prototype,he,function replace(e,t){return ce.Call(be,e,[this,t])});var ge=function replace(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,he);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(be,r,[ce.ToString(e),t])};ne(String.prototype,"replace",ge)}if(!re.symbol($.split)){var de=le("split");var me=String.prototype.split;h(RegExp.prototype,de,function split(e,t){return ce.Call(me,e,[this,t])});var Oe=function split(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,de);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(me,r,[ce.ToString(e),t])};ne(String.prototype,"split",Oe)}var we=re.symbol($.match);var je=we&&function(){var e={};e[$.match]=function(){return 42};return"a".match(e)!==42}();if(!we||je){var Se=le("match");var Te=String.prototype.match;h(RegExp.prototype,Se,function match(e){return ce.Call(Te,e,[this])});var Ie=function match(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,Se);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(Te,t,[ce.ToString(e)])};ne(String.prototype,"match",Ie)}}var Ee=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Pe=function(){return this};var Ce=function(e){if(s&&!z(e,J)){m.getter(e,J,Pe)}};var Me=function(e,t){var r=t||function iterator(){return this};h(e,ie,r);if(!e[ie]&&re.symbol(ie)){e[ie]=r}};var xe=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Ne=function createDataPropertyOrThrow(e,t,r){xe(e,t,r);if(!ce.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Ae=function(e,t,r,n){if(!ce.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!ce.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Re=String.fromCodePoint;ne(String,"fromCodePoint",function fromCodePoint(e){return ce.Call(Re,this,arguments)})}var _e={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!ce.SameValue(r,ce.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=ce.ToObject(e,"bad callSite");var r=ce.ToObject(t.raw,"bad raw value");var n=r.length;var o=ce.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=ce.ToString(a);s=ce.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=ce.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){ne(String,"raw",_e.raw)}b(String,_e);var ke=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Le=Infinity;var Fe={repeat:function repeat(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);if(r<0||r>=Le){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return ke(t,r)},startsWith:function startsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=ce.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(ce.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=ce.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:ce.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(ce.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=ce.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){ne(String.prototype,"includes",Fe.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var De=i(function(){return"/a/".startsWith(/a/)});var ze=a(function(){return"abc".startsWith("a",Infinity)===false});if(!De||!ze){ne(String.prototype,"startsWith",Fe.startsWith);ne(String.prototype,"endsWith",Fe.endsWith)}}if(oe){var qe=a(function(){var e=/a/;e[$.match]=false;return"/a/".startsWith(e)});if(!qe){ne(String.prototype,"startsWith",Fe.startsWith)}var We=a(function(){var e=/a/;e[$.match]=false;return"/a/".endsWith(e)});if(!We){ne(String.prototype,"endsWith",Fe.endsWith)}var Ge=a(function(){var e=/a/;e[$.match]=false;return"/a/".includes(e)});if(!Ge){ne(String.prototype,"includes",Fe.includes)}}b(String.prototype,Fe);var He=["\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Ve=new RegExp("(^["+He+"]+)|(["+He+"]+$)","g");var Be=function trim(){return ce.ToString(ce.RequireObjectCoercible(this)).replace(Ve,"")};var Ue=["\x85","\u200b","\ufffe"].join("");var $e=new RegExp("["+Ue+"]","g");var Je=/^[-+]0x[0-9a-f]+$/i;var Xe=Ue.trim().length!==Ue.length;h(String.prototype,"trim",Be,Xe);var Ke=function(e){return{value:e,done:arguments.length===0}};var Ze=function(e){ce.RequireObjectCoercible(e);this._s=ce.ToString(e);this._i=0};Ze.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ke()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ke(e.substr(t,o))};Me(Ze.prototype);Me(String.prototype,function(){return new Ze(this)});var Ye={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!ce.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(te(e)||ce.GetMethod(e,ie))!=="undefined";var u,f,s;if(a){f=ce.IsConstructor(r)?Object(new r):[];var c=ce.GetIterator(e);var l,p;s=0;while(true){l=ce.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){ce.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=ce.ToObject(e);u=ce.ToLength(y.length);f=ce.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Ne(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!ce.IsCallable(t)?new Array(e):ce.Construct(t,[e]);for(var o=0;o<e;++o){Ne(n,o,arguments[o])}n.length=e;return n}};b(Array,Ye);Ce(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=ce.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ke(o)}}this.array=void 0;return Ke()}});Me(q.prototype);var Qe=Array.of===Ye.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Qe){ne(Array,"of",Ye.of)}var et={copyWithin:function copyWithin(e,t){var r=ce.ToObject(this);var n=ce.ToLength(r.length);var o=ce.ToInteger(e);var i=ce.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:ce.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=ce.ToObject(this);var o=ce.ToLength(n.length);t=ce.ToInteger(typeof t==="undefined"?0:t);r=ce.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!ce.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!ce.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ie]){b(Array.prototype,{values:Array.prototype[ie]});if(re.symbol($.unscopables)){Array.prototype[$.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var tt=Array.prototype.values;ne(Array.prototype,"values",function values(){return ce.Call(tt,this,arguments)});h(Array.prototype,ie,Array.prototype.values,true)}b(Array.prototype,et);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}Me(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){Me(Object.getPrototypeOf([].values()))}var rt=function(){return a(function(){return Array.from({length:-1}).length===0})}();var nt=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!rt||!nt){ne(Array,"from",Ye.from)}var ot=function(){return a(function(){return Array.from([0],void 0)})}();if(!ot){var it=Array.from;ne(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return ce.Call(it,this,arguments)}else{return t(it,this,e)}})}var at=-(Math.pow(2,32)-1);var ut=function(e,r){var n={length:at};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!ut(Array.prototype.forEach)){var ft=Array.prototype.forEach;ne(Array.prototype,"forEach",function forEach(e){return ce.Call(ft,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.map)){var st=Array.prototype.map;ne(Array.prototype,"map",function map(e){return ce.Call(st,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.filter)){var ct=Array.prototype.filter;ne(Array.prototype,"filter",function filter(e){return ce.Call(ct,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.some)){var lt=Array.prototype.some;ne(Array.prototype,"some",function some(e){return ce.Call(lt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.every)){var pt=Array.prototype.every;ne(Array.prototype,"every",function every(e){return ce.Call(pt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduce)){var vt=Array.prototype.reduce;ne(Array.prototype,"reduce",function reduce(e){return ce.Call(vt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduceRight,true)){var yt=Array.prototype.reduceRight;ne(Array.prototype,"reduceRight",function reduceRight(e){return ce.Call(yt,this.length>=0?this:[],arguments)},true)}var ht=Number("0o10")!==8;var bt=Number("0b10")!==2;var gt=y(Ue,function(e){return Number(e+0+e)===0});if(ht||bt||gt){var dt=Number;var mt=/^0b[01]+$/i;var Ot=/^0o[0-7]+$/i;var wt=mt.test.bind(mt);var jt=Ot.test.bind(Ot);var St=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(re.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(re.primitive(t)){return t}}throw new TypeError("No default value")};var Tt=$e.test.bind($e);var It=Je.test.bind(Je);var Et=function(){var e=function Number(t){var r;if(arguments.length>0){r=re.primitive(t)?t:St(t,"number")}else{r=0}if(typeof r==="string"){r=ce.Call(Be,r);if(wt(r)){r=parseInt(C(r,2),2)}else if(jt(r)){r=parseInt(C(r,2),8)}else if(Tt(r)||It(r)){r=NaN}}var n=this;var o=a(function(){dt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new dt(r)}return dt(r)};return e}();Ee(dt,Et,{});b(Et,{NaN:dt.NaN,MAX_VALUE:dt.MAX_VALUE,MIN_VALUE:dt.MIN_VALUE,NEGATIVE_INFINITY:dt.NEGATIVE_INFINITY,POSITIVE_INFINITY:dt.POSITIVE_INFINITY});Number=Et;m.redefine(S,"Number",Et)}var Pt=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Pt,MIN_SAFE_INTEGER:-Pt,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function isInteger(e){return K(e)&&ce.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:X});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){ne(Array.prototype,"find",et.find)}if([,1].findIndex(function(){return true})!==0){ne(Array.prototype,"findIndex",et.findIndex)}var Ct=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Mt=function ensureEnumerable(e,t){if(s&&Ct(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var xt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var Nt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var At=function(e,t){var r=n(Object(t));var o;if(ce.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),Ct(t))}return p(P(r,o||[]),Nt(t),e)};var Rt={assign:function(e,t){var r=ce.ToObject(e,"Cannot convert undefined or null to object");return p(ce.Call(xt,1,arguments),At,r)},is:function is(e,t){return ce.SameValue(e,t)}};var _t=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(_t){ne(Object,"assign",Rt.assign)}b(Object,Rt);if(s){var kt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!ce.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||ce.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,kt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Lt=!i(function(){return Object.keys("foo")});if(!Lt){var Ft=Object.keys;ne(Object,"keys",function keys(e){return Ft(ce.ToObject(e))});n=Object.keys}var Dt=i(function(){return Object.keys(/a/g)});if(Dt){var zt=Object.keys;ne(Object,"keys",function keys(e){if(re.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return zt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var qt=!i(function(){return Object.getOwnPropertyNames("foo")});if(!qt){var Wt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Gt=Object.getOwnPropertyNames;ne(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=ce.ToObject(e);if(g(t)==="[object Window]"){try{return Gt(t)}catch(r){return P([],Wt)}}return Gt(t)})}}if(Object.getOwnPropertyDescriptor){var Ht=!i(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!Ht){var Vt=Object.getOwnPropertyDescriptor;ne(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Vt(ce.ToObject(e),t)})}}if(Object.seal){var Bt=!i(function(){return Object.seal("foo")});if(!Bt){var Ut=Object.seal;ne(Object,"seal",function seal(e){if(!ce.TypeIsObject(e)){return e}return Ut(e)})}}if(Object.isSealed){var $t=!i(function(){return Object.isSealed("foo")});if(!$t){var Jt=Object.isSealed;ne(Object,"isSealed",function isSealed(e){if(!ce.TypeIsObject(e)){return true}return Jt(e)})}}if(Object.freeze){var Xt=!i(function(){return Object.freeze("foo")});if(!Xt){var Kt=Object.freeze;ne(Object,"freeze",function freeze(e){if(!ce.TypeIsObject(e)){return e}return Kt(e)})}}if(Object.isFrozen){var Zt=!i(function(){return Object.isFrozen("foo")});if(!Zt){var Yt=Object.isFrozen;ne(Object,"isFrozen",function isFrozen(e){if(!ce.TypeIsObject(e)){return true}return Yt(e)})}}if(Object.preventExtensions){var Qt=!i(function(){return Object.preventExtensions("foo")});if(!Qt){var er=Object.preventExtensions;ne(Object,"preventExtensions",function preventExtensions(e){if(!ce.TypeIsObject(e)){return e}return er(e)})}}if(Object.isExtensible){var tr=!i(function(){return Object.isExtensible("foo")});if(!tr){var rr=Object.isExtensible;ne(Object,"isExtensible",function isExtensible(e){if(!ce.TypeIsObject(e)){return false}return rr(e)})}}if(Object.getPrototypeOf){var nr=!i(function(){return Object.getPrototypeOf("foo")});if(!nr){var or=Object.getPrototypeOf;ne(Object,"getPrototypeOf",function getPrototypeOf(e){return or(ce.ToObject(e))})}}var ir=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ce.IsCallable(e.get)}();if(s&&!ir){var ar=function flags(){if(!ce.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",ar)}var ur=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var fr=oe&&s&&function(){var e=/./;e[$.match]=false;return RegExp(e)===e}();var sr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var cr=sr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!sr||!cr){var lr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=ce.RequireObjectCoercible(this);if(re.regex(e)){return t(lr,e)}var r=ue(e.source);var n=ue(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,lr)}if(s&&(!ur||fr)){var pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var vr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var yr=function(){return this.source};var hr=ce.IsCallable(vr.get)?vr.get:yr;var br=RegExp;var gr=function(){return function RegExp(e,t){var r=ce.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(re.regex(e)){o=ce.Call(hr,e);i=typeof t==="undefined"?ce.Call(pr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new br(e,t)}}();Ee(br,gr,{$input:true});RegExp=gr;m.redefine(S,"RegExp",gr)}if(s){var dr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(dr),function(e){if(e in RegExp&&!(dr[e]in RegExp)){m.getter(RegExp,dr[e],function get(){return RegExp[e]})}})}Ce(RegExp);var mr=1/Number.EPSILON;var Or=function roundTiesToEven(e){return e+mr-mr};var wr=Math.pow(2,-23);var jr=Math.pow(2,127)*(2-wr);var Sr=Math.pow(2,-126);var Tr=Math.E;var Ir=Math.LOG2E;var Er=Math.LOG10E;var Pr=Number.prototype.clz;delete Number.prototype.clz;var Cr={acosh:function acosh(e){var t=Number(e);if(X(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}var r=1/(t*t);if(t<2){return Y(t-1+D(1-r)*t)}var n=t/2;return Y(n+D(1-r)*n-1)+1/Ir},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}var r=k(t);var n=r*r;var o=Z(t);if(r<1){return o*Y(r+n/(D(n+1)+1))}return o*(Y(r/2+D(1+1/n)*r/2-1)+1/Ir)},atanh:function atanh(e){var t=Number(e);if(t===0){return t}if(t===-1){return-Infinity}if(t===1){return Infinity}if(X(t)||t<-1||t>1){return NaN}var r=k(t);return Z(t)*Y(2*r/(1-r))/2},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=L(F(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=ce.ToUint32(t);if(r===0){return 32}return Pr?ce.Call(Pr,r):31-_(F(r+.5)*Ir)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(X(t)){return NaN}if(!T(t)){return Infinity}var r=L(k(t)-1);return(r+1/(r*Tr*Tr))*(Tr/2)},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return L(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return F(e)*Ir},log10:function log10(e){return F(e)*Er},log1p:Y,sign:Z,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}var r=k(t);if(r<1){var n=Math.expm1(r);return Z(t)*n*(1+1/(n+1))/2}var o=L(r-1);return Z(t)*(o-1/(o*Tr*Tr))*(Tr/2)},tanh:function tanh(e){var t=Number(e);if(X(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(L(t)+L(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=ce.ToUint32(e);var n=ce.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||X(t)){return t}var r=Z(t);var n=k(t);if(n<Sr){return r*Or(n/Sr/wr)*Sr*wr}var o=(1+wr/Number.EPSILON)*n;var i=o-(o-n);if(i>jr||X(i)){return r*Infinity}return r*i}};var Mr=function withinULPDistance(e,t,r){return k(1-e/t)/Number.EPSILON<(r||8)};b(Math,Cr);h(Math,"sinh",Cr.sinh,Math.sinh(710)===Infinity);h(Math,"cosh",Cr.cosh,Math.cosh(710)===Infinity);h(Math,"log1p",Cr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",Cr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"asinh",Cr.asinh,Math.asinh(1e300)===Infinity);h(Math,"atanh",Cr.atanh,Math.atanh(1e-300)===0);h(Math,"tanh",Cr.tanh,Math.tanh(-2e-17)!==-2e-17);
h(Math,"acosh",Cr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"acosh",Cr.acosh,!Mr(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON)));h(Math,"cbrt",Cr.cbrt,!Mr(Math.cbrt(1e-300),1e-100));h(Math,"sinh",Cr.sinh,Math.sinh(-2e-17)!==-2e-17);var xr=Math.expm1(10);h(Math,"expm1",Cr.expm1,xr>22025.465794806718||xr<22025.465794806718);var Nr=Math.round;var Ar=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Rr=mr+1;var _r=2*mr-1;var kr=[Rr,_r].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Ar||!kr);m.preserveToString(Math.round,Nr);var Lr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Cr.imul;m.preserveToString(Math.imul,Lr)}if(Math.imul.length!==2){ne(Math,"imul",function imul(e,t){return ce.Call(Lr,Math,arguments)})}var Fr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}ce.IsPromise=function(e){if(!ce.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!ce.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(ce.IsCallable(t.resolve)&&ce.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&ce.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=ce.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(ce.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!ce.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return m(e,o)}if(!ce.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!ce.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Ae(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=ce.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=ce.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(ce.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!ce.IsPromise(n)){throw new TypeError("not a promise")}var o=ce.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=ce.IsCallable(e)?e:a;var d=ce.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Fr==="function"){b(S,{Promise:Fr});var Dr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var zr=!i(function(){return S.Promise.reject(42).then(null,5).then(null,W)});var qr=i(function(){return S.Promise.call(3,W)});var Wr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(n){return true}return t===r}(S.Promise);var Gr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Hr=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Hr.prototype=Promise.prototype;Hr.all=Promise.all;var Vr=a(function(){return!!Hr.all([1,2])});if(!Dr||!zr||!qr||Wr||!Gr||Vr){Promise=Fr;ne(S,"Promise",Fr)}if(Promise.all.length!==1){var Br=Promise.all;ne(Promise,"all",function all(e){return ce.Call(Br,this,arguments)})}if(Promise.race.length!==1){var Ur=Promise.race;ne(Promise,"race",function race(e){return ce.Call(Ur,this,arguments)})}if(Promise.resolve.length!==1){var $r=Promise.resolve;ne(Promise,"resolve",function resolve(e){return ce.Call($r,this,arguments)})}if(Promise.reject.length!==1){var Jr=Promise.reject;ne(Promise,"reject",function reject(e){return ce.Call(Jr,this,arguments)})}Mt(Promise,"all");Mt(Promise,"race");Mt(Promise,"resolve");Mt(Promise,"reject");Ce(Promise)}var Xr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Kr=Xr(["z","a","bb"]);var Zr=Xr(["z",1,"a","3",2]);if(s){var Yr=function fastkey(e,t){if(!t&&!Kr){return null}if(se(e)){return"^"+ce.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Zr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Qr=function emptyObject(){return Object.create?Object.create(null):{}};var en=function addIterableToMap(e,n,o){if(r(o)||re.string(o)){l(o,function(e){if(!ce.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!se(o)){a=n.set;if(!ce.IsCallable(a)){throw new TypeError("bad map")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!ce.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){ce.IteratorClose(i,true);throw s}}}}};var tn=function addIterableToSet(e,n,o){if(r(o)||re.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!se(o)){a=n.add;if(!ce.IsCallable(a)){throw new TypeError("bad set")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){ce.IteratorClose(i,true);throw s}}}}};var rn={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!ce.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ce.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={isMapIterator:true,next:function next(){if(!this.isMapIterator){throw new TypeError("Not a MapIterator")}var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ke()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ke(n)}}this.i=void 0;return Ke()}};Me(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Ae(this,Map,a,{_es6map:true,_head:null,_map:G?new G:null,_size:0,_storage:Qr()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){en(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=Yr(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}else{return}}if(this._map){t=V.call(this._map,e);if(t){return t.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Yr(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return B.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(ce.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Yr(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}else if(this._map){if(B.call(this._map,e)){V.call(this._map,e).value=t}else{a=new r(e,t);U.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(ce.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=Yr(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!B.call(this._map,t)){return false}n=V.call(this._map,t).prev;H.call(this._map,t)}while((n=n.next)!==r){if(ce.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=G?new G:null;this._size=0;this._storage=Qr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});Me(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!ce.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+ce.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Ae(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Qr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){tn(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new rn.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Yr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Yr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Yr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Qr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return new f(this["[[SetData]]"].values())},entries:function entries(){r(this,"entries");u(this);return new f(this["[[SetData]]"].entries())},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);Me(i.prototype,i.prototype.values);var f=function SetIterator(e){this.it=e};f.prototype={isSetIterator:true,next:function next(){if(!this.isSetIterator){throw new TypeError("Not a SetIterator")}return this.it.next()}};Me(f.prototype);return i}()};var nn=S.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(nn){S.Set=rn.Set}if(S.Map||S.Set){var on=a(function(){return new Map([[1,2]]).get(1)===2});if(!on){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(G.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var an=new Map;var un=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var fn=an.set(1,2)===an;if(!un||!fn){ne(Map.prototype,"set",function set(e,r){t(U,this,e===0?0:e,r);return this})}if(!un){b(Map.prototype,{get:function get(e){return t(V,this,e===0?0:e)},has:function has(e){return t(B,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,V);m.preserveToString(Map.prototype.has,B)}var sn=new Set;var cn=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(e){e["delete"](0);e.add(-0);return!e.has(0)}(sn);var ln=sn.add(1)===sn;if(!cn||!ln){var pn=Set.prototype.add;Set.prototype.add=function add(e){t(pn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,pn)}if(!cn){var vn=Set.prototype.has;Set.prototype.has=function has(e){return t(vn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,vn);var yn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(yn,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],yn)}var hn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var bn=Object.setPrototypeOf&&!hn;var gn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||bn||!gn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=G.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var dn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var mn=Object.setPrototypeOf&&!dn;var On=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||mn||!On){var wn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new wn;if(arguments.length>0){tn(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=wn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,wn)}var jn=new S.Map;var Sn=!a(function(){return jn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||jn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof jn.keys().next!=="function"||Sn||!hn){b(S,{Map:rn.Map,Set:rn.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}Me(Object.getPrototypeOf((new S.Map).keys()));Me(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var Tn=S.Set.prototype.has;ne(S.Set.prototype,"has",function has(e){return t(Tn,this,e)})}}b(S,rn);Ce(S.Map);Ce(S.Set)}var In=function throwUnlessTargetIsObject(e){if(!ce.TypeIsObject(e)){throw new TypeError("target must be an object")}};var En={apply:function apply(){return ce.Call(ce.Call,null,arguments)},construct:function construct(e,t){if(!ce.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!ce.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return ce.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){In(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){In(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(En,{ownKeys:function ownKeys(e){In(e);var t=Object.getOwnPropertyNames(e);if(ce.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Pn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(En,{isExtensible:function isExtensible(e){In(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){In(e);return Pn(function(){return Object.preventExtensions(e)})}})}if(s){var Cn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return Cn(o,t,r)}if("value"in n){return n.value}if(n.get){return ce.Call(n.get,r)}return void 0};var Mn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Mn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!ce.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ae.defineProperty(o,r,{value:n})}else{return ae.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(En,{defineProperty:function defineProperty(e,t,r){In(e);return Pn(function(){return Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){In(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){In(e);var r=arguments.length>2?arguments[2]:e;return Cn(e,t,r)},set:function set(e,t,r){In(e);var n=arguments.length>3?arguments[3]:e;return Mn(e,t,r,n)}})}if(Object.getPrototypeOf){var xn=Object.getPrototypeOf;En.getPrototypeOf=function getPrototypeOf(e){In(e);return xn(e)}}if(Object.setPrototypeOf&&En.getPrototypeOf){var Nn=function(e,t){var r=t;while(r){if(e===r){return true}r=En.getPrototypeOf(r)}return false};Object.assign(En,{setPrototypeOf:function setPrototypeOf(e,t){In(e);if(t!==null&&!ce.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ae.getPrototypeOf(e)){return true}if(ae.isExtensible&&!ae.isExtensible(e)){return false}if(Nn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var An=function(e,t){if(!ce.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){ne(S.Reflect,e,t)}}};Object.keys(En).forEach(function(e){An(e,En[e])});var Rn=S.Reflect.getPrototypeOf;if(c&&Rn&&Rn.name!=="getPrototypeOf"){ne(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(Rn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){ne(S.Reflect,"setPrototypeOf",En.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){ne(S.Reflect,"defineProperty",En.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){ne(S.Reflect,"construct",En.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var _n=Date.prototype.toString;var kn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return ce.Call(_n,this)};ne(Date.prototype,"toString",kn)}var Ln={anchor:function anchor(e){return ce.CreateHTML(this,"a","name",e)},big:function big(){return ce.CreateHTML(this,"big","","")},blink:function blink(){return ce.CreateHTML(this,"blink","","")},bold:function bold(){return ce.CreateHTML(this,"b","","")},fixed:function fixed(){return ce.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return ce.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return ce.CreateHTML(this,"font","size",e)},italics:function italics(){return ce.CreateHTML(this,"i","","")},link:function link(e){return ce.CreateHTML(this,"a","href",e)},small:function small(){return ce.CreateHTML(this,"small","","")},strike:function strike(){return ce.CreateHTML(this,"strike","","")},sub:function sub(){return ce.CreateHTML(this,"sub","","")},sup:function sub(){return ce.CreateHTML(this,"sup","","")}};l(Object.keys(Ln),function(e){var r=String.prototype[e];var n=false;if(ce.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){ne(String.prototype,e,Ln[e])}});var Fn=function(){if(!oe){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e($())!=="undefined"){return true}if(e([$()])!=="[null]"){return true}var t={a:$()};t[$()]=true;if(e(t)!=="{}"){return true}return false}();var Dn=a(function(){if(!oe){return true}return JSON.stringify(Object($()))==="{}"&&JSON.stringify([Object($())])==="[{}]"});if(Fn||!Dn){var zn=JSON.stringify;ne(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=ce.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(re.symbol(n)){return Nt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return zn.apply(this,o)})}return S});
/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(j).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Se(this,e,Ce),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(Ne,""),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Re=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Me=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ie=new RegExp(ne.join("|"),"i");function We(e,t,n){var r,i,o,a,s=e.style;return(n=n||Re(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Pe.test(a)&&Ie.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var Be=["Webkit","Moz","ms"],$e=E.createElement("div").style,_e={};function ze(e){var t=S.cssProps[e]||_e[e];return t||(e in $e?e:_e[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Be.length;while(n--)if((e=Be[n]+t)in $e)return e}(e)||e)}var Ue=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"};function Ye(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Qe(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Je(e,t,n){var r=Re(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=We(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Qe(e,t,n||(i?"border":"content"),o,r,a)+"px"}function Ke(e,t,n,r,i){return new Ke.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Xe.test(t),l=e.style;if(u||(t=ze(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Xe.test(t)||(t=ze(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ue.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,u,n):Me(e,Ve,function(){return Je(e,u,n)})},set:function(e,t,n){var r,i=Re(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Qe(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Qe(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Ye(0,t,s)}}}),S.cssHooks.marginLeft=Fe(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Ye)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Re(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=Ke).prototype={constructor:Ke,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=Ke.prototype.init,S.fx.step={};var Ze,et,tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){et&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(ot):C.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return C.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function lt(o,e,t){var n,a,r=0,i=lt.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=Ze||at(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ze||at(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=lt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ut,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(lt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ut(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=lt(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&it.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(st(r,!0),e,t,n)}}),S.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(Ze=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),Ze=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){et||(et=!0,ot())},S.fx.stop=function(){et=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},tt=E.createElement("input"),nt=E.createElement("select").appendChild(E.createElement("option")),tt.type="checkbox",y.checkOn=""!==tt.value,y.optSelected=nt.selected,(tt=E.createElement("input")).value="t",tt.type="radio",y.radioValue="t"===tt.value;var ct,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ft[t]||S.find.attr;ft[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=ft[o],ft[o]=r,r=null!=a(e,t,n)?o:null,ft[o]=i),r}});var pt=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(P)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,gt(this)))});if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,gt(this)))});if(!arguments.length)return this.attr("class","");if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,gt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=vt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=gt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+ht(gt(n))+" ").indexOf(t))return!0;return!1}});var yt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(yt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:ht(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var mt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!mt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,mt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,xt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,xt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var bt=C.location,wt={guid:Date.now()},Tt=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Ct=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function At(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||Ct.test(n)?i(n,t):At(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)At(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)At(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&kt.test(this.nodeName)&&!St.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}});var Nt=/%20/g,jt=/#.*$/,Dt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Ot={},Pt={},Rt="*/".concat("*"),Mt=E.createElement("a");function It(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Wt(t,i,o,a){var s={},u=t===Pt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Ft(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Mt.href=bt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ft(Ft(e,S.ajaxSettings),t):Ft(S.ajaxSettings,e)},ajaxPrefilter:It(Ot),ajaxTransport:It(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=qt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||bt.href)+"").replace(Ht,bt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Mt.protocol+"//"+Mt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Wt(Ot,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Lt.test(v.type),f=v.url.replace(jt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Nt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Tt.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Dt,"$1"),o=(Tt.test(f)?"&":"?")+"_="+wt.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+Rt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Wt(Pt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&S.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},$t=S.ajaxSettings.xhr();y.cors=!!$t&&"withCredentials"in $t,y.ajax=$t=!!$t,S.ajaxTransport(function(i){var o,a;if(y.cors||$t&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Bt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var _t,zt=[],Ut=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||S.expando+"_"+wt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Ut.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ut,"$1"+r):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,zt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((_t=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===_t.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=ht(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=Fe(y.pixelPosition,function(e,t){if(t)return t=We(e,n),Pe.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Xt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Xt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Vt=C.jQuery,Gt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Gt),e&&C.jQuery===S&&(C.jQuery=Vt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return n.indexOf(t)==-1&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return n!=-1&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){if(Array.isArray(e))return e;var t="object"==typeof e&&"number"==typeof e.length;return t?d.call(e):[e]}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(h=t,h.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string-1.3.3-min.js | (c) 2013 Pieroxy | Licensed under a WTFPL license */
var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/dist/FileSaver.js */
(function(a,b){if("function"==typeof define&&define.amd)define([],b);else if("undefined"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){"use strict";function b(a,b){return"undefined"==typeof b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error("could not download file")},d.send()}function d(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof b)return c(b,d,e);var h="application/octet-stream"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&"undefined"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,"undefined"!=typeof module&&(module.exports=g)});
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau, all rights reserved. | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
}else{document.documentElement.setAttribute("data-init", "lacking");}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{display:none;z-index:500000;position:fixed;top:0;left:0;height:100%;width:100%;font:28px/1 Helmet,Freesans,sans-serif;font-weight:700;color:#eee;background-color:#111;text-align:center}#init-screen>div{display:none;position:relative;margin:0 auto;max-width:1136px;top:25%}html[data-init=lacking] #init-screen,html[data-init=loading] #init-screen,html[data-init=no-js] #init-screen{display:block}html[data-init=lacking] #init-lacking,html[data-init=no-js] #init-no-js{display:block;padding:0 1em}html[data-init=no-js] #init-no-js{color:red}html[data-init=loading] #init-loading{display:block;border:24px solid transparent;border-radius:50%;border-top-color:#7f7f7f;border-bottom-color:#7f7f7f;width:100px;height:100px;-webkit-animation:init-loading-spin 2s linear infinite;-o-animation:init-loading-spin 2s linear infinite;animation:init-loading-spin 2s linear infinite}html[data-init=loading] #init-loading>div{text-indent:9999em;overflow:hidden;white-space:nowrap}html[data-init=loading] #passages,html[data-init=loading] #ui-bar{display:none}</style>
<style id="style-font" type="text/css">@font-face{font-family:tme-fa-icons;src:url('data:application/octet-stream;base64,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') format('woff')}</style>
<style id="style-core" type="text/css">html{font:16px/1 Helmet,Freesans,sans-serif}#store-area,tw-storydata{display:none!important;z-index:0}.no-transition{-webkit-transition:none!important;-o-transition:none!important;transition:none!important}:-webkit-full-screen{height:100%;width:100%}:-ms-fullscreen{height:100%;width:100%}:fullscreen{height:100%;width:100%}body::-ms-backdrop{background:0 0}:focus{outline:thin dotted}:disabled{cursor:not-allowed!important}body{color:#eee;background-color:#111;overflow:auto}a{cursor:pointer;color:#68d;text-decoration:none;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}a:hover{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover{color:#e44}a[disabled],span.link-disabled{color:#aaa;cursor:not-allowed!important;text-decoration:none}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover{background-color:#57c;border-color:#79e}button:disabled{background-color:#444;border:1px solid #666}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em;resize:vertical}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input[type=range]{-webkit-appearance:none;min-height:1.2em}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;margin-top:-5px;width:33px}input[type=range]:focus::-webkit-slider-runnable-track{background:#222}input[type=range]::-moz-range-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-moz-range-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;width:33px}input[type=range]::-ms-track{background:0 0;border-color:transparent;color:transparent;cursor:pointer;height:10px;width:calc(100% - 1px)}input[type=range]::-ms-fill-lower{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-fill-upper{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:16px;width:33px}input:not(:disabled):focus,input:not(:disabled):hover,select:not(:disabled):focus,select:not(:disabled):hover,textarea:not(:disabled):focus,textarea:not(:disabled):hover{background-color:#333;border-color:#eee}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}audio,canvas,progress,video{max-width:100%;vertical-align:middle}.error-view{background-color:#511;border-left:.5em solid #c22;display:inline-block;margin:.1em;max-width:100%;padding:0 .25em;position:relative}.error-view>.error-toggle{background-color:transparent;border:none;line-height:inherit;left:0;padding:0;position:absolute;top:0;width:1.75em}.error-view>.error{display:inline-block;margin-left:.25em}.error-view>.error-toggle+.error{margin-left:1.5em}.error-view>.error-source[hidden]{display:none}.error-view>.error-source:not([hidden]){background-color:rgba(0,0,0,.2);display:block;margin:0 0 .25em;overflow-x:auto;padding:.25em}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}.error-view>.error-toggle:before,.error-view>.error:before,[data-icon-after]:after,[data-icon-before]:before,[data-icon]:before,a.link-external:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[data-icon]:before{content:attr(data-icon)}[data-icon-before]:before{content:attr(data-icon-before) "\00a0\00a0"}[data-icon-after]:after{content:"\00a0\00a0" attr(data-icon-after)}.error-view>.error-toggle:before{content:"\e81a"}.error-view>.error-toggle.enabled:before{content:"\e818"}.error-view>.error:before{content:"\e80d\00a0\00a0"}a.link-external:after{content:"\00a0\e80e"}</style>
<style id="style-core-display" type="text/css">#story{z-index:10;margin:2.5em}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}</style>
<style id="style-core-passage" type="text/css">.passage{line-height:1.75;text-align:left;-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}@media (prefers-reduced-motion:reduce){.passage{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}</style>
<style id="style-core-macro" type="text/css">@-webkit-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@-o-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.macro-append-insert,.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-prepend-insert,.macro-repeat-insert,.macro-replace-insert,.macro-timed-insert{-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-append-in,.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-prepend-in,.macro-repeat-in,.macro-replace-in,.macro-timed-in{opacity:0}.macro-type-cursor:after{-webkit-animation:cursor-blink 1s infinite;-o-animation:cursor-blink 1s infinite;animation:cursor-blink 1s infinite;content:"\2590";opacity:1}</style>
<style id="style-ui-dialog" type="text/css">html[data-dialog] body{overflow:hidden}#ui-overlay.open{visibility:visible;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-overlay:not(.open){-webkit-transition:visibility .2s step-end,opacity .2s ease-in;-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in}#ui-overlay{visibility:hidden;opacity:0;z-index:100000;position:fixed;top:-50%;left:-50%;height:200%;width:200%}#ui-dialog.open{display:block;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog{display:none;opacity:0;z-index:100100;position:fixed;top:50px;margin:0;padding:0}#ui-dialog>*{-webkit-box-sizing:border-box;box-sizing:border-box}#ui-dialog-titlebar{position:relative}#ui-dialog-close{display:block;position:absolute;right:0;top:0;white-space:nowrap}#ui-dialog-body{overflow:auto;min-width:280px;height:92%;height:calc(100% - 2.1em)}@media (prefers-reduced-motion:reduce){#ui-overlay.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-overlay:not(.open){-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-dialog.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}#ui-overlay{background-color:#000}#ui-overlay.open{opacity:.8}#ui-dialog{max-width:66em}#ui-dialog.open{opacity:1}#ui-dialog-titlebar{background-color:#444;min-height:24px}#ui-dialog-title{margin:0;padding:.2em 3.5em .2em .5em;font-size:1.5em;text-align:center;text-transform:uppercase}#ui-dialog-close{cursor:pointer;font-size:120%;margin:0;padding:0;width:3.6em;height:92%;background-color:transparent;border:1px solid transparent;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;text-align:left;line-height:1.5;padding:1em}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}#ui-dialog-close{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-close{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}</style>
<style id="style-ui" type="text/css">#ui-dialog-body.settings [id|=setting-body]>div:first-child{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-dialog-body.list{padding:0}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves table{border-spacing:0;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em .33em}#ui-dialog-body.saves td:first-child{min-width:1.5em;text-align:center}#ui-dialog-body.saves td:nth-child(3){line-height:1.2}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999;speak:none;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves .datestamp{font-size:75%;margin-left:1em}#ui-dialog-body.saves ul.buttons li{padding:.4em}#ui-dialog-body.saves ul.buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves ul.buttons li:last-child{float:right}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-desc],#ui-dialog-body.settings p[id|=setting-desc]{font-size:87.5%;margin:0 0 0 .5em}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:1em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.settings input[type=range][id|=setting-control]{max-width:35vw}#ui-dialog-body.list a,#ui-dialog-body.settings span[id|=setting-input]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves button[id=saves-clear]:before,#ui-dialog-body.saves button[id=saves-export]:before,#ui-dialog-body.saves button[id=saves-import]:before,#ui-dialog-body.settings button[id|=setting-control].enabled:after,#ui-dialog-body.settings button[id|=setting-control]:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-dialog-body.saves button[id=saves-export]:before{content:"\e829\00a0"}#ui-dialog-body.saves button[id=saves-import]:before{content:"\e82a\00a0"}#ui-dialog-body.saves button[id=saves-clear]:before{content:"\e827\00a0"}#ui-dialog-body.settings button[id|=setting-control]:after{content:"\00a0\00a0\e830"}#ui-dialog-body.settings button[id|=setting-control].enabled:after{content:"\00a0\00a0\e831"}</style>
<style id="style-ui-bar" type="text/css">#story{margin-left:20em;-webkit-transition:margin-left .2s ease-in;-o-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (max-width:1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (max-width:768px){#story{margin-left:3.5em}}#ui-bar{position:fixed;z-index:50;top:0;left:0;width:17.5em;height:100%;margin:0;padding:0;-webkit-transition:left .2s ease-in;-o-transition:left .2s ease-in;transition:left .2s ease-in}#ui-bar.stowed{left:-15.5em}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar-body{height:90%;height:calc(100% - 2.5em);margin:2.5em 0;padding:0 1.5em}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-webkit-transition:visibility .2s step-end;-o-transition:visibility .2s step-end;transition:visibility .2s step-end}@media (prefers-reduced-motion:reduce){#story{-webkit-transition:margin-left 0s;-o-transition:margin-left 0s;transition:margin-left 0s}#ui-bar{-webkit-transition:left 0s;-o-transition:left 0s;transition:left 0s}}#ui-bar{background-color:#222;border-right:1px solid #444;text-align:center}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-history [id|=history],#ui-bar-toggle{font-size:1.2em;line-height:inherit;color:#eee;background-color:transparent;border:1px solid #444}#ui-bar-toggle{display:block;position:absolute;top:0;right:0;border-right:none;padding:.3em .45em .25em}#ui-bar.stowed #ui-bar-toggle{padding:.3em .35em .25em .55em}#ui-bar-toggle:hover{background-color:#444;border-color:#eee}#ui-bar-history{margin:0 auto}#ui-bar-history [id|=history]{padding:.2em .45em .35em}#ui-bar-history #history-jumpto{padding:.2em .665em .35em}#ui-bar-history [id|=history]:not(:first-child){margin-left:1.2em}#ui-bar-history [id|=history]:hover{background-color:#444;border-color:#eee}#ui-bar-history [id|=history]:disabled{color:#444;background-color:transparent;border-color:#444}#ui-bar-body{line-height:1.5;overflow:auto}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{margin:1em 0 0;padding:0;list-style:none;border:1px solid #444}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-transform:uppercase}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-history [id|=history],#ui-bar-toggle{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-core li[id|=menu-item] a:before,#ui-bar-history [id|=history],#ui-bar-toggle:before{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-bar-toggle:before{content:"\e81d"}#ui-bar.stowed #ui-bar-toggle:before{content:"\e81e"}#menu-item-saves a:before{content:"\e82b\00a0"}#menu-item-settings a:before{content:"\e82d\00a0"}#menu-item-restart a:before{content:"\e82c\00a0"}#menu-item-share a:before{content:"\e82f\00a0"}</style>
<style id="style-ui-debug" type="text/css">#debug-bar{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:0;margin:0;max-height:75%;padding:.5em;position:fixed;right:0;z-index:99900}#debug-bar>div:not([id])+div{margin-top:.5em}#debug-bar>div>label{margin-right:.5em}#debug-bar>div>input[type=text]{min-width:0;width:8em}#debug-bar>div>select{width:15em}#debug-bar-toggle{color:#eee;background-color:#222;border:1px solid #444;height:101%;height:calc(100% + 1px);left:-2em;left:calc(-2em - 1px);position:absolute;top:-1px;width:2em}#debug-bar-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-hint{bottom:.175em;font-size:4.5em;opacity:.33;pointer-events:none;position:fixed;right:.6em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}#debug-bar-watch{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:102%;bottom:calc(100% + 1px);font-size:.9em;left:-1px;max-height:650%;max-height:65vh;position:absolute;overflow-x:hidden;overflow-y:scroll;right:0;z-index:99800}#debug-bar-watch[hidden]{display:none}#debug-bar-watch div{color:#999;font-style:italic;margin:1em auto;text-align:center}#debug-bar-watch table{width:100%}#debug-bar-watch tr:nth-child(2n){background-color:rgba(127,127,127,.15)}#debug-bar-watch td{padding:.2em 0}#debug-bar-watch td:first-child+td{padding:.2em .3em .2em .1em}#debug-bar-watch .watch-delete{background-color:transparent;border:none;color:#c00}#debug-bar-watch-all,#debug-bar-watch-none{margin-left:.5em}#debug-bar-views-toggle,#debug-bar-watch-toggle{color:#eee;background-color:transparent;border:1px solid #444;margin-right:1em;padding:.4em}#debug-bar-views-toggle:hover,#debug-bar-watch-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle,html[data-debug-view] #debug-bar-views-toggle{background-color:#282;border-color:#4a4}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:hover,html[data-debug-view] #debug-bar-views-toggle:hover{background-color:#4a4;border-color:#6c6}#debug-bar-hint:after,#debug-bar-toggle:before,#debug-bar-views-toggle:after,#debug-bar-watch .watch-delete:before,#debug-bar-watch-add:before,#debug-bar-watch-all:before,#debug-bar-watch-none:before,#debug-bar-watch-toggle:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#debug-bar-toggle:before{content:"\e838"}#debug-bar-hint:after{content:"\e838\202f\e822"}#debug-bar-watch .watch-delete:before{content:"\e804"}#debug-bar-watch-add:before{content:"\e805"}#debug-bar-watch-all:before{content:"\e83a"}#debug-bar-watch-none:before{content:"\e827"}#debug-bar-views-toggle:after,#debug-bar-watch-toggle:after{content:"\00a0\00a0\e830"}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:after,html[data-debug-view] #debug-bar-views-toggle:after{content:"\00a0\00a0\e831"}html[data-debug-view] .debug{padding:.25em;background-color:#234}html[data-debug-view] .debug[title]{cursor:help}html[data-debug-view] .debug.block{display:inline-block;vertical-align:middle}html[data-debug-view] .debug.invalid{text-decoration:line-through}html[data-debug-view] .debug.hidden,html[data-debug-view] .debug.hidden .debug{background-color:#555}html:not([data-debug-view]) .debug.hidden{display:none}html[data-debug-view] .debug[data-name][data-type].nonvoid:after,html[data-debug-view] .debug[data-name][data-type]:before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html[data-debug-view] .debug[data-name][data-type]:before{content:attr(data-name)}html[data-debug-view] .debug[data-name][data-type|=macro]:before{content:"<<" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=macro].nonvoid:after{content:"<</" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=html]:before{content:"<" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type|=html].nonvoid:after{content:"</" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type]:not(:empty):before{margin-right:.25em}html[data-debug-view] .debug[data-name][data-type].nonvoid:not(:empty):after{margin-left:.25em}html[data-debug-view] .debug[data-name][data-type|=special],html[data-debug-view] .debug[data-name][data-type|=special]:before{display:block}</style>
</head>
<body>
	<div id="init-screen">
		<div id="init-no-js"><noscript>JavaScript must be enabled to play.</noscript></div>
		<div id="init-lacking"><p>Browser lacks capabilities required to play.</p><p>Upgrade or switch to another browser.</p></div>
		<div id="init-loading"><div>Loading&hellip;</div></div>
	</div>
	<!-- UUID://480CF198-A446-4D55-95DF-53A7E3771804// --><tw-storydata name="MINDWARE" startnode="417" creator="Tweego" creator-version="2.1.1+81d1d71" ifid="480CF198-A446-4D55-95DF-53A7E3771804" zoom="1" format="SugarCube" format-version="2.36.1" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">/* twine-user-stylesheet #1: "Styles-ImportRules" */
/*@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');*/
@import url('https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&family=Press+Start+2P&display=swap');
@import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css');
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&display=swap');
/* twine-user-stylesheet #2: "Styles-SugarCube-UI" */
body {
    background-color: black;
    font-family: "IBM Plex Mono", "Courier New", monospace;
  }

a {
    color: #55BBBC;
}

a:hover {
    color: #55BBBC;
}

ul.no-bullets {
  list-style-type: none;
}

p.back-link {
    margin: 0px;
}

.hidden {
    display: none;
}

.justify-content-space-between {
    justify-content: space-between;
    display: flex;
}

.centered-content {
    display: flex; 
    justify-content: center; 
    align-items: center; 
}

/* Debug menu icon */
#menu-item-bug a:before {
    content: "\e838\00a0"; /* You can choose your own Unicode character for the icon */
    font-family: tme-fa-icons!important;
    font-style: normal;
    font-weight: 900;
    font-variant: normal;
    line-height: 1;
    speak: never;
    text-rendering: auto;
    text-transform: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

#menu-item-debug a:before {
    content: "\e838\00a0"; /* You can choose your own Unicode character for the icon */
    font-family: tme-fa-icons!important;
    font-style: normal;
    font-weight: 900;
    font-variant: normal;
    line-height: 1;
    speak: never;
    text-rendering: auto;
    text-transform: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

#menu-item-custom-settings a:before {
    content: "\e82d\00a0"; /* You can choose your own Unicode character for the icon */
    font-family: tme-fa-icons!important;
    font-style: normal;
    font-weight: 900;
    font-variant: normal;
    line-height: 1;
    speak: never;
    text-rendering: auto;
    text-transform: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

#menu-item-cheats a:before {
    content: "\e83a\00a0"; /* You can choose your own Unicode character for the icon */
    font-family: tme-fa-icons!important;
    font-style: normal;
    font-weight: 900;
    font-variant: normal;
    line-height: 1;
    speak: never;
    text-rendering: auto;
    text-transform: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

#menu-item-credits a:before {
    content: "\e800\00a0"; /* You can choose your own Unicode character for the icon */
    font-family: tme-fa-icons!important;
    font-style: normal;
    font-weight: 900;
    font-variant: normal;
    line-height: 1;
    speak: never;
    text-rendering: auto;
    text-transform: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

#ui-bar {
    background-color: black;
    color: white;
    border-right: 1px solid #55BBBC;
    padding-right: 4px;
}

#ui-bar-history [id|=history]:disabled {
    border-color: #55BBBC;
}

#ui-bar-history [id|=history], #ui-bar-toggle {
    border: 1px solid #55BBBC;
}

/* Custom Scrollbar for Left Sidebar Content */
#ui-bar-body::-webkit-scrollbar {
    width: 7px; /* Make the scrollbar 1px thin */
}

#ui-bar-body::-webkit-scrollbar-track {
    background: transparent; /* Transparent track so it doesn't stand out */
}

#ui-bar-body::-webkit-scrollbar-thumb {
    background-color: #555; /* Adjust thumb color to match your design */
    border-radius: 3px; /* Make it flat if preferred, or you can keep some roundness */
}

/* Firefox */
#ui-bar-body {
    scrollbar-width: thin; /* "auto" or "thin" */
    scrollbar-color: #555 transparent; /* thumb and track color */
}

/* Style the back button */
#history-backward {
    background-color: black;
    border: 1px solid #55BBBC;
}

/* Style for the back button when hovered */
#history-backward:hover {
    border-color: #66F2C5 !important;
    background-color: black !important;
}

/* Style the forward button */
#history-forward {
    background-color: black;
    border: 1px solid #55BBBC;
}

/* Style for the forward button when hovered */
#history-forward:hover {
    border-color: #66F2C5 !important;
    background-color: black !important;
}

#ui-bar-toggle:hover {
    background-color: black;
    border-color: #66F2C5;
}

#menu ul {
    border: 1px solid #55BBBC;
}

#menu li a:hover {
    background-color: black;
    border-color: #66F2C5;
}

#menu li:not(:first-child) {
    border-top: 1px solid #55BBBC;
}

/* Dialog background overlay */
#ui-dialog-overlay {
  background-color: rgba(0, 0, 0, 0.8); /* Semi-transparent black */
}

/* Dialog box */
#ui-dialog {
  border: 1px solid #55BBBC; /* Your custom teal color */
  background-color: #fff; /* White background */
}

#ui-dialog-body {
  object-fit: contain; /* or object-fit: contain; */
}

#ui-dialog-body img {
  object-fit: contain; /* or object-fit: contain; */
}

/* Dialog title bar */
#ui-dialog-titlebar {
  background-color: #55BBBC; /* Your custom teal color */
  color: #fff; /* White text */
}

/* .link-internal.macro-button {
    height: 40px; 
    padding-left: 10px;
    padding-right: 10px;
    border: 1px solid #55BBBC;
    color: #fff;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; 
}

.link-internal.macro-button:hover {
    border-width: 1px;
    border-color: #66F2C5;
    background: #02192a;
} */

.cheat-button:hover {
	border-width: 1px;
	border-color: #66F2C5;
    background: #02192a;
}

.cheat-button {
    border: 1px solid #55BBBC; /* Consistent with your design */
    color: #fff;
    font-weight: bold;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Changes the mouse cursor to indicate clickable */
    transition: background-color 0.2s, border-color 0.2s; /* Smooth transition for hover effects */
    box-sizing: border-box; /* Ensures border is included in the width */
}

.cheat-button:active {
    background: #0192a5; /* Darker shade for pressed effect */
    border-color: #33a1b2; /* Slightly darker border */
    transform: translateY(2px); /* Gives a feeling of being pressed down */
}

button[id^='saves-load-'] {
    height: 40px; 
    padding-left: 10px;
    padding-right: 10px;
    border: 1px solid #55BBBC;
    color: #fff;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Optional, for better UX */
}

button[id^='saves-load-']:hover {
    border-width: 1px;
    border-color: #66F2C5;
    background: #02192a;
}

button[id^='saves-save-'] {
    height: 40px; 
    padding-left: 10px;
    padding-right: 10px;
    border: 1px solid #55BBBC;
    color: #fff;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Optional, for better UX */
}

button[id^='saves-save-']:hover {
    border-width: 1px;
    border-color: #66F2C5;
    background: #02192a;
}

button[id^='saves-delete-'] {
    height: 40px; 
    padding-left: 10px;
    padding-right: 10px;
    border: 1px solid #55BBBC;
    color: #fff;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Optional, for better UX */
}

button[id^='saves-delete-']:hover {
    border-width: 1px;
    border-color: #66F2C5;
    background: #02192a;
}

button[id^='saves-delete-']:disabled {
    background: #666; /* Change this to your desired disabled background color */
    color: #ccc; /* Change this to your desired disabled text color */
    border: 1px solid #999; /* Change this to your desired disabled border color */
    cursor: not-allowed; /* Optional, changes the cursor on hover */
}

button[id^='saves-clear'] {
    height: 40px; 
    padding-left: 10px;
    padding-right: 10px;
    border: 1px solid #55BBBC;
    color: #fff;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Optional, for better UX */
}

button[id^='saves-clear']:hover {
    border-width: 1px;
    border-color: #66F2C5;
    background: #02192a;
}

button[id^='saves-import'] {
    height: 40px; 
    padding-left: 10px;
    padding-right: 10px;
    border: 1px solid #55BBBC;
    color: #fff;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Optional, for better UX */
}

button[id^='saves-import']:hover {
    border-width: 1px;
    border-color: #66F2C5;
    background: #02192a;
}

button[id^='saves-export'] {
    height: 40px; 
    padding-left: 10px;
    padding-right: 10px;
    border: 1px solid #55BBBC;
    color: #fff;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Optional, for better UX */
}

button[id^='saves-export']:hover {
    border-width: 1px;
    border-color: #66F2C5;
    background: #02192a;
}

button[id^='restart-ok'] {
    height: 40px; 
    padding-left: 10px;
    padding-right: 10px;
    border: 1px solid #55BBBC;
    color: #fff;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Optional, for better UX */
}

button[id^='restart-ok']:hover {
    border-width: 1px;
    border-color: #66F2C5;
    background: #02192a;
}

button[id^='restart-cancel'] {
    height: 40px; 
    padding-left: 10px;
    padding-right: 10px;
    border: 1px solid #55BBBC;
    color: #fff;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Optional, for better UX */
}

button[id^='restart-cancel']:hover {
    border-width: 1px;
    border-color: #66F2C5;
    background: #02192a;
}

button[id^='autoload-ok'] {
    height: 40px; 
    padding-left: 10px;
    padding-right: 10px;
    border: 1px solid #55BBBC;
    color: #fff;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Optional, for better UX */
}

button[id^='autoload-ok']:hover {
    border-width: 1px;
    border-color: #66F2C5;
    background: #02192a;
}

button[id^='autoload-cancel'] {
    height: 40px; 
    padding-left: 10px;
    padding-right: 10px;
    border: 1px solid #55BBBC;
    color: #fff;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Optional, for better UX */
}

button[id^='autoload-cancel']:hover {
    border-width: 1px;
    border-color: #66F2C5;
    background: #02192a;
}

#alert-ok.ui-close {
    border-width: 1px;
    border: 1px solid #55BBBC;
    background: #02192a;
}
/* twine-user-stylesheet #3: "Styles-Images" */
.img-location {
	margin: 0 0 0px;
	border: 1px solid #55BBBC;
	border-radius: 0px;
    line-height: 0; 
	transition: .2s ease-in;
	&:hover {
		filter: drop-shadow(0 0 1.75rem #55BBBC);
	}}

.img-location-pink {
	margin: 0 0 0px;
	border: 1px solid #FF0080;
	border-radius: 0px;
    line-height: 0; 
	transition: .2s ease-in;
	&:hover {
		filter: drop-shadow(0 0 1.75rem #FF0080);
	}}

.img-character {
	margin: 0 0 0px;
	border: 1px solid #55BBBC;
	border-radius: 0px;
    line-height: 0; 
	transition: .2s ease-in;
	&:hover {
		filter: drop-shadow(0 0 1.75rem #55BBBC);
	}}

.img-dream, .img-snack {
	margin: 0 0 0px;
	border: 1px solid #55BBBC;
	border-radius: 0px;
    line-height: 0; 
	transition: .2s ease-in;
	&:hover {
		filter: drop-shadow(0 0 1.75rem #55BBBC);
	}}
/* twine-user-stylesheet #4: "Styles-Buttons" */
.mindware-button {
    padding: .4em;
    border: 1px solid #55BBBC; /* Consistent with your design */
    color: #fff;
    line-height: normal;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Changes the mouse cursor to indicate clickable */
    transition: background-color 0.2s, border-color 0.2s; /* Smooth transition for hover effects */
    box-sizing: border-box; /* Ensures border is included in the width */
}

.mindware-button:hover {
	border-width: 1px;
	border-color: #66F2C5;
    background: #02192a;
}

.mindware-button:active {
    background: #0192a5; /* Darker shade for pressed effect */
    border-color: #33a1b2; /* Slightly darker border */
    transform: translateY(2px); /* Gives a feeling of being pressed down */
}

.pink-mindware-button {
    padding: .4em;
    border: 1px solid #FF0080; /* Neon pink border consistent with EroSphere theme */
    color: #FF69B4; /* Neon pink text color for consistency */
    line-height: normal;
    text-transform: uppercase;
    background: rgba(255, 0, 128, 0.1); /* Light neon pink background */
    cursor: pointer; /* Changes the mouse cursor to indicate clickable */
    transition: background-color 0.2s, border-color 0.2s; /* Smooth transition for hover effects */
    box-sizing: border-box; /* Ensures border is included in the width */
}

.pink-mindware-button:hover {
	border-width: 1px;
	border-color: #FF69B4; /* Lighter pink on hover for interactivity */
    background: rgba(255, 0, 128, 0.1);
}

.pink-mindware-button:active {
    background: rgba(255, 0, 128, 0.2); /* Slightly darker shade for pressed effect */
    border-color: #FF0080; /* Neon pink border */
    transform: translateY(2px); /* Gives a feeling of being pressed down */
}

.tutorial-close-button a {
    display: inline-block; /* Needed for transform */
    text-decoration: none;
    transition: transform 0.3s ease;
}

.tutorial-close-button a:hover {
    transform: scale(1.2); /* Scale up slightly on hover */
    text-decoration: none;
}

.tutorial-close-button {
    cursor: pointer;
    color: black;
    background: none;
    border: none;
    padding: 0px;
}

.tutorial-close-button:hover {
    transform: scale(1.2); /* Scale up slightly on hover */
    text-decoration: none;
    cursor: pointer;
    color: black;
    background: none;
    border: none;
    padding: 0px;
}


.btn-wrapper {
  position: relative;
  height: 100%;  /* Or any height you prefer */
  width: 100%;  /* Or any width you prefer */
}

.continue-button button {
    height: 40px;
    padding: 0 10px; /* Maintains padding on the sides */
    border: 1px solid #55BBBC; /* Consistent with your design */
    color: #fff;
    font-size: 16px;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Changes the mouse cursor to indicate clickable */
    transition: background-color 0.2s, border-color 0.2s; /* Smooth transition for hover effects */
    box-sizing: border-box; /* Ensures border is included in the width */
}

.continue-button:hover button {
	border-width: 1px;
	border-color: #66F2C5;
    background: #02192a;
}


/* 
.macro-button {
    height: 40px;
    padding: 0 10px; 
    border: 1px solid #55BBBC; 
    color: #fff;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; 
    transition: background-color 0.2s, border-color 0.2s; 
    box-sizing: border-box;
}

.macro-button:hover {
	border-width: 1px;
	border-color: #66F2C5;
    background: #02192a;
}
*/
.macro-button:hover {
	border-width: 1px;
	border-color: #66F2C5;
    background: #02192a;
}

.macro-button {
    border: 1px solid #55BBBC; /* Consistent with your design */
    color: #fff !important;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Changes the mouse cursor to indicate clickable */
    transition: background-color 0.2s, border-color 0.2s; /* Smooth transition for hover effects */
    box-sizing: border-box; /* Ensures border is included in the width */
}

.macro-button:active {
    background: #0192a5; /* Darker shade for pressed effect */
    border-color: #33a1b2; /* Slightly darker border */
    transform: translateY(2px); /* Gives a feeling of being pressed down */
}

.choicebutton button {
    display: block; /* Ensures the button spans the full width of its container */
    width: 100%; /* Full width */
    height: 40px;
    padding: 0 10px; /* Maintains padding on the sides */
    border: 1px solid #55BBBC; /* Consistent with your design */
    color: #fff;
    font-size: 16px;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Changes the mouse cursor to indicate clickable */
    transition: background-color 0.2s, border-color 0.2s; /* Smooth transition for hover effects */
    box-sizing: border-box; /* Ensures border is included in the width */
}

.choicebutton:hover button {
    border-color: #66F2C5; /* Highlight color for hover state */
    background: #02192a; /* Maintain background color on hover */
}

.choicebutton button:active {
    background: #02192a; /* Slightly darker shade for pressed effect */
    border-color: #66F2C5; /* Neon pink border */
    transform: translateY(2px); /* Gives a feeling of being pressed down */
}

.pink-choicebutton button {
    display: block; /* Ensures the button spans the full width of its container */
    width: 100%; /* Full width */
    height: 40px;
    padding: 0 10px; /* Maintains padding on the sides */
    border: 1px solid #FF0080; /* Neon pink border consistent with EroSphere theme */
    color: #FF69B4; /* Neon pink text color for consistency */
    font-size: 16px;
    text-transform: uppercase;
    background: rgba(255, 0, 128, 0.1); /* Light neon pink background */
    cursor: pointer; /* Changes the mouse cursor to indicate clickable */
    transition: background-color 0.2s, border-color 0.2s; /* Smooth transition for hover effects */
    box-sizing: border-box; /* Ensures border is included in the width */
}

.pink-choicebutton:hover button {
    border-color: #FF69B4; /* Lighter pink on hover for interactivity */
    background: rgba(255, 0, 128, 0.1); /* Maintain background color on hover */
}

.pink-choicebutton button:active {
    background: rgba(255, 0, 128, 0.2); /* Slightly darker shade for pressed effect */
    border-color: #FF0080; /* Neon pink border */
    transform: translateY(2px); /* Gives a feeling of being pressed down */
}

.im-topic button {
    background-color: #333; /* Dark gray background */
    border: 1px solid #555; /* Gray border */
    border-radius: 0px; /* Rounded corners */
    padding: 10px; /* Padding inside button */
    margin-bottom: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* Subtle shadow */
    transition: all 0.3s ease; /* Smooth transition for hover effects */
    cursor: pointer; /* Cursor indicates clickable */
    color: white; /* Text color */
    width: 100%; /* Full width */
    text-transform: uppercase; /* Uppercase text */
}

.im-topic:hover button {
    background-color: #444; /* Lighter gray on hover */
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4); /* Larger shadow on hover */
    border: 1px solid #555; /* Gray border */
}

.im-response button {
    background-color: lime; /* Lime background to match the app theme */
    border: none; /* Removing the border */
    border-radius: 5px; /* Rounded corners */
    padding: 10px; /* Padding inside button */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); /* Softer shadow */
    transition: all 0.3s ease; /* Smooth transition for hover effects */
    cursor: pointer; /* Cursor indicates clickable */
    color: black !important; /* Black text color for better readability */
    margin-bottom: 10px;
    width: 100%;
    font-weight: bold;
    text-transform: none; /* Normal text case */
    text-align: left; /* Left-aligned text */
}

.im-response:hover button {
    background-color: #aaff00; /* Slightly lighter green on hover */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.25); /* Slightly larger shadow on hover */
}

.hacking-tool-button button {
    /* Adapted from your job-listing button */
    background-color: lime !important;
    color: black !important;
    border: none !important;
    padding: 10px 15px !important;
    text-align: center !important;
    text-decoration: none !important;
    display: block !important;
    text-transform: uppercase !important;
    font-weight: bold !important;
    font-size: 16px !important;
    margin-top: 10px !important;
    margin-bottom: 10px !important;
    cursor: pointer !important;
    border-radius: 4px !important;
}

.hacking-tool-button button:hover {
    background-color: #aaff00 !important;
}

.presentation-button button {
    /* Adapted from your job-listing button */
    background-color: lime !important;
    color: black !important;
    border: none !important;
    padding: 10px 15px !important;
    text-align: center !important;
    text-decoration: none !important;
    text-transform: uppercase !important;
    font-weight: bold !important;
    font-size: 16px !important;
    margin-top: 10px !important;
    margin-bottom: 10px !important;
    cursor: pointer !important;
    border-radius: 4px !important;
}

.presentation-button button:hover {
    background-color: #aaff00 !important;
}

.hidden-presentation-button button {
    /* Adapted from your job-listing button */
    display: none;
}

.hidden-presentation-button button:hover {
    display: none;
}
/* twine-user-stylesheet #5: "Styles-Links" */
.back-link-nomargin {
    padding: 0px;
    margin: 0px;
}

.link-internal {
	color: #55BBBC;
}

.link-internal:hover {
	color: #66F2C5; 
}
/* twine-user-stylesheet #6: "Styles-Text" */
.text-glow, .glow-text {
  text-shadow: 
    0 0 5px #55BBBC, 
    0 0 10px #55BBBC, 
    0 0 15px #55BBBC, 
    0 0 20px #55BBBC, 
    0 0 25px #55BBBC, 
    0 0 30px #55BBBC, 
    0 0 35px #55BBBC;
  color: #ddd; /* Adjusted to a slightly darker shade for better readability against the glow */
}
/* twine-user-stylesheet #7: "Styles-Sections" */
.glowsection {
	transition: .2s ease-in;
	&:hover {
		filter: drop-shadow(0 0 1.75rem #55BBBC);
	}}
/* twine-user-stylesheet #8: "Styles-Thoughts" */
.thoughts-container {
    border: 1px solid #9a9a9a; /* Subtle border color */
    background-color: rgba(255, 255, 255, 0.5); /* Light and slightly transparent background to indicate thought */
    padding: 10px 20px; /* Padding inside the container */
    margin: 10px 0; /* Space above and below the container */
    box-shadow: 0 0 8px #9a9a9a; /* Soft shadow for depth */
    border-radius: 10px; /* Rounded corners for a softer look */
    font-style: italic; /* Italic text to indicate thought */
}

.thoughts-content {
    color: #333; /* Darker text color for readability */
    font-size: 0.9em; /* Slightly smaller font size to differentiate from spoken text */
}

.thoughts-container-notepad {
    border: 1px dashed #c8c8a9; /* Dashed border for a notepad-like look */
    background-color: #ffffe0; /* Soft yellow background similar to a notepad */
    padding: 10px 20px;
    margin: 10px 0;
    box-shadow: 0 0 8px #c8c8a9;
    border-radius: 5px;
    font-style: italic;
    font-family: 'Courier New', monospace; /* Monospaced font for the notepad effect */
}

.thoughts-content-notepad {
    color: #505050;
    font-size: 0.95em;
}

.thoughts-container-dream {
    border: 1px solid #b3def5; /* Light blue border for a dreamy look */
    background-color: rgba(173, 216, 230, 0.3); /* Light blue background for an ethereal effect */
    padding: 10px 20px;
    margin: 10px 0;
    box-shadow: 0 0 10px #b3def5; /* Soft blue glow for a dream-like feel */
    border-radius: 15px; /* Rounded corners for a softer, more dream-like feel */
    font-style: italic;
    font-family: 'Georgia', serif; /* Serif font for elegance */
}

.thoughts-content-dream {
    color: #303030;
    font-size: 1em;
}

.thoughts-container-urgent {
    border: 2px solid #ff4500; /* Red border for urgency */
    background-color: rgba(255, 69, 0, 0.1); /* Slightly transparent red background for a sense of alarm */
    padding: 10px 20px;
    margin: 10px 0;
    box-shadow: 0 0 8px #ff4500; /* Soft red glow for a foreboding presence */
    border-radius: 0px; /* Sharp corners for a sense of immediacy */
    font-style: normal; /* Normal style to denote the urgency of thoughts */
    font-weight: bold; /* Bold text for emphasis */
    text-transform: uppercase; /* Uppercase letters for added impact */
}

.thoughts-content-urgent {
    color: #3a3a3a;
    font-size: 0.9em;
}

.thoughts-container-subtle {
    border: 1px solid #55BBBC; /* Echoes the border color of other elements */
    background-color: rgba(255, 255, 255, 0.2); /* More opaque than other elements for focus */
    padding: 10px 20px;
    margin: 10px 0;
    box-shadow: 0px 0px 10px rgba(85, 187, 188, 0.3); /* Softer shadow for depth */
    font-style: italic;
    color: #EEEEEE; /* Light text for contrast on the darker background */
    font-size: 0.9em;
}

.thoughts-content-subtle {
    /* If you need to style the inner content specifically */
}

.thoughts-container-intrusive {
    border: 2px solid #55BBBC; /* More pronounced border */
    background-color: rgba(85, 187, 188, 0.1); /* Colored background for distinct thoughts */
    padding: 12px 22px;
    margin: 12px 0;
    box-shadow: inset 0px 0px 10px rgba(0, 0, 0, 0.2); /* Inset shadow for an 'engraved' feel */
    font-style: italic;
    color: #FFFFFF; /* Maintains white text for readability */
    font-size: 1em;
    transition: background-color 0.2s ease; /* Smooth transition for hover effects */
}

.thoughts-container-intrusive:hover {
    background-color: rgba(85, 187, 188, 0.2); /* Slightly darker on hover for interaction feedback */
}

.thoughts-content-intrusive {
    /* If you need to style the inner content specifically */
}

.thoughts-container-dark {
    border: 1px solid #333; /* Dark border for a contained feel */
    background-color: rgba(0, 0, 0, 0.7); /* Dark background for deep thoughts */
    padding: 10px 20px;
    margin: 10px 0;
    box-shadow: 0px 0px 8px #55BBBC; /* Blue glow for a hint of the game's theme */
    font-style: italic;
    color: #55BBBC; /* Text color borrowed from the main theme */
    font-size: 0.9em;
    border-radius: 5px; /* Slightly rounded corners for a softer edge */
}

.thoughts-content-dark {
    /* If you need to style the inner content specifically */
}
/* twine-user-stylesheet #9: "Styles-Messages" */
.instruction-container-blue {
    border: 1px solid #55BBBC; /* Custom blue border color */
    background-color: rgba(30, 144, 255, 0.1); /* Light, semi-transparent blue background */
    padding: 0; /* Remove padding to allow the title bar to extend fully */
    /*box-shadow: 0 0 5px #55BBBC;  Soft blue glow */
    border-radius: 0px; /* Square corners */
}

.instruction-container-blue b {
    color: #55BBBC; /* Neon-like text color for bolded text */
}

.instruction-title-bar-blue {
    background-color: #55BBBC; /* Background color for the title bar */
    color: black; /* Text color for the title */
    font-weight: bold;
    padding: 5px 20px; /* Padding for the title bar */
    border-top-left-radius: 0px; /* Rounded top corners */
    border-top-right-radius: 0px;
    box-shadow: 0 0 5px #55BBBC; /* Soft blue glow */
    display: flex;
     justify-content: space-between;
}

.instruction-container-red {
    border: 1px solid #FF5555; /* Vibrant red border color */
    background-color: rgba(255, 69, 0, 0.1); /* Light, semi-transparent red background */
    padding: 0; /* Remove padding to allow the title bar to extend fully */
    /*box-shadow: 0 0 5px #FF5555;  Soft red glow */
    border-radius: 0px; /* Square corners */
}

.instruction-container-red b {
    color: #FF5555; /* Neon-like text color for bolded text */
}

.instruction-title-bar-red {
    background-color: #FF5555; /* Background color for the title bar */
    color: black; /* Text color for the title */
    font-weight: bold;
    padding: 5px 20px; /* Padding for the title bar */
    border-top-left-radius: 0px; /* Rounded top corners */
    border-top-right-radius: 0px;
    box-shadow: 0 0 5px #FF5555; /* Soft red glow */
    display: flex;
    justify-content: space-between;
}

.instruction-container-green {
    border: 1px solid #32CD32; /* Subtle green border color */
    background-color: rgba(50, 205, 50, 0.1); /* Light, semi-transparent green background */
    padding: 0; /* Remove padding to allow the title bar to extend fully */
    /*box-shadow: 0 0 5px #32CD32;  Soft green glow */
    border-radius: 0px; /* Square corners */
}

.instruction-container-green b {
    color: #32CD32; /* Subtle green text color for bolded text */
}

.instruction-title-bar-green {
    background-color: #32CD32; /* Background color for the title bar */
    color: black; /* Text color for the title */
    font-weight: bold;
    padding: 5px 20px; /* Padding for the title bar */
    border-top-left-radius: 0px; /* Rounded top corners */
    border-top-right-radius: 0px;
    box-shadow: 0 0 5px #32CD32; /* Soft green glow */
    display: flex;
    justify-content: space-between;
}


.instruction-container-gray {
    border: 1px solid #555; /* Custom gray border color */
    background-color: rgba(128, 128, 128, 0.1); /* Light, semi-transparent gray background */
    padding: 0; /* Remove padding to allow the title bar to extend fully */
    box-shadow: 0 0 5px #555; /* Soft gray glow */
    border-radius: 0px; /* Square corners */
}

.instruction-container-gray b {
    color: #555; /* Gray text color for bolded text */
}

.instruction-title-bar-gray {
    background-color: #555; /* Background color for the title bar */
    color: white; /* Text color for the title */
    font-weight: bold;
    padding: 5px 20px; /* Padding for the title bar */
    border-top-left-radius: 0px; /* Rounded top corners */
    border-top-right-radius: 0px;
    box-shadow: 0 0 5px #555; /* Soft gray glow */
}

.instruction-container-lime {
    border: 1px solid lime; /* Custom lime green border color */
    background-color: rgba(50, 205, 50, 0.1); /* Light, semi-transparent lime green background */
    padding: 0; /* Remove padding to allow the title bar to extend fully */
    /*box-shadow: 0 0 5px lime; /* Soft lime green glow */
    border-radius: 0px; /* Square corners */
}

.instruction-container-lime b {
    color: lime; /* Lime green text color for bolded text */
}

.instruction-title-bar-lime {
    background-color: lime; /* Background color for the title bar */
    color: black; /* Text color for the title */
    font-weight: bold;
    padding: 5px 20px; /* Padding for the title bar */
    border-top-left-radius: 0px; /* Rounded top corners */
    border-top-right-radius: 0px;
    box-shadow: 0 0 5px lime; /* Soft lime green glow */
    display: flex;
    justify-content: space-between;
}

.instruction-content {
    padding: 0px 20px 0 20px; /* Padding for the content area */
}
/* twine-user-stylesheet #10: "Styles-ActionPoints" */
.action-point-icon {
    font-family: 'Noto Color Emoji', sans-serif;
    font-size: 1em !important; /* Adjust this value as needed to fit your layout */

}
/* twine-user-stylesheet #11: "Styles-GlitchyText" */
/* Glitchy Text - Start */

/* The "clip" in ".glitch" is depreciated, so technically you should use the "clip-path" that's in ".glitchy" instead, however IE doesn't support "clip-path", and most browsers still support "clip". */

.glitch {
  color: white;
  position: relative;
  white-space: nowrap;
}
.glitch::before {
  content: attr(data-text);
  width: calc(100% + 0.5em);
  position: absolute;
  left: -9px;
  text-shadow: 1px 0 blue;
  top: -5px;
  color: #FFD;
  background: #111;
  overflow: hidden;
  clip: rect(0, 900px, 0, 0);
  animation: noise-anim-2 3s infinite linear alternate-reverse;
  -webkit-animation: noise-anim-2 3s infinite linear alternate-reverse;
}
.glitch::after {
  content: attr(data-text);
  width: calc(100% + 0.5em);
  position: absolute;
  left: -5px;
  text-shadow: -1px 0 red;
  top: -5px;
  color: #DFF;
  background: #111;
  overflow: hidden;
  clip: rect(0, 900px, 0, 0);
  animation: noise-anim 2s infinite linear alternate-reverse;
  -webkit-animation: noise-anim 2s infinite linear alternate-reverse;
}
@keyframes noise-anim {
  0% {
    clip: rect(80px, 9999px, 16px, 0);
  }
  5% {
    clip: rect(94px, 9999px, 17px, 0);
  }
  10% {
    clip: rect(9px, 9999px, 92px, 0);
  }
  15.0% {
    clip: rect(37px, 9999px, 4px, 0);
  }
  20% {
    clip: rect(53px, 9999px, 47px, 0);
  }
  25% {
    clip: rect(99px, 9999px, 69px, 0);
  }
  30.0% {
    clip: rect(15px, 9999px, 49px, 0);
  }
  35% {
    clip: rect(83px, 9999px, 81px, 0);
  }
  40% {
    clip: rect(55px, 9999px, 43px, 0);
  }
  45% {
    clip: rect(28px, 9999px, 27px, 0);
  }
  50% {
    clip: rect(64px, 9999px, 28px, 0);
  }
  55.0% {
    clip: rect(76px, 9999px, 91px, 0);
  }
  60.0% {
    clip: rect(29px, 9999px, 72px, 0);
  }
  65% {
    clip: rect(70px, 9999px, 10px, 0);
  }
  70% {
    clip: rect(5px, 9999px, 84px, 0);
  }
  75% {
    clip: rect(46px, 9999px, 81px, 0);
  }
  80% {
    clip: rect(7px, 9999px, 85px, 0);
  }
  85.0% {
    clip: rect(17px, 9999px, 89px, 0);
  }
  90% {
    clip: rect(41px, 9999px, 59px, 0);
  }
  95% {
    clip: rect(53px, 9999px, 90px, 0);
  }
  100% {
    clip: rect(10px, 9999px, 30px, 0);
  }
}
@keyframes noise-anim-2 {
  0% {
    clip: rect(84px, 9999px, 3px, 0);
  }
  5% {
    clip: rect(31px, 9999px, 69px, 0);
  }
  10% {
    clip: rect(37px, 9999px, 33px, 0);
  }
  15.0% {
    clip: rect(18px, 9999px, 6px, 0);
  }
  20% {
    clip: rect(25px, 9999px, 87px, 0);
  }
  25% {
    clip: rect(100px, 9999px, 8px, 0);
  }
  30.0% {
    clip: rect(24px, 9999px, 87px, 0);
  }
  35% {
    clip: rect(39px, 9999px, 16px, 0);
  }
  40% {
    clip: rect(96px, 9999px, 25px, 0);
  }
  45% {
    clip: rect(16px, 9999px, 100px, 0);
  }
  50% {
    clip: rect(92px, 9999px, 76px, 0);
  }
  55.0% {
    clip: rect(29px, 9999px, 40px, 0);
  }
  60.0% {
    clip: rect(40px, 9999px, 39px, 0);
  }
  65% {
    clip: rect(94px, 9999px, 44px, 0);
  }
  70% {
    clip: rect(2px, 9999px, 78px, 0);
  }
  75% {
    clip: rect(86px, 9999px, 50px, 0);
  }
  80% {
    clip: rect(2px, 9999px, 46px, 0);
  }
  85.0% {
    clip: rect(41px, 9999px, 71px, 0);
  }
  90% {
    clip: rect(75px, 9999px, 15px, 0);
  }
  95% {
    clip: rect(41px, 9999px, 8px, 0);
  }
  100% {
    clip: rect(23px, 9999px, 75px, 0);
  }
}

.glitchy {
  color: white;
  position: relative;
  white-space: nowrap;
}
.glitchy::before {
  content: attr(data-text);
  width: calc(100% + 0.5em);
  position: absolute;
  left: -9px;
  text-shadow: 1px 0 blue;
  top: -5px;
  color: #FFD;
  background: #111;
  overflow: hidden;
  clip-path: polygon(0 0);
  animation: noise-animY-2 3s infinite linear alternate-reverse;
  -webkit-animation: noise-animY-2 3s infinite linear alternate-reverse;
}
.glitchy::after {
  content: attr(data-text);
  width: calc(100% + 0.5em);
  position: absolute;
  left: -5px;
  text-shadow: -1px 0 red;
  top: -5px;
  color: #DFF;
  background: #111;
  overflow: hidden;
  clip-path: polygon(0 0);
  animation: noise-animY 2s infinite linear alternate-reverse;
  -webkit-animation: noise-animY 2s infinite linear alternate-reverse;
}

/* AI thought end */

.glitchy-pink {

  color: #FF1493; /* Seductive pink */
  position: relative;
  white-space: nowrap;
  font-weight: bold; /* Make text bold */
  text-align: center; /* Center text */
  display: block; /* Ensure the element behaves like a block for proper centering */
}

.glitchy-pink::before {
  content: attr(data-text);
  width: calc(100% + 0.5em);
  position: absolute;
  left: -9px;
  text-shadow: 1px 0 blue;
  top: -5px;
  color: #FF69B4; /* Lighter shade of pink */
  background: black;
  overflow: hidden;
  clip-path: polygon(0 0);
  animation: noise-animY-2 3s infinite linear alternate-reverse;
  -webkit-animation: noise-animY-2 3s infinite linear alternate-reverse;
}
.glitchy-pink::after {
  content: attr(data-text);
  width: calc(100% + 0.5em);
  position: absolute;
  left: -5px;
  text-shadow: -1px 0 red;
  top: -5px;
  color: #FFC0CB; /* Another shade of pink, softer */
  background: black;
  overflow: hidden;
  clip-path: polygon(0 0);
  animation: noise-animY 2s infinite linear alternate-reverse;
  -webkit-animation: noise-animY 2s infinite linear alternate-reverse;
}

.glitchy-pink-dialog {

  color: #FF1493; /* Seductive pink */
  position: relative;
  font-weight: bold; /* Make text bold */
  white-space: nowrap;
}

.glitchy-pink-dialog::before {
  content: attr(data-text);
  width: calc(100% + 0.5em);
  position: absolute;
  left: -9px;
  text-shadow: 1px 0 blue;
  top: -5px;
  color: #FF69B4; /* Lighter shade of pink */
  background: #191919;
  overflow: hidden;
  clip-path: polygon(0 0);
  animation: noise-animY-2 3s infinite linear alternate-reverse;
  -webkit-animation: noise-animY-2 3s infinite linear alternate-reverse;
}
.glitchy-pink-dialog::after {
  content: attr(data-text);
  width: calc(100% + 0.5em);
  position: absolute;
  left: -5px;
  text-shadow: -1px 0 red;
  top: -5px;
  color: #FFC0CB; /* Another shade of pink, softer */
  background: #191919;
  overflow: hidden;
  clip-path: polygon(0 0);
  animation: noise-animY 2s infinite linear alternate-reverse;
  -webkit-animation: noise-animY 2s infinite linear alternate-reverse;
}

@keyframes noise-animY {
  0% {
    clip-path: polygon(0 80px, 100% 80px, 100% 16px, 0 16px);
  }
  5% {
    clip-path: polygon(0 94px, 100% 94px, 100% 17px, 0 17px);
  }
  10% {
    clip-path: polygon(0 9px, 100% 9px, 100% 92px, 0 92px);
  }
  15.0% {
    clip-path: polygon(0 37px, 100% 37px, 100% 4px, 0 4px);
  }
  20% {
    clip-path: polygon(0 53px, 100% 53px, 100% 47px, 0 47px);
  }
  25% {
    clip-path: polygon(0 99px, 100% 99px, 100% 69px, 0 69px);
  }
  30.0% {
    clip-path: polygon(0 15px, 100% 15px, 100% 49px, 0 49px);
  }
  35% {
    clip-path: polygon(0 83px, 100% 83px, 100% 81px, 0 81px);
  }
  40% {
    clip-path: polygon(0 55px, 100% 55px, 100% 43px, 0 43px);
  }
  45% {
    clip-path: polygon(0 28px, 100% 28px, 100% 27px, 0 27px);
  }
  50% {
    clip-path: polygon(0 64px, 100% 64px, 100% 28px, 0 28px);
  }
  55.0% {
    clip-path: polygon(0 76px, 100% 76px, 100% 91px, 0 91px);
  }
  60.0% {
    clip-path: polygon(0 29px, 100% 29px, 100% 72px, 0 72px);
  }
  65% {
    clip-path: polygon(0 70px, 100% 70px, 100% 10px, 0 10px);
  }
  70% {
    clip-path: polygon(0 5px, 100% 5px, 100% 84px, 0 84px);
  }
  75% {
    clip-path: polygon(0 46px, 100% 46px, 100% 81px, 0 81px);
  }
  80% {
    clip-path: polygon(0 7px, 100% 7px, 100% 85px, 0 85px);
  }
  85.0% {
    clip-path: polygon(0 17px, 100% 17px, 100% 89px, 0 89px);
  }
  90% {
    clip-path: polygon(0 41px, 100% 41px, 100% 59px, 0 59px);
  }
  95% {
    clip-path: polygon(0 53px, 100% 53px, 100% 90px, 0 90px);
  }
  100% {
    clip-path: polygon(0 10px, 100% 10px, 100% 30px, 0 30px);
  }
}
@keyframes noise-animY-2 {
  0% {
    clip-path: polygon(0 84px, 100% 84px, 100% 3px, 0 3px);
  }
  5% {
    clip-path: polygon(0 31px, 100% 31px, 100% 69px, 0 69px);
  }
  10% {
    clip-path: polygon(0 37px, 100% 37px, 100% 33px, 0 33px);
  }
  15.0% {
    clip-path: polygon(0 18px, 100% 18px, 100% 6px, 0 6px);
  }
  20% {
    clip-path: polygon(0 25px, 100% 25px, 100% 87px, 0 87px);
  }
  25% {
    clip-path: polygon(0 100px, 100% 100px, 100% 8px, 0 8px);
  }
  30.0% {
    clip-path: polygon(0 24px, 100% 24px, 100% 87px, 0 87px);
  }
  35% {
    clip-path: polygon(0 39px, 100% 39px, 100% 16px, 0 16px);
  }
  40% {
    clip-path: polygon(0 96px, 100% 96px, 100% 25px, 0 25px);
  }
  45% {
    clip-path: polygon(0 16px, 100% 16px, 100% 100px, 0 100px);
  }
  50% {
    clip-path: polygon(0 92px, 100% 92px, 100% 76px, 0 76px);
  }
  55.0% {
    clip-path: polygon(0 29px, 100% 29px, 100% 40px, 0 40px);
  }
  60.0% {
    clip-path: polygon(0 40px, 100% 40px, 100% 39px, 0 39px);
  }
  65% {
    clip-path: polygon(0 94px, 100% 94px, 100% 44px, 0 44px);
  }
  70% {
    clip-path: polygon(0 2px, 100% 2px, 100% 78px, 0 78px);
  }
  75% {
    clip-path: polygon(0 86px, 100% 86px, 100% 50px, 0 50px);
  }
  80% {
    clip-path: polygon(0 2px, 100% 2px, 100% 46px, 0 46px);
  }
  85.0% {
    clip-path: polygon(0 41px, 100% 41px, 100% 71px, 0 71px);
  }
  90% {
    clip-path: polygon(0 75px, 100% 75px, 100% 15px, 0 15px);
  }
  95% {
    clip-path: polygon(0 41px, 100% 41px, 100% 8px, 0 8px);
  }
  100% {
    clip-path: polygon(0 23px, 100% 23px, 100% 75px, 0 75px);
  }
}
/* Glitchy Text - End */

/* Drunk Text - Start */
.drunk {
	animation: drunkCam 10s infinite alternate;
	color: white;
}
@keyframes drunkCam {
	0%  { filter: blur(0px); text-shadow: 0 0 0 grey; }
	20% { filter: blur(1px); text-shadow: 8px 0 0 grey; }
	24% { filter: blur(0px); text-shadow: 0 0 0 grey; }
	26% { filter: blur(0px); text-shadow: 0 0 0 grey; }
	28% { filter: blur(1px); text-shadow: 10px 0 0 grey; }
	30% { filter: blur(0px); text-shadow: 0 0 0 grey; }
	60% { filter: blur(1px); text-shadow: 5px 0 0 grey; }
	62% { filter: blur(0px); text-shadow: 0 0 0 grey; }
	65% { filter: blur(2px); text-shadow: 8px 0 0 grey; }
	67% { filter: blur(0px); text-shadow: 0 0 0 grey; }
	80% { filter: blur(0px); text-shadow: 8px 0 0 grey; }
	85% { filter: blur(2px); text-shadow: 10px 0 0 grey; }
	88% { filter: blur(1px); text-shadow: 5px 0 0 grey; }
	90% { filter: blur(0px); text-shadow: 0 0 0 grey; }
}
/* Drunk Text - End */

/* Slightly Weaker Drunk Text - Start */
.drunk-weaker {
	animation: drunkCamWeaker 10s infinite alternate;
	color: white;
}
@keyframes drunkCamWeaker {
	0%  { filter: blur(0px); text-shadow: 0 0 0 grey; }
	20% { filter: blur(0.5px); text-shadow: 4px 0 0 grey; }
	24% { filter: blur(0px); text-shadow: 0 0 0 grey; }
	26% { filter: blur(0px); text-shadow: 0 0 0 grey; }
	28% { filter: blur(0.5px); text-shadow: 5px 0 0 grey; }
	30% { filter: blur(0px); text-shadow: 0 0 0 grey; }
	60% { filter: blur(0.5px); text-shadow: 2.5px 0 0 grey; }
	62% { filter: blur(0px); text-shadow: 0 0 0 grey; }
	65% { filter: blur(1px); text-shadow: 4px 0 0 grey; }
	67% { filter: blur(0px); text-shadow: 0 0 0 grey; }
	80% { filter: blur(0px); text-shadow: 4px 0 0 grey; }
	85% { filter: blur(1px); text-shadow: 5px 0 0 grey; }
	88% { filter: blur(0.5px); text-shadow: 2.5px 0 0 grey; }
	90% { filter: blur(0px); text-shadow: 0 0 0 grey; }
}
/* Slightly Weaker Drunk Text - End */

/* Weaker Drunk Text - Start */
.drunk-even-weaker {
	animation: weakerDrunkCam 10s infinite alternate;
	color: white;
}
@keyframes weakerDrunkCam {
	0%  { filter: blur(0px); text-shadow: 0 0 0 grey; }
	20% { filter: blur(0.5px); text-shadow: 4px 0 0 grey; }
	24% { filter: blur(0px); text-shadow: 0 0 0 grey; }
	26% { filter: blur(0px); text-shadow: 0 0 0 grey; }
	28% { filter: blur(0.5px); text-shadow: 5px 0 0 grey; }
	30% { filter: blur(0px); text-shadow: 0 0 0 grey; }
	60% { filter: blur(0.5px); text-shadow: 2.5px 0 0 grey; }
	62% { filter: blur(0px); text-shadow: 0 0 0 grey; }
	65% { filter: blur(1px); text-shadow: 4px 0 0 grey; }
	67% { filter: blur(0px); text-shadow: 0 0 0 grey; }
	80% { filter: blur(0px); text-shadow: 4px 0 0 grey; }
	85% { filter: blur(1px); text-shadow: 5px 0 0 grey; }
	88% { filter: blur(0.5px); text-shadow: 2.5px 0 0 grey; }
	90% { filter: blur(0px); text-shadow: 0 0 0 grey; }
}
/* Weaker Drunk Text - End */

.hypno-image {
  opacity: 0; /* Start fully transparent */
  animation: hypnoFadeInAnimation 15s forwards; /* Animation name, duration, fill mode */
}

@keyframes hypnoFadeInAnimation {
  from {
    opacity: 0; /* Start from fully transparent */
  }
  to {
    opacity: 1; /* Animate to fully opaque */
  }
}

/* Dream Background - Start
		Based on the code found here: https://codepen.io/hylobates-lar/pen/bGEQXgm
*/
body.dream {
	background-color: #111;
}
.dream #story {
	background-color: #111c;
}

.dream #passages {
  padding-top: 50px;
  padding-bottom: 50px;
}

.dream #story::before, .dream #story::after,
body.dream::before, body.dream::after {
	font: 5vmin/1.3 Serif;
	color: transparent;
	position: fixed;
	top: 50%;
	left: 50%;
	width: 3em;
	height: 3em;
	content: ".";
	mix-blend-mode: screen;
	animation: 44s -27s move infinite ease-in-out alternate;
	z-index: -1;
}
body.dream::before {
	text-shadow: 0.9445em 2.4338em 7px rgba(33, 255, 0, 0.9), 0.5759em 0.54em 7px rgba(0, 255, 208, 0.9), -0.4559em 0.5912em 7px rgba(0, 255, 236, 0.9), 1.4961em 2.4687em 7px rgba(0, 255, 65, 0.9), 1.5417em 0.0384em 7px rgba(255, 80, 0, 0.9), 0.125em 1.2416em 7px rgba(0, 195, 255, 0.9), 2.3972em 0.181em 7px rgba(0, 221, 255, 0.9), 2.4624em 1.92em 7px rgba(255, 0, 49, 0.9), -0.0334em 0.44em 7px rgba(0, 237, 255, 0.9), 1.1526em 2.3128em 7px rgba(255, 240, 0, 0.9), 0.167em 1.038em 7px rgba(0, 255, 181, 0.9), 0.1229em 1.2339em 7px rgba(255, 165, 0, 0.9), 2.4996em 2.0089em 7px rgba(0, 255, 22, 0.9), -0.0446em 1.3232em 7px rgba(54, 0, 255, 0.9), -0.2259em 2.1849em 7px rgba(255, 216, 0, 0.9), 2.1445em 0.9129em 7px rgba(0, 255, 78, 0.9), 0.2714em -0.3698em 7px rgba(255, 254, 0, 0.9), 0.3873em 0.8664em 7px rgba(255, 0, 189, 0.9), 2.13em 2.206em 7px rgba(166, 255, 0, 0.9), 1.0059em 1.4956em 7px rgba(255, 94, 0, 0.9), -0.081em 1.3552em 7px rgba(255, 0, 112, 0.9), -0.2231em 0.8206em 7px rgba(0, 255, 176, 0.9), 1.1141em 2.154em 7px rgba(255, 0, 135, 0.9), 0.6443em 1.0032em 7px rgba(0, 210, 255, 0.9), 0.5579em 1.8526em 7px rgba(255, 211, 0, 0.9), -0.0934em 1.0921em 7px rgba(5, 0, 255, 0.9), 2.2169em -0.4125em 7px rgba(0, 224, 255, 0.9), 1.2373em 0.0968em 7px rgba(0, 226, 255, 0.9), 1.1008em -0.3961em 7px rgba(142, 0, 255, 0.9), 0.6563em 0.8088em 7px rgba(251, 0, 255, 0.9), 0.0568em 1.7335em 7px rgba(0, 255, 56, 0.9), 1.8487em 2.0343em 7px rgba(0, 255, 34, 0.9), 0.7157em 2.0317em 7px rgba(0, 12, 255, 0.9), -0.4807em 2.2297em 7px rgba(49, 0, 255, 0.9), -0.4254em 2.3987em 7px rgba(0, 255, 154, 0.9), 2.335em 1.8111em 7px rgba(255, 158, 0, 0.9), 1.8396em 1.0255em 7px rgba(4, 0, 255, 0.9), 1.4643em 1.2423em 7px rgba(0, 204, 255, 0.9), 1.6005em 1.2384em 7px rgba(194, 255, 0, 0.9), -0.0072em 1.458em 7px rgba(255, 36, 0, 0.9), -0.4817em 0.741em 7px rgba(119, 255, 0, 0.9);
	animation-duration: 44s;
	animation-delay: -27s;
}
body.dream::after {
	text-shadow: 1.1478em 2.3162em 7px rgba(54, 255, 0, 0.9), 2.4372em 0.644em 7px rgba(252, 0, 255, 0.9), 1.3828em 0.3822em 7px rgba(255, 76, 0, 0.9), 1.2372em 2.0605em 7px rgba(78, 255, 0, 0.9), 1.136em 0.1495em 7px rgba(255, 0, 72, 0.9), 2.4944em 0.91em 7px rgba(255, 138, 0, 0.9), 1.6947em 1.6824em 7px rgba(0, 229, 255, 0.9), 1.2857em 2.2709em 7px rgba(172, 255, 0, 0.9), 1.5298em 1.2425em 7px rgba(255, 0, 244, 0.9), 0.6615em 1.3241em 7px rgba(255, 201, 0, 0.9), 1.6726em -0.031em 7px rgba(99, 0, 255, 0.9), 1.8822em 1.48em 7px rgba(255, 0, 144, 0.9), 1.8877em 2.124em 7px rgba(0, 147, 255, 0.9), 0.2285em 2.2208em 7px rgba(118, 0, 255, 0.9), 1.1214em 1.9097em 7px rgba(183, 255, 0, 0.9), 0.077em -0.438em 7px rgba(235, 255, 0, 0.9), 0.5525em 0.6064em 7px rgba(0, 255, 167, 0.9), 2.0679em -0.2284em 7px rgba(0, 90, 255, 0.9), 0.129em 1.4586em 7px rgba(0, 255, 196, 0.9), 0.5162em 1.3848em 7px rgba(0, 235, 255, 0.9), 0.5718em -0.169em 7px rgba(116, 255, 0, 0.9), -0.29em 0.0931em 7px rgba(0, 58, 255, 0.9), 0.8758em -0.1827em 7px rgba(0, 217, 255, 0.9), 0.317em 1.7079em 7px rgba(0, 255, 197, 0.9), 1.8475em -0.181em 7px rgba(0, 255, 81, 0.9), 1.2301em 0.7312em 7px rgba(0, 255, 162, 0.9), 1.1789em 0.3969em 7px rgba(122, 0, 255, 0.9), 0.8406em 0.1432em 7px rgba(0, 255, 37, 0.9), -0.4374em -0.4698em 7px rgba(255, 0, 222, 0.9), 0.2916em 0.549em 7px rgba(0, 68, 255, 0.9), 2.3653em 0.6267em 7px rgba(0, 255, 193, 0.9), 0.8062em 0.582em 7px rgba(181, 0, 255, 0.9), 1.1588em 1.1817em 7px rgba(240, 255, 0, 0.9), 1.3778em 2.18em 7px rgba(0, 255, 155, 0.9), 0.1705em 1.0881em 7px rgba(0, 209, 255, 0.9), 0.7739em 2.1074em 7px rgba(255, 0, 216, 0.9), 0.557em 1.0809em 7px rgba(255, 154, 0, 0.9), 2.461em 2.081em 7px rgba(123, 0, 255, 0.9), 1.028em 1.5213em 7px rgba(0, 52, 255, 0.9), 1.4168em 0.9101em 7px rgba(69, 0, 255, 0.9), 2.221em 2.3186em 7px rgba(0, 255, 143, 0.9);
	animation-duration: 43s;
	animation-delay: -32s;
}
head::before {
	text-shadow: 0.8016em 2.3114em 7px rgba(245, 255, 0, 0.9), 1.126em 2.2075em 7px rgba(161, 255, 0, 0.9), 1.9574em 2.2538em 7px rgba(0, 255, 136, 0.9), 0.0691em 0.7518em 7px rgba(255, 218, 0, 0.9), 0.9464em -0.2514em 7px rgba(255, 0, 208, 0.9), 1.3681em 1.8335em 7px rgba(65, 0, 255, 0.9), 1.0312em 1.0682em 7px rgba(0, 255, 207, 0.9), 0.2964em 0.0637em 7px rgba(255, 0, 153, 0.9), 0.7568em -0.2568em 7px rgba(0, 25, 255, 0.9), 0.5288em 1.636em 7px rgba(0, 222, 255, 0.9), 0.9712em 1.6134em 7px rgba(255, 247, 0, 0.9), 0.0307em 1.1524em 7px rgba(100, 255, 0, 0.9), 0.5794em 0.5299em 7px rgba(0, 143, 255, 0.9), 0.093em 1.534em 7px rgba(81, 255, 0, 0.9), 0.2816em 0.7949em 7px rgba(111, 0, 255, 0.9), 0.7289em 0.8082em 7px rgba(0, 181, 255, 0.9), 0.9486em -0.3715em 7px rgba(255, 0, 108, 0.9), 1.3897em 1.7802em 7px rgba(229, 255, 0, 0.9), 0.7283em 1.5614em 7px rgba(255, 197, 0, 0.9), 2.0225em 2.1354em 7px rgba(255, 0, 110, 0.9), 1.7632em 1.6043em 7px rgba(0, 123, 255, 0.9), 2.4257em 2.3895em 7px rgba(237, 0, 255, 0.9), 0.77em 0.1143em 7px rgba(255, 49, 0, 0.9), 1.52em 2.1449em 7px rgba(143, 255, 0, 0.9), 1.9005em 2.3336em 7px rgba(0, 255, 8, 0.9), -0.1228em 1.6819em 7px rgba(3, 0, 255, 0.9), -0.0479em 0.5373em 7px rgba(0, 255, 72, 0.9), 0.1703em -0.1272em 7px rgba(0, 16, 255, 0.9), 1.999em -0.3338em 7px rgba(42, 255, 0, 0.9), 2.3526em 0.2166em 7px rgba(142, 255, 0, 0.9), 0.9688em 2.245em 7px rgba(255, 0, 152, 0.9), 2.111em -0.1589em 7px rgba(255, 0, 189, 0.9), 1.8395em 1.1002em 7px rgba(213, 0, 255, 0.9), -0.0805em 2.2244em 7px rgba(0, 255, 25, 0.9), 1.3164em 2.4778em 7px rgba(255, 62, 0, 0.9), -0.0494em 0.197em 7px rgba(24, 255, 0, 0.9), 0.0303em 0.5078em 7px rgba(136, 0, 255, 0.9), 0.32em 1.265em 7px rgba(0, 255, 81, 0.9), 0.134em 1.5171em 7px rgba(255, 0, 63, 0.9), 2.4128em 1.7454em 7px rgba(255, 0, 76, 0.9), -0.0657em 1.3949em 7px rgba(187, 0, 255, 0.9);
	animation-duration: 42s;
	animation-delay: -23s;
}
.dream #story::after {
	text-shadow: 0.2921em 1.4574em 7px rgba(255, 232, 0, 0.9), 2.3749em -0.06em 7px rgba(0, 255, 230, 0.9), 1.667em 0.6827em 7px rgba(0, 255, 16, 0.9), 0.541em 1.0844em 7px rgba(255, 140, 0, 0.9), 0.8912em 1.1734em 7px rgba(0, 255, 89, 0.9), -0.4043em 1.937em 7px rgba(226, 255, 0, 0.9), 1.3839em 0.8385em 7px rgba(255, 0, 129, 0.9), 0.7206em 1.36em 7px rgba(255, 0, 62, 0.9), 0.8656em 0.7114em 7px rgba(255, 0, 49, 0.9), 2.0217em 2.2937em 7px rgba(121, 0, 255, 0.9), 0.8651em 2.3366em 7px rgba(255, 83, 0, 0.9), 0.5552em 0.2328em 7px rgba(255, 0, 49, 0.9), 0.454em 0.9135em 7px rgba(44, 255, 0, 0.9), 2.4277em 0.4088em 7px rgba(0, 128, 255, 0.9), -0.4559em 1.1927em 7px rgba(77, 0, 255, 0.9), 1.9425em 0.0319em 7px rgba(0, 75, 255, 0.9), 2.0776em 2.3312em 7px rgba(0, 255, 185, 0.9), 0.3179em 2.2526em 7px rgba(164, 0, 255, 0.9), 1.8339em 1.527em 7px rgba(0, 255, 247, 0.9), 0.133em -0.4561em 7px rgba(255, 238, 0, 0.9), 1.5383em -0.0102em 7px rgba(0, 11, 255, 0.9), 1.3749em 2.163em 7px rgba(116, 255, 0, 0.9), 2.312em -0.1272em 7px rgba(78, 255, 0, 0.9), 2.3737em 1.1575em 7px rgba(255, 161, 0, 0.9), 1.3794em -0.1936em 7px rgba(255, 0, 178, 0.9), 0.9091em 2.099em 7px rgba(255, 0, 198, 0.9), 1.5319em 0.981em 7px rgba(255, 0, 243, 0.9), 1.1046em 1.8253em 7px rgba(255, 0, 35, 0.9), -0.1624em 0.7596em 7px rgba(0, 255, 177, 0.9), 1.5148em 1.5667em 7px rgba(99, 0, 255, 0.9), 1.2774em 2.2866em 7px rgba(0, 33, 255, 0.9), 1.0745em 1.5588em 7px rgba(156, 0, 255, 0.9), 1.3882em 2.0661em 7px rgba(255, 0, 252, 0.9), 0.2575em 1.3612em 7px rgba(0, 48, 255, 0.9), 1.5928em 1.0365em 7px rgba(0, 255, 151, 0.9), 0.0494em 0.7136em 7px rgba(196, 0, 255, 0.9), 1.8106em -0.3614em 7px rgba(199, 0, 255, 0.9), 1.469em -0.2581em 7px rgba(0, 255, 215, 0.9), 2.2018em -0.2591em 7px rgba(0, 255, 69, 0.9), -0.235em 0.7107em 7px rgba(11, 255, 0, 0.9), 0.4233em -0.0835em 7px rgba(50, 255, 0, 0.9);
	animation-duration: 41s;
	animation-delay: -19s;
}
@keyframes move {
	from {
		transform: rotate(0deg) scale(12) translateX(-20px);
	}
	to {
		transform: rotate(360deg) scale(18) translateX(20px);
	}
}
/* Dream Background - End */

/* Fade in and out */
@keyframes fadeInOut {
  0%, 100% { opacity: 0.1; }
  50% { opacity: 0.3; }
}

.fade-in-out {
  animation: fadeInOut 7s infinite;
}
/* twine-user-stylesheet #12: "Styles-UrgentRequest-server" */
.firewall-alert {
    color: #ff206e; /* Bright neon pink for text */
    padding: 20px;
    text-align: center;
    border-radius: 10px;
    margin: 20px 0;
}

.firewall-alert h2 {
    font-family: 'Orbitron', sans-serif; /* Futuristic font, you might need to import this font in your HTML */
    font-size: 2em;
    color: #ff206e; /* Neon green */
    text-shadow: 0 0 10px #ff206e; /* Green glow */
}

.firewall-alert p {
    font-family: 'Courier New', monospace;
    margin: 10px 0;
}

.server-action-selection-box-urgent-request {
    background-color: #111;
    color: lime;
    font-family: 'Courier New', monospace;
    padding: 15px;
    margin-bottom: 0px;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
    display: flex;
    flex-direction: column;
    align-items: center; 
    justify-content: center;
}

.server-action-selection-box-urgent-request-no-border {
    background-color: #111;
    color: lime;
    font-family: 'Courier New', monospace;
    display: flex;
    flex-direction: column;
    align-items: center; 
    justify-content: center;
}

.server-action-selection-box-urgent-request-no-center {
    background-color: #111;
    color: lime;
    font-family: 'Courier New', monospace;
    padding: 15px;
    margin-bottom: 0px;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
    display: flex;
    flex-direction: column;
    justify-content: center;
}
/* twine-user-stylesheet #13: "Styles-UrgentRequest-server-firewall-hack" */
body {
    background-color: #000000;
}
.ring {
    position: absolute;
    left: 50%;
    top: 100px; /* Adjust as needed */
    transform: translateX(-50%) translateY(0) scale(1); /* Adjust for horizontal centering */
    transform-origin: 18px 200px; /* Adjust as needed */
}
.seg {
    position: absolute;
    width: 36px;
    height: 20px;
    background-color:#00cc00;
}
.hide {
    display: none;
}
.long {
    height: 60px;
}

#win {
    position: relative;
    left: 50%;
    top: 320px; /* Adjust as needed */
    transform: translateX(-50%) translateY(0);     text-align: center; /* Center the inline elements like buttons */
    width: 20px;
    height: 20px;
    border: 10px solid #FFAA00;
    background-color: #FFFFFF;
    box-shadow: 0 0 10px 10px rgba(255, 0, 0, 1);
    border-radius: 50%;
    z-index: 1000; /* Ensure it's above other elements */
}

#wrap {
    position: relative; /* Ensure the rings are positioned relative to this container */
    width: 100%; /* Adjust width as needed */
    height: 600px; /* Adjust height as needed, ensure it's enough to contain the rings */
    margin: auto; /* Center the wrap within the wrapper */
}


#reset.continue-button, #continue.continue-button {
    height: 40px;
    padding: 5px 10px;
    border-radius: 5px;
    font-weight: bold;
    border: none;
    color: black;
    margin: 20px;
    font-size: 16px;
    text-transform: uppercase;
    background-color: lime;
    cursor: pointer; /* Changes the mouse cursor to indicate clickable */
    transition: background-color 0.2s, border-color 0.2s; /* Smooth transition for hover effects */
    box-sizing: border-box; /* Ensures border is included in the width */
}

#reset.continue-button:hover,  #continue.continue-button:hover {
	border-color: #aaff00;
    background: #aaff00;
}

.desktop-hacking-tool-wrapper-firewall-hack {
    background-color: #111;
    cursor: crosshair; 
    box-shadow: 0px 0px 15px 2px lime;
    border: 4px solid lime;
    border-radius: 10px;
    color: white;
    font-family: 'Courier New', Courier, monospace;
    display: flex;
    flex-direction: column;
}
/* twine-user-stylesheet #14: "Styles-UrgentRequest-server-firewall-hack-success" */
.terminal-window {
    background-color: #1e1e1e;
    color: #39FF14; /* Neon lime color */
    padding: 20px;
    min-height: 400px;
}

.terminal-window-first {
    background-color: #1e1e1e;
    color: #39FF14; /* Neon lime color */
    padding: 20px;
    overflow-y: scroll;    
    height: 400px;
}

#server-file-system {
    margin: 10px 0;
    padding: 0;
    white-space: pre;
    overflow-x: auto;
    font-size: 0.85em; /* Adjust font size for better readability */
}

.terminal-prompt {
}

#read-research-notes.continue-button, #wipe-server.continue-button {
    height: 40px;
    padding: 5px 10px;
    border-radius: 5px;
    font-weight: bold;
    border: none;
    color: black;
    margin: 20px;
    font-size: 16px;
    text-transform: uppercase;
    background-color: lime;
    cursor: pointer; /* Changes the mouse cursor to indicate clickable */
    transition: background-color 0.2s, border-color 0.2s; /* Smooth transition for hover effects */
    box-sizing: border-box; /* Ensures border is included in the width */
}

#read-research-notes.continue-button:hover,  #wipe-server.continue-button:hover {
	border-color: #aaff00;
    background: #aaff00;
}

.desktop-hacking-tool-server-content-urgent-request {
    padding-top: 0px;
    padding-left: 0px;
    padding-right: 0px;
    padding-bottom: 0px;
    display: flex;
    flex-direction: column;
}

.classified-warning {
    color: #ff0000; /* Bright red for attention */
    background-color: #1e1e1e; /* Dark background for contrast */
    border: 1px solid #ff0000; /* Red border to highlight the box */
    padding: 10px;
    margin: 15px 0;
    font-weight: bold;
    text-align: center;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(255, 0, 0, 0.5); /* Subtle red glow for emphasis */
    font-family: 'Courier New', monospace; /* Monospace font for a 'classified document' feel */
}
/* twine-user-stylesheet #15: "Styles-UrgentRequest-server-wiping" */
.wiping-progress {
  background: rgba(255,255,255,0.1);
  justify-content: flex-start;
  border-radius: 100px;
  align-items: center;
  position: relative;
  padding: 0 5px;
  display: flex;
  height: 30px;
  max-width: 100%;
  min-width: 97%;
}

.wiping-progress-value {
  animation: loadProgress 6s normal forwards; /* Shorten the duration to stop early */
  box-shadow: 0 10px 40px -10px #fff;
  border-radius: 50px;
  background: #fff;
  height: 20px;
  width: 0;
}

.wiping-progress-error {
  background: #ff0000; /* Red color for error */
  box-shadow: 0 10px 40px -10px #ff0000; /* Red glow */
}

@keyframes loadProgress {
  0% {
    width: 0;
  }
  100% {
    width: 60%; /* Adjust as needed */
  }
}
/* twine-user-stylesheet #16: "Styles-UrgentRequest-server-wiping-new-identity-transition" */
#NewIdentityOverlayImg {
	position: fixed;
	display: none; /* Hidden by default */
	z-index: 10000; /* Sit on top of everything */
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	overflow: hidden;
	background-image: url(imgs/hypno/black-tunnel.gif);
    background-size: cover; /* Adjusted to cover the entire space */
	background-color: #111;
	background-position: center;
	background-repeat: no-repeat;
}

#NewIdentityOverlayColor {
	position: fixed;
	z-index: 10000; /* Sit on top of everything */
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	overflow: hidden;
	/* background-image: url(imgs/hypno/black-tunnel.gif);
    background-size: cover; Adjusted to cover the entire space */
	background-color: #ffffff;
	/*background-position: center;
	background-repeat: no-repeat;*/
}

.BlackOnWhite {
    color: black;
    z-index: 10001;
    position: fixed;
    top: 50%; /* Position the top edge of the element at the middle of the container */
    left: 50%; /* Position the left edge of the element at the middle of the container */
    transform: translate(-50%, -50%); /* Offset the element by half its width and height to center it */
}
/* twine-user-stylesheet #17: "Styles-IMApp" */
/* Instant Messaging App Styles */
.cyber-desktop-im {
    background-color: #111;
    padding: 0px;
    min-height: 600px;
    box-shadow: 0px 0px 15px 2px lime;
    border: 4px solid lime;
    border-radius: 10px;
    color: white;
    font-family: 'Courier New', Courier, monospace;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Prevents double scrollbar on the container */
}

.im-header {
    background-color: lime;
    color: black;
    width: 100%;
    padding: 10px;
    font-weight: bold;
    border-top-left-radius: 6px; /* Rounded corners at the top */
    border-top-right-radius: 6px; /* Rounded corners at the top */
}

.im-header-text {
    margin-left: 10px;
}

.im-main {
    display: flex;
    height: calc(100% - 40px); /* Subtract the header height */
    overflow: hidden; /* Prevents double scrollbar on the main container */
}

.im-contacts-pane {
    min-width: 200px;
    min-height: 600px;
    background-color: #222;
    overflow-y: auto; /* Allows scrolling */
    border-right: 2px solid lime;
}

.contact-entry {
    padding: 10px;
    display: flex;
    align-items: center;
    border-bottom: 1px solid lime;
    transition: background-color 0.3s ease, transform 0.3s ease; /* Smooth transition for hover effects */
}

.contact-entry:hover {
    background-color: #333; /* Darker background on hover */
}

.contact-entry-selected {
    background-color: #333;
    font-weight: bold;
}

.contact-img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 10px;
}

.contact-name {
    font-size: 14px;
    color: lime;
}

.contact-name a {
    font-size: 14px;
    color: lime !important;
}

.im-chat-pane {
    flex-grow: 1;
    height: 100%;
    min-height: 600px;
    display: flex;
    flex-direction: column;
    overflow-y: auto; /* Allows scrolling */
}

.chat-display {
    position: relative; /* Needed for absolute positioning of children */
    height: 100%; /* Adjust as needed */
    flex-grow: 1;
    padding: 10px;
    background-image: url('imgs/UI/chat-logo.webp'); 
    background-position: center;
    background-size: cover; 
    background-repeat: no-repeat;
}

.chat-display-no-bg {
    position: relative; /* Needed for absolute positioning of children */
    height: 100%; /* Adjust as needed */
    flex-grow: 1;
    padding: 10px;
}

.chat-display-special {
    position: relative; /* Needed for absolute positioning of children */
    height: 100%; /* Adjust as needed */
    flex-grow: 1;
    padding: 10px;
}

.chat-response-area {
    padding: 10px;
    background-color: #222;
}

.im-response-button {
    display: block; /* Ensures the button stretches to the width of its container */
    width: 100%; /* Full width of the container */
    padding: 10px;
    margin-bottom: 5px; /* Space between buttons */
    margin-top: 5px;
    background-color: lime;
    color: black;
    font-weight: bold;
    text-transform: none;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    text-align: left; /* Align text inside the button to the left */
}

.im-response-button:hover {
    background-color: #aaff00;
}

.im-response-button button{
    display: block !important; /* Ensures the button stretches to the width of its container */
    width: 100% !important; /* Full width of the container */
    padding: 10px !important;
    margin-bottom: 5px !important; /* Space between buttons */
    margin-top: 5px !important;
    background-color: lime !important;
    color: black !important;
    border: none !important;
    font-weight: bold !important;
    border-radius: 5px !important;
    text-transform: none !important;
    cursor: pointer !important;
    text-align: left !important; /* Align text inside the button to the left */
}

.im-response-button:hover button {
    background-color: #aaff00 !important;
}

.im-contact-new-emoji {
    padding-left: 7px;
}

#bottom-im-text {
    position: absolute;
    bottom: 0; 
    box-sizing: border-box;
    width: calc(100% - 20px); 
    text-align: center; 
    margin: 0px;
    padding: 0px;
}

/* Add media queries as needed for responsiveness */
@media (max-width: 768px) {
    .im-main {
        flex-direction: column;
    }
    .im-contacts-pane {
        width: 100%; /* Full width on smaller screens */
        height: 80px; /* Reduced height */
        display: flex; /* Align contacts horizontally */
        align-items: center; /* Center the contacts vertically */
        overflow-x: auto; /* Enable horizontal scrolling */
        overflow-y: hidden; /* Hide vertical scrollbar */
        border-bottom: 1px solid lime;
    }
    .contact-entry {
        flex-direction: row; /* Stack elements vertically */
        justify-content: center; /* Center items vertically */
        width: auto; /* Fixed width for each contact */
        border: none;
        transition: background-color 0.3s ease, transform 0.3s ease; /* Smooth transition for hover effects */
    }

    .contact-entry:hover {
        background-color: #333; /* Darker background on hover */
    }

    .contact-img {
        margin: 0 auto; /* Center image horizontally */
    }
    .contact-name {
    /*    display: none;  Hide contact names */
    }
    .im-chat-pane {
        width: 100%; /* Full width */
    }
}

.im-progress {
  background: rgba(255,255,255,0.1);
  justify-content: flex-start;
  border-radius: 100px;
  align-items: center;
  position: relative;
  padding: 0 5px;
  display: flex;
  height: 30px;
  max-width: 100%;
  min-width: 97%;
}

.im-progress-value {
  animation: load 10s normal forwards;
  box-shadow: 0 10px 40px -10px #fff;
  border-radius: 50px;
  background: #fff;
  height: 20px;
  width: 0;
}

@keyframes load {
  0% { width: 0; }
  100% { width: 100%; }
}
/* twine-user-stylesheet #18: "Styles-Computer" */
.desktop {
    background-color: #111;
    background-size: 100%; /* Cover the entire area */
    padding: 20px;
    height: 500px;
    box-shadow: 0px 0px 15px 2px lime;
    position: relative;
    border: 4px solid lime;
    border-radius: 10px;
}

.dock {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    justify-content: center;
    background-color: rgba(0, 0, 0, 0.7); /* Semi-transparent background for the dock */
    padding: 5px 0;
    border-radius: 10px 10px 0 0; /* Rounded corners at the top */
    width: 90%; /* Cover most of the desktop width */
}

.desktop-icon {
    width: 80px;
    transition: transform 0.2s;
    margin-left: 20px;
    margin-right: 20px;
    margin-bottom: 0px;
    margin-top: 0px;
    text-align: center;
    font-size: 48px;
    color: white;
    cursor: pointer;
    position: relative;
}

.desktop-icon:hover {
    transform: scale(1.1);
}

/* Media query for screen sizes up to 1000px */
@media (max-width: 1000px) {
    .desktop-icon {
    font-size: 36px;
    margin-left: 15px;
    margin-right: 15px;
    }
}

/* Media query for screen sizes up to 768px */
@media (max-width: 880px) {
    .desktop-icon {
    font-size: 24px;
    margin-left: 10px;
    margin-right: 10px;
    }
}

.icon-tooltip {
    visibility: hidden;
    background-color: lime;
    color: black;
    text-align: center;
    border-radius: 6px;
    padding: 3px;
    font-size: 16px;
    position: absolute;
    z-index: 1;
    bottom: 100%;
    left: 50%;
    transform: translate(-50%, -10px);
    opacity: 0;
    transition: opacity 0.3s;
}

.desktop-icon:hover .icon-tooltip {
    visibility: visible;
    opacity: 1;
}

.about-pc {
    position: absolute;
    top: 80px; 
    left: 50%;
    transform: translate(-50%, 0);
    width: 400px;
    background-color: #111;
    border: 4px solid lime;
    border-radius: 5px;
    font-family: 'Courier New', Courier, monospace;
    z-index: 1;
    display: none; /* Hidden by default */
}

.about-pc-header {
    background-color: lime;
    color: black;
    padding: 10px;
    position: relative;
    font-weight: bold;
}

.about-pc-body {
    padding: 20px;
    color: white;
}

.about-pc-close-button {
  position: absolute;
  top: 10px;
  right: 10px;
  cursor: pointer;
}

/* Add to existing CSS */

.top-bar {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    box-sizing: border-box;
    padding: 10px;
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    border-radius: 5px;
    display: flex;
    justify-content: space-between;
}

.about-pc-button button {
    cursor: pointer !important;
    background-color: lime !important;
    border: none !important;
    padding: 5px !important;
    font-weight: bold !important;
    text-transform: initial !important; 
    border-radius: 5px !important;
    color: black !important;
    height: 100% !important;
}

.about-pc-button:hover button {
  background-color: #aaff00 !important;
}

.notification-counter {
    color: lime;
}

.notification-area {
    position: absolute;
    top: 50px; /* Below the top bar */
    right: 0;
    width: 300px;
    height: 397px; /* You can adjust this */
    overflow-y: scroll; /* Scrollable */
    background-color: rgba(0, 0, 0, 0); /* Semi-transparent */
}

.notification-bubble {
    padding: 10px;
    margin-right: 10px;
    margin-top: 10px;
    margin-bottom: 10px;
    border-bottom: 1px solid lime;
    color: white;
    font-size: 0.8em;
    border-radius: 5px;
    background-color: rgba(0, 0, 0, 0.7); /* Semi-transparent */
}
/* twine-user-stylesheet #19: "Styles-ComputerApp" */
.computerapp-wrapper {
    background-color: #111;
    padding: 0px;
    border: 4px solid lime;
    box-shadow: 0px 0px 15px 2px lime !important;
    border-radius: 5px;
    font-family: 'Courier New', Courier, monospace;
}

.computerapp-header {
    background-color: lime;
    color: black;
    width: 100%;
    padding-top: 10px;
    padding-bottom: 10px;
    font-weight: bold;
}

.computerapp-header-text {
    margin-left: 10px;
    padding-right: 10px;
}

.computerapp-content {
    background-color: #111;
    padding-left: 20px;
    padding-right: 20px; 
    padding-bottom: 20px;
    font-family: 'Courier New', Courier, monospace;
}

.computerapp-content h1 {
    color: lime;
    border-bottom: 2px solid lime;
    padding-bottom: 10px;
    margin-bottom: 20px;
}
/* twine-user-stylesheet #20: "Styles-DigitalDownloads" */
.dd-wrapper {
    background-color: #111;
    padding: 0px;
    border: 4px solid lime;
    box-shadow: 0px 0px 15px 2px lime !important;
    border-radius: 5px;
    font-family: 'Courier New', Courier, monospace;
}

.dd-header {
    background-color: lime;
    color: black;
    width: 100%;
    padding-top: 10px;
    padding-bottom: 10px;
    font-weight: bold;
}

.dd-header-text {
    margin-left: 10px;
    padding-right: 10px;
}

.dd-content {
    background-color: #111;
    padding-left: 20px;
    padding-right: 20px; 
    padding-bottom: 20px;
    font-family: 'Courier New', Courier, monospace;
}
.dd-title {
    color: #00FF00;
    border-bottom: 2px solid #00FF00;
    padding-bottom: 5px;
    margin-bottom: 20px;
}

.dd-category {}

.dd-category-title {
    color: #00FF00;
    font-size: 1.5em;
    margin-bottom: 5px;
}

.dd-products-row {
    display: flex;
    justify-content: space-between;
}

.dd-product {
    width: 30%; /* Adjust the width as needed to fit three products */
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 10px;
}

.dd-product-image-container {
    width: 100%;
    height: auto;
    display: flex;
    justify-content: center;
    margin-bottom: 10px;
}

.dd-product-image {
    max-width: 100%; /* Makes the image responsive */
    height: auto;
    border: 2px solid #00FF00; /* Optional: Adds a border around the image */
}

.dd-product-info {
    text-align: center;
}

.dd-product-title {
    font-weight: bold;
    margin-top: 5px;
    margin-bottom: 5px;
}

.dd-product-price {
    color: #aaff00;
    margin-top: 5px;
    margin-bottom: 5px;
}

.dd-buy-button {
    background-color: #00FF00;
    border: none;
    padding: 5px 10px;
    cursor: pointer;
    border-radius: 5px;
    color: black;
    font-weight: bold;
    margin-top: 5px; /* Gives space between the price and the button */
}

.dd-buy-button:hover {
    background-color: #aaff00;
}

.dd-button-disabled {
    opacity: 0.6; /* makes the button appear faded */
    cursor: not-allowed;
    pointer-events: none; /* changes the cursor to indicate the button is disabled */
}
/* twine-user-stylesheet #21: "Styles-FilesApp" */
/* Files App Styles */

.cyber-desktop-files {
    background-color: #111;
    padding: 0px;
    min-height: 600px; /* Adjust the height as needed */
    box-shadow: 0px 0px 15px 2px lime;
    border: 4px solid lime;
    border-radius: 10px;
    color: white;
    font-family: 'Courier New', Courier, monospace;
    overflow-y: auto; /* Makes the content scrollable */
}

.cyber-files-header {
    background-color: lime;
    color: black;
    width: 100%;
    padding-top: 10px;
    padding-bottom: 10px;
    font-weight: bold;
}

.cyber-files-header-text {
    margin-left: 10px;
    padding-right: 10px;
}

.cyber-files-close-button {
    cursor: pointer;
}

.cyber-files-content {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    padding: 20px;
    overflow-y: auto;
}

.file-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 10px;
    color: white;
    cursor: pointer;
    transition: transform 0.2s;
}

.file-item:hover {
    transform: scale(1.1);
}

.file-item span {
    font-size: 48px; /* Icon size */
}

.file-item p {
    margin-top: 5px;
    font-size: 14px; /* Filename text size */
    text-align: center;
    word-break: break-word; /* Ensure long names wrap */
}

/* Responsive adjustments */
@media (max-width: 1000px) {
    .file-item span {
        font-size: 36px;
    }
}

@media (max-width: 768px) {
    .file-item span {
        font-size: 24px;
    }
    .cyber-files-content {
        justify-content: center;
    }
}
/* twine-user-stylesheet #22: "Styles-FilesApp-Research" */
.research-files-content {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start; /* Adjusted for consistent start alignment */
    padding: 20px;
    overflow-y: auto;
    /*height: 500px;*/
}
/* twine-user-stylesheet #23: "Styles-FilesApp-Stars" */
.stars-desktop-files {
    background-color: #111;
    padding: 0px;
    min-height: 500px; /* Adjust the height as needed */
    box-shadow: 0px 0px 15px 2px lime;
    border: 4px solid lime;
    border-radius: 10px;
    color: white;
    font-family: 'Courier New', Courier, monospace;
    overflow-y: auto; /* Makes the content scrollable */
}

.stars-files-content {
    padding: 0px;
    margin: 0px;
    height: 500px;
    overflow-y: hidden;
    box-sizing: border-box;
}
/* twine-user-stylesheet #24: "Styles-NotesApp" */
/* Updated styles for Notes App */
.notesApp {
    background-color: #111;
    padding: 0px;
    border: 4px solid lime;
    box-shadow: 0px 0px 15px 2px lime !important;
    border-radius: 5px;
    font-family: 'Courier New', Courier, monospace;
}

.notesApp-content {
    background-color: #111;
    padding-left: 20px;
    padding-right: 20px; 
    padding-bottom: 20px;
    font-family: 'Courier New', Courier, monospace;
}

.notesApp-header {
    background-color: lime;
    color: black;
    width: 100%;
    padding-top: 10px;
    padding-bottom: 10px;
    font-weight: bold;
}

.notesApp-header-text {
    padding-left: 10px;
    padding-right: 10px;
}

.notesApp h1 {
    font-size: 2em;
    color: lime;
}

.notesApp h2 {
    color: lime;
    margin-bottom: 0px;
}

#noteInput {
    width: 100%;
    height: 200px;
    min-width: 50px;
    padding: 10px;
    margin: 10px 0;
    border: 1px solid lime;
    background-color: #1a1a1a;
    color: white;
    font-size: 16px;
    box-sizing: border-box;
}

#notesDisplay {
    box-sizing: border-box;
}

.saved-note {
    display: flex;
    align-items: center;
    justify-content: space-between;
    border: 1px solid lime;
    padding: 10px;
    margin: 10px 0;
    border-radius: 5px;
}

.note-text {
    color: white;
    flex: 1;
}

.note-button button {
    background-color: lime !important;
    font-weight: bold;
    color: black !important;
    border: none !important;
    padding: 10px !important;
    cursor: pointer !important;
    border-radius: 4px !important;
}

.note-button button:hover {
    background-color: #aaff00 !important;
}
/* twine-user-stylesheet #25: "Styles-HackTarget" */
/* Hacking Interface Styles */
.desktop-hacking-tool-wrapper {
    background-color: #111;
    box-shadow: 0px 0px 15px 2px lime;
    border: 4px solid lime;
    border-radius: 10px;
    color: white;
    font-family: 'Courier New', Courier, monospace;
    display: flex;
    flex-direction: column;
}

.desktop-hacking-tool-header {
    background-color: lime;
    color: black;
    width: 100%;
    padding-top: 10px;
    padding-bottom: 10px;
    font-weight: bold;
}

.desktop-hacking-tool-header-text {
    margin-left: 10px;
}

.desktop-hacking-tool-main {
    display: flex;
    padding: 20px;
    min-height: 400px; /* Full height for app */
}

.desktop-hacking-tool-targets-pane {
    width: 50%;
    overflow-y: auto;
    padding: 10px 30px 10px 10px;
    border-right: 3px solid lime;
}

.desktop-hacking-tool-targets-heading {
    color: lime;
    margin-bottom: 10px;
    margin-top: 0px;
}

.desktop-hacking-tool-target-entry {
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid lime;
    border-radius: 5px;
    background-color: #222;
    transition: background-color 0.3s ease-in-out;
}

.desktop-hacking-tool-target-entry:hover {
    background-color: #2a2a2a;
}

.desktop-hacking-tool-target-details {
    margin-bottom: 8px;
}

.desktop-hacking-tool-target-name {
    font-weight: bold;
    color: lime;
}

.desktop-hacking-tool-target-ip {
    color: #aaa;
    font-family: 'Consolas', 'Monaco', monospace;
}

.desktop-hacking-tool-target-actions {
    text-align: right;
}

.hack-button, .analyze-button {
    background-color: lime;
    color: black;
    border: none;
    font-weight: bold;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
    margin-left: 5px;
}

.hack-button:hover, .analyze-button:hover {
    background-color: #aaff00;
}

.desktop-hacking-tool-tools-pane {
    width: 50%;
    overflow-y: auto;
    padding: 10px 10px 10px 30px;
    background-color: #111;
}

.desktop-hacking-tool-tools-heading {
    color: lime;
    margin-bottom: 10px;
    margin-top: 0px;
}

.desktop-hacking-tool-tools-list {
    list-style: none;
    padding: 0;
    margin-left: 0px !important;
    padding-left: 0px !important;
}

.desktop-hacking-tool-tools-list li {
    background-color: #222;
    border: 1px solid #333;
    padding: 5px 10px;

    margin-bottom: 5px;
    border-radius: 5px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .desktop-hacking-tool-main {
        flex-direction: column;
    }
    .desktop-hacking-tool-targets-pane,
    .desktop-hacking-tool-tools-pane {
        width: 100%;
        padding: 0px; /* Adjust as needed */
        border-right: 0px;
    }
}
/* twine-user-stylesheet #26: "Styles-ServerHackingAnimation" */
.desktop-hacking-tool-animation-wrapper {
    background-color: #111;
    box-shadow: 0px 0px 15px 2px lime;
    border: 4px solid lime;
    border-radius: 10px;
    color: white;
    font-family: 'Courier New', Courier, monospace;
    display: flex;
    flex-direction: column;
}

.desktop-hacking-tool-animation {
    display: flex;
    flex-direction: column; /* Stack children vertically */
    height: 400px; /* Full height for app */
    position: relative;
    padding: 20px;
}

.hacking-animation {
    flex-grow: 1; /* Allow this div to expand to fill available space */
    margin: 0;
    padding: 20px;
    background: #111111;
    overflow: auto; /* Enable scrolling if content overflows */
}

.hacking-animation * {
    box-sizing: border-box;
}

.hacking-animation p {
    font-family: 'Courier New', Courier, monospace;
    font-weight: bold;
    font-size: 1em;
    margin: 0;
    padding: 0;
    line-height: 1;
    color: lime;
    text-shadow: 0px 0px 10px lime;
}

.msg-container {
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 2;
}
.msg {
    font-family: monospace;
    font-weight: bold;
    text-transform: uppercase;
    font-size: 2em;
    background: red;
    box-shadow: 0 0 30px red;
    text-shadow: 0 0 20px white;
    color: white;
    padding: 20px;
    text-align: center;
    min-width: 200px;
    animation-name: blink;
    animation-duration: 0.6s;
    animation-iteration-count: infinite;
    animation-direction: alternate;
    animation-timing-function: linear;
    /* Removed absolute positioning and margins */
}
  
  @keyframes blink {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }
/* twine-user-stylesheet #27: "Styles-ServerBrowsing" */
.desktop-hacking-tool-server-content {
    padding: 20px;
    display: flex;
    flex-direction: column; /* Stack sections vertically */
}

.server-section {
    padding: 15px;
    margin-bottom: 5px; /* Space between sections */
    margin-top: 5px; /* Space between sections */
    text-align: center;
}

.server-section button {
    background-color: #333; /* Dark gray background */
    border: 1px solid #555; /* Gray border */
    border-radius: 10px; /* Rounded corners */
    padding: 20px; /* Padding inside button */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* Subtle shadow */
    transition: all 0.3s ease; /* Smooth transition for hover effects */
    cursor: pointer; /* Cursor indicates clickable */
    font-size: 14px; /* Text size */
    color: white; /* Text color */
    width: 100%; /* Full width */
    text-transform: uppercase; /* Uppercase text */
}

.server-section button:hover {
    background-color: #444; /* Lighter gray on hover */
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4); /* Larger shadow on hover */
}

.server-intro-message {
    background-color: #111; /* Dark background */
    color: lime;
    font-family: 'Courier New', monospace;
    padding: 15px;
    margin-bottom: 0px; /* Space between the message and buttons */
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
}

.server-intro-message p {
   padding: 0px;
   margin: 0px;
}

.log-entries {
    background-color: #222; /* Black background for the log area */
    height: 450px; /* Or any other height you prefer */
    overflow-y: auto; /* Allow scrolling */
    padding: 10px;
}

.log-entry {
    background-color: #222; /* Dark background for each log entry */
    border-bottom: 1px solid #333; /* Separator between entries */
    padding: 5px; /* Padding within each log entry */
}

.log-entry-last {
    background-color: #222; /* Dark background for each log entry */
    padding: 5px; /* Padding within each log entry */
}

.log-time {
    color: #999; /* Grey color for the timestamp */
    padding-right: 10px; /* Space between time and log text */
}

.server-password-lock-icon {
    text-align: center;
    margin-top: 80px;
    margin-bottom: 0px;
    font-size: 3em; /* Adjust the size as needed */
    color: lime; /* Color of the lock icon */
}

.server-password-access-button {
    display: block;
    background-color: lime;
    border: none;
    border-radius: 5px;
    color: black;
    font-weight: bold;
    padding: 10px 20px;
    text-align: center;
    margin: 20px auto; /* Center the button */
    cursor: pointer;
    text-transform: uppercase;
    font-size: 1em;
}

.server-password-access-button:hover {
    background-color: #aaff00; 
}

.server-action-selection-box {
    background-color: #111; /* Dark background */
    color: lime;
    font-family: 'Courier New', monospace;
    padding: 15px;
    margin-top: 80px;
    margin-bottom: 0px; /* Space between the message and buttons */
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
}

.desktop-hacking-tool-server-password-protected {
    padding: 0px;
    display: flex;
    flex-direction: column; /* Stack sections vertically */
}

.server-password-input {
    display: block;
    width: 18em;
    margin: 25px auto; /* Center the input field */
    padding: 5px;
    font-size: 1em;
    /*color: #333;*/
    border: 1px solid #555 !important;
}

.server-password-submit-button {
    display: block;
    background-color: lime;
    color: black;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    font-weight: bold;
    cursor: pointer;
    text-transform: uppercase;
    margin: 0px auto; /* Center the button */
    width: auto; /* Auto width to fit the text */
}

.server-password-submit-button:hover {
    background-color: #aaff00;
}

.server-camera-view {
    height: 550px; /* Fixed height for the camera view */
    border: 1px solid #555;
    margin: 5px;
    background-color: #222;
    overflow: hidden; /* Hide overflow */
}

.server-camera-title-bar {
    background-color: #333;
    color: lime;
    padding: 5px;
    text-align: center;
    font-weight: bold;
}

.server-camera-content {
    height: calc(100% - 30px); /* Adjust height accounting for title bar */
    display: flex;
    justify-content: center;
    overflow: hidden;
}

.server-camera-action-selection-box {
    background-color: #111;
    color: lime;
    font-family: 'Courier New', monospace;
    padding: 15px;
    margin-top: 5px;
    margin-bottom: 0px;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
}

.server-camera-content img {
    max-width: 100%; /* Scale image to fit width */
    max-height: 100%; /* Scale image to fit height */
    object-fit: contain; /* Ensure the entire image is visible */
}
/* twine-user-stylesheet #28: "Styles-ComputerSettings" */
.settings-wrapper {
    background-color: #111;
    padding: 0px;
    border: 4px solid lime;
    box-shadow: 0px 0px 15px 2px lime !important;
    border-radius: 5px;
    font-family: 'Courier New', Courier, monospace;
}

.settings-header {
    background-color: lime;
    color: black;
    width: 100%;
    padding-top: 10px;
    padding-bottom: 10px;
    font-weight: bold;
}

.settings-header-text {
    margin-left: 10px;
    padding-right: 10px;
}

.settings-container {
    background-color: #111;
    padding: 0 20px 20px 20px;
    border-radius: 10px;
    font-family: 'Courier New', Courier, monospace;
}

.settings-container h2 {
    color: lime;
    border-bottom: 2px solid lime;
    padding-bottom: 0px;
    margin-bottom: 20px;
}

#settings-title {
    color: lime;
    margin-bottom: 20px;
}

.settings-label {
    font-weight: bold;
    margin-right: 10px;
}

.settings-input[type="text"] {
    background-color: rgba(255, 255, 255, 0.1);
    color: white;
    border: 1px solid lime;
}

.settings-button button {
    background-color: lime !important; /* Your green color */
    color: black !important;
    border: none !important;
    padding: 10px 15px !important;
    text-align: center !important;
    text-decoration: none !important;
    display: inline-block !important;
    font-weight: bold !important;
    text-transform: uppercase !important;
    font-size: 16px !important;
    font-family: 'Courier New', Courier, monospace !important;
    margin: 4px 2px !important;
    cursor: pointer !important;
    border-radius: 4px !important;
}

.settings-button button:hover {
    background-color: #aaff00 !important; /* Darker green on hover */
}
/* twine-user-stylesheet #29: "Styles-WebBrowser" */
/* Web Browser Styles */
.cyber-desktop-browser {
    background-color: #111;
    padding: 0px;
    min-height: 600px;
    box-shadow: 0px 0px 15px 2px lime;
    border: 4px solid lime;
    border-radius: 10px;
    color: white;
    font-family: 'Courier New', Courier, monospace;
    overflow-y: auto;
}

.browser-toolbar {
    display: flex;
    align-items: center;
    padding: 5px;
    background-color: #222; /* Slightly different background for the toolbar */
}

.browser-header {
    background-color: lime;
    color: black;
    width: 100%;
    padding-top: 10px;
    padding-bottom: 10px;
    font-weight: bold;
}

.browser-header-text {
    margin-left: 10px;
    padding-right: 10px;
}

.browser-content {
    padding: 20px;
    text-align: center;
}

.url-input[type="text"] {
    width: 100%;
    padding: 5px;
    margin-top: 5px;
    margin-bottom: 5px;
    margin-left: 5px;
    border: 1px solid lime;
    border-radius: 5px;
    color: lime;
    background: #222;
}


.bookmarks-area {
    display: flex;
    justify-content: center; /* Distributes space more evenly */
    flex-wrap: wrap; /* Allows bookmarks to wrap as needed */
    padding: 20px;
    overflow-y: auto; /* Scroll if content overflows */
}

.bookmark {
    background-color: #333; /* Dark gray background */
    border: 1px solid #555; /* Gray border */
    border-radius: 10px; /* Rounded corners */
    padding: 10px; /* Padding inside bookmarks */
    margin: 10px; /* Margin between bookmarks */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* Subtle shadow */
    transition: all 0.3s ease; /* Smooth transition for hover effects */
    cursor: pointer; /* Cursor indicates clickable */
    display: flex;
    align-items: center; /* Vertical alignment */
    justify-content: center; /* Horizontal alignment */
    flex: 1 1 200px; /* Flex grow, flex shrink, flex basis */
    max-width: 202px; /* Maximum width considering margin */
    min-width: 202px;
}

.bookmark:hover {
    background-color: #444; /* Lighter gray on hover */
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4); /* Larger shadow on hover */
}

.bookmark span {
    font-size: 48px; /* Icon size */
    margin-right: 20px; /* Space between icon and text */
}

.bookmark p {
    font-size: 14px; /* Text size */
    color: white; /* Text color */
    margin: 0; /* No margin */
}

/* Responsive adjustments */
@media (max-width: 853px) {
    .bookmark {
        max-width: 100%; /* Full width on smaller screens */
        min-width: 0%;
    }
}

@media (max-width: 768px) {
    .bookmark {
        font-size: 24px; /* Adjust font size for even smaller screens */
    }
}

.go-button button {
    cursor: pointer !important;
    background-color: lime !important;
    border: none !important;
    padding: 5px 10px !important;
    margin: 5px 5px 5px 10px !important;
    border-radius: 5px !important;
    color: black !important;
    height: 31px !important;
}

/* Responsive adjustments */
@media (max-width: 1000px) {
    .bookmark span {
        font-size: 36px;
    }
}

@media (max-width: 768px) {
    .bookmark span {
        font-size: 24px;
    }
    .bookmarks-area {
        justify-content: center;
    }
}
/* twine-user-stylesheet #30: "Styles-JobBoard" */
/* Job Board Styles */
.jobboard-wrapper {
    background-color: #111;
    padding: 0px;
    border: 4px solid lime;
    box-shadow: 0px 0px 15px 2px lime !important;
    border-radius: 5px;
    font-family: 'Courier New', Courier, monospace;
}

.jobboard-header {
    background-color: lime;
    color: black;
    width: 100%;
    padding-top: 10px;
    padding-bottom: 10px;
    font-weight: bold;
}

.jobboard-header-text {
    margin-left: 10px;
    padding-right: 10px;
}

.jobboard-content {
    background-color: #111;
    padding-left: 20px;
    padding-right: 20px; 
    padding-bottom: 20px;
    padding-top: 20px;
    font-family: 'Courier New', Courier, monospace;
}

.job-board {
    background-color: #111;
    border-radius: 5px;
    border: 4px solid lime; /* Dashed lime border */
    padding: 20px;
    margin: 20px auto;
    font-family: 'Courier New', Courier, monospace;
    color: white;
    box-shadow: 0px 0px 15px 2px lime; /* Lime glow */
    width: 95%;
}

.job-board h1 {
    color: lime;
    border-bottom: 2px solid lime;
    padding-bottom: 10px;
    margin-bottom: 20px;
}

.job-listing {
    background-color: #1a1a1a;
    border-radius: 5px;
    border: 2px solid #999;
    padding: 15px;
    margin-bottom: 20px;
    margin-top: 20px;
}

.job-listing-button {
    background-color: #1a1a1a;
    border-radius: 5px;
    border: none;
    margin: 15px 0;
}

.job-listing.highlighted {
    border: 4px solid lime;
}

.job-listing h2 {
    color: lime;
    margin: 0;
    padding-top: 20px;
}

.job-listing p {
    margin: 10px 0;
}

.job-listing .btn-wrapper-board {
    text-align: right;
    justify-content: center; 
    align-items: center;
}

.job-listing .btn-wrapper-board button {
    background-color: lime; /* Your green color */
    color: black !important;
    border: none;
    padding: 10px 15px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    text-transform: uppercase;
    font-weight: bold;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;
    border-radius: 4px;
}

.job-listing .btn-wrapper-board button:hover {
    background-color: #aaff00; /* Darker green on hover */
}

.job-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 20px;
}

.job-meta span {
    font-size: 0.9em;
    color: #999;
}

/* Styling for the detailed job description */
.job-description {
    background-color: #111; /* Dark background */
    border: 4px solid lime;
    padding: 20px;
    width: 95%; /* Adjust as needed */
    margin: 20px auto;
    border-radius: 5px;
    box-shadow: 0px 0px 15px 2px lime; /* Lime glow */
    font-family: 'Courier New', Courier, monospace; /* Monospace font for the hacker vibe */
}

.job-description h2 {
    color: lime;
    border-bottom: 2px solid lime;
    padding-bottom: 10px;
    margin-bottom: 20px;
}

.job-description p {
    color: white;
    font-size: 1.1em;
    line-height: 1.5;
}

.job-description .btn-wrapper {
    margin-top: 20px;
    text-align: center;
}

.job-description .btn-wrapper button {
    background-color: lime;
    border: none;
    padding: 10px 15px;
    color: black !important; /* Black text on lime button */
    font-weight: bold;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.3s ease;
}

.job-description .btn-wrapper button:disabled {
    background-color: #444;
    border: 1px solid #666;
}

.job-description .btn-wrapper button:hover:enabled {
    background-color: #aaff00; /* Lighter green on hover */
}
/* twine-user-stylesheet #31: "Styles-SpyingLandlordHack" */
.desktop-hacking-tool-server-content {
    padding-top: 0px;
    padding-left: 20px;
    padding-right: 20px;
    padding-bottom: 20px;
    display: flex;
    flex-direction: column;
}
/* twine-user-stylesheet #32: "Styles-SpyingLandlordHack-404" */
.server-404-error-message {
    text-align: center;
    padding: 50px;
    background-color: #111;
    color: red;
    font-size: 2em; /* Large font size */
    font-family: 'Courier New', Courier, monospace;
}

.blink-text {
    animation: blinker 1s linear infinite;
}

@keyframes blinker {
    50% { opacity: 0; }
}
/* twine-user-stylesheet #33: "Styles-FLXFIT-Presentation" */
.flxfit-slide-content {
    display: flex;
    height: 100%;
}

.flxfit-slide-image {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
}

.flxfit-slide-image img {
    max-width: 100%;
    max-height: 450px;
    border-radius: 5px; /* Optional: rounds the corners of the image */
}

.flxfit-slide-text {
    flex: 1;
    color: #FFF; /* Adjust based on your theme */
    padding: 20px;
}

.flxfit-slide-text ul {
    list-style-type: none;
    padding: 0;
}

.flxfit-slide-text ul li {
    margin-bottom: 10px;
    font-size: 18px;
}
/* twine-user-stylesheet #34: "Styles-HiveProperties" */
/* Cyberpunk-inspired Design */

.hive-browser-content {
    background: linear-gradient(145deg, #012, #210);
    text-align: center;
}

.hive-intro-section {
    background-color: #ffffff;
}

.hive-intro-section h1, .hive-login-section h2 {
    color: #ff3;
    text-shadow: 0 0 10px #f0f;
}

.hive-intro-section p, .hive-explore {
    color: #0f0;
    font-size: 18px;
}

.hive-login-section {
    background-color: rgba(0, 0, 0, 0.8);
    padding: 20px;
    border-radius: 5px;
}

.hive-login-section input[type="text"],
.hive-login-section input[type="password"],
.hive-login-section button {
    box-sizing: border-box; /* Ensures padding and border are included in the total width */
    width: calc(100% - 0px); /* Adjust back if needed based on the actual layout */
    padding: 10px;
    background-color: #222;
    margin-bottom: 10px;
    border: 1px solid #0f0;
    border-radius: 3px;
}


.hive-login-section button {
    background-color: #333; /* Dark gray background */
    border: 1px solid #555; /* Gray border */
    border-radius: 3px;
    padding: 10px; /* Padding inside button */
    margin-bottom: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* Subtle shadow */
    transition: all 0.3s ease; /* Smooth transition for hover effects */
    cursor: pointer; /* Cursor indicates clickable */
    color: white; /* Text color */
    text-transform: uppercase; /* Uppercase text */
}

.hive-login-section button:hover {
    background-color: #444; /* Lighter gray on hover */
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4); /* Larger shadow on hover */
    border: 1px solid #555; /* Gray border */
}


.rent-details-table table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
}

.rent-details-table th, .rent-details-table td {
    border: 1px solid #0f0; /* Neon green border for cyberpunk vibe */
    text-align: left;
    padding: 8px;
}

.rent-details-table th {
    background-color: #003300; /* Dark green background for headers */
    color: #0f0;
}

.rent-details-table td {
    background-color: #000; /* Dark background for cells */
    color: #0f0;
}

.rent-details-table tr:nth-child(even) {
    background-color: #001100; /* Slightly lighter dark green for even rows */
}
/* twine-user-stylesheet #35: "Styles-OmniPedia" */
/* Add this to your Styles-WebBrowser stylesheet */

.topics-container {
    display: flex; /* Enables Flexbox */
    flex-wrap: wrap; /* Allows topics to wrap to the next line */
    justify-content: flex-start; /* Aligns items to the start of the container */
    padding: 10px; /* Optional padding for visual spacing */
}

.topics-list {
    display: flex; /* Enables Flexbox for the list */
    flex-direction: row; /* Aligns topics in a row */
    flex-wrap: wrap; /* Allows topics to wrap as needed */
    /*list-style-type: none;  Removes default list styling */
    padding: 0; /* Resets default padding */
    width: 100%; /* Ensures the list occupies the full width of its container */
}

.topics-list li {
    margin-right: 20px; /* Spacing between topics */
    margin-bottom: 10px; /* Spacing between rows of topics */
    flex: 1 1 200px; /* Flex grow, shrink, and basis set for responsive sizing */
    text-align: left;
}

.omnipedia-content {
    text-align: left;    
}

/* Responsive adjustments for smaller screens */
@media (max-width: 668px) {
    .topics-list li {
        flex-basis: 100%; /* Full width for each topic on smaller screens */
    }
}
/* twine-user-stylesheet #36: "Style-PornNexus" */
.movie-category-button {
    display: inline-block;
    margin: 10px;
    width: 200px;
    height: 200px;
    border: 3px solid lime;
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    text-align: center;
    vertical-align: top;
    background-color: #222;
    box-shadow: 0 0 10px #0f0;
}

.movie-category-button img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.movie-category-button:hover {
    border-color: cyan;
    box-shadow: 0 0 15px cyan;
}

.movie-category-button:hover span {
    background-color: rgba(0, 255, 255, 0.9);
    color: black;
}

.movie-category-button span {
    display: block;
    padding: 10px;
    background-color: rgba(0, 0, 0, 0.7);
    color: lime;
    font-size: 16px;
    font-weight: bold;
    position: relative;
    top: -50px;
}
/* twine-user-stylesheet #37: "Styles-Emails" */
.email-message {
    background-color: #111; /* Dark background */
    border: 4px solid lime; /* Dashed lime border */
    padding: 20px;
    width: 95%; /* Adjust as needed */
    /*margin: 20px auto;*/
    border-radius: 5px;
    position: relative;
    box-shadow: 0px 0px 15px 2px lime; /* Lime glow */
    /* box-shadow: 0px 0px 15px 2px lime; /* Lime glow */
    font-family: 'Courier New', Courier, monospace; /* Monospace font for the hacker vibe */
}

/* Styling for the message content */
.email-message .message-content {
    color: white;
    font-size: 1.1em;
    line-height: 1.5;
}

/* Link styling within the message */
.email-message .message-content a {
    color: lime;
    text-decoration: none;
}

.email-message .message-content a:hover {
    text-decoration: underline;
}

/* Email Board Styles */
.emailapp-wrapper {
    background-color: #111;
    padding: 0px;
    border: 4px solid lime;
    box-shadow: 0px 0px 15px 2px lime !important;
    border-radius: 5px;
    font-family: 'Courier New', Courier, monospace;
}

.emailapp-header {
    background-color: lime;
    color: black;
    width: 100%;
    padding-top: 10px;
    padding-bottom: 10px;
    font-weight: bold;
}

.emailapp-header-text {
    margin-left: 10px;
    padding-right: 10px;
}

.emailapp-content {
    background-color: #111;
    padding-left: 20px;
    padding-right: 20px; 
    padding-top: 20px;
    padding-bottom: 20px;
    font-family: 'Courier New', Courier, monospace;
}


.email-board h1 {
    color: lime;
    border-bottom: 2px solid lime;
    padding-bottom: 10px;
    margin-bottom: 20px;
}

.email-preview {
    border: 2px solid #999;
    padding: 15px;
    margin-top: 20px;
    margin-bottom: 20px;
    border-radius: 5px;
}

.email-preview.highlighted {
    border: 4px solid lime;
}

.from-line, .subject-line, .message-preview {
    padding: 5px 0;
    margin: 5px 0;
    border-bottom: 1px dashed #999;
}

.from-line strong, .subject-line strong, .message-preview strong {
    color: white;
}

.email-listing button {
    /* Adapted from your job-listing button */
    background-color: lime !important;
    color: black !important;
    border: none !important;
    padding: 10px 15px !important;
    text-align: center !important;
    text-decoration: none !important;
    display: inline-block !important;
    text-transform: uppercase !important;
    font-weight: bold !important;
    font-size: 16px !important;
    margin-top: 10px !important;
    cursor: pointer !important;
    border-radius: 4px !important;
}

.email-listing button:hover {
    background-color: #aaff00 !important;
}

.email-listing-read button {
    /* Gray version for read or less urgent emails */
    background-color: #808080 !important; /* Medium gray */
    color: white !important;
    border: none !important;
    padding: 10px 15px !important;
    text-align: center !important;
    text-decoration: none !important;
    display: inline-block !important;
    text-transform: uppercase !important;
    font-weight: bold !important;
    font-size: 16px !important;
    margin-top: 10px !important;
    cursor: pointer !important;
    border-radius: 4px !important;
}

.email-listing-read button:hover {
    background-color: #a9a9a9 !important; /* Lighter gray for hover effect */
}

.email-btn-wrapper {
  position: relative;
  height: 100%;  /* Or any height you prefer */
  width: 100%;  /* Or any width you prefer */
}

.email-btn-wrapper-span {
}

/* Attachment Section Styles */
.attachment-section {
    background-color: #222; /* Slightly different background for distinction */
    padding: 20px;
    margin-left: -20px;
    margin-right: -20px;
    margin-bottom: -20px;
    border-top: 1px solid lime; /* Separator */
}

.attachments-header {
    color: lime;
    font-weight: bold;
    margin-bottom: 10px;
}

.attachment-item {
    display: flex;
    align-items: center;
    margin-bottom: 5px;
}

.fa-paperclip {
    color: lime;
    margin-right: 10px;
}

/* Style for the attachment button */
.attachment-button button {
    background-color: lime; /* Button background */
    color: black !important; /* Button text color */
    border: none;
    padding: 5px 10px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-weight: bold;
    cursor: pointer;
    border-radius: 4px;
}

.attachment-button:hover button {
    background-color: #aaff00; /* Hover effect */
}
/* twine-user-stylesheet #38: "Styles-Email-EroSpherePromo" */
.erosphere-promo-highlight {
    color: lime; /* Highlight specific words */
    font-weight: bold;
}

.erosphere-promo-footer {
    text-align: center;
    margin-top: 20px;
    font-style: italic;
}
/* twine-user-stylesheet #39: "Styles-Email-HiveProperties-Welcome" */
.hive-welcome-footer {
    font-family: Georgia, serif;
    text-align: center;
    margin-top: 20px;
    font-style: italic;
    color: #666;
}
/* twine-user-stylesheet #40: "Styles-PlayGames" */
.game-library {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    gap: 10px;
}

#gameplaybox {
    display: flex;
    align-items: center;
    justify-content: center;
}

.game-box {
    flex: 1 1 calc(33.333% - 20px); /* Adjust the flex-basis calculation as needed */
    /* 'flex' shorthand for flex-grow, flex-shrink, and flex-basis */
    /* calc(33.333% - 20px) attempts to give each box a third of the container's width minus the gap */
    text-align: center;
    border: 2px solid #55BBBC;
    background-color: rgba(255, 255, 255, 0.1);
    cursor: pointer;
    transition: background-color 0.2s;
    margin-bottom: 10px; /* Adjust as needed for spacing at the bottom */
}

.game-box:hover {
    background-color: rgba(255, 255, 255, 0.2);
}

.game-box img {
    max-width: 100%; /* Ensures the image is responsive and doesn't overflow its container */
    height: auto; /* Keeps the image aspect ratio intact */
}

.game-box {
    flex: 1 1 calc(33.333% - 20px); /* Will allow the box to grow and shrink but base it on 33.333% */
    max-width: calc(33.333% - 20px); /* Ensures that even a single box won't be wider than one-third */
    text-align: center;
    border: 2px solid #55BBBC;
    background-color: rgba(255, 255, 255, 0.1);
    cursor: pointer;
    transition: background-color 0.2s;
    margin-bottom: 10px; /* Adjust as needed for spacing at the bottom */
}

#snakegame {
    border: 1px solid white;
}
/* twine-user-stylesheet #41: "Styles-PlayMatchTwoLatex" */
.match-two-grid-style-v2 {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, max-content)); /* This will make the columns only as wide as the cards */
  gap: 10px;
  justify-content: center; /* This will center the grid within its container */
  margin: 0 auto; /* This will center the container itself if it has a max-width */
  /* Add a max-width if needed to prevent the grid from growing too wide */
}

.match-two-card-v2 {
  display: inline-block; /* This keeps the card size to the content */
  border: 1px solid #999;
  position: relative;
  /* Set a specific width and height to match your images if they are not 100px by 100px */
}

.match-two-card-v2 > div {
  width: 200px; /* Adjust to your image width */
  height: 200px; /* Adjust to your image height */
  background-size: cover;
  background-position: center;
  cursor: pointer;
}

@media (max-width: 1200px) {
  .match-two-card-v2 > div {
    width: 150px; /* Smaller width for smaller screens */
    height: 150px; /* Smaller height for smaller screens */
  }
}

/* Further down you can adjust for even smaller screens */
@media (max-width: 960px) {
  .match-two-card-v2 > div {
    width: 100px;
    height: 100px;
  }
}

@media (max-width: 560px) {
  .match-two-card-v2 > div {
    width: 90px;
    height: 90px;
  }
}

.match-two-card-front-v2 {
background-image: url('imgs/games/matchtwo/card-back.jpg'); /* Path to the back side image of the card */
}
.match-two-card-back-v2 {
display: none;
}
.match-two-selected-v2 .match-two-card-front-v2 {
display: none;
}
.match-two-selected-v2 .match-two-card-back-v2 {
display: block;
}
.match-two-matched-v2 .match-two-card-front-v2 {
background-color: #2ecc71;
}
.match-two-matched-v2 .match-two-card-back-v2 {
color: #ecf0f1;
}
/* twine-user-stylesheet #42: "Styles-PlayPong" */
#pong-container {
    text-align: center;
  }
/* twine-user-stylesheet #43: "Styles-HomeHub" */
/* Apartment hub */
.hub-section {
    margin-top: 20px;
    padding-left: 15px;
    padding-right: 15px;
    padding-bottom: 15px;
    border: 1px solid #55BBBC;
    background-color: rgba(255, 255, 255, 0.1); /* Slight white background to differentiate sections */
    /*border-radius: 5px;*/
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
}

.hub-section h4 {
    margin-top: 15px;
    color: #55BBBC;
    border-bottom: 1px solid #55BBBC;
}

.hub-button {
    display: block;
    width: 100%;
    text-align: center;
    padding: 8px 0;
    margin: 5px 0;
    background-color: #333;
    border: none;
    color: #FFF;
   /*border-radius: 5px;*/ 
    cursor: pointer;
    transition: background-color 0.2s;
}

.hub-button:hover {
    background-color: #555;
}
/* twine-user-stylesheet #44: "Styles-WatchTV" */
/* TV design */
.tv-frame {
    width: 95%;
    height: 500px;
    background-color: #000;
    border: 20px solid #444;
    border-radius: 25px;
    position: relative;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
    margin: 30px auto;
}

.tv-screen {
    width: 90%;
    height: 460px;
    background-color: #000;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    overflow: hidden;
}

.tv-screen img {
    width: 100%;  /* Ensures the image takes up the entire width */
    height: 100%; /* Ensures the image takes up the entire height */
    object-fit: cover; /* This will make sure the image covers the container without distorting its aspect ratio */
}

/* TV buttons */
.channel-button {
    display: inline-block;
    background-color: #555;
    border-color: #55BBBC;
    color: #FFF;
    padding: 10px 20px;
    border-radius: 5px;
    margin-top: 5px;
    margin-bottom: 5px;
    margin-left: 5px;
    margin-right: 25px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.channel-button:hover {
    background-color: #777;
    border-color: #55BBBC;
}

.channel-buttons {
    text-align: center;
    margin-top: 20px;
}
/* twine-user-stylesheet #45: "Styles-BrainFry" */
.office-hub {
    margin-top: 20px;
    padding: 15px;
    border: 1px solid #55BBBC; /* Blue border for office theme */
    background-color: rgba(240, 248, 255, 0.1); /* Light blue background */
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
}

.office-hub h4 {
    margin-top: 15px;
    color: #55BBBC;
    border-bottom: 1px solid #55BBBC;
}

.office-button {
    display: block;
    width: 100%;
    text-align: center;
    padding: 8px 0;
    margin: 5px 0;
    background-color: #333;
    border: none;
    color: #FFF;
    cursor: pointer;
    transition: background-color 0.2s;
}

.office-button:hover {
    background-color: #555;
}
/* twine-user-stylesheet #46: "Styles-CodeBuddyInstaller" */
/* Styles for CodeBuddy Installer */
.codeBuddyInstaller {
    background-color: #111;
    padding: 0px;
    border: 4px solid lime;
    box-shadow: 0px 0px 15px 2px lime !important;
    border-radius: 5px;
    font-family: 'Courier New', Courier, monospace;
    }

.codeBuddyInstaller-content {
    background-color: #111;
    padding-left: 20px;
    padding-right: 20px;
    padding-bottom: 20px;
    font-family: 'Courier New', Courier, monospace;
    }

.codeBuddyInstaller-header {
    background-color: lime;
    color: black;
    width: 100%;
    padding-top: 10px;
    padding-bottom: 10px;
    font-weight: bold;
    }

.codeBuddyInstaller-header-text {
    padding-left: 10px;
    padding-right: 10px;
    }

.codeBuddyInstaller h1 {
    font-size: 2em;
    color: lime;
    }

.codeBuddyInstaller h2 {
    color: lime;
    margin-bottom: 0px;
    }

.codeBuddyInstaller p {
    color: white;
    }

.codeBuddyInstaller-eula {
    color: white;
    margin-top: 20px;
    }

.codeBuddyInstaller-install-button button {
    background-color: lime !important;
    font-weight: bold;
    color: black !important;
    border: none !important;
    padding: 10px !important;
    cursor: pointer !important;
    border-radius: 4px !important;
    margin-top: 20px;
    display: block;
    margin-left: auto;
    margin-right: auto;
    }

.codeBuddyInstaller-install-button button:hover {
    background-color: #aaff00 !important;
    }
/* twine-user-stylesheet #47: "Styles-EroSphere-Kitchen-Dishes" */
.dish-washing-container {
  border: 0px solid yellow;
  position: relative;
  width: 300px;
  height: 300px;
  margin: 0 auto;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none; 
  -o-user-select: none;
  user-select: none;
  display: none; 
}

.dish-washing-canvas {
  position: absolute;
  top: 0;
}

.dish-washing-form {
}

.dish-washing-button {
    height: 40px;
    padding: 0 10px; /* Maintains padding on the sides */
    border: 1px solid #55BBBC; /* Consistent with your design */
    color: #fff;
    font-size: 16px;
    text-transform: uppercase;
    background: #02192a;
    cursor: pointer; /* Changes the mouse cursor to indicate clickable */
    transition: background-color 0.2s, border-color 0.2s; /* Smooth transition for hover effects */
    box-sizing: border-box; /* Ensures border is included in the width */
}

.dish-washing-button:hover {
	border-width: 1px;
	border-color: #66F2C5;
    background: #02192a;
}

.dish-washing-button:active {
    background: #0192a5; /* Darker shade for pressed effect */
    border-color: #33a1b2; /* Slightly darker border */
    transform: translateY(2px); /* Gives a feeling of being pressed down */
}

.dish-washing-button-container {
    display: flex; /* Enables Flexbox layout mode */
    justify-content: center; /* Centers the button horizontally */
    align-items: center; /* Centers the button vertically */
}
/* twine-user-stylesheet #48: "Styles-EroSphere-Inside" */
.erosphere-hub {
margin-top: 20px;
padding: 15px;
border: 1px solid #FF0080; /* Neon pink border for club theme /
background-color: rgba(255, 0, 128, 0.1); / Faint neon pink background */
box-shadow: 0px 0px 10px rgba(255, 20, 147, 0.5);
}

.erosphere-hub h4 {
margin-top: 15px;
color: #FF0080;
border-bottom: 1px solid #FF0080;
}

.erosphere-button {
display: block;
width: 100%;
text-align: center;
padding: 8px 0;
margin: 5px 0;
background-color: #02192a;
border: none;
color: #FF69B4;
cursor: pointer;
transition: background-color 0.2s;
}

.erosphere-button:hover {
background-color: #570A57;
}
/* twine-user-stylesheet #49: "Styles-EroSphere-SIMSPods" */
.simsCatalogueWrapper {
    color: #FF69B4; /* Neon pink text to match the EroSphere theme */
    background-color: rgba(255, 0, 128, 0.1); /* Light neon pink background */
    padding: 15px 15px 15px 15px;
    margin-top: 20px; /* Provides spacing from other content */
    border: 1px solid #FF0080; /* Neon pink border */
    box-shadow: 0px 0px 10px rgba(255, 20, 147, 0.5); /* Soft glow effect */
    text-align: center;
}

.simsCatalogueTitle {
    color: #FF0080; /* Neon pink for titles */
    margin-bottom: 15px;
    font-size: 20px; /* Slightly larger for emphasis */
    text-align: center;
}

.simsCatalogueGrid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); /* Responsive grid */
    gap: 15px; /* Space between grid items */
    justify-content: center; /* Center grid items if they don't fill all columns */
}

.simsOption {
    border: 2px solid #FF0080; /* Neon pink border for each SIMS option */
    background-color: #02192a; /* Dark theme for each option */
    color: #FF69B4; /* Neon pink text color for consistency */
    border-radius: 5px; /* Soft rounded corners */
    overflow: hidden;
    cursor: pointer;
    max-width: 300px; /* Limits the width for consistency */
    margin: 0 auto; /* Centers the SIMS option in its grid cell */
    transition: transform 0.3s ease, border-color 0.3s ease;
}

.simsOption:hover {
    transform: scale(1.05); /* Slight scale effect on hover */
    border-color: #FF69B4; /* Lighter pink on hover for interactivity */
}

.simsThumbnail {
    width: 100%;
    height: auto; /* Maintain aspect ratio */
    display: block;
}

.simsTitle {
    padding: 10px; /* Padding for text within each option */
    font-size: 16px; /* Readable font size */
}

.sims-progress {
  background: rgba(255,255,255,0.1);
  justify-content: flex-start;
  border-radius: 100px;
  align-items: center;
  position: relative;
  padding: 0 5px;
  display: flex;
  height: 30px;
  max-width: 100%;
  min-width: 97%;
}

.sims-progress-value {
  animation: sims-load 2s linear forwards;
  box-shadow: 0 10px 40px -10px #fff;
  border-radius: 50px;
  background: #fff;
  height: 20px;
  width: 0;
}

@keyframes sims-load {
  0% { width: 0; }
  100% { width: 100%; }
}
/* twine-user-stylesheet #50: "Styles-GoOutside" */
/* Map Styles */
.city-map {
  position: relative;
  margin: 20px auto;
  padding: 15px;
  background-size: cover;
  border: 1px solid #55BBBC;
  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
  display: flex;
  flex-wrap: wrap;
  flex-direction: column; /* Stack wrappers vertically */
  align-items: center; /* Align wrappers in the center */
  justify-content: space-around; /* Distributes space around the items */
}

.district-wrapper {
  display: flex;
  flex-wrap: wrap; /* This will allow the items to wrap */
  justify-content: space-between; /* Distributes space between the items */
  width: 100%; /* Ensure the wrapper takes full width */
  margin: 10px 0; /* Spacing between rows */
}

.map-section {
  flex: 1; /* Allows each section to grow */
  margin: 15px; /* Provide some space around the sections */
  min-width: 250px; /* Minimum width before wrapping */
  min-height: 250px;
  padding: 15px;
  background-color: rgba(255, 255, 255, 0.1); /* Slightly white background for content */
  color: #FFFFFF;
  border: 1px solid #55BBBC;
  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
  background-size: cover;
  background-position: center;
}

.map-section-last {
  margin: 15px; /* Provide some space around the sections */
  width: 350px;
  min-height: 250px;
  padding: 15px;
  background-color: rgba(255, 255, 255, 0.1); /* Slightly white background for content */
  color: #FFFFFF;
  border: 1px solid #55BBBC;
  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
  background-size: cover;
  background-position: center;
}

/* Unique background images for each district */
#backlog-map-screen {
  background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('imgs/UI/backlog-location.jpg');
}

#city-center-map-screen {
  background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('imgs/UI/city-center-location.jpg');
}

#industrial-area-map-screen {
  background-image: url('path/to/industrial-area-image.jpg');
}

#pleasure-grid-map-screen {
  background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('imgs/UI/pleasure-grid.jpg');
}

#community-zone-map-screen {
  background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('imgs/locations/hospital/panacea-clinic-outside.webp');
}

.map-section h4 {
  margin-top: 15px;
  text-align: center;
  color: #55BBBC;
  border-bottom: 1px solid #55BBBC;
}

.map-section button {
  display: block;
  width: 100%; /* Match full width like .hub-button */
  margin: 10px 0;
  padding: 8px 0;
  text-align: center; /* Center the text as in .hub-button */
  background-color: #333;
  color: #FFF;
  border: none;
  cursor: pointer;
  transition: background-color 0.2s; /* Match the .hub-button transition speed */
}

.map-section button:hover {
  background-color: #555; /* Match the .hub-button hover state */
}

.map-section-last h4 {
  margin-top: 15px;
  text-align: center;
  color: #55BBBC;
  border-bottom: 1px solid #55BBBC;
}

.map-section-last button {
  display: block;
  width: 100%; /* Match full width like .hub-button */
  margin: 10px 0;
  padding: 8px 0;
  text-align: center; /* Center the text as in .hub-button */
  background-color: #333;
  color: #FFF;
  border: none;
  cursor: pointer;
  transition: background-color 0.2s; /* Match the .hub-button transition speed */
}

.map-section-last button:hover {
  background-color: #555; /* Match the .hub-button hover state */
}
/* twine-user-stylesheet #51: "Styles-Minigame-Bruteforce" */
/* Add to your existing :: ServerBrowsing-styles [stylesheet] */
.bf-desktop-hacking-tool-wrapper {
    background-color: #111;
    box-shadow: 0px 0px 15px 2px lime;
    border: 4px solid lime;
    border-radius: 10px;
    color: white;
    font-family: 'Courier New', Courier, monospace;
    display: flex;
    flex-direction: column;
}

.bf-desktop-hacking-tool-header {
    background-color: lime;
    color: black;
    width: 100%;
    padding-top: 10px;
    padding-bottom: 10px;
    font-weight: bold;
}

.bf-desktop-hacking-tool-header-text {
    margin-left: 10px;
}

.bf-hacking-game {
    text-align: center;
}

.bf-game-instructions {
    margin-bottom: 20px;
}

.bf-word-container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 60px;
    margin-bottom: 20px;
    position: relative;
}

.bf-main-word-container {
    flex-grow: 1;
    display: flex;
    justify-content: center;
}

.bf-main-word {
    visibility: hidden;
    font-size: 2em;
}

.bf-secondary-word {
    visibility: hidden;
    font-size: 1em;
    opacity: 0.7;
    position: absolute;
    left: 50%;
    transform: translateX(70px);
}

.bf-word-input {
    font-size: 1em;
    border: 1px solid #555 !important;
    width: 18em;
}

.bf-progress-bar-container {
    background-color: #111111;
    margin: auto;
    border-radius: 0px;
    width: 19em;
    margin-bottom: 20px;
}

.bf-trace-bar-container {
    width: 100%;
    background-color: #444;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
    position: relative; /* For absolute positioning inside */
    width: 100%;
    background-color: #444;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
    margin-bottom: 0px; /* Added margin-bottom for space below the bar */
}

.bf-progress-bar {
    height: 5px;
    width: 0%;
    background-color: lime;
    border-radius: 0px;
}

.bf-trace-progress-bar-label {
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    padding: 5px;
    color: white;
    z-index: 1;
    pointer-events: none;
    width: 100%;
    text-align: left;
}

.bf-trace-progress-bar {
    height: 20px;
    background-color: red;
    width: 0%;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
    transition: width 0.5s;
}

.bf-start-button, .bf-end-game-button {
    background-color: lime;
    color: black;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    font-weight: bold;
    cursor: pointer;
    text-transform: uppercase;
    margin-left: 0px;
}

.bf-start-button:hover, .bf-end-game-button:hover {
    background-color: #aaff00;
}

.bf-input-fail {
    border: 1px solid red !important;
    color: red !important;
}

.bf-input-success {
    border: 1px solid lime !important;
    color: lime !important;
}

.bf-fail-button {
    background-color: red;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
    text-transform: uppercase;
    margin-left: 5px;
}

.bf-fail-button:hover {
    background-color: darkred;
}
/* twine-user-stylesheet #52: "Styles-Minigame-Coding" */
#hackerGame_hackingOutput {
  color: lime;
  font-family: 'Courier New', monospace;
  padding: 10px;
  margin-left: 20px;
  margin-right: 20px;
  text-align: left;
  height: 300px; /* Adjust to your preference */
  overflow-y: auto; /* Adds vertical scrollbar */
  border: 1px solid #555 !important;
  white-space: pre-wrap; /* Preserves newlines and spaces */
}

#hackerGame_timer, #hackerGame_characterCount, #hackerGame_result {
  margin-top: 10px;
}

button#hackerGame_beginButton {
    background-color: lime;
    color: black;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    font-weight: bold;
    cursor: pointer;
    text-transform: uppercase;
    margin-left: 0px;
}

button#hackerGame_beginButton:hover {
    background-color: #aaff00;
}

.hackerGame_button {
    background-color: lime;
    color: black;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    font-family: 'Courier New', Courier, monospace;
    font-weight: bold;
    cursor: pointer;
    text-transform: uppercase;
    margin-left: 0px;
}

.hackerGame_button:hover {
    background-color: #aaff00;
}

.minigame-coding-wrapper {
    background-color: #111;
    box-shadow: 0px 0px 15px 2px lime;
    border: 4px solid lime;
    border-radius: 10px;
    color: white;
    font-family: 'Courier New', Courier, monospace;
    display: flex;
    flex-direction: column;
}

.minigame-coding-header {
    background-color: lime;
    color: black;
    width: 100%;
    padding-top: 10px;
    padding-bottom: 10px;
    font-weight: bold;
}

.minigame-coding-header-text {
    margin-left: 10px;
}

.minigame-coding-content {
    text-align: center;
}

.minigame-coding-instructions {
    margin-bottom: 20px;
    margin-left: 20px;
    margin-right: 20px;
} 

/* Minigame Progress Bar START */
.minigame-coding-trace-bar-container  {
    width: 100%;
    background-color: #444;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
    position: relative; /* For absolute positioning inside */
    width: 100%;
    background-color: #444;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
    margin-bottom: 0px; /* Added margin-bottom for space below the bar */
}

.minigame-coding-trace-progress-bar-label {
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    padding: 5px;
    color: white;
    z-index: 1;
    pointer-events: none;
    width: 100%;
    text-align: left;
}

.minigame-coding-trace-progress-bar {
    height: 20px;
    background-color: red;
    width: 0%;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
    transition: width 0.5s;
}
/* Minigame Progress Bar END */
/* twine-user-stylesheet #53: "Styles-Minigame-FindPassword" */
/* Terminal styling for minigame */
.minigame-terminal {
    position: relative;
    background-color: black;
    color: lime;
    font-family: 'Courier New', Courier, monospace;
    line-height: 1.5;
    padding: 20px;
    border: 4px solid lime;
    border-radius: 5px;
}

/* Password list */
.minigame-terminal ul {
    list-style-type: none;
    padding: 0;
    margin: 0;
}

.minigame-terminal li {
    display: inline;
    margin-right: 20px;
    white-space: pre-wrap; /* To wrap the text */
}

/* Form and input styling */
.minigame-terminal form {
    display: inline-block;
}

.minigame-terminal #playerGuess {
    background-color: black;
    border: none;
    border-bottom: 2px solid lime;
    color: lime;
    outline: none;
    margin-right: 10px;
}

.minigame-terminal button {
    background-color: lime;
    color: black;
    border: none;
    /*font-weight: bold;*/
    padding: 5px 10px;
    cursor: pointer;
}

/* Timer styling */
.minigame-terminal #timer {
    color: red;
    font-size: 24px;
    font-weight: bold;
}

/* Terminal title */
.minigame-terminal .terminal-title {
    text-align: center;
    margin-bottom: 20px;
    font-size: 24px;
    width: 100%;  /* Make sure it takes up the full width */
    position: relative;  /* Relative to its own space */
    z-index: 1;  /* Ensure it's above other elements if needed */
}

/* New Terminal header */
.minigame-terminal .terminal-header {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 20px;
}

/* Help icon */
.minigame-terminal .help-icon {
  cursor: help;
  font-size: 18px;
  position: absolute;
  top: 10px;  /* Adjust as needed */
  left: 10px;  /* Adjust as needed */
}

/* Tooltip text */
.minigame-terminal .help-icon:hover::after {
  content: attr(data-tooltip);
  display: block;
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background-color: lime;
  color: black;
  padding: 4px 8px;
  white-space: nowrap;
  border-radius: 4px;
  font-size: 12px;
  z-index: 1000;
}

/* Countdown Bar */
.minigame-terminal .countdown-bar-container {
  background-color: black;
}

.minigame-terminal .countdown-bar {
  width: 100%;
  height: 10px;
  background-color: red; 
  transition: width 1s linear;
}
/* twine-user-stylesheet #54: "Styles-Resist-Minigame" */
.minigame-container {
    border: 3px solid #FF69B4;
    padding: 20px;
    margin: 30px auto;
    text-align: center;
    background-color: #121212;
    box-shadow: 0 0 10px #FF69B4;
}

#minigame-container-hidden {
    display: none; 
}

.resist-instructions {
    color: #FFFFFF; /* Improved contrast */
    font-size: 0.8em; /* Larger text for readability */
    margin-bottom: 15px; /* Spacing for better layout */
    padding: 10px; /* Additional padding for visual separation */
    background-color: #242424; /* Slight background contrast */
    border-radius: 5px; /* Rounded corners for visual appeal */
}

.gauge-container {
    border: 2px solid #FF69B4;
    width: 100%;
    height: 20px;
    margin: 20px 0;
    overflow: hidden;
    background-color: #1e1e1e;
}

.gauge {
    height: 100%;
    background-color: #FF0080;
    width: 0%;
    transition: width 0.5s ease-out;
}

.timer {
    margin-bottom: 10px;
    color: #FF69B4;
}

.energy-container {
    display: inline-block;
    font-size: 0.8em; /* Larger text for readability */
    margin-right: 10px;
    background-color: #242424;
    border-radius: 5px;
    padding: 5px 10px;
}

.timer-container {
    display: inline-block;
    font-size: 0.8em; /* Larger text for readability */
    background-color: #242424;
    border-radius: 5px;
    padding: 5px 10px;
}

.energy-value {
    color: #FF69B4;
    font-weight: bold;
}

.timer-value {
    color: #FF69B4;
    font-weight: bold;
}
/* twine-user-stylesheet #55: "Styles-EndOfCurrentStory" */
.social-media {
    text-align: center;
    list-style: none; /* Remove default bullet points */
    padding: 0; /* Remove default padding */
}

.social-media ul {
    list-style-type: none; /* Remove bullets */
    padding: 0; /* Remove padding */
    margin: 0 auto; /* Center the list */
    display: inline-block; /* Align the list items horizontally */
}

.social-media a {
    margin: 0 10px;
}

.social-media img {
    width: 40px;
    height: 40px;
    transition: transform 0.3s;
}

.social-media img:hover {
    transform: scale(1.1);
}
/* twine-user-stylesheet #56: "Styles-Changelog" */
.changelog-box {
    min-width: 600px;
    padding: 15px;
    border: 1px solid #55BBBC;
    background-color: #222;
    color: #FFF;
}

.changelog-box h3 {
    margin-top: 0;
    font-size: 20px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #66F2C5;
}

.changelog-box ul {
    list-style-type: none;
    padding-left: 20px;
}

.changelog-box li {
    margin-bottom: 10px;
    font-size: 16px;
    border-left: 2px solid #55BBBC;
    padding-left: 10px;
}
/* twine-user-stylesheet #57: "Styles-CharacterCreator" */
.character-creator-container {
    max-width: 100%;
    padding: 20px;
    border: 1px solid #55BBBC;
    background-color: rgba(255, 255, 255, 0.1);
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
    color: #fff;
}

.character-creator-container h2 {
    color: #55BBBC;
    text-align: center;
    margin-bottom: 20px;
}

.character-creator-input-group {
    margin-bottom: 15px;
    
}

.character-creator-input-group label {
    display: block;
    margin-bottom: 5px;
}

.character-creator-input-group input[type="text"] {
    width: 100%;
    padding: 8px;
    background-color: #333;
    border: none;
    color: #FFF;
    box-sizing: border-box;
}

.character-creator-avatar-selector {
    display: flex;
    align-items: center;
    justify-content: center;
}

.character-creator-avatar-button {
    display: flex;
    align-items: center;
    justify-content: center;
}

.character-creator-avatar-arrow {
    background-color: #333;
    color: #FFF;
    border: none;
    padding: 10px;
    cursor: pointer;
}

.character-creator-avatar-arrow:hover{
    background-color: #55BBBC;
}

.character-creator-avatar-preview {
    width: 150px;
    height: 150px;
    border: 1px solid #55BBBC;
    margin: 0 15px;
    /* Placeholder for avatar image */
    background-color: #222;
    background-size: cover;
    background-position: center;
}

.female-avatar-preview-link {
    text-align: center;
}
/* twine-user-stylesheet #58: "Styles-CyberPlayer" */
/* CyberMusic Player */
.cyberplayer-container {
    margin: 20px 0;
    padding: 20px;
    border: 1px solid #55BBBC;
    background-color: rgba(255, 255, 255, 0.1);
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
}

.cyberplayer-container-sidebar {
    margin: 10px 0;
    padding: 20px;
    border: 1px solid #55BBBC;
    background-color: black;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
}

.cyberplayer-title {
    margin-bottom: 15px;
    color: #55BBBC;
    text-align: center;
    font-weight: bold;
    font-size: 1.2em;
    border-bottom: 1px solid #55BBBC;
    padding-bottom: 10px;
}

.cyberplayer-playlist {
    overflow-y: auto; /* Allow vertical scrolling */
    margin: 0;
    max-height: 300px;
    padding-left: 0px !important;
    margin-left: 0px !important; 
    font-size: 0.8em;
    list-style-type: none;
}

.cyberplayer-playlist-sidebar {
    overflow-y: auto; /* Allow vertical scrolling */
    margin: 0;
    height: 200px;
    max-height: 200px;
    padding: 0;
    font-size: 0.8em;
    list-style-type: none;
}

.cyberplayer-song {
    cursor: pointer;
    padding: 10px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* subtle border for separation */
    transition: background-color 0.2s, font-weight 0.3s;
    display: flex; /* to structure song title and artist */
    align-items: flex-start;
}

.cyberplayer-song:hover {
    background-color: #555;
    color: #FFF;
}

.cyberplayer-song:last-child {
    border-bottom: none;
}

.cyberplayer-song-title { /* specific styles for song titles */
    font-weight: bold !important; 
    margin-right: 10px; /* some spacing before the hyphen */
        white-space: nowrap; /* Prevents text from wrapping */
    overflow: hidden;   /* Hides overflow content */
    text-overflow: ellipsis; /* Adds "..." for overflowed content */

}

.cyberplayer-song-artist { /* specific styles for artists */
    font-weight: normal;
    margin-left: 10px; /* some spacing after the hyphen */
        white-space: nowrap; /* Prevents text from wrapping */
    overflow: hidden;   /* Hides overflow content */
    text-overflow: ellipsis; /* Adds "..." for overflowed content */

}

.cyberplayer-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.cyberplayer-button {
    padding: 8px 15px;
    background-color: #333;
    border: none;
    color: #FFF;
    cursor: pointer;
    transition: background-color 0.2s;
}

.cyberplayer-button:hover {
    background-color: #555;
}

.cyberplayer-now-playing {
    margin-top: 20px;
    color: #55BBBC;
    border-top: 1px solid #55BBBC;
    padding-top: 10px;
}

.cyberplayer-current-song {
    font-weight: normal;
    color: #FFF;
}

.cyberplayer-control-center {
    text-align: center;
    margin-top: 10px;
}

.cyberplayer-control-button {
    background-color: #333;
    color: #fff;
    border: none;
    padding: 10px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s;
}

.cyberplayer-control-button:hover {
    background-color: #555;
}

/* For Webkit browsers */
.cyberplayer-playlist::-webkit-scrollbar,
.cyberplayer-playlist-sidebar::-webkit-scrollbar {
    width: 8px; /* Width of the scrollbar */
}

.cyberplayer-playlist::-webkit-scrollbar-thumb,
.cyberplayer-playlist-sidebar::-webkit-scrollbar-thumb {
    background-color: #55BBBC; /* Color of the scroll thumb */
}

.cyberplayer-playlist::-webkit-scrollbar-track,
.cyberplayer-playlist-sidebar::-webkit-scrollbar-track {
    background-color: rgba(0, 0, 0, 0.1); /* Color of the scrollbar track */
}

/* For Firefox */
.cyberplayer-playlist,
.cyberplayer-playlist-sidebar {
    scrollbar-width: thin;
    scrollbar-color: #55BBBC rgba(0, 0, 0, 0.1); /* Color of the scroll thumb and scrollbar track */
}

/* Webkit */
*::-webkit-scrollbar {
    width: 8px;
}

*::-webkit-scrollbar-thumb {
    background-color: rgba(105, 105, 105, 0.8);
    border-radius: 4px;
}

*::-webkit-scrollbar-track {
    background-color: rgba(0, 0, 0, 0.2);
}

/* CyberMusic Player Clone */
.cyberplayer-container-sidebar-clone {
    margin: 0px;
    padding: 20px;
    border: 1px solid #55BBBC;
    background-color: rgba(255, 255, 255, 0.1);
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
}

.cyberplayer-title-clone {
    margin-bottom: 15px;
    color: #55BBBC;
    text-align: center;
    font-weight: bold;
    font-size: 1.2em;
    border-bottom: 1px solid #55BBBC;
    padding-bottom: 10px;
}

.cyberplayer-playlist-sidebar-clone {
    overflow-y: auto; /* Allow vertical scrolling */
    margin: 0;
    max-height: 300px;
    padding-left: 0px !important;
    margin-left: 0px !important; 
    font-size: 0.8em;
    list-style-type: none;
}

.cyberplayer-song-clone {
    cursor: pointer;
    padding: 10px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* subtle border for separation */
    transition: background-color 0.2s, font-weight 0.3s;
    display: flex; /* to structure song title and artist */
    align-items: flex-start;
}

.cyberplayer-song-clone:hover {
    background-color: #555;
    color: #FFF;
}

.cyberplayer-song-clone:last-child {
    border-bottom: none;
}

.cyberplayer-song-title-clone { /* specific styles for song titles */
    font-weight: bold !important;
    margin-right: 10px; /* some spacing before the hyphen */
    white-space: nowrap; /* Prevents text from wrapping */
    overflow: hidden;   /* Hides overflow content */
    text-overflow: ellipsis; /* Adds "..." for overflowed content */
}

.cyberplayer-song-artist-clone { /* specific styles for artists */
    font-weight: normal;
    margin-left: 10px; /* some spacing after the hyphen */
    white-space: nowrap; /* Prevents text from wrapping */
    overflow: hidden;   /* Hides overflow content */
    text-overflow: ellipsis; /* Adds "..." for overflowed content */
}

.cyberplayer-control-center-clone {
    display: flex;
    justify-content: space-between;
    text-align: center;
    margin-top: 10px;
}

.cyberplayer-control-button-clone {
    background-color: #333;
    color: #fff;
    border: none;
    padding: 10px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s;
}

.cyberplayer-control-button-clone:hover {
    background-color: #555;
}

.cyberplayer-now-playing-clone {
    margin-top: 20px;
    color: #55BBBC;
    border-top: 1px solid #55BBBC;
    padding-top: 10px;
}

.cyberplayer-current-song-clone {
    font-weight: normal;
    color: #FFF;
}

/* CyberMusic Player Clone - Additional Styles */

/* Container for song details to align buttons to the right */
.song-details-clone {
    flex-grow: 1; /* Allows the song details to fill the space */
}

/* Container for move buttons */
.song-move-buttons {
    margin-left: auto; /* Pushes the buttons to the right */
    margin-right: 10px;
    display: flex; /* Makes this a flex container */
    justify-content: space-between; /* Spaces out the child elements */
}

/* Styles for move up and down buttons */
.move-up-clone, .move-down-clone {
    background-color: #55BBBC; /* Use the theme color for buttons */
    color: white;
    border: none;
    padding: 5px 10px;
    cursor: pointer;
    font-weight: bold;
    margin-left: 5px; /* Space between buttons */
    border-radius: 3px; /* Rounded corners for the buttons */
    transition: background-color 0.3s;
}

.move-up-clone:hover, .move-down-clone:hover {
    background-color: darken(#55BBBC, 10%); /* Slightly darker on hover */
}

/* Ensure flex display for song items */
.cyberplayer-song-clone {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.cyberplayer-shuffle-button {
    background-color: #333;
    color: #fff;
    border: none;
    padding: 10px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s;
}

.cyberplayer-shuffle-button:hover {
    background-color: #555;
}

/* For Webkit browsers - clone */
.cyberplayer-playlist-sidebar-clone::-webkit-scrollbar {
    width: 8px; /* Width of the scrollbar */
}

.cyberplayer-playlist-sidebar-clone::-webkit-scrollbar-thumb {
    background-color: #55BBBC; /* Color of the scroll thumb */
}

.cyberplayer-playlist-sidebar-clone::-webkit-scrollbar-track {
    background-color: rgba(0, 0, 0, 0.1); /* Color of the scrollbar track */
}

/* For Firefox - clone */
.cyberplayer-playlist-sidebar-clone {
    scrollbar-width: thin;
    scrollbar-color: #55BBBC rgba(0, 0, 0, 0.1); /* Color of the scroll thumb and scrollbar track */
}

/* Style for the volume slider specifically */
#volumeControl {
    -webkit-appearance: none; /* Override default appearance */
    appearance: none;
    width: 90%; /* Adjust the width to fit within the control center */
    height: 3px; /* Slim design for minimalistic look */
    background: rgba(255, 255, 255, 0.2); /* Subtle background matching player theme */
    border-radius: 5px; /* Rounded edges */
    outline: none;
    margin-top: 10px;
    transition: background-color 0.3s, transform 0.3s;
}

/* Style for the volume slider thumb */
#volumeControl::-webkit-slider-thumb {
    -webkit-appearance: none; /* Override default appearance */
    appearance: none;
    width: 15px; /* Adjust the width of the thumb */
    height: 15px; /* Adjust the height of the thumb */
    background: #55BBBC; /* Match the color of the thumb to the active state */
    border-radius: 50%; /* Make the thumb circular */
    cursor: pointer; /* Change the cursor on hover */
    transition: background-color 0.3s; /* Add transition for smooth color change */
}

#volumeControl::-moz-range-thumb {
    -moz-appearance: none; /* Override default appearance for Firefox */
    appearance: none;
    width: 15px; /* Adjust the width of the thumb */
    height: 15px; /* Adjust the height of the thumb */
    background: #55BBBC; /* Match the color of the thumb to the active state */
    border-radius: 50%; /* Make the thumb circular */
    cursor: pointer; /* Change the cursor on hover */
    transition: background-color 0.3s; /* Add transition for smooth color change */
}

/* Hover effects for volumeControl thumb */
#volumeControl::-webkit-slider-thumb:hover,
#volumeControl::-moz-range-thumb:hover {
    background: darken(#55BBBC, 10%); /* Darker shade of thumb on hover */
}

/* Active effects for volumeControl thumb */
#volumeControl::-webkit-slider-thumb:active,
#volumeControl::-moz-range-thumb:active {
    background: darken(#55BBBC, 20%); /* Even darker shade of thumb on active state */
}
/* twine-user-stylesheet #59: "Style-Notifications" */
#notify-container {
    position: fixed;
    top: 3em;
    right: -18em;
    width: 16em;
    z-index: 1000;
    background-color: rgba(2, 25, 42, 1);
    border-bottom: 1px solid #55BBBC;
    border-top: 1px solid #55BBBC;
    border-left: 1px solid #55BBBC;
    border-right: 0px;
    border-radius: 0px;
    box-shadow: -5px 5px 10px 0px black;
    font-family: "IBM Plex Mono", "Courier New", monospace;
    transition: right 0.3s;
}

#notify-container.open {
    right: 0em; /* Slide in to visible position */
}

.notify {
    padding: 0.5em;
    color: #fff;
    border-bottom: 1px solid #55BBBC;
    opacity: 0;
    transition: opacity 0.3s;
}

.notify.open {
    opacity: 1; /* Make notification visible */
}

.notify:last-child {
    border-bottom: none;
}

.notify-container-close {
    position: absolute;
    top: -20px;
    left: -17px;
    background: transparent;
    opacity: 0; /* Initially hidden */
    border: none;
    color: #fff;
    font-size: 1.2em;
    cursor: pointer;
    transition: opacity 0.3s; /* Transition for the close button */
}

#notify-container:hover .notify-container-close {
    opacity: 1; /* Show the close button on container hover */
    color: #fff; /* Optional: change color on hover */
}

.notify-container-close:hover {
    color: #66F2C5; /* Change color on button hover */
    background: transparent;
}
/* twine-user-stylesheet #60: "Styles-BottomBar" */
/* Bottom Bar styling - Start 
#bottombar {
	position: fixed;
	left: 0;
	bottom: 0;
	width: 100%;
	height: 5em;
	background-color: #333;
	border-top: 1px solid #55BBBC;
	box-shadow: 0 0 10px 0 #333;
	z-index: 40;
}
#bbblock {
	margin-left: 20em;
	margin-right: 2.5em;
	-o-transition: margin .2s ease-in;
    transition: margin .2s ease-in;
}
#bbtext {
	text-align: center;
    max-width: 54em;
    margin: 0 auto;
}
#ui-bar.stowed~#story #bbblock {
	margin-left: 4.5em;
}
@media screen and (max-width: 1136px) {
	#bbblock {
		margin-left: 19em;
		margin-right: 1.5em;
	}
	#ui-bar.stowed~#story #bbblock {
		margin-left: 3.5em;
	}
}
@media screen and (max-width: 768px) {
	#bbblock {
		margin-left: 3.5em;
	}
}
*/
/* Adjust main story area to avoid overlap 
#story {
    padding-bottom: 12em;
}
*/
/* twine-user-stylesheet #61: "Styles-TopBar" */
/* Top Bar styling - Start */
#topbar {
	position: fixed;
	left: 0;
	top: 0; /* Changed from bottom to top */
	width: 100%;
    min-height: 35px;
	background-color: black; /* Customize your color */
	border-bottom: 1px solid #55BBBC; /* Adjusted from border-top to border-bottom */
    box-shadow: 0px 5px 10px 0px black;
	z-index: 40;
    overflow-x: auto; /* Enable horizontal scrolling */
    white-space: nowrap; /* Ensure items stay in one line */
}

#tbblock {
	margin-left: 18em;
	-o-transition: margin .2s ease-in;
    transition: margin .2s ease-in;
    transition: margin-left 0.5s ease; 
    transition: margin-right 0.5s ease; 
    overflow-x: auto; /* Enable horizontal scrolling */
    white-space: nowrap; /* Ensure items stay in one line */
}

#tbblock-prologue {
	margin-left: 18em;
	margin-right: 0em;
	-o-transition: margin .2s ease-in;
    transition: margin .2s ease-in;
    transition: margin-left 0.5s ease; 
    transition: margin-right 0.5s ease; 
}

#tbblock, #tbblock-prologue {
    transition: margin 0.5s ease;
}


#tbtext {
	text-align: center;
    margin: 0 auto;
    overflow-x: auto; /* Enable horizontal scrolling */
    white-space: nowrap; /* Ensure items stay in one line */
}

.stat-item-top {
    margin: 6px 0;
    align-items: center;
    font-size: 0.8em;
    padding-right: 10px;
    border-right: 1px dashed #55BBBC;
    white-space: nowrap;
    display: inline-block;
}

.stat-item-top-first {
    margin: 6px 0;
    align-items: center;
    font-size: 0.8em;
    padding-right: 10px;
    border-right: 1px dashed #55BBBC;
    white-space: nowrap;
    display: inline-block;
}

.stat-item-top-last {
    margin: 6px 0;
    align-items: center;
    font-size: 0.8em;
    white-space: nowrap;
    display: inline-block;
}

.stat-icon-top {
    font-family: 'Noto Color Emoji', sans-serif;
}
/* twine-user-stylesheet #62: "Style-Popover" */
/* popover.css, by chapel; for use with popover.js; v1.0.0 */

#ui-dialog-body.popover {
    background: transparent;
    border: 0;
    padding: 0;
    overflow: auto;
}

.popover #ui-dialog-titlebar {
    background: transparent;
    min-height: 0px;
}

.popover #ui-dialog-title {
    display: none;
}

.popover #ui-dialog-close {
    position: fixed;
    display: block;
    top: 0;
    right: 0;
    height: 3em;
}

.popover #ui-dialog-close:hover {
    background-color: transparent;
    border-color: transparent;
    color: #c22;
}

#ui-overlay.popover.opaque {
    opacity: 1;
}

#ui-overlay.popover.transparent {
    opacity: 0;
}

#ui-overlay.popover.invert {
    background-color: #f8f8f8;
}

#ui-dialog-body.popover.invert {
    color: #111;
}

#ui-dialog-body.popover img {
    max-width: 100%;
    max-height: 100%;
    height: auto;
    display: block; /* Optional: centers image in the container */
    margin: 0 auto; /* Optional: centers image in the container */
}
/* twine-user-stylesheet #63: "Styles-QuickStart" */
.skip-options {
    display: flex;
    justify-content: space-around;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.skip-option {
    margin-left: 10px;
    margin-right: 10px;
    margin-bottom: 30px;
}

/* .skip-option input[type="radio"] {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-top: -4px;
} */

.quickstart-button button {
    border: 2px solid #00ffea; /* Updated border size and color */
    color: #00ffea !important; /* Updated text color */
    background: #1C1C1C; /* Updated background color */
    cursor: pointer; /* Kept the same for functionality */
    font-weight: bold;
    transition: background-color 0.2s, border-color 0.2s; /* Kept the same for smooth transition */
    box-sizing: border-box; /* Kept the same for sizing consistency */
}

.quickstart-button:hover button {
    border: 2px solid #00ffea; /* Updated border size and color */
    background: #02192a; /* Kept original hover background for a slight change on hover */
}

.quickstart-button button:active {
    background: #0192a5; /* Kept original active background for depth */
    border-color: #33a1b2; /* Kept original active border color for consistency */
    transform: translateY(2px); /* Kept the pressed effect */
}

.quickstart-config-section {
    border: 1px solid #55BBBC;
    padding: 20px;
    color: #55BBBC;
    background-color: #1C1C1C;
    margin-bottom: 20px;
}

.quickstart-config-section h2 {
    margin-bottom: 30px; /* Space below the heading */
    padding-bottom: 5px; /* Optional: padding below the text */
    border-bottom: 1px solid #55BBBC; /* Optional: a line to underline the heading */
    margin-top: 0px;
    padding-top: 0px;
    font-size: 1.5em; /* Adjust size as needed */
}

.quickstart-config-item {
    margin-bottom: 10px;
    color: #ffffff;
}

.quickstart-config-item label {
    margin-right: 10px;
}

.back-done-buttons {
    text-align: center;
}

.back-done-buttons button {
    margin: 0 5px;
}
/* twine-user-stylesheet #64: "Styles-RightSidebar" */
/* Custom Scrollbar for Right Sidebar Content */
#right-ui-bar-body::-webkit-scrollbar {
    width: 7px; /* Make the scrollbar 1px thin */
}

#right-ui-bar-body::-webkit-scrollbar-track {
    background: transparent; /* Transparent track so it doesn't stand out */
}

#right-ui-bar-body::-webkit-scrollbar-thumb {
    background-color: #555; /* Adjust thumb color to match your design */
    border-radius: 3px; /* Make it flat if preferred, or you can keep some roundness */
}

/* Firefox */
#right-ui-bar-body {
    scrollbar-width: thin; /* "auto" or "thin" */
    scrollbar-color: #555 transparent; /* thumb and track color */
}

/* Add padding to the right of the content to create separation from the main content scrollbar */
#right-ui-bar-body {
    padding-right: 10px; /* Adjust as necessary to create space between scrollbars */
}

#right-ui-bar {
	background-color: black;
	border-left: 1px solid #55BBBC;
	text-align: center;
}
#right-ui-bar-toggle {
	font-size: 1.2em;
	line-height: inherit;
	color: #eee;
	background-color: black;
	border: 1px solid #55BBBC;
}

#right-ui-bar-toggle:hover {
	border: 1px solid #66F2C5;
}

#right-ui-bar-toggle:before {
	font-family: tme-fa-icons;
	font-style: normal;
	font-weight: 400;
	font-variant: normal;
	text-transform: none;
	line-height: 1;
	speak: none;
}

/* Layout and Positioning of the Right UI Bar. */
#right-ui-bar {
	position: fixed;
	z-index: 50;
	top: 0;
	right: 0;
	width: 284px; /* 17.5em */
	height: 100%;
	margin: 0;
	padding: 0;
	-webkit-transition: right .2s ease-in;
	-o-transition: right .2s ease-in;
	transition: right .2s ease-in;
}
#right-ui-bar-tray {
	position: absolute;
	top: .2em;
	left: 0;
	right: 0;
}
#right-ui-bar-toggle {
	display: block;
	position: absolute;
	top: 0;
	left: 0;
	border-left: none;
	padding: .3em .45em .25em;
	-webkit-user-select: none;
}

#right-ui-bar-toggle:before {
	content: "\e81e";
}
#right-ui-bar-body {
	height: 90%;
	height: calc(100% - 2.5em);
	margin: 2.5em 0;
	padding: 0 1.5em;
}
#right-ui-bar-body {
	line-height: 1.5;
	overflow: auto;
}

/* Stowing of the Right UI Bar. */
#right-ui-bar.stowed {
	right: -15.5em;
}
#right-ui-bar.stowed #right-ui-bar-toggle {
	padding: .3em .55em .25em .35em;
}
#right-ui-bar.stowed #right-ui-bar-toggle:before {
	content: "\e81d";
}
#right-ui-bar.stowed #right-ui-bar-body {
	visibility: hidden;
	-webkit-transition: visibility .2s step-end;
	-o-transition: visibility .2s step-end;
	transition: visibility .2s step-end;
}

#right-ui-bar.stowed~#story {
	margin-right: 4.5em;
}




/* Container for the Synapse Steady VX Synergy Level */
.synapse-steady-vx-container {
    padding: 15px;
    background-color: #000; /* Dark background for contrast */
    color: #fff; /* Light text for readability */
    margin: 10px 0;
    border-radius: 5px;
    font-family: Arial, sans-serif;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2); /* Soft shadow for depth */
}

/* Heading style */
.synapse-box {
    overflow-y: auto;
    border: 1px solid #55BBBC;
    padding: 15px;
    margin-bottom: 10px;
    background-color: black;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
}

.synapse-box h3 {
    color: #55BBBC;
    margin: 0;
    padding-bottom: 10px;
    font-size: 1.2em;
    border-bottom: 1px solid #55BBBC;
    text-align: center;
}

.synergy-progress {
    width: 100%;
    height: 20px;
    background-color: #333;
    border-radius: 10px;
    margin-top: 5px;
}

.synergy-bar {
    height: 100%;
    background-color: #55BBBC;
    border-radius: 10px;
    transition: width 0.5s ease-in-out;
}

/* Add this new class for the resistance energy container */
.resistance-energy-container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 5px;
	margin-bottom: 15px;
}

.resistance-energy-icon {
    width: 20px;
    height: 20px;
    background-color: #FF6B6B; /* Red color to represent resistance energy */
    border-radius: 50%;
    margin: 0 2px;
    transition: background-color 0.3s ease-in-out;
}

.resistance-energy-icon.empty {
    background-color: #333; /* Dark color to represent empty resistance energy */
}

.condition-level-text, .synergy-level-text {
    padding-top: 0px;
    font-size: 0.8em;
    text-align: center;
    font-weight: bold;
	margin-block-end: 0px;
}

.resistance-level-text {
    padding-top: 20px;
    font-size: 0.8em;
    text-align: center;
    font-weight: bold;
    margin-block-start: 0em;
	margin-block-end: 0px;
}

.synergy-level-description {
    padding-top: 0px;
    font-size: 0.8em;
    text-align: center;
	margin-block-end: 0px;
    border-bottom: 1px dashed #55BBBC;
    padding-bottom: 20px;
}

.brain-icon {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 25px auto 20px;
}

.resistance-progress {
    position: relative; /* Add relative positioning */
    width: 100%;
    height: 20px;
    background-color: #333;
    border-radius: 10px;
    margin-top: 5px;
    display: flex; /* Use flexbox to center the text */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
}

.resistance-bar {
    height: 100%;
    background-color: #55BBBC;
    border-radius: 10px 10px 10px 10px; /* Adjust the border-radius for a smoother look */
    transition: width 0.5s ease-in-out;
    position: absolute; /* Make it absolutely positioned */
    top: 0;
    left: 0;
}

.resistance-progress-percentage {
    position: relative; /* Make sure the text is relative to the flex container */
    color: #fff; /* Ensure text color is white for visibility */
    font-size: 0.8em;
    z-index: 2; /* Higher z-index to ensure it's on top */
}
/* twine-user-stylesheet #65: "Style-LeftSidebar" */
#ui-bar.stowed~#story {
    margin-left: 4.5em;
}

@media screen and (max-width: 1136px) {
    #story {
        margin-right: 2.5em;
    }
}
/* twine-user-stylesheet #66: "Styles-NotificationsBox" */
/* Notifications Box Styles */
.notifications-box {
   overflow-y: auto;
    border: 1px solid #55BBBC;
    padding: 15px;
    margin: 0px 0px 10px 0px;
    background-color: black;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    /* max-height: 200px; */
}

.notifications-box h3 {
    color: #55BBBC;
    margin: 0;
    padding-bottom: 10px;
    font-size: 1.2em;
    border-bottom: 1px solid #55BBBC;
    text-align: center;
}

.notifications-box ul {
    list-style-type: none;
    padding: 0;
    font-size: 0.8em;
}

.notifications-box p {
    padding: 8px 0;
    font-size: 0.8em;
    text-align: center;
    
}

.notifications-box li {
    padding: 8px 0;
    border-bottom: 1px dashed #ddd;
}

.notifications-box li:last-child {
    border-bottom: none;
}
/* twine-user-stylesheet #67: "Styles-TodoBox" */
.todo-box {
   overflow-y: auto;
    border: 1px solid #55BBBC;
    padding: 15px;
    margin: 0px 0;
    background-color: black;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    max-height: 200px;
}

.todo-box h3 {
    color: #55BBBC;
    margin: 0;
    padding-bottom: 10px;
    font-size: 1.2em;
    border-bottom: 1px solid #55BBBC;
    text-align: center;
}

.todo-box ul {
    list-style-type: none;
    padding: 0;
    font-size: 0.8em;
}

.todo-box li {
    padding: 10px 0;
    border-bottom: 1px dashed #55BBBC;
}

.todo-box li:last-child {
    border-bottom: none;
}
/* twine-user-stylesheet #68: "Styles-StatsBox" */
.stats-box {
    overflow-y: auto;
    border: 1px solid #55BBBC;
    padding: 15px;
    margin-bottom: 10px;
    background-color: black;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    max-height: 400px;
}

.stats-box h3 {
    color: #55BBBC;
    margin: 0;
    padding-bottom: 10px;
    font-size: 1.2em;
    border-bottom: 1px solid #55BBBC;
    text-align: center;
}

.stats-box ul {
    list-style-type: none;
    padding: 0;
    font-size: 0.8em;
}

.stats-box li {
    padding: 8px 0;
    border-bottom: 1px dashed #ddd;
}

.stats-box li:last-child {
    border-bottom: none;
}

.stat-item {
    display: flex;
    justify-content: space-between;
    margin: 10px 0;
    align-items: center;
    font-size: 0.8em;
    padding-bottom: 10px;
    border-bottom: 1px dashed #55BBBC;
}

.stat-item-ap {
    display: inline-block;
    justify-content: space-between;
    /* margin: 10px 0; */
    align-items: center;
    font-size: 0.8em;
    /* padding-bottom: 10px; */
}

.stat-item-ap .stat-label {
    margin-right: auto;
    text-align: left;
}

.stat-item-ap .stat-icon {
    margin-right: 8px;
    font-family: 'Noto Color Emoji', sans-serif;
}

.stat-label {
    font-weight: bold;
    color: #FFFFFF;
    text-align: left;
}

.stat-data {
    font-weight: normal;
    color: #FFFFFF; 
    margin-left: auto; 
    text-align: right;
}

.stat-icon {
    margin-right: 8px;
    font-family: 'Noto Color Emoji', sans-serif;
}

/* Removes the border-bottom from the last stat-item */
.stat-item:last-child {
    border-bottom: none;
}

.quick-access-box {
    border: 1px solid #55BBBC;
    padding: 15px;
    margin-bottom: 10px;
    background-color: black;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
}

.quick-access-box h3 {
    color: #55BBBC;
    margin: 0;
    padding-bottom: 10px;
    font-size: 1.2em;
    border-bottom: 1px solid #55BBBC;
    text-align: center;
}

.quick-access-buttons {
    display: flex;
    justify-content: space-around;
    margin-top: 0.5em;
}

.quick-access-buttons button {
    background-color: #55BBBC;
    color: black;
    width: 40px;
    padding: 8px 8px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.quick-access-buttons-top {
    display: flex;
    justify-content: space-around;
    margin-top: 1em;
}

.quick-access-buttons-top button {
    background-color: #55BBBC;
    color: black;
    width: 100%;
    padding: 8px 8px;
    margin-left: 4px;
    margin-right: 4px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.quick-access-buttons-top button i {
    font-size: 1.2em;
}

/* Hover Style */
.quick-access-buttons-top button:hover {
    background-color: #66cccc; /* Slightly lighter shade on hover */
}

/* Active (Click) Style */
.quick-access-buttons-top button:active {
    transform: scale(0.95); /* Slightly scale down the button when clicked */
}

.quick-access-buttons button i {
    font-size: 1.2em;
}

/* Hover Style */
.quick-access-buttons button:hover {
    background-color: #66cccc; /* Slightly lighter shade on hover */
}

/* Active (Click) Style */
.quick-access-buttons button:active {
    transform: scale(0.95); /* Slightly scale down the button when clicked */
}
/* twine-user-stylesheet #69: "Styles-SpeechBoxes" */
.say {
    border: 1px solid #606060; /* Neutral gray border */
    background-color: rgba(28, 28, 28, 0.9); /* Dark background for text contrast */
    /* color: #CCCCCC;  Light gray for text, maintaining a neutral palette */
    overflow: auto;
    padding: 10px;
}

.say:hover {
}

.say-player {
    border: 1px solid #55BBBC; /* Neutral gray border */
    background-color: #091929; /* Dark background for text contrast */
    /* color: #CCCCCC;  Light gray for text, maintaining a neutral palette */
    overflow: auto;
    padding: 10px;
}

.say-player:hover {
}

.say > img {
    max-width: 15%;
    background-color: rgba(28, 28, 28, 1);
    float: left;
    margin-right: 1em;
    border: 1px solid #606060;
}

.say.player > img {
    max-width: 15%;
    background-color: rgba(28, 28, 28, 1);
    float: left;
    margin-right: 1em;
    border: 1px solid #55BBBC;
}

.say > p:first-of-type {
    font-weight: bold;
    margin: 0.2em 0;
    border-bottom: 1px solid #606060; /* Neutral line under the name */
}

.say.player > p:first-of-type {
    font-weight: bold;
    margin: 0.2em 0;
    border-bottom: 1px solid #55BBBC; /* Neutral line under the name */
}

.say > p:last-of-type {
    padding: 0.5em;
    margin: 0;
}

/* Additional styles for character names and subtle text effects */
.text-glow {
    color: #CCCCCC; /* Light gray for names, removing the glow for a cleaner look */
}

.inner-thought {
    border: 1px dashed #808080; /* Dashed border for a distinct look */
    background-color: rgba(50, 50, 50, 0.9); /* Slightly lighter dark background */
/*    color: #B0B0B0; Soft gray for text, indicating thought */
    padding: 10px;
    font-style: italic; /* Italicize text to indicate thought */
    border-radius: 0px; /* Slightly rounded corners */
}

.inner-thought:hover {
}

.inner-thought > p {
    margin: 0; /* Remove default paragraph margins */
}

.ai-thought {
    border: 1px dashed #FF69B4; /* Hot pink dashed border  */
    background-color: rgba(50, 50, 50, 0.7); /* Darker background for contrast */
    color: #FFC0CB; /* Soft, light pink for text */
    padding: 10px; /* Slightly more padding for a softer feel */
    font-style: italic; 
    border-radius: 0px; /* Softer, more feminine curves */
}

.ai-thought:hover {
    box-shadow: 0px 0px 10px 2px rgba(255, 105, 180, 0.5); /* Subtle pink glow  */
}

.ai-thought > p {
    margin: 0; 
}

.narrator {}

.ava.say {
    border: 1px solid #FF69B4; /* Hot pink dashed border for a distinctive look */
    background-color: rgba(50, 50, 50, 0.7); /* Darker background for contrast */
    color: #FFC0CB; /* Soft, light pink for text, adding a feminine touch */
    padding: 10px; /* Slightly more padding for a softer feel */
    border-radius: 0px; /* Softer, more feminine curves */
}

.ava.say > img {
    max-width: 15%;
    background-color: rgba(28, 28, 28, 1);
    float: left;
    margin-right: 1em;
    border: 1px solid #FF69B4;
}

.ava.say > p:first-of-type {
    font-weight: bold;
    margin: 0.2em 0;
    border-bottom: 1px solid #FF69B4; /* Neutral line under the name */
}

.ava.say > p:last-of-type {
    /* Style adjustments for AVA's speech text */
}
/* twine-user-stylesheet #70: "Styles-SpeechBoxes-Chat" */
.say-chat {
    background-color: #222; /* Dark background for chat bubble */
    color: white; /* White text for readability */
    border-radius: 10px; /* Rounded corners for bubble-like appearance */
    margin: 0 0 10px 0; /* Space between messages */
    padding-top: 10px; /* Padding inside the bubble */
    padding-left: 10px; /* Padding inside the bubble */
    padding-right: 10px; /* Padding inside the bubble */
    padding-bottom:10px; /* Padding inside the bubble */
    max-width: 100%; /* Max width for chat bubble */
    border: 1px solid gray;
}

.say-chat img {
    max-width: 100%;
    max-height: 100%;   
}

.say-chat.sender { /* Additional class to differentiate sender and receiver */
    background-color: #111; /* Different background for sender */
    border: 1px solid lime;
    color: white; /* Dark text for contrast */
}

.say-chat > img {
    display: none; /* Hide images in chat bubbles */
}

.say-chat > p:first-of-type {
    font-weight: bold;
    margin-block-start: 0em;
    margin-bottom: 0.5em; /* Space between name and message */
    font-size: 0.9em; /* Slightly smaller font size for name */
    border-bottom: 1px dotted gray;
}

.say-chat > p:last-of-type {
    margin: 0; /* No additional margin needed */
}

/* Additional Styling for IM App */
.im-chat-pane .say-chat {
    word-wrap: break-word; /* Ensure long words don't overflow */
}
/* twine-user-stylesheet #71: "Styles-StartScreen" */
.start-warning-box {
    width: 80%;
    margin: auto;
    padding: 20px;
    text-align: center;
    border: 1px solid #55BBBC;
    background-color: #222;
    color: #FFF;
    border-radius: 10px;
    box-shadow: 0px 0px 10px 2px #55BBBC;
    position: relative;
}

.start-warning-box h2 {
    margin-top: 0;
    font-size: 24px;
    text-transform: uppercase;
    letter-spacing: 2px;
}

.start-warning-box p {
    margin-bottom: 0;
    font-size: 18px;
}

.start-button {
    display: flex;
    justify-content: center;
    align-items: center;
    /* New */
    margin: 20px 10px;
    position: relative;
    justify-content: center;
    /* New end */
}

.start-button button {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 60px !important;
    width: 250px;
    border: 1px solid #55BBBC;
    color: #fff;
    font-weight: bold !important;
    font-size: 20px !important;
    text-transform: uppercase;
    background: #02192a;
}

.start-button button:hover {
    border-color: #66F2C5; /* Brighter border color for better visibility */
    background: #03334B; /* Slightly lighter or different color to stand out */
    color: #EFEFEF; /* Optional: Change text color to enhance readability */
    box-shadow: 0 0 10px #66F2C5; /* Soft glow effect for emphasis */
    transform: scale(1.05); /* Slight increase in size to indicate actionability */
    transition: all 0.3s ease; /* Smooth transition for all changes */
}

.skip-button {
    position: absolute; /* Position it relative to its positioned parent */
    top: 20px; /* Adjust as needed */
    right: 20px; /* Place it in the top-right corner or adjust as you prefer */
    padding: 10px 20px; /* Smaller than the Start button */
    background-color: #444; /* Less prominent color */
    color: #FFF; /* Text color */
    font-size: 16px; /* Smaller font size */
    border: none; /* Style as needed */
    cursor: pointer; /* Make it look clickable */
    border-radius: 5px; /* Optional: rounded corners */
}

.social-icon-container {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 1vh;
}

.social-icon {
    background-color: #55BBBC; /* Background color */
    border-radius: 50%; /* Rounded corners */
    width: 40px; /* Fixed width for the circle */
    height: 40px; /* Fixed height for the circle */
    display: flex; /* Use Flexbox for centering icon inside the circle */
    justify-content: center; /* Center horizontally inside the circle */
    align-items: center; /* Center vertically inside the circle */
    margin: 5px; /* Space between icons */
    color: white; /* Icon color */
    font-size: 24px;
}

.social-icon:hover {
    box-shadow: 0px 0px 10px 2px #55BBBC;
}

a.link-external:after {
    content: "";
}

.social-icon-link {
    display: inline-block;
    text-decoration: none; /* Removes underline from icons */
    margin: 0px !important;
}
/* twine-user-stylesheet #72: "simple-inventory.css" */
/* Simple Inventory, for SugarCube 2, by Chapel
v3.0.0, 2024-02-20, 1d95a49488446cafefaa956e53345395394e4b51 */
ul.simple-inventory-list{margin:0 auto;padding:0}.simple-inventory-listing{list-style:none;padding:.3rem .3rem .3rem 1rem;display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr}.simple-inventory-listing:nth-child(2n){background-color:#000}.simple-inventory-listing>a,.simple-inventory-listing>span{display:inline-block}.all-listing.simple-inventory-listing{border-top:1px solid #fafafa;background-color:transparent}.drop-link{color:#e33}.drop-link:active,.drop-link:focus,.drop-link:hover{color:#f88}.simple-inventory-filter{text-align:right}.simple-inventory-filter input{display:inline-block}
/* End Simple Inventory */
/* twine-user-stylesheet #73: "Styles-MacrosWidgets" */
/* Widget Styles for Centering */
.morality-change, .relationship-change, .action-points-change, .sexuality-change, .gender-change {
    text-align: center; /* Center align the text */
    display: flex; /* Use flexbox for layout */
    justify-content: center; /* Center the content horizontally */
    align-items: center; /* Center the content vertically */
}

.sexuality-change {
    margin-bottom: 5px;
}

/* Optional: Add specific styles for increase and decrease messages */
.morality-increase, .relationship-increase, .action-points-increase, .gender-increase {
    color: lime; /* Green color for increases */
}

.morality-decrease, .relationship-decrease, .action-points-decrease, .sexuality-dominant, .gender-decrease {
    color: red; /* Red color for decreases */
}

.sexuality-submissive {
    color: #FF69B4;
}

.item-change {
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
}

.item-receive-message {
    color: lime; /* Green color for item received */
}

.item-lose-message {
    color: red; /* Red color for item lost */
}
/* twine-user-stylesheet #74: "click-to-proceed.css" */
.--macro-ctp-hidden {
	display: none;
}

.--macro-ctp-t8n {
	animation: macro-ctp-t8n 400ms ease-in;
}

@keyframes macro-ctp-t8n {
	from { opacity: 0; }
	to { opacity: 1; }
}
/* twine-user-stylesheet #75: "Styles-Chapters" */
.chapter-transition-container {
    max-width: 100%;
    padding: 40px;
    margin-top: 50px;
    text-align: center;
    background-color: #000; /* Pure black background */
    color: #55BBBC; /* Light blue text for cyberpunk feel */
    overflow: hidden; /* Ensures that no overflow occurs from animations */
}

.chapter-transition-container h2 {
    font-size: 72px; /* Larger font size for impact */
    margin: 0 auto 15px;
    font-family: 'Orbitron', sans-serif; /* Cyberpunk-style font with fallback */
    text-shadow: 0 0 20px #55BBBC; /* Enhanced glow effect for text */
    position: relative;
    display: inline-block;
}

.neon-flicker {
    font-size: 72px; /* Maintain larger font size for impact */
    font-family: 'Orbitron', sans-serif; /* Cyberpunk-style font with fallback */
    color: #FFFFFF; /* Change color to white for better contrast */
    text-shadow: 0 0 10px #55BBBC, 0 0 20px #55BBBC; /* Maintain base glow */
    animation: neonFlicker 1.5s infinite alternate; /* Flickering animation */
    -webkit-text-stroke: 0.75px #000; /* Slightly thicker text stroke */
*/
}

@keyframes neonFlicker {
    0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
        text-shadow: 0 0 10px #55BBBC, 0 0 20px #55BBBC, 0 0 30px #55BBBC, 0 0 40px #55BBBC, 0 0 70px #55BBBC;
        color: #FFFFFF;
    }
    20%, 24%, 55% {        
        text-shadow: 0 0 5px #55BBBC, 0 0 10px #55BBBC, 0 0 15px #55BBBC, 0 0 20px #55BBBC, 0 0 35px #55BBBC;
        color: #669999;
    }
}

/*
.chapter-transition-container h2:after {
    content: '';
    position: absolute;
    left: 0;
    top: 100%;
    width: 100%;
    height: 2px;
    background: linear-gradient(to right, transparent, #55BBBC, transparent);
    animation: underlineGlow 2s infinite alternate;
}

@keyframes underlineGlow {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}*/
/* twine-user-stylesheet #76: "Styles-GameplaySettings" */
.gameplay-settings-container {
    max-width: 100%;
    padding: 20px;
    border: 1px solid #55BBBC;
    background-color: rgba(255, 255, 255, 0.1);
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
    color: #fff;
}

.gameplay-settings-container h2 {
    color: #55BBBC;
    text-align: center;
    margin-bottom: 20px;
}

.gameplay-settings-input-group {
    margin-bottom: 15px;
}

.gameplay-settings-input-group label {
    display: block;
    margin-bottom: 5px;
}

.gameplay-settings-input-group select {
    width: 100%;
    padding: 8px;
    background-color: #333;
    border: none;
    color: #FFF;
    box-sizing: border-box;
}</style><script role="script" id="twine-user-script" type="text/twine-javascript">/* twine-user-script #1: "StoryJavaScript" */
// Define a custom namespace on the window object if it doesn't already exist
window.MindWare = window.MindWare || {};

// SugarCube config
Config.history.maxStates = 10;
// Config.saves.autoload = "prompt";
Config.saves.autosave = true;

config.saves.isAllowed = function () {
	if (passage() === "Start") {
		return false;
	}
	return true;
};

// $(document).one(':enginerestart', Save.autosave.delete);

MindWare.retrieveFragmentA = function() {
    return "YWR2"; 
};

MindWare.retrieveFragmentB = function() {
    return "ZW50"; 
};

MindWare.retrieveFragmentC = function() {
    return "dXJl"; 
};

MindWare.retrieveFragmentD = function() {
    return ""; 
};

MindWare.revealSecret = function() {
    var encodedSecret = this.retrieveFragmentA() + this.retrieveFragmentB() + this.retrieveFragmentC() + this.retrieveFragmentD();
    var decodedSecret = atob(encodedSecret);
    return decodedSecret;
};

// Function to preload an image and store it in a cache
MindWare.preloadImage = function(imagePath) {
    if (!MindWare._imageCache) {
        MindWare._imageCache = {};
    }

    if (!MindWare._imageCache[imagePath]) {
        var img = new Image();
        img.onload = function() {
            console.log("Image successfully loaded: " + imagePath);
        };
        img.onerror = function() {
            console.error("Failed to load image: " + imagePath);
        };
        img.src = imagePath;
        MindWare._imageCache[imagePath] = img;
    } else {
        console.log("Image already loaded: " + imagePath);
    }
};

// Function to remove an image from the cache to free up resources
MindWare.forgetImage = function(imagePath) {
    if (MindWare._imageCache && MindWare._imageCache[imagePath]) {
        delete MindWare._imageCache[imagePath];
        console.log("Image removed from cache: " + imagePath);
    } else {
        console.log("No image found in cache for: " + imagePath);
    }
};

// Usage
// <<run MindWare.preloadImage("path-to-image")>>
// <<run MindWare.forgetImage("path-to-image")>>


// OLD 
// (function () {
//     var preload = ["imgs/hypno/black-tunnel.gif"];

//     window._ImageCache = preload.map(function (url) {
//         var image = document.createElement('img');

//         // Log when an image starts loading
//         image.onload = function() {
//             console.log("Image Loaded: ", url); 
//         };

//         // Log if there's an error loading an image
//         image.onerror = function() {
//             console.error("Error loading image: ", url);
//         };

//         image.src = url;
//         return image;
//     });
// })();

// // Font size buttons
// if (document.location.href.toLowerCase().includes("/temp/") || document.location.href.toLowerCase().includes("/private/") || hasOwnProperty.call(window, "storyFormat")) {
// 	setup.Path = "C:/Games/Twine_Sample_Code/";  // Running inside Twine application
// } else { 
// 	setup.Path = "";  // Running in a browser
// }
// setup.ImagePath = setup.Path + "images/";

// fontSize: Increase or decrease passage font size by "value" pixels.
window.fontSize = function(value) {
	$("#story").css("font-size", (parseInt($("#story").css("font-size")) + value) + "px");
};

// Change window title
document.title = "MindWare - Infected Identity";

function setFavicon() {
  // Set regular favicon
  var faviconLink = document.createElement('link');
  faviconLink.type = 'image/x-icon';
  faviconLink.rel = 'icon';
  faviconLink.href = 'imgs/UI/favicon/favicon.ico';
  document.getElementsByTagName('head')[0].appendChild(faviconLink);

  // Set Apple Touch Icon
  var appleIconLink = document.createElement('link');
  appleIconLink.rel = 'apple-touch-icon';
  appleIconLink.sizes = '180x180'; 
  appleIconLink.href = 'imgs/UI/favicon/apple-touch-icon.png'; 
  document.getElementsByTagName('head')[0].appendChild(appleIconLink);
}

// Call the function to set the icons when the story starts
setFavicon();

// This function, window.createUniqueId, generates a unique string based on a random number, which is suitable for use as an ID.
MindWare.createUniqueId = function() {
    return 'id-' + Math.random().toString(36).substr(2, 9);
};

// JavaScript function to shuffle an array
MindWare.shuffleArray = function(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]]; // Swap elements
        console.log(array);
    }
}

// Returns a random index from an array
MindWare.getRandomIndex = function(array) {
    if (!Array.isArray(array) || array.length === 0) {
        return -1; // Return -1 to indicate an empty or invalid array
    }

    // Calculate and return a random index
    return Math.floor(Math.random() * array.length);
};

// // Sexuality
// MindWare.getSexualityStatus = function() {
//     var playerSexuality = State.variables.playerSexuality;

//     if (playerSexuality >= 0 && playerSexuality <= 20) {
//         return "Submissive";
//     } else if (playerSexuality >= 21 && playerSexuality <= 40) {
//         return "Yielding";
//     } else if (playerSexuality >= 41 && playerSexuality <= 60) {
//         return "Balanced";
//     } else if (playerSexuality >= 61 && playerSexuality <= 80) {
//         return "Assertive";
//     } else if (playerSexuality >= 81 && playerSexuality <= 100) {
//         return "Dominant";
//     } else {
//         return "Undefined"; // In case $playerSexuality is outside the 0-100 range
//     }
// };
/* twine-user-script #2: "Script-Dialogs" */
// Add a new dialog to a character's dialog list
// Example usage:
// MindWare.addDialog('trixBrainFryDialogs', 'New Topic', 'PassageName');

MindWare.addDialog = function(characterDialogVar, topic, passage, unlocked = true, isNew = true) {
    // Ensure the character's dialog variable exists in State.variables
    if (typeof State.variables[characterDialogVar] !== 'object') {
        console.log("Creating new dialog object for " + characterDialogVar);
        State.variables[characterDialogVar] = {};
    }

    // Check if the topic already exists to provide appropriate feedback
    if (State.variables[characterDialogVar][topic]) {
        console.log("Updating existing dialog topic '" + topic + "' for " + characterDialogVar);
    } else {
        console.log("Adding new dialog topic '" + topic + "' for " + characterDialogVar);
    }

    // Add the new dialog topic to the specified character's dialog list
    State.variables[characterDialogVar][topic] = {
        unlocked: unlocked,
        isNew: isNew,
        passage: passage
    };

    // Confirm addition/update of dialog
    if (State.variables[characterDialogVar][topic] && State.variables[characterDialogVar][topic].passage === passage) {
        console.log("Dialog for '" + topic + "' added/updated successfully in " + characterDialogVar);
    } else {
        console.log("Failed to add/update dialog for '" + topic + "' in " + characterDialogVar);
    }
};


// Add a new dialog 
// MindWare.addDialog("trix", "New Topic Title", true, true, "NewTopicPassage");
// MindWare.addDialog("ray", "Another Topic Title", true, false, "AnotherTopicPassage");

// MindWare.addDialog = function(character, topicTitle, unlocked, isNew, passageName) {
//     // Construct the name of the dialog object variable
//     var dialogVariableName = "$" + character + "BrainFryDialogs";

//     // Ensure the dialog object for the specified character exists
//     if (typeof State.variables[dialogVariableName] === 'undefined') {
//         State.variables[dialogVariableName] = {};
//     }

//     // Add or update the dialog topic in the character's dialog object
//     State.variables[dialogVariableName][topicTitle] = {
//         "unlocked": unlocked,
//         "isNew": isNew,
//         "passage": passageName
//     };
// };


// Display a dialog -- NOT USED CURRENTLY 
// Add this in your JavaScript section
MindWare.displayDialog = function(objectName, key) {
    // Access the object from the global state
    var dialogObject = State.variables[objectName];
    if (dialogObject && dialogObject[key] && dialogObject[key].passage) {
        var passageName = dialogObject[key].passage;

        // Check if the passage exists and display it
        if (Story.has(passageName)) {
            jQuery('#dialog-content').empty().wiki(Story.get(passageName).processText());
        } else {
            console.error('No such passage: ' + passageName);
        }
    } else {
        console.error('Invalid object or key: ' + objectName + ', ' + key);
    }
};
/* twine-user-script #3: "Script-IMApp" */
// Add or update a dialogue to a character's dialogue list
MindWare.addInstantMessage = function(characterDialogueVar, topic, passage, character, unlocked = true, isNew = true) {
    // Ensure the character's dialogue variable exists in State.variables
    if (typeof State.variables[characterDialogueVar] !== 'object') {
        State.variables[characterDialogueVar] = {};
    }

    // Add or update the dialogue topic to the specified character's dialogue list
    State.variables[characterDialogueVar][topic] = {
        unlocked: unlocked,
        isNew: isNew,
        passage: passage
    };

    // Optional: Trigger dialogue notification
    setup.notify("You have a new topic to chat about with " + character);
};

// Example usage:
// <<run MindWare.addInstantMessage('cipherInstantMessages', 'Exchange memes', 'IMApp-CipherLynx-Memes1', 'Cipher', true, true);>>

/* To unlock a new dialog and mark it as new:
<<set $cipherInstantMessages["newTopic"].unlocked = true>>
<<set $cipherInstantMessages["newTopic"].isNew = true>>
*/

// Function to get the count of unread messages
MindWare.getUnreadMessageCount = function() {
    const messageVars = ["$cipherInstantMessages", "$rayInstantMessages"]; // Add more as needed
    let unreadCount = 0;

    for (let i = 0; i < messageVars.length; i++) {
        const messages = State.variables[messageVars[i].substring(1)]; // Remove '$' and get the variable

        if (messages && typeof messages === 'object') {
            for (let topic in messages) {
                if (messages[topic].unlocked && messages[topic].isNew) {
                    unreadCount++;
                }
            }
        }
    }

    return unreadCount;
};

// Function to check for any unlocked and unread messages
MindWare.hasUnreadMessages = function() {
    // List of all instant message variables
    const messageVars = ["$cipherInstantMessages"]; // Add more as needed

    // Iterate over each message variable
    for (let i = 0; i < messageVars.length; i++) {
        const messages = State.variables[messageVars[i].substring(1)]; // Remove '$' and get the variable

        // Check if the variable exists and is an object
        if (messages && typeof messages === 'object') {
            // Iterate over each message topic in the variable
            for (let topic in messages) {
                // Check if the message is unlocked and new
                if (messages[topic].unlocked && messages[topic].isNew) {
                    return true; // Unlocked and new message found
                }
            }
        }
    }

    // No unlocked and new messages found
    return false;
};
/* twine-user-script #4: "Script-Computer" */
// Function to add a new notification
setup.addNotification = function(message) {
    State.variables.notificationsPC.push(message);
    State.variables.notificationCountPC = State.variables.notificationsPC.length;
};

// Function to clear all notifications
setup.clearNotifications = function() {
    State.variables.notificationsPC.length = 0; // Clear the array
    State.variables.notificationCountPC = 0; // Reset the notification count
};
/* twine-user-script #5: "Script-HackTarget" */
State.variables.hackingTargets = [];

State.variables.hackingTools = [
    "Trace Detector",
    "File Downloader",
    // Add more tools as needed
];

// Function to get the count of available hacking targets
setup.getHackingTargetCount = function() {
    return State.variables.hackingTargets.length;
};

// Check if a Target Exists
setup.hackingTargetExists = function(name) {
    return State.variables.hackingTargets.some(target => target.name === name);
};

// Add Target
setup.addHackingTarget = function(name, ip, link) {
    if (!State.variables.hackingTargets.some(target => target.name === name)) {
        State.variables.hackingTargets.push({ name: name, ip: ip, link: link });
        setup.notify("You have a new hacking target: " + name + ".");
    } else {
        setup.notify("Hacking target " + name + " is already in your list.");
    }
};


// Remove Target
setup.removeHackingTarget = function(name) {
    State.variables.hackingTargets = State.variables.hackingTargets.filter(target => target.name !== name);
};

// Add Tool
setup.addHackingTool = function(tool) {
    if (!State.variables.hackingTools.includes(tool)) {
        State.variables.hackingTools.push(tool);
        setup.notify("New hacking tool installed: " + tool + ".");
    } else {
        setup.notify("Hacking tool " + tool + " is already installed.");
    }
};


// Remove Tool
setup.removeHackingTool = function(tool) {
    State.variables.hackingTools = State.variables.hackingTools.filter(t => t !== tool);
};
/* twine-user-script #6: "Script-JobBoard" */
window.MindWare = window.MindWare || {};

State.variables.byteBunkerJobs = [
    {
        title: "Urgent Photo Edit Required",
        description: "Need a quick touch-up on a few selfies. Want them perfect for a special someone.",
        poster: "ManicPixy",
        reward: "$10 per photo",
        link: "PhotoEditJob",
        available: true,
        accepted: true
    },
        {
        title: "Crack Encryption Algorithm",
        description: "Looking for someone to crack a new encryption algorithm we've encountered.",
        poster: "D4YDR34M",
        reward: "$5,500",
        link: "EncryptionJob",
        available: true,
        accepted: true
    },
        {
        title: "Troubleshoot Legacy System",
        description: "Having issues with our old SQL database. Need an expert to take a look.",
        poster: "OffbeatBoss",
        reward: "$200",
        link: "SQLJob",
        available: true,
        accepted: true
    },
    {
        title: "Illegal Spying by Landlord",
        description: "Suspicion of landlord secretly installing hidden cameras in tenant bathrooms. Need concrete evidence. Urgent & high-paying.",
        poster: "ConcernedTenant01",
        reward: "$1,000",
        link: "LandlordJob",
        available: true,
        accepted: false
    }
];

// Function to Add a New Job
setup.addByteBunkerJob = function(title, description, poster, reward, link) {
    State.variables.byteBunkerJobs.push({
        title: title,
        description: description,
        poster: poster,
        reward: reward,
        link: link,
        available: true,
        accepted: false
    });

    setup.notify("A new job is available on ByteBunker.");
};

// Function to Change the Availability Status
setup.changeByteBunkerJobAvailability = function(link, newAvailability) {
    var job = State.variables.byteBunkerJobs.find(job => job.link === link);
    if (job) {
        job.available = newAvailability;
    }
};

// Function to Change the Accepted Status
setup.changeByteBunkerJobAcceptedStatus = function(link, newAcceptedStatus) {
    var job = State.variables.byteBunkerJobs.find(job => job.link === link);
    if (job) {
        job.accepted = newAcceptedStatus;
    }
};

// Function to Check if Any Job That's Available but Not Accepted Is Present
setup.isAvailableUnacceptedByteBunkerJobPresent = function() {
    return State.variables.byteBunkerJobs.some(job => job.available && !job.accepted);
};

// Function to Display the Number of Available Jobs That Are Not Accepted
setup.countAvailableUnacceptedByteBunkerJobs = function() {
    return State.variables.byteBunkerJobs.filter(job => job.available && !job.accepted).length;
};

// Function to check if a Job Is Accepted
setup.byteBunkerJobIsAccepted = function(link) {
    var job = State.variables.byteBunkerJobs.find(job => job.link === link);
    return job ? job.accepted : false;
};
/* twine-user-script #7: "Script-SpyingLandlordHack" */
// Setup the array of shower camera images
MindWare.setupShowerCamImages = function() {
    var showerCamImages = [];
    for (var i = 1; i <= 13; i++) {
        showerCamImages.push("imgs/shower/showercam" + i + ".gif");
    }
    return showerCamImages;
};

// Function to select a subset of images
MindWare.selectCameraImages = function(array, numOfPicsToShow) {
    var shuffled = array.slice().sort(() => 0.5 - Math.random());
    return shuffled.slice(0, numOfPicsToShow);
};

// Function to update the image and camera title in the passage
MindWare.updateCameraImage = function(selectedImages, currentImageIndex, contentId, titleId) {
    var imgSrc = selectedImages[currentImageIndex];
    var cameraNum = currentImageIndex + 1;
    $("#" + contentId).html('<img src="' + imgSrc + '">');
    $("#" + titleId).text('Camera #' + cameraNum);
};

// Initialize the variables in the story state
State.variables.showerCamImages = MindWare.setupShowerCamImages();
State.variables.selectedShowerImages = MindWare.selectCameraImages(State.variables.showerCamImages, Math.floor(Math.random() * 3) + 2);
State.variables.currentShowerImageIndex = 0;
State.variables.spyingLandlordHackSuccess = false;

// Reselect camera images
MindWare.reselectCameraImages = function() {
    var numOfPicsToShow = Math.floor(Math.random() * 3) + 1; // Number of images to show
    State.variables.selectedShowerImages = MindWare.selectCameraImages(State.variables.showerCamImages, numOfPicsToShow);
    State.variables.currentImageIndex = 0; // Reset the image index
    State.variables.spyingLandlordHackSuccess = false; // Reset the first-visit flag
};
/* twine-user-script #8: "Script-DigitalDownloads" */
// Define a custom namespace on the window object if it doesn't already exist
window.MindWare = window.MindWare || {};

// Songs 
// Cyber War 
MindWare.addCyberWarSong = function() {
    var price = 100; // Set the price for the Cyber War song

    // Check if the player has enough money and the item hasn't been purchased yet
    if (State.variables.playerMoney >= price && !State.variables.cyberWarSongPurchased) {
        // Deduct the price from the player's money
        State.variables.playerMoney -= price;

        // Add the new song to the mySongs array
        State.variables.mySongs.push({
            title: "Cyber War",
            artist: "AlexiAction",
            filename: "audio/songs/cyber-war-126419.mp3"
        });

        // Mark the song as purchased
        State.variables.cyberWarSongPurchased = true;

        // Display a thank you message and a reminder to check the playlist
        SugarCube.UI.alert("Thank you for adding Cyber War to your playlist!");

        // Refresh the UI to reflect changes
        Engine.play(passage());

    } else if (State.variables.cyberWarSongPurchased) {
        // If the song has already been purchased
        SugarCube.UI.alert("You have already added this song to your playlist.");
    } else {
        // If the player does not have enough money
        SugarCube.UI.alert("You do not have enough money to add this song.");
    }
};

// Flashes
MindWare.addFlashesSong = function() {
    var price = 100; // Set the price for the Flashes song

    // Check if the player has enough money and the item hasn't been purchased yet
    if (State.variables.playerMoney >= price && !State.variables.flashesSongPurchased) {
        // Deduct the price from the player's money
        State.variables.playerMoney -= price;

        // Add the new song to the mySongs array
        State.variables.mySongs.push({
            title: "Flashes",
            artist: "Mezhdunami",
            filename: "audio/songs/mezhdunami-flashes-95436.mp3"
        });

        // Mark the song as purchased
        State.variables.flashesSongPurchased = true;

        // Display a thank you message and a reminder to check the playlist
        SugarCube.UI.alert("Thank you for adding Flashes to your playlist!");

        // Refresh the UI to reflect changes
        Engine.play(passage());

    } else if (State.variables.flashesSongPurchased) {
        // If the song has already been purchased
        SugarCube.UI.alert("You have already added this song to your playlist.");
    } else {
        // If the player does not have enough money
        SugarCube.UI.alert("You do not have enough money to add this song.");
    }
};

// Evasion
MindWare.addEvasionSong = function() {
    var price = 100; // Set the price for the Evasion song

    // Check if the player has enough money and the item hasn't been purchased yet
    if (State.variables.playerMoney >= price && !State.variables.evasionSongPurchased) {
        // Deduct the price from the player's money
        State.variables.playerMoney -= price;

        // Add the new song to the mySongs array
        State.variables.mySongs.push({
            title: "Evasion",
            artist: "Evgeny Bardyuzha",
            filename: "audio/songs/evasion-123274.mp3"
        });

        // Mark the song as purchased
        State.variables.evasionSongPurchased = true;

        // Display a thank you message and a reminder to check the playlist
        SugarCube.UI.alert("Thank you for adding Evasion to your playlist!");

        // Refresh the UI to reflect changes
        Engine.play(passage());

    } else if (State.variables.evasionSongPurchased) {
        // If the song has already been purchased
        SugarCube.UI.alert("You have already added this song to your playlist.");
    } else {
        // If the player does not have enough money
        SugarCube.UI.alert("You do not have enough money to add this song.");
    }
};

// Cyber Race
MindWare.addCyberRaceSong = function() {
    var price = 100; // Set the price for the Cyber Race song

    // Check if the player has enough money and the item hasn't been purchased yet
    if (State.variables.playerMoney >= price && !State.variables.cyberRaceSongPurchased) {
        // Deduct the price from the player's money
        State.variables.playerMoney -= price;

        // Add the new song to the mySongs array
        State.variables.mySongs.push({
            title: "Cyber Race",
            artist: "FASSounds",
            filename: "audio/songs/cyber-race-112774.mp3"
        });

        // Mark the song as purchased
        State.variables.cyberRaceSongPurchased = true;

        // Display a thank you message and a reminder to check the playlist
        SugarCube.UI.alert("Thank you for adding Cyber Race to your playlist!");

        // Refresh the UI to reflect changes
        Engine.play(passage());

    } else if (State.variables.cyberRaceSongPurchased) {
        // If the song has already been purchased
        SugarCube.UI.alert("You have already added this song to your playlist.");
    } else {
        // If the player does not have enough money
        SugarCube.UI.alert("You do not have enough money to add this song.");
    }
};

// Midnight
MindWare.addMidnightSong = function() {
    var price = 100; // Set the price for the Midnight song

    // Check if the player has enough money and the item hasn't been purchased yet
    if (State.variables.playerMoney >= price && !State.variables.midnightSongPurchased) {
        // Deduct the price from the player's money
        State.variables.playerMoney -= price;

        // Add the new song to the mySongs array
        State.variables.mySongs.push({
            title: "Midnight",
            artist: "AlexiAction",
            filename: "audio/songs/midnight-138704.mp3"
        });

        // Mark the song as purchased
        State.variables.midnightSongPurchased = true;

        // Display a thank you message and a reminder to check the playlist
        SugarCube.UI.alert("Thank you for adding Midnight to your playlist!");

        // Refresh the UI to reflect changes
        Engine.play(passage());

    } else if (State.variables.midnightSongPurchased) {
        // If the song has already been purchased
        SugarCube.UI.alert("You have already added this song to your playlist.");
    } else {
        // If the player does not have enough money
        SugarCube.UI.alert("You do not have enough money to add this song.");
    }
};

// Insurrection Song Purchase Function
MindWare.addInsurrectionSong = function() {
    var price = 100; // Set the price for the Insurrection song

    // Check if the player has enough money and the item hasn't been purchased yet
    if (State.variables.playerMoney >= price && !State.variables.insurrectionSongPurchased) {
        // Deduct the price from the player's money
        State.variables.playerMoney -= price;

        // Add the new song to the mySongs array
        State.variables.mySongs.push({
            title: "Insurrection",
            artist: "AleXZavesa",
            filename: "audio/songs/insurrection-10941.mp3"
        });

        // Mark the song as purchased
        State.variables.insurrectionSongPurchased = true;

        // Display a thank you message and a reminder to check the playlist
        SugarCube.UI.alert("Thank you for adding Insurrection to your playlist!");

        // Refresh the UI to reflect changes
        Engine.play(passage());

    } else if (State.variables.insurrectionSongPurchased) {
        // If the song has already been purchased
        SugarCube.UI.alert("You have already added this song to your playlist.");
    } else {
        // If the player does not have enough money
        SugarCube.UI.alert("You do not have enough money to add this song.");
    }
};

// Cyber Babes Wallpaper Pack Buy 
MindWare.purchaseBabesWallpaper = function(buttonId) {
    var price = 200; // Set the price for the Babes Wallpaper pack

    // Check if the player has enough money and the item hasn't been purchased yet
    if (State.variables.playerMoney >= price && !State.variables.babesWallpaperPurchased) {
        // Deduct the price from the player's money
        State.variables.playerMoney -= price;

        // Add the wallpapers to the available wallpapers
        var newWallpapers = ['cyberbabewall1', 'cyberbabewall2', 'cyberbabewall3', 'cyberbabewall4', 'cyberbabewall5'];
        State.variables.availableWallpapers = State.variables.availableWallpapers.concat(newWallpapers);

        // Mark the wallpapers as purchased
        State.variables.babesWallpaperPurchased = true;

        // Disable the button and change its appearance
        var button = document.getElementById(buttonId);
        if (button) {
            button.disabled = true;
            button.classList.add('disabled');
            button.textContent = 'Purchased';
        }

        // Display a thank you message and a reminder to check the wallpapers
        SugarCube.UI.alert("Thank you for your purchase! Don't forget to check your computer settings to see your new wallpapers.");
        
        // Refresh the UI to reflect changes
        Engine.play(passage());

    } else if (State.variables.babesWallpaperPurchased) {
        SugarCube.UI.alert("You have already purchased this item.");
    } else {
        SugarCube.UI.alert("You don't have enough money to make this purchase.");
    }
};

// NSFW Wallpaper Pack Buy 
MindWare.purchaseNSFWWallpaper1 = function(buttonId) {
    var price = 500; // Set the price for the NSFW Wallpaper pack

    // Check if the player has enough money and the item hasn't been purchased yet
    if (State.variables.playerMoney >= price && !State.variables.nsfwWallpaper1Purchased) {
        // Deduct the price from the player's money
        State.variables.playerMoney -= price;

        // Add the wallpapers to the available wallpapers
        var newWallpapers = ['nsfwwall1', 'nsfwwall2', 'nsfwwall3', 'nsfwwall4', 'nsfwwall5'];
        State.variables.availableWallpapers = State.variables.availableWallpapers.concat(newWallpapers);

        // Mark the wallpapers as purchased
        State.variables.nsfwWallpaper1Purchased = true;

        // Disable the button and change its appearance
        var button = document.getElementById(buttonId);
        if (button) {
            button.disabled = true;
            button.classList.add('disabled');
            button.textContent = 'Purchased';
        }

        // Display a thank you message and a reminder to check the wallpapers
        SugarCube.UI.alert("Thank you for your purchase! Don't forget to check your computer settings to see your new wallpapers.");
        
        // Refresh the UI to reflect changes
        Engine.play(passage());

    } else if (State.variables.nsfwWallpaper1Purchased) {
        SugarCube.UI.alert("You have already purchased this item.");
    } else {
        SugarCube.UI.alert("You don't have enough money to make this purchase.");
    }
};

// Fast Cars Wallpaper Pack Buy
MindWare.purchaseFastCarsWallpaper = function(buttonId) {
    var price = 100; // Set the price for the Fast Cars Wallpaper pack

    // Check if the player has enough money and the item hasn't been purchased yet
    if (State.variables.playerMoney >= price && !State.variables.fastCarsWallpaperPurchased) {
        // Deduct the price from the player's money
        State.variables.playerMoney -= price;

        // Add the wallpapers to the available wallpapers
        var newWallpapers = ['fastcarswall1', 'fastcarswall2', 'fastcarswall3', 'fastcarswall4', 'fastcarswall5'];
        State.variables.availableWallpapers = State.variables.availableWallpapers.concat(newWallpapers);

        // Mark the wallpapers as purchased
        State.variables.fastCarsWallpaperPurchased = true;

        // Disable the button and change its appearance
        var button = document.getElementById(buttonId);
        if (button) {
            button.disabled = true;
            button.classList.add('disabled');
            button.textContent = 'Purchased';
        }

        // Display a thank you message and a reminder to check the wallpapers
        SugarCube.UI.alert("Thank you for your purchase! Don't forget to check your computer settings to see your new Fast Cars wallpapers.");

        // Refresh the UI to reflect changes
        Engine.play(passage());

    } else if (State.variables.fastCarsWallpaperPurchased) {
        SugarCube.UI.alert("You have already purchased this item.");
    } else {
        SugarCube.UI.alert("You don't have enough money to make this purchase.");
    }
};

// Generalized Channel Purchase Function
MindWare.purchaseChannel = function(channelName, channelVariable, price, buttonId) {
    // Check if the player has enough money and the channel hasn't been purchased yet
    if (State.variables.playerMoney >= price && !State.variables[channelVariable]) {
        // Deduct the price from the player's money
        State.variables.playerMoney -= price;

        // Mark the channel as purchased
        State.variables[channelVariable] = true;

        // Disable the button and change its appearance
        var button = document.getElementById(buttonId);
        if (button) {
            button.disabled = true;
            button.classList.add('dd-button-disabled');
            button.textContent = 'Purchased';
        }

        // Display a thank you message
        SugarCube.UI.alert("Thank you for your purchase! Enjoy unlimited access to " + channelName + ".");

        // Refresh the UI to reflect changes
        Engine.play(passage());

    } else if (State.variables[channelVariable]) {
        SugarCube.UI.alert("You have already purchased " + channelName + ".");
    } else {
        SugarCube.UI.alert("You don't have enough money to purchase " + channelName + ".");
    }
};

// Generalized Video Game Purchase Function
MindWare.purchaseGame = function(gameTitle, gameVariable, price, buttonId) {
    // Check if the player has enough money and the game hasn't been purchased yet
    if (State.variables.playerMoney >= price && !State.variables[gameVariable]) {
        // Deduct the price from the player's money
        State.variables.playerMoney -= price;

        // Mark the game as purchased
        State.variables[gameVariable] = true;

        // Disable the button and change its appearance
        var button = document.getElementById(buttonId);
        if (button) {
            button.disabled = true;
            button.classList.add('dd-button-disabled');
            button.textContent = 'Owned';
        }

        // Display a thank you message
        SugarCube.UI.alert("You have successfully purchased " + gameTitle + "! It's now available in your library.");

        // Refresh the UI to reflect changes
        Engine.play(passage());

    } else if (State.variables[gameVariable]) {
        SugarCube.UI.alert("You already own " + gameTitle + ".");
    } else {
        SugarCube.UI.alert("You don't have enough money to purchase " + gameTitle + ".");
    }
};
/* twine-user-script #9: "Script-Emails" */
window.MindWare = window.MindWare || {};

State.variables.emails = [
    {
        sent: true,
        read: true,
        from: "CipherLynx",
        subject: "New Gig",
        preview: "Been a while since our last sync-up. All good with you?",
        link: "Email-CipherFirstJob"
    }
    // ... additional emails
];

// Add a new email
MindWare.addEmail = function(from, subject, message, link) {
    State.variables.emails.push({
        sent: true,
        read: false,
        from: from,
        subject: subject,
        preview: message,
        link: link
    });
    
    // Trigger email notification
    setup.notify("You have received a new email message.");

};

// Remove an email
MindWare.removeEmail = function(link) {
    // Find the index of the email with the specified link
    var emailIndex = State.variables.emails.findIndex(email => email.link === link);

    // If the email is found, remove it from the array
    if (emailIndex > -1) {
        State.variables.emails.splice(emailIndex, 1);
    }
};

// Get number of unread emails
MindWare.getUnreadEmailCount = function() {
    return State.variables.emails.filter(email => !email.read).length;
};

// Check if an email is marked as read
MindWare.emailIsRead = function(link) {
    var email = State.variables.emails.find(email => email.link === link);
    return email ? email.read : false;
};

// Mark an email as read
MindWare.markEmailAsRead = function(link) {
    var email = State.variables.emails.find(email => email.link === link);
    if (email) {
        email.read = true;
    }
};
/* twine-user-script #10: "Script-EroSphere-SIMSPods-Selection" */
window.addSIMS = function(name, thumbnail, price, isNew, unlocked, passage) {
    SugarCube.State.variables.simsCatalogue[name] = {
        thumbnail: thumbnail,
        price: price,
        isNew: isNew,
        unlocked: unlocked,
        passage: passage
    };
};

/* 
<<run addSIMS("Neon Dreams", "imgs/locations/erosphere/sims/sims1-thumbnail.jpeg", 10, true, true, "Neon-Dreams-Passage")>>
*/

window.markSIMSAsSeen = function(name) {
    var sims = SugarCube.State.variables.simsCatalogue[name];
    if (sims && sims.isNew) {
        sims.isNew = false;
    }
};

window.selectSIMS = function(simKey) {
    console.log("Selected SIMS key:", simKey); // Debugging line

    if (State.variables.simsWatchedToday) {
        SugarCube.UI.alert("You've already watched a S.I.M.S. today. To minimize the risk of addiction, you have to rest until you can watch another one.");
        return;
    }

    // Get the cost of the SIMS
    var simCost = State.variables.simsCatalogue[simKey].price;

    // Check if the player has enough money to watch the SIMS
    if (State.variables.playerMoney < simCost) {
        SugarCube.UI.alert("You don't have enough money!");
        return;
    }

    // Deduct the cost of the SIMS from the player's money
    State.variables.playerMoney -= simCost;

    // Increment simsWatched by 1
    State.variables.simsWatched += 1;

    // Add the cost of the SIMS to simsMoneySpent
    State.variables.simsMoneySpent += simCost;

    // Mark the SIMS as seen (isNew = false)
    State.variables.simsCatalogue[simKey].isNew = false;

    State.variables.simsWatchedToday = true;

    // Dynamically construct the passage name
    var passageName = "SIMS-" + simKey;

    // Navigate to the dynamically constructed passage name
    Engine.play(passageName);
};

/*
<<run markSIMSAsSeen("Neon Dreams")>>
*/
/* twine-user-script #11: "Script-Gender" */
// Gender
// Display the player's gender status
MindWare.getGenderStatus = function() {
    var playerGender = State.variables.playerGender;

    // Define the gender spectrum ranges and labels
    if (playerGender >= 80) {
        return "Male"; // Replace with your desired label
    } else if (playerGender >= 60) {
        return "Masculine"; // Replace with your desired label
    } else if (playerGender >= 40) {
        return "Androgynous"; // Replace with your desired label
    } else if (playerGender >= 20) {
        return "Feminine"; // Replace with your desired label
    } else {
        return "Female"; // Replace with your desired label
    }
};

// Increase player's gender value
MindWare.increaseGender = function(amount) {
    var playerGender = State.variables.playerGender;
    State.variables.playerGender = Math.min(playerGender + amount, 100); // Clamps the value to a maximum of 100
};

// Decrease player's gender value
MindWare.decreaseGender = function(amount) {
    var playerGender = State.variables.playerGender;
    State.variables.playerGender = Math.max(playerGender - amount, 0); // Clamps the value to a minimum of 0
};
/* twine-user-script #12: "Script-Morality" */
// Increase player's morality with a default increment of 5
MindWare.increaseMorality = function(amount = 5) {
    var playerMorality = State.variables.playerMorality;
    State.variables.playerMorality = Math.min(playerMorality + amount, 100); // Clamps the value to a maximum of 100
    console.log("Morality increased by " + amount + ". New Morality: " + State.variables.playerMorality);
};

// Decrease player's morality with a default decrement of 5
MindWare.decreaseMorality = function(amount = -5) {
    var playerMorality = State.variables.playerMorality;
    State.variables.playerMorality = Math.max(playerMorality + amount, 0); // Clamps the value to a minimum of 0
    console.log("Morality decreased by " + amount + ". New Morality: " + State.variables.playerMorality);
};

// Display the player's morality status
MindWare.getMoralityStatus = function() {
    var playerMorality = State.variables.playerMorality;

    if (playerMorality >= 0 && playerMorality <= 20) {
        return "Corrupt";
    } else if (playerMorality >= 21 && playerMorality <= 40) {
        return "Dishonorable";
    } else if (playerMorality >= 41 && playerMorality <= 60) {
        return "Neutral";
    } else if (playerMorality >= 61 && playerMorality <= 80) {
        return "Honorable";
    } else if (playerMorality >= 81 && playerMorality <= 100) {
        return "Virtuous";
    } else {
        return "Undefined"; // In case $playerMorality is outside the 0-100 range
    }
};
/* twine-user-script #13: "Script-ActionPoints" */
// Function to add action points
MindWare.addActionPoints = function(points) {
    State.variables.actionPoints += points;
    if (State.variables.actionPoints > State.variables.actionPointsMax) {
        State.variables.actionPoints = State.variables.actionPointsMax;
    }
}

// Function to deduct action points
// Example: <<run MindWare.deductActionPoints(1)>>
MindWare.deductActionPoints = function(points) {
    if (State.variables.actionPoints >= points) {
        State.variables.actionPoints -= points;
        console.log("Deduction successful. New action points total:", State.variables.actionPoints);
        return true; // Indicates successful deduction
    } else {
        console.log("Deduction failed. Not enough action points available.");
        return false; // Indicates insufficient points
    }
}

// Go to AP-costing passage
MindWare.processActionButtonClick = function(points, targetPassage) {
    // Call the function and check if action points were successfully deducted
    if (MindWare.deductActionPoints(points)) {
        SugarCube.Engine.play(targetPassage);
    } else {
        // Handle the case where there are insufficient action points
        SugarCube.UI.alert("You don't have enough action points!");
    }
}

MindWare.processActionButtonClickNoPassage = function(points) {
    // Call the function and check if action points were successfully deducted
    if (MindWare.deductActionPoints(points)) {
        return true; // Return true when action points are successfully deducted
    } else {
        // Handle the case where there are insufficient action points
        SugarCube.UI.alert("You don't have enough action points!");
        return false; // Return false when deduction fails
    }
}
/* twine-user-script #14: "Script-GoToSleep" */
// Advance time by one day
// Example: <<run MindWare.advanceDay()>>

MindWare.advanceDay = function() {
    console.log("Advancing day...");
    State.variables.totalDays += 1;
    console.log("Total days now:", State.variables.totalDays);

    var daysOfWeek = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
    var currentDayIndex = daysOfWeek.indexOf(State.variables.dayOfWeek);
    var nextDayIndex = (currentDayIndex + 1) % daysOfWeek.length;
    State.variables.dayOfWeek = daysOfWeek[nextDayIndex];

    // Reset action points
    State.variables.actionPoints = State.variables.actionPointsMax;
    // Reset worked today variable
    State.variables.workedToday = false;
    State.variables.workedAtBrainFryToday = false;
    // Reset EroSphere dishes minigame
    State.variables.eroSphereDishesFailed = false;
    State.variables.eroSphereDishesAttempted = false;
    // SIMS
    State.variables.simsWatchedToday = false;
    // Synapse Steady VX
    State.variables.implantCharge = 100;
    // GitGud Xavier special encounter
    State.variables.specialEncounterToday = false; 
    // Set $xavierRandomEncounter to a random number between 1 and 35
    State.variables.xavierRandomEncounter = Math.floor(Math.random() * 35) + 1;
    // Decrease the neuroimaging counter by one if it is defined and ensure it doesn't go below 0
    if (typeof State.variables.nextNeuroimagingCounter !== 'undefined') {
        State.variables.nextNeuroimagingCounter = Math.max(0, State.variables.nextNeuroimagingCounter - 1);
    }
}

// // Advance time by one day but don't reset action points
// MindWare.advanceDayNoAP = function() {
//     State.variables.totalDays += 1;
//     var daysOfWeek = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
//     var currentDayIndex = daysOfWeek.indexOf(State.variables.dayOfWeek);
//     var nextDayIndex = (currentDayIndex + 1) % daysOfWeek.length;
//     State.variables.dayOfWeek = daysOfWeek[nextDayIndex];
// }
/* twine-user-script #15: "Script-Money" */
// Pay money
MindWare.payMoney = function(amount) {
    console.log("Attempting to pay:", amount);  // Log the attempt to pay
    if (State.variables.playerMoney >= amount) {
        State.variables.playerMoney -= amount;
        console.log("Payment successful. Remaining money:", State.variables.playerMoney);  // Log success
        return true;
    } else {
        console.log("Payment failed. Not enough money.");  // Log failure
        SugarCube.UI.alert("You don't have enough money.");
        return false;
    }
}

// Expenses
// Function to add a new expense
MindWare.addExpense = function(name, value) {
    State.variables.expenses[name] = {
        value: value,
        status: "active"
    };
};

// Function to remove an expense
MindWare.removeExpense = function(name) {
    delete State.variables.expenses[name];
};

// Function to toggle the status of an expense
MindWare.toggleExpenseStatus = function(name) {
    if (State.variables.expenses[name]) {
        State.variables.expenses[name].status = (State.variables.expenses[name].status === 'active' ? 'disabled' : 'active');
    }
};

// Function to calculate total active expenses
MindWare.calculateTotalExpenses = function() {
    const expenses = State.variables.expenses;
    return Object.keys(expenses).reduce((total, key) => {
        return expenses[key].status === 'active' ? total + expenses[key].value : total;
    }, 0);
};


// Function to pay money and go to a passage
MindWare.processMoneyClick = function(amount, targetPassage) {
    // Check if the player has enough money
    if (State.variables.playerMoney >= amount) {
        // Deduct the money
        State.variables.playerMoney -= amount;
        // Move to the specified passage
        SugarCube.Engine.play(targetPassage);
    } else {
        // Handle the case where there is insufficient money
        SugarCube.UI.alert("You don't have enough money!");
    }
};
/* twine-user-script #16: "Script-SteadySynapseVX" */
MindWare.bodyToGenderValue = function(body) {
    switch (body) {
        case "Masculine": return 100;
        case "Masculine-Leaning": return 80; 
        case "Androgynous": return 40;
        case "Feminine-Leaning": return 20;
        case "Feminine": return 0;
        default: return 50; 
    }
};
/* twine-user-script #17: "Script-Tasks" */
// TASKS 
// Add a new task with active status 
// Example: <<run MindWare.addTask("Find spy camera feeds", "Task-LandlordJob")>>

MindWare.addTask = function(name, passage) {
    var newTask = {
        name: name,
        passage: passage,
        status: 'active'
    };
    State.variables.tasks.unshift(newTask); // Adds the new task to the beginning of the array
    setup.notify("You have a new task.")
};


// Mark a task as completed 
// Example: <<run MindWare.completeTask("Find spy camera feeds")>>

MindWare.completeTask = function(taskName) {
    var tasks = State.variables.tasks;
    var taskFound = false; // Flag to indicate if the task was found

    for (var i = 0; i < tasks.length; i++) {
        if (tasks[i].name === taskName) {
            taskFound = true; // Task is found
            if (tasks[i].status === 'active') {
                tasks[i].status = 'completed';
                setup.notify("You have completed a task.");
                break;
            }
        }
    }

    if (!taskFound) {
        console.error("Task not found: " + taskName); // Log error if task not found
    }
};

// This function will create a link for each task, ensuring that the correct task context is maintained.
MindWare.generateTaskLink = function(task) {
    return "<<link '" + task.name + "'>>" +
           "   <<run Dialog.setup('" + "Task Description" + "')>>" +
           "   <<run Dialog.wiki(Story.get('" + task.passage + "').processText())>>" +
           "   <<run Dialog.open()>>" +
           "<</link>>";
};
/* twine-user-script #18: "Script-Minigame-Coding" */
// Fake coding
setup.fakeCodes = [
    "PACKET_FIELD_DETAIL = 0x01,",
    "static void print_packet(uint32_t *data, size_t length);",
    "static int option_cycle_start;",
    "static const struct protocol_decoder protocol_decoders[] = {{decode_fcp }};",
    "{0, 16, PACKET_FIELD_TRANSACTION },",
    "#elif __BYTE_ORDER == __BIG_ENDIAN,",
    "print_packet(uint32_t *data, size_t length),",
    "pollfds[1].fd = STDIN_FILENO;",
    "HOSTCFLAGS_sign-file.o = $(shell $(HOSTPKG_CONFIG) --cflags libcrypto 2> /dev/null),",
    "subdir-$(CONFIG_MODVERSIONS) += genksyms",
    "subdir- += basic dtc gdb kconfig mod",
    "endif",
    "def get_time(line):",
    "main()",
    "int *g_orc_ip_table;",
    "return 0;",
    "return 1;",
    "if (av < bv)",
    "orc_num_entries = orc_ip_size / sizeof(int);",
    "no main_extable_sort_needed symbol in file: %s",
    "break;",
    "goto out;",
    "configure_file()",
    "subdir('src')",
    "install_data",
    "static int",
    "if (side == CLIENT)",
    "while (!exit_condition) { compute(); }",
    "float dot_product(vec3 a, vec3 b) { return a.x*b.x + a.y*b.y + a.z*b.z; }",
    "mutex.lock();",
    "condition_variable.wait(lock, []{ return data_ready; });",
    "template<typename T> T max(T a, T b) { return a > b ? a : b; }",
    "async_operation([](auto result) { process(result); });",
    "std::vector<int> vec = {1, 2, 3, 4, 5};",
    "vec.push_back(6);",
    "const double PI = 3.141592653589793;",
    "constexpr size_t MAX_SIZE = 1024;",
    "enum class Color { RED, GREEN, BLUE };",
    "switch(operation) { case ADD: add(); break; case SUB: subtract(); break; }",
    "try { throw std::runtime_error(\"An error occurred\"); } catch (const std::exception& e) { log(e.what()); }",
    "auto lambda = [](int x) { return x * x; };",
    "std::map<std::string, int> word_count;",
    "for (const auto &word : text) { word_count[word]++; }",
    "std::sort(begin(vec), end(vec));",
    "std::thread worker(do_work);",
    "worker.join();",
    "std::unique_ptr<Widget> widget = std::make_unique<Widget>();",
    "std::shared_ptr<Resource> resource = std::make_shared<Resource>(args);",
    "class MyClass { public: MyClass(); private: int data; };",
    "virtual void update() override;",
    "namespace my_app { void run(); }",
    "import module.submodule;",
    "export default function myFunction() {}",
    "addEventListener('load', function(event) { console.log('Page loaded!'); });",
    "#define ASSERT(x) if (!(x)) __builtin_unreachable();",
    "public static void main(String[] args) { SpringApplication.run(MyApplication.class, args); }",
    "ArrayList<String> names = new ArrayList<>();",
    "names.add(\"Alice\");",
    "SELECT * FROM users WHERE age > 18;",
    "INSERT INTO products (name, price) VALUES ('Gadget', 19.99);",
    "UPDATE accounts SET balance = balance - ? WHERE id = ?;",
    "DELETE FROM logs WHERE timestamp < NOW() - INTERVAL '1 year';",
    "CREATE TABLE IF NOT EXISTS sessions (id SERIAL PRIMARY KEY, user_id INT, token VARCHAR(255));",
    "DROP TABLE IF EXISTS old_data;",
    "ALTER TABLE users ADD COLUMN last_login TIMESTAMP;",
    "GRANT SELECT ON ALL TABLES IN SCHEMA public TO read_only_user;",
    "REVOKE INSERT ON TABLE sensitive_data FROM guest;",
    "curl -X POST -H \"Content-Type: application/json\" -d '{\"key\":\"value\"}' http://api.example.com/data",
    "git commit -m \"Add new feature\"",
    "docker run --name mycontainer -p 80:80 myimage",
    "npm install -g mypackage",
    "yarn add react",
    "pip install requests",
    "gem install rails",
    "bundle exec rake db:migrate",
    "mix deps.get",
    "cargo build --release",
    "mvn package",
    "gradle build",
    "composer require vendor/package",
    "terraform apply",
    "ansible-playbook -i inventory setup.yml",
    "kubectl apply -f deployment.yaml",
    "ffmpeg -i input.mp4 output.mp3",
    "convert image.png image.jpg",
    "iptables -A INPUT -p tcp --dport 80 -j ACCEPT",
    "crontab -e",
    "journalctl -u myservice",
    "systemctl restart nginx",
    "useradd -m newuser",
    "chown user:group file",
    "chmod +x script.sh",
    "df -h",
    "du -sh *",
    "top -c",
    "std::vector<int> numbers = {2, 4, 6, 8, 10};",
    "for (auto &n : numbers) { std::cout << n << std::endl; }",
    "std::map<std::string, int> ageMap;",
    "ageMap['Alice'] = 31;",
    "if (ptr != nullptr) { *ptr = 42; }",
    "try { throw std::overflow_error('Stack overflow'); } catch (std::exception &e) { std::cerr << e.what() << std::endl; }",
    "auto add = [](int a, int b) -> int { return a + b; };",
    "std::unique_ptr<Shape> shape = std::make_unique<Circle>(5.0);",
    "class Box { public: double length; double breadth; double height; };",
    "enum class LogLevel { DEBUG, WARNING, ERROR };",
    "constexpr int getMax(int a, int b) { return (a > b) ? a : b; }",
    "struct Point { int x; int y; };",
    "using byte = unsigned char;",
    "byte flags = 0b00001111;",
    "int main(int argc, char** argv) { return 0; }",
    "std::ostream& operator<<(std::ostream& os, const Point& pt) { return os << '(' << pt.x << ', ' << pt.y << ')'; }",
    "define LOG(x) std::cout << x << std::endl",
    "std::pair<std::string, std::string> name('first', 'last');",
    "auto [firstName, lastName] = name;",
    "template <typename T> T square(T x) { return x * x; }",
    "std::bitset<8> bits(0b1100'0101);",
    "double area = PI * std::pow(radius, 2);",
    "std::thread t([](){ std::cout << 'Thread running' << std::endl; });",
    "t.join();",
    "auto it = std::find_if(vec.begin(), vec.end(), [](int i){ return i > 0; });",
    "std::replace_if(vec.begin(), vec.end(), std::bind(std::less<int>(), std::placeholders::_1, 0), 100);",
    "std::function<void()> func = []() { std::cout << 'Hello World!' << std::endl; };",
    "func();",
    "std::random_device rd;",
    "std::mt19937 gen(rd());",
    "std::uniform_int_distribution<> dis(1, 6);",
    "int random_number = dis(gen);",
    "auto ptr = std::make_shared<int>(10);",
    "std::weak_ptr<int> weakPtr = ptr;",
    "std::mutex mtx;",
    "std::lock_guard<std::mutex> lock(mtx);",
    "std::condition_variable cv;",
    "bool ready = false;",
    "void worker() { std::unique_lock<std::mutex> lk(mtx); cv.wait(lk, []{ return ready; }); }",
    "std::vector<std::thread> workers;",
    "for (int i = 0; i < 5; ++i) { workers.emplace_back(worker); }",
    "for (auto &w : workers) { w.join(); }",
    "std::cout << std::quoted('Hello \"World\"') << std::endl;",
    "std::clog << 'This is a log message' << std::endl;",
    "std::cerr << 'Error: ' << strerror(errno) << std::endl;",
    "std::ifstream file('example.txt');",
    "std::string line;",
    "while (std::getline(file, line)) { std::cout << line << std::endl; }",
    "std::ofstream outFile('out.txt');",
    "outFile << 'Output to file' << std::endl;",
    "class MyClass { int _value; public: MyClass(int value) : _value(value) {} int getValue() const { return _value; } };",
    "MyClass obj(123);",
    "std::cout << obj.getValue() << std::endl;",
    "std::array<int, 4> arr = {1, 2, 3, 4};",
    "import numpy as np",
    "df = pd.read_csv('data.csv')",
    "print('Hello, World!')",
    "x = range(100)",
    "data = {'a': 1, 'b': 2, 'c': 3}",
    "for key, value in data.items():",
    "    print(f'{key}: {value}')",
    "def square(x):",
    "    return x * x",
    "squared = square(5)",
    "lambda x: x ** 2",
    "class MyClass:",
    "    def __init__(self, value):",
    "        self.value = value",
    "obj = MyClass(10)",
    "obj.value",
    "@decorator",
    "def function(args):",
    "    pass",
    "if __name__ == '__main__':",
    "    function(sys.argv)",
    "with open('file.txt', 'r') as file:",
    "    lines = file.readlines()",
    "try:",
    "    x = 1 / 0",
    "except ZeroDivisionError as e:",
    "    print('Error:', e)",
    "list_comp = [i for i in range(10)]",
    "dict_comp = {i: i * i for i in range(10)}",
    "set_comp = {i for i in range(10) if i % 2 == 0}",
    "gen_exp = (i for i in range(10))",
    "next(gen_exp)",
    "str1 = 'A string with \"quotes\"'",
    "str2 = \"Another string that's got single quotes\"",
    "multiline = '''",
    "This is a string",
    "that spans multiple lines",
    "'''",
    "from functools import reduce",
    "product = reduce(lambda x, y: x * y, range(1, 10))",
    "import asyncio",
    "async def fetch_data():",
    "    await asyncio.sleep(1)",
    "    return {'data': 1}",
    "result = asyncio.run(fetch_data())",
    "from typing import List, Dict, Tuple",
    "def type_hinting_example(param1: List[int]) -> Dict[str, int]:",
    "    return {'result': sum(param1)}",
    "import requests",
    "response = requests.get('https://api.example.com/data')",
    "response.json()",
    "from dataclasses import dataclass",
    "@dataclass",
    "class Product:",
    "    id: int",
    "    name: str",
    "    price: float",
    "product = Product(1, 'Widget', 19.99)",
    "product.name",
    "import unittest",
    "class TestMyFunction(unittest.TestCase):",
    "    def test_basic(self):",
    "        self.assertEqual(square(2), 4)",
    "if x > 0 and x < 10:",
    "    print('x is a positive single-digit number.')",
    "exec('print(5)')",
    "globals()['dynamic_variable'] = 5",
    "from os import path, makedirs",
    "if not path.exists('dir'):",
    "    makedirs('dir')",
    "with open('output.txt', 'w') as f:",
    "    f.write('Hello file!')",
    "import matplotlib.pyplot as plt",
    "plt.plot([1, 2, 3], [4, 5, 6])",
    "plt.show()",
    "import pandas as pd",
    "df = pd.DataFrame(np.random.randn(100, 4), columns=list('ABCD'))",
    "df.plot(kind='bar')"
];
/* twine-user-script #19: "Script-Bug Report" */
// Cheat menu
$(document).on(":passagerender", function() {
  // Check if the sidebar exists, and if our debug button is already there
  if ($('#menu').length > 0 && $('#menu-item-bug').length === 0) {
    // Create a new button
    const settingsButton = $("<li>")
      .attr("id", "menu-item-bug")
      .append(
        $("<a>")
          .attr("tabindex", "0")
          .attr("role", "button")
          .text("Bug Report")
          .click(function() {
            // Show the Debug window as a dialog
            Dialog.setup("Bug Report", "Bug Report");
            Dialog.wiki(Story.get("Bug Report").processText());
            Dialog.open();
          })
      );

    // Append the button to the sidebar menu
    $('#menu-core').append(settingsButton);
  }
});
/* twine-user-script #20: "Script-CheatMenu" */
// Cheat menu
$(document).on(":passagerender", function() {
  // Check if the sidebar exists, and if our debug button is already there
  if ($('#menu').length > 0 && $('#menu-item-cheats').length === 0) {
    // Create a new button
    const settingsButton = $("<li>")
      .attr("id", "menu-item-cheats")
      .append(
        $("<a>")
          .attr("tabindex", "0")
          .attr("role", "button")
          .text("Extra Options")
          .click(function() {
            // Show the Debug window as a dialog
            Dialog.setup("Extra Options", "Extra Options");
            Dialog.wiki(Story.get("Cheats").processText());
            Dialog.open();
          })
      );

    // Append the button to the sidebar menu
    $('#menu-core').append(settingsButton);
  }
});
/* twine-user-script #21: "Script-CreditsMenu" */
// Credits menu
$(document).on(":passagerender", function() {
  // Check if the sidebar exists, and if our debug button is already there
  if ($('#menu').length > 0 && $('#menu-item-credits').length === 0) {
    // Create a new button
    const settingsButton = $("<li>")
      .attr("id", "menu-item-credits")
      .append(
        $("<a>")
          .attr("tabindex", "0")
          .attr("role", "button")
          .text("Credits")
          .click(function() {
            // Show the Debug window as a dialog
            Dialog.setup("Credits", "Credits");
            Dialog.wiki(Story.get("Credits").processText());
            Dialog.open();
          })
      );

    // Append the button to the sidebar menu
    $('#menu-core').append(settingsButton);
  }
});
/* twine-user-script #22: "Script-cyberplayer" */
// SidebarExtras
(function () {
  var passageName = 'SidebarExtras';
  var $bottomMenu;
  // Assume State.variables.mySongs is an array of song objects
  var lastKnownPlaylistState = JSON.stringify(State.variables.mySongs);

  if (Story.has(passageName)) {
    $bottomMenu = $(document.createElement('div')).appendTo('#ui-bar-body');
    $bottomMenu.wiki(Story.get(passageName).processText());

    $(document).on(':passagedisplay', function () {
      var currentPlaylistState = JSON.stringify(State.variables.mySongs);
      
      // Compare the current state with the last known state
      if (lastKnownPlaylistState !== currentPlaylistState) {
        // Update the content as the state has changed
        $bottomMenu.empty().wiki(Story.get(passageName).processText());
        // Call the update playlist function or other functions as needed
        updatePlaylist();
        // Update the last known state
        lastKnownPlaylistState = currentPlaylistState;
      }
    });
  }
})();


// Update the playlist without iterating
function updatePlaylist() {
  var playlist = $('#cyberplayer-playlist');
  if (Array.isArray(State.variables.mySongs)) {
    var playlistHTML = State.variables.mySongs.map(function(song) {
      return '<li class="cyberplayer-song" data-filename="' + song.filename + '">' +
             '<span class="cyberplayer-song-title">' + song.title + '</span> - ' +
             '<span class="cyberplayer-song-artist">' + song.artist + '</span>' +
             '</li>';
    }).join(''); // Join the array into a single string

    playlist.empty().append(playlistHTML); // Update the DOM once
  }
}
$(document).ready(updatePlaylist);

// Possible optimization 
/*
// Initialize or update the audio player
function initializeOrUpdateAudioPlayer() {
  if (!window.audioPlayerInitialized) {
    // Your existing initializeAudioPlayer function contents
    window.audioPlayerInitialized = true;
  } else {
    // Just update what's necessary, like now playing information
  }
}
$(document).ready(initializeOrUpdateAudioPlayer);
$(document).on(":passagedisplay", initializeOrUpdateAudioPlayer);
*/

// Ensure the audio player is initialized only once
function initializeAudioPlayer() {
    // Check if the audio player has already been initialized
    if (!window.audio) {
        window.audio = new Audio();

        // Initial setup for the audio player
        window.audio.addEventListener("ended", function() {
            playNextSong();
        });
    }

    // Function to play the next song or loop back to the first
    function playNextSong() {
        let currentlyPlaying = $(".cyberplayer-song.active");
        let nextSong = currentlyPlaying.next(".cyberplayer-song");
        if (nextSong.length === 0) {
            nextSong = $(".cyberplayer-song").first(); // Loop to the first song if at the end
        }
        
        selectAndPlaySong(nextSong);
    }

    // Function to select and play a song, and mark it as active
    function selectAndPlaySong(songElement) {
        let selectedSong = songElement.data("filename");
        let songTitle = songElement.find('.cyberplayer-song-title').text() + ' - ' + songElement.find('.cyberplayer-song-artist').text();

        $(".cyberplayer-song").removeClass("active");
        songElement.addClass("active");

        window.audio.src = selectedSong;
        window.audio.play();
        window.audio.currentSongTitle = songTitle;
        $(".cyberplayer-current-song").text(songTitle);
    }

    // Delegate the click event to the parent '#cyberplayer-playlist' element
    $("#cyberplayer-playlist").off("click", ".cyberplayer-song").on("click", ".cyberplayer-song", function() {
        selectAndPlaySong($(this));
    });
}

// Toggle playback function for play/pause button
window.togglePlayback = function() {
    if (window.audio && window.audio.paused) {
        window.audio.play();
    } else {
        window.audio.pause();
    }
};

// Call the initialization function upon document ready
$(document).ready(initializeAudioPlayer);

// Reinitialize the audio player every time a passage is displayed
$(document).on(":passagedisplay", function() {
    initializeAudioPlayer();

    // Update the "Now Playing" section after a new passage is displayed
    if (window.audio && window.audio.currentSongTitle) {
        $(".cyberplayer-current-song").text(window.audio.currentSongTitle);
    }
});

// Initialize the audio player clone
function initializeAudioPlayerClone() {
    if (!window.audioClone) {
        window.audioClone = new Audio();
    }

    let currentlyPlayingClone = null;

    $("#cyberplayer-playlist-clone").off("click", ".cyberplayer-song-clone").on("click", ".cyberplayer-song-clone", function() {
        let selectedSong = $(this).data("filename");
        let songTitle = $(this).find('.cyberplayer-song-title-clone').text() + ' - ' + $(this).find('.cyberplayer-song-artist-clone').text();

        if (window.audioClone.paused || window.audioClone.src !== selectedSong) {
            window.audioClone.src = selectedSong;
            window.audioClone.play();
            window.audioClone.currentSongTitle = songTitle;
            $(".cyberplayer-current-song-clone").text(songTitle);
            currentlyPlayingClone = $(this);
        } else {
            window.audioClone.pause();
        }
    });

    window.audioClone.onended = function() {
        let nextSong;
        if (currentlyPlayingClone && currentlyPlayingClone.next().length > 0) {
            nextSong = currentlyPlayingClone.next();
        } else {
            nextSong = $(".cyberplayer-song-clone").first();
        }
        
        let selectedSong = nextSong.data("filename");
        let songTitle = nextSong.text();

        window.audioClone.src = selectedSong;
        window.audioClone.play();
        window.audioClone.currentSongTitle = songTitle;
        $(".cyberplayer-current-song-clone").text(songTitle);
        currentlyPlayingClone = nextSong;
    };

    window.togglePlaybackClone = function() {
        if (window.audioClone.paused) {
            window.audioClone.play();
        } else {
            window.audioClone.pause();
        }
    };
}

$(document).ready(initializeAudioPlayerClone);

// Event handler for when the passage ends
$(document).on(":passageend", function() {
    // If there's an audio clone and it's not already paused, pause it and reset
    if (window.audioClone && !window.audioClone.paused) {
        window.audioClone.pause();
        window.audioClone.currentTime = 0; // Reset the audio to the start
        $(".cyberplayer-current-song-clone").text(""); // Clear the "Now Playing" text
    }
});

$(document).on(":passagedisplay", function() {
    initializeAudioPlayerClone();

    // Update the "Now Playing" section after a new passage is displayed
    if (window.audioClone && window.audioClone.currentSongTitle) {
        $(".cyberplayer-current-song-clone").text(window.audioClone.currentSongTitle);
    }
});
/* twine-user-script #23: "Script-Notifications" */
(function () {
    var $notifyContainer = $('<div id="notify-container"></div>').appendTo(document.body); // Notification container

    // Append and set up the close button
    $notifyContainer.append('<button class="notify-container-close"><i class="fas fa-times-circle"></i></button>')
        .find('.notify-container-close').on('click', function () {
            $notifyContainer.find('.notify').remove(); // Remove notifications
            $notifyContainer.removeClass('open'); // Slide out the container
        });

    function addNotification(message, classes) {
        var $notification = $('<div class="notify"></div>')
            .wiki(message)
            .addClass('macro-notify ' + (classes || ''))
            .appendTo($notifyContainer);

        // Delay to ensure CSS transition applies
        setTimeout(function() {
            $notification.addClass('open'); // Trigger the slide-in effect
        }, 50);

        // Show the container with the close button
        $notifyContainer.addClass('open');
    }

    $(document).on(':notify', function (ev) {
        if (ev.message && typeof ev.message === 'string') {
            ev.message.trim();
            var classes = ev.class ? (typeof ev.class === 'string' ? ev.class : ev.class.join(' ')) : '';
            addNotification(ev.message, classes);
        }
    });

    function notify(message, classes) {
        if (typeof message !== 'string') {
            return;
        }

        $(document).trigger({
            type    : ':notify',
            message : message,
            class   : classes || ''
        });
    }

    Macro.add('notify', {
        tags: null,
        handler: function () {
            var msg = this.payload[0].contents,
                classes = this.args.length > 0 ? this.args.flatten().join(' ') : false;
            notify(msg, classes);
        }
    });

    setup.notify = notify;
}());
/* twine-user-script #24: "Script-TopBar" */
/* && $rightSidebarEnabled === true */

$(document).on('click', '#ui-bar-toggle', function() {
    // Check if sidebar is stowed
    if ($('#ui-bar').hasClass('stowed')) {
        // Sidebar is stowed, adjust #tbblock margin to make space
        $('#tbblock').css('margin-left', '2.25em'); // Or your desired margin when sidebar is stowed
        if ($('#story').length > 0) {
            $('#story').css('marginLeft', ''); // Resetting the left margin
        }
    } else {
        // Sidebar is unstowed, reduce #tbblock margin
        $('#tbblock').css('margin-left', '17.75em'); // Or your original margin
        // Using jQuery to set marginLeft, checking if #story exists
        if ($('#story').length > 0) {
            $('#story').css('marginLeft', '20em'); // Resetting the left margin
        }
    }
});

$(document).on('click', '#right-ui-bar-toggle', function() {
    // Check if sidebar is stowed
    if ($('#right-ui-bar').hasClass('stowed')) {
        // Sidebar is stowed, adjust #tbblock margin to make space
        $('#tbblock').css('margin-right', '2.25em'); // Or your desired margin when sidebar is stowed
    } else {
        // Sidebar is unstowed, reduce #tbblock margin
        $('#tbblock').css('margin-right', '17.75em'); // Or your original margin
    }
});

$(document).on('click', '#ui-bar-toggle', function() {
    // Check if sidebar is stowed
    if ($('#ui-bar').hasClass('stowed')) {
        // Sidebar is stowed, adjust #tbblock margin to make space
        $('#tbblock-prologue').css('margin-left', '2.25em'); // Or your desired margin when sidebar is stowed
    } else {
        // Sidebar is unstowed, reduce #tbblock margin
        $('#tbblock-prologue').css('margin-left', '18em'); // Or your original margin
    }
});

$(document).on('click', '#right-ui-bar-toggle', function() {
    // Check if sidebar is stowed
    if ($('#right-ui-bar').hasClass('stowed')) {
        // Sidebar is stowed, adjust #tbblock margin to make space
        $('#tbblock-prologue').css('margin-right', '2.25em'); // Or your desired margin when sidebar is stowed
    } else {
        // Sidebar is unstowed, reduce #tbblock margin
        $('#tbblock-prologue').css('margin-right', '17.75em'); // Or your original margin
    }
});

$(document).on(':passagerender', function() {
    // Check if #topbar exists
    if ($('#topbar').length) {
        // Proceed to check the value of $statsBoxLocation
        if (State.variables.statsBoxLocation === "left") {
            // If "left", set padding-top of #story to 0em
            $('#story').css('padding-top', '0em');
        } else if (State.variables.statsBoxLocation === "top") {
            // If "top", set padding-top of #story to 2em
            $('#story').css('padding-top', '2em');
        }
    }
});

// $(document).on(':passagerender', function() {
//     if ($('#tbblock').length) {
//         // If #tbblock exists, set padding-top of #story to 2em
//         $('#story').css('padding-top', '2em');
//     } else {
//         // If #tbblock does not exist, set padding-top of #story to 0em
//         $('#story').css('padding-top', '0em');
//     }
// });

MindWare.adjustTopPadding = function() {
    var $topbar = $('#topbar');
    if ($topbar.length === 0) {
        return;
    }

    var topbarDisplay = $topbar.css('display');

    if (topbarDisplay !== 'none') {
        $('#story').css('padding-top', '2em');
    } else {
        $('#story').css('padding-top', '0em');
    }
};

MindWare.adjustUIBarMargins = function() {
    var leftMargin, rightMargin;

    // Check if left sidebar is stowed
    if ($('#ui-bar').hasClass('stowed')) {
        leftMargin = '2.25em'; // Margin when sidebar is stowed
    } else {
        leftMargin = '17.75em'; // Original margin
    }

    // Apply the left margin
    $('#tbblock').css('margin-left', leftMargin);

    // // Check if the right sidebar exists and is stowed
    // if ($('#right-ui-bar').length === 0) {
    //     rightMargin = '2.25em'; // Default right margin if sidebar does not exist
    // }

    if ($('#right-ui-bar').length > 0) {
        if ($('#right-ui-bar').hasClass('stowed')) {
            rightMargin = '2.25em'; // Margin when sidebar is stowed
        } else {
            rightMargin = '17.75em'; // Original margin
        }
    }

            // Apply the right margin
        $('#tbblock').css('margin-right', rightMargin);
};

// $(document).on(':passagedisplay', function() {
//     // Default to 'false' if rightSidebarEnabled is undefined
//     var rightSidebar = State.variables.rightSidebarEnabled || false;

//     if (rightSidebar) {
//         $('#tbblock').css('margin-right', '17.75em');
//     } else {
//         $('#tbblock').css('margin-right', '0em');
//     }
// });

// function adjustStoryPadding() {
//     var storyElement = document.getElementById('story');
//     var storyWidth = storyElement.offsetWidth; // Get the width of the #story element
    
//     if (storyWidth > 934) { // Example: wider than 800px
//         storyElement.style.paddingTop = '2em'; // Larger padding for wider #story
//     } else if (storyWidth > 488) {
//         storyElement.style.paddingTop = '4em'; // Smaller padding for narrower #story
//     }
//     else {
//         storyElement.style.paddingTop = '6em'; // Smaller padding for narrower #story
//     }
// }

// // Run the function to adjust padding on initial load
// adjustStoryPadding();

// // Optionally, run the function on window resize to adjust in real time
// window.addEventListener('resize', adjustStoryPadding);
/* twine-user-script #25: "Script-Popover" */
(function () {
    'use strict';
    // popover macro, by chapel, for SugarCube 2
    // v1.0.0

    function handleClasses () {
        return [].slice.call(arguments).flatten().filter( function (c) {
            return c && typeof c === 'string' && c.trim();
        }) || [];
    }

    function popover (content, classList) {
        classList = handleClasses(classList);
        $('#ui-overlay, #ui-dialog').addClass('popover');
        // classList
        $('#ui-overlay, #ui-dialog, #ui-dialog-body').addClass(classList);
        // no-click
        if (classList.includesAny('noclick', 'no-click')) {
            $('#ui-overlay').removeClass('ui-close');
        }
        // dialog
        Dialog.setup('', 'popover');
        Dialog.wiki(content);
        Dialog.open();
        // remove classes
        $(document).one(':dialogclosed', function () {
            $('#ui-overlay').addClass('ui-close');
            $('#ui-overlay, #ui-dialog').removeClass('popover');
            $('#ui-overlay, #ui-dialog, #ui-dialog-body').removeClass(classList);
        });
    }

    // built-in options: invert, opaque, transparent, noclick
    Macro.add('popover', {
        tags: null,
        handler : function () {
            popover(this.payload[0].contents, this.args);
        }
    });

    Macro.add('dismisspopover', {
        skipArgs: true,
        handler : function () {
            if ($('ui-overlay').hasClass('popover')) {
                Dialog.close();
            }
        }
    });

    setup.popover = popover;
}());
/* twine-user-script #26: "Script-RightSideBar" */
// Function to adjust the margin of the story area based on sidebar visibility and state
function adjustForRightSidebar() {
    var $rightUiBar = $('#right-ui-bar');
    var $leftUiBar = $('#ui-bar');  // Get the left sidebar
    var rightSidebarEnabled = State.variables.rightSidebarEnabled;

    // Check if the right sidebar exists or is enabled
    if ($rightUiBar.length === 0 || !rightSidebarEnabled) {
        // No right sidebar or disabled, no extra margin needed
        document.getElementById("story").style.marginRight = "35px";
            if (!$leftUiBar.hasClass('stowed')) {
                document.getElementById("story").style.marginLeft = "20em";
            }
            if ($leftUiBar.hasClass('stowed')) {
                document.getElementById("story").style.marginLeft = "";
            }
    } else if ($rightUiBar.hasClass('stowed')) {
        // Right sidebar exists and is stowed
        if (window.innerWidth < 1137) {
            document.getElementById("story").style.marginRight = "4.5em";
        } else {
            document.getElementById("story").style.marginRight = "4.5em";
            // Apply marginLeft only if the left sidebar isn't stowed
            if (!$leftUiBar.hasClass('stowed')) {
                document.getElementById("story").style.marginLeft = "20em";
            }
        }
    } else {
        // Right sidebar exists and is not stowed
        if (window.innerWidth < 1137) {
            document.getElementById("story").style.marginRight = "20em";
                if ($leftUiBar.hasClass('stowed')) {
                    document.getElementById("story").style.marginLeft = "4.5em";
                }
        } else {
            document.getElementById("story").style.marginRight = "20em";
                if ($leftUiBar.hasClass('stowed')) {
                    document.getElementById("story").style.marginLeft = "4.5em";
                }
        }
    }
}


// Function to create and show the right sidebar
window.createAndShowRightSidebar = function() {
    if ($("#right-ui-bar").length === 0) {
        var $rightUiBar = $('<div id="right-ui-bar"></div>').appendTo("body");
        var rightTray = $('<div id="right-ui-bar-tray"><button id="right-ui-bar-toggle" tabindex="0" title="Toggle the Right UI bar" aria-label="Toggle the Right UI bar" type="button"></button></div>');
        var rightBody = $('<div id="right-ui-bar-body"></div>');
        $rightUiBar.append(rightTray, rightBody);

        // Attach the click event handler to the toggle button
        $rightUiBar.find('#right-ui-bar-toggle').on('click', function() {
            $rightUiBar.toggleClass('stowed');
            adjustForRightSidebar();
        });

        // Initially set the default margin
        document.getElementById("story").style.marginRight = "20em";
    }
}

// Event bindings
$(document).on(':passagerender', adjustForRightSidebar);

// Use the :passagedisplay event to refresh the right sidebar content
$(document).on(':passagedisplay', function (ev) {
    setPageElement('right-ui-bar-body', 'StoryRightSidebar');
});

window.destroyRightSidebar = function() {
    // Check if the sidebar exists
    if ($("#right-ui-bar").length > 0) {
        // Remove the sidebar from the DOM
        $("#right-ui-bar").remove();
        // Optionally, reset the margin of #story if the sidebar was pushing content
        document.getElementById("story").style.marginRight = "";
    }
};

window.stowRightSidebar = function() {
    var rightUiBar = $("#right-ui-bar");

    // Check if the right sidebar exists
    if (rightUiBar.length > 0) {
        // Add 'stowed' class if the sidebar exists
        rightUiBar.addClass('stowed');

        // Adjust margin based on viewport width
        if (window.innerWidth < 1137) {
            document.getElementById("story").style.marginRight = "4.5em";
        } else {
            document.getElementById("story").style.marginRight = "4.5em";
        }
    } else {
        // Optional: Handle the case where the right sidebar does not exist
        console.log("Right sidebar does not exist.");
    }
};


window.unstowRightSidebar = function() {
    var rightUiBar = $("#right-ui-bar");
    
    // Check if the right sidebar exists
    if (rightUiBar.length > 0) {
        // Remove 'stowed' class if the sidebar exists
        rightUiBar.removeClass('stowed');

        // Adjust margin based on viewport width
        if (window.innerWidth < 1137) {
            document.getElementById("story").style.marginRight = "20em";
        } else {
            document.getElementById("story").style.marginRight = "20em";
        }
    } else {
        // Optional: Handle the case where the right sidebar does not exist
        console.log("Right sidebar does not exist.");
    }
};

/* 
window.toggleRightSidebar = function() {
    $("#right-ui-bar").toggleClass('stowed');
};
*/

window.toggleRightSidebar = function() {
    var $rightUiBar = $("#right-ui-bar");
    $rightUiBar.toggleClass('stowed');
    
    // Adjust the margin of the #story element dynamically based on the sidebar's visibility
    if ($rightUiBar.hasClass('stowed')) {
        // Sidebar is stowed, reduce the margin
        document.getElementById("story").style.marginRight = "4.5em"; // Adjust this value as necessary
    } else {
        // Sidebar is not stowed, increase the margin
        document.getElementById("story").style.marginRight = "20em"; // Original margin when sidebar is shown
    }
};

window.showRightSidebar = function() {
    $("#right-ui-bar").show(); // jQuery's show() method sets display to block by default.
    document.getElementById("story").style.marginRight = "20em"; // Adjust the margin if needed when the sidebar is shown.
};

window.hideRightSidebar = function() {
    $("#right-ui-bar").hide(); // jQuery's hide() method sets display to none.
    document.getElementById("story").style.marginRight = ""; // Reset the margin when the sidebar is hidden.
};

/*
<<button "show">>
    <<run window.showRightSidebar()>>
<</button>>

<<button "hide">>
    <<run window.hideRightSidebar()>>
<</button>>

<<button "toggle">>
    <<run window.toggleRightSidebar()>>
<</button>>

<<button "create">>
        <<run window.createAndShowRightSidebar()>>
<</button>>
*/
/* twine-user-script #27: "Script-LeftSidebar" */
MindWare.adjustForLeftSidebar = function() {
var $leftUiBar = $('#ui-bar');  // Get the left sidebar
    if (!$leftUiBar.hasClass('stowed')) {
        document.getElementById("story").style.marginLeft = "20em";
    }
    if ($leftUiBar.hasClass('stowed')) {
        document.getElementById("story").style.marginLeft = "4.5em";
    }
}
/* twine-user-script #28: "Script-SettingsMenu" */
// Settings menu
$(document).on(":passagerender", function() {
  // Check if the sidebar exists, and if our debug button is already there
  if ($('#menu').length > 0 && $('#menu-item-custom-settings').length === 0) {
    // Create a new button
    const settingsButton = $("<li>")
      .attr("id", "menu-item-custom-settings")
      .append(
        $("<a>")
          .attr("tabindex", "0")
          .attr("role", "button")
          .text("Settings")
          .click(function() {
            // Show the Settings window as a dialog
            Dialog.setup("Settings", "Settings");
            Dialog.wiki(Story.get("SettingsMenu").processText());
            Dialog.open();
          })
      );

    // Append the button to the sidebar menu
    $('#menu-core').append(settingsButton);
  }
});
/* twine-user-script #29: "Script-SpeechBoxes" */
/*
Syntax:<<character name [displayname] imageSrc>>

<<character 'lisa' 'images/portraits/lisa.jpg'>>
<<lisa>>Hey there!<</lisa>>

Syntax:<<say name [imageSrc]>>...<</say>>

<<say 'Lisa' 'images/portraits/lisa.jpg'>>Hey there!<</say>>
without an image
<<say 'Some Guy'>>You n'wah!<</say>>

*/

(function () {
    // v1.1.1
    'use strict';

    var characters = new Map();

    function addCharacter (name, displayname, icon) {
        if (icon === undefined && displayname) {
            icon = displayname;
            displayname = null;
        }
        if (State.length) {
            throw new Error('addCharacter() -> must be called before story starts');
        }
        if (!name) {
            console.error('addCharacter() -> name is required');
            return;
        }
        if (characters.has(name)) {
            console.error('addCharacter() -> overwriting character "' + name + '"');
        }
        characters.set(name, {displayName: displayname, image: icon || ''});
    }

function say($output, character, text, imgSrc) {
    var isPlayer = character.toLowerCase() === 'player';
    var playerName = isPlayer ? State.variables.playerName + ' ' + State.variables.playerLastName : character.toUpperFirst();
    // Use the explicitly provided imgSrc if available, otherwise, fallback to the character map or player image
    var characterImage = imgSrc || (characters.has(character) ? characters.get(character).image : null);
    var playerImage = isPlayer ? State.variables.playerAvatar[State.variables.playerAvatarSelected] : characterImage;

    var boxClass = isPlayer ? 'say say-player' : 'say';
    var $box = $(document.createElement('div'))
        .addClass(Util.slugify(character) + ' ' + boxClass);

    var $img = $(document.createElement('img'))
        .attr('src', isPlayer ? playerImage : (characterImage || ''));

    if ($img.attr('src') && $img.attr('src').trim()) {
        $box.append($img);
    }

    var _name = isPlayer ? playerName : (characters.has(character) && characters.get(character).displayName ? characters.get(character).displayName : character.toUpperFirst());

    $box.append($(document.createElement('p'))
        .wiki(_name))
        .append($(document.createElement('p'))
            .wiki(text));

    if ($output) {
        if (!($output instanceof $)) {
            $output = $($output);
        }
        $box.appendTo($output);
    }

    return $box;
}

    // Register the 'player' character at the start (you can remove this if not required)
    addCharacter('player', '');

    setup.say = say;
    setup.addCharacter = addCharacter;

    Macro.add('character', {
        // character macro handler
        handler: function () {
            addCharacter(this.args[0], this.args[1], this.args[2]);
        }
    });

    $(document).one(':passagestart', function () {
        var names = Array.from(characters.keys());
        names.push('say');

        // Generate macros
        Macro.add(names, {
            tags: null,
            handler: function () {
                if (this.name === 'player') {
                    // Handle the 'player' character separately
                    say(this.output, 'player', this.payload[0].contents, State.variables.playerAvatar[State.variables.playerAvatarSelected]);
                } else if (this.name !== 'say') {
                    say(this.output, this.name, this.payload[0].contents);
                } else {
                    say(this.output, this.args[0], this.payload[0].contents, this.args[1]);
                }
            }
        });
    });
}());
/* twine-user-script #30: "Script-SpeechBoxes-Chat" */
(function () {
    'use strict';

    var charactersChat = new Map();

    function addCharacterChat(name, displayname, icon) {
        if (icon === undefined && displayname) {
            icon = displayname;
            displayname = null;
        }
        if (State.length) {
            throw new Error('addCharacterChat() -> must be called before story starts');
        }
        if (!name) {
            console.error('addCharacterChat() -> name is required');
            return;
        }
        if (charactersChat.has(name)) {
            console.error('addCharacterChat() -> overwriting character "' + name + '"');
        }
        charactersChat.set(name, { displayName: displayname, image: icon || '' });
    }

    function sayChat($output, character, text, imgSrc) {
        var isPlayerChat = character.toLowerCase() === 'player-chat';
        var boxClass = isPlayerChat ? 'say-chat sender' : 'say-chat';

        var $box = $(document.createElement('div'))
            .addClass(Util.slugify(character) + ' ' + boxClass);

        // Set the player image and name for 'player-chat'
        var playerImage = isPlayerChat ? State.variables.playerAvatar[State.variables.playerAvatarSelected] : imgSrc;
        var playerName = isPlayerChat ? State.variables.playerNickname : character.toUpperFirst();
        
        var $img = $(document.createElement('img'))
            .attr('src', isPlayerChat ? playerImage : (imgSrc || ''));

        if ($img.attr('src') && $img.attr('src').trim()) {
            $box.append($img);
        }

        var _name = isPlayerChat ? playerName : (charactersChat.has(character) && charactersChat.get(character).displayName ? charactersChat.get(character).displayName : character.toUpperFirst());

        $box.append($(document.createElement('p'))
            .wiki(_name))
            .append($(document.createElement('p'))
                .wiki(text));

        if ($output) {
            if (!($output instanceof $)) {
                $output = $($output);
            }
            $box.appendTo($output);
        }

        return $box;
    }

    // Register the 'player-chat' character at the start with the display name from $playerNickname
    addCharacterChat('player-chat', '');

    setup.sayChat = sayChat;
    setup.addCharacterChat = addCharacterChat;

    Macro.add('characterChat', {
        handler: function () {
            addCharacterChat(this.args[0], this.args[1], this.args[2]);
        }
    });

    $(document).one(':passagestart', function () {
        var namesChat = Array.from(charactersChat.keys());
        namesChat.push('sayChat');

        Macro.add(namesChat, {
            tags: null,
            handler: function () {
                if (this.name === 'player-chat') {
                    // Handle the 'player-chat' character separately if needed
                    sayChat(this.output, 'player-chat', this.payload[0].contents, State.variables.playerAvatar[State.variables.playerAvatarSelected]);
                } else if (this.name !== 'sayChat') {
                    sayChat(this.output, this.name, this.payload[0].contents);
                } else {
                    sayChat(this.output, this.args[0], this.payload[0].contents, this.args[1]);
                }
            }
        });
    });
}());
/* twine-user-script #31: "simple-inventory.js" */
// Simple Inventory, for SugarCube 2, by Chapel
// v3.0.0, 2024-02-20, 1d95a49488446cafefaa956e53345395394e4b51
;"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey(i.key),i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}!function(){var t={description:"",handler:null,displayName:"",consumable:!0,unique:!1,permanent:!1},e=new Map,n=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:clone(t),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(_classCallCheck(this,n),!e||"string"!=typeof e)throw new Error("invalid item ID");if("object"!==_typeof(i))throw new Error("invalid item definition");Object.assign(this,Object.assign(t,i)),this.id=e,this._tags=r instanceof Array?r:"string"==typeof r?[r]:[]}return _createClass(n,[{key:"tags",get:function(){return this._tags}},{key:"hasTag",value:function(t){return this._tags.includes(t)}},{key:"hasAllTags",value:function(){return this._tags.includesAll([].slice.call(arguments).flat(1/0))}},{key:"hasAnyTags",value:function(){return this._tags.includesAny([].slice.call(arguments).flat(1/0))}},{key:"name",get:function(){return this.displayName||this.id},set:function(t){this.displayName=t}},{key:"use",value:function(){return"string"==typeof this.handler?$.wiki(this.handler):"function"==typeof this.handler&&this.handler(this),this}},{key:"inspect",value:function(){return Dialog.setup(this.name,"simple-inventory item-description"),Dialog.wiki(this.description),Dialog.open(),this}}],[{key:"is",value:function(t){return t instanceof n}},{key:"add",value:function(t,i,r){var a=new n(t,i,r);return e.set(t,a),a}},{key:"get",value:function(t){return e.get(t)}},{key:"has",value:function(t){return e.has(t)}},{key:"list",get:function(){return e}}]),n}();setup.Item=n,window.Item=window.Item||n}(),function(){var t=setup.Item,e=!1,n="&hellip;",i={inspect:"Inspect",use:"Use",drop:"Drop",stack:"stack",take:"Take",give:"Give",stackPre:"&nbsp;&times;&nbsp;",stackPost:"&nbsp;"},r={};function a(e){return t.has(e)&&t.get(e).unique}var s=function(){function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_classCallCheck(this,s),this.data=clone(t),this._tags=e instanceof Array?e:"string"==typeof e?[e]:[]}return _createClass(s,[{key:"emit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.emit(t,this,e),this}},{key:"array",get:function(){var t=this,e=[];return Object.keys(this.data).forEach((function(n){if(e.push(n),t.data[n]>1)for(var i=1;i<t.data[n];i++)e.push(n)})),e}},{key:"list",get:function(){return Object.keys(this.data)}},{key:"length",get:function(){return this.array.length}},{key:"uniqueLength",get:function(){return this.list.length}},{key:"table",get:function(){return this.data}},{key:"tags",get:function(){return this._tags}},{key:"hasTag",value:function(t){return this._tags.includes(t)}},{key:"hasAllTags",value:function(){return this._tags.includesAll([].slice.call(arguments).flat(1/0))}},{key:"hasAnyTags",value:function(){return this._tags.includesAny([].slice.call(arguments).flat(1/0))}},{key:"count",value:function(t){return t?this.data[t]||0:this.length}},{key:"has",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.data[t]>=e}},{key:"hasAll",value:function(){var t=this;return[].slice.call(arguments).flat(1/0).every((function(e){return t.has(e)}))}},{key:"hasAny",value:function(){var t=this;return[].slice.call(arguments).flat(1/0).some((function(e){return t.has(e)}))}},{key:"compare",value:function(t){var e=this,n=s.itemset(t);return Object.keys(n).every((function(t){return e.has(t,n[t])}))}},{key:"merge",value:function(t){var e=this,n=s.itemset(t);return Object.keys(n).forEach((function(t){s.change(e,t,n[t])})),n}},{key:"unmerge",value:function(t){var e=this,n={},i=s.itemset(t);return Object.keys(i).forEach((function(t){e.has(t,i[t])?n[t]=i[t]:e.has(t)&&(n[t]=e.count(t)),s.change(e,t,i[t],!0)})),n}},{key:"pickup",value:function(){var t=this.merge(s.parseArgList.apply(null,arguments));return this.emit("update",{delta:t}),this}},{key:"drop",value:function(){var t=this.unmerge(s.parseArgList.apply(null,arguments));return this.emit("update",{delta:t}),this}},{key:"empty",value:function(){var t=clone(this.data);return this.data={},this.emit("update",{delta:t}),this}},{key:"transfer",value:function(t){var e=s.parseArgList.apply(null,[].slice.call(arguments).slice(1));if(!s.is(t))throw new TypeError("target inventory is not an inventory instance");var n=this.unmerge(e);return t.merge(n),this.emit("update",{target:t,delta:n}),this}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"iterate",value:function(t){var e=this;return"function"!=typeof t||this.list.forEach((function(n){t(n,e.data[n])})),this}},{key:"use",value:function(e){if(t.has(e)){var n=t.get(e);if(n.use(),n.consumable){s.change(this,e,1,!0);var i={};i[e]=1,this.emit("update",{delta:i})}return this.emit("use",{item:n}),this}}},{key:"clone",value:function(){return new s(this.data||{},this._tags||[])}},{key:"toJSON",value:function(){return JSON.reviveWrapper("new setup.Inventory("+JSON.stringify(this.data)+", "+JSON.stringify(this._tags)+")")}}],[{key:"confirm",get:function(){return e},set:function(t){e="string"==typeof t&&"all"===t.trim().toLowerCase()?"all":"string"==typeof t&&"stack"===t.trim().toLowerCase()?"stack":!!t}},{key:"emptyMessage",get:function(){return n},set:function(t){"string"==typeof t&&(n=t)}},{key:"strings",get:function(){return Object.assign(clone(i),r)},set:function(t){"object"===_typeof(t)&&(r=Object.assign(r,clone(t)))}},{key:"change",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0!==i){if(e instanceof s&&(e=e.data),"object"!==_typeof(e)){if(e)throw new TypeError("cannot access inventory data");e={}}if(!(o=n)||"string"!=typeof o||!o.trim())throw new TypeError("invalid item name/id");var o;if("number"==typeof i&&!Number.isNaN(i)&&Number.isInteger(i)||(i=1),r&&(i*=-1),i>0){if(Object.keys(e).includes(n)&&a(n))return;i>1&&a(n)&&(i=1),Object.keys(e).includes(n)||(e[n]=0),e[n]+=i}else{if(function(e){return t.has(e)&&t.get(e).permanent}(n))return;Object.keys(e).includes(n)&&"number"==typeof e[n]&&(e[n]+=i),e[n]<=0&&delete e[n]}return e}}},{key:"itemset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s.is(t)&&(t=t.data),"object"!==_typeof(t))return{};var e={};return Object.keys(t).forEach((function(n){"number"==typeof t[n]&&Number.isInteger(t[n])&&0!==t[n]&&(e[n]=t[n])})),e}},{key:"parseArgList",value:function(){var t=[].slice.call(arguments).flat(1/0);if(t.length%2!=0)throw new Error("item sets should be pairs of item IDs and numbers");var e={};return t.forEach((function(n,i){i%2==0&&(e[n]=t[i+1])})),e}},{key:"is",value:function(t){return t instanceof s}},{key:"emit",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$(document).trigger(Object.assign({type:":inventory-"+t+".simple-inventory",inventory:e,target:null,delta:{},item:null},n))}},{key:"create",value:function(t,e){return new s(t,e)}}]),s}();setup.Inventory=s,window.Inventory=window.Inventory||s}(),function(){var t=setup.Item,e=setup.Inventory;function n(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Alert",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Are you sure?";if(!t||"function"!=typeof t)throw new Error("Invalid confirmation callback!");if(e.confirm)if("all"!==e.confirm||"all"===i)if("stack"!==e.confirm||i){var s={display:"inline-block",float:"right"},o=$(document.createElement("div")),u=$(document.createElement("p")).append(a),l=$(document.createElement("div")).addClass("confirmation-buttons"),c=$(document.createElement("button")).append("Okay").addClass("confirm-yes").css(Object.assign(s,{"margin-right":"0.5rem"})),d=$(document.createElement("button")).append("Cancel").addClass("confirm-no").css(s);t&&"function"==typeof t&&c.ariaClick(t),n&&"function"==typeof n&&d.ariaClick(n),l.append(d,c),o.append(u,l),Dialog.setup(r,"simple-inventory confirmation"),Dialog.append(o),Dialog.open()}else t();else t();else t()}function i(t){var e=$(document.createElement("span")).addClass("spacer");return t&&e.wiki(""+t),e}function r(t,i){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return"give"===String(i).toLowerCase().trim()?i=e.strings.give:"take"===String(i).toLowerCase().trim()?i=e.strings.take:i&&"drop"!==String(i).toLowerCase().trim()||(i=e.strings.drop),$(document.createElement(r?"button":"a")).addClass("all-link drop-link").wiki(i+" all").ariaClick((function(){t.isEmpty()||n((function(){a&&e.is(a)?(a.merge(t),t.empty()):t.empty(),Dialog.close()}),(function(){Dialog.close()}),!0)}))}function a(a){var s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{description:!0,use:!0,transfer:null,drop:!0,all:!0,stack:!0,dropActionText:"",classes:""},u=$(document.createElement("ul")).addClass("simple-inventory-list");if(a.length){if(s=a.list.map((function(r){var s=[],u=t.has(r)&&t.get(r).displayName?t.get(r).displayName:r;o.description&&t.has(r)&&t.get(r).description?s.push(function(n,i,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r=r||e.strings.inspect,$(document.createElement(a?"button":"a")).addClass("inspect-link").wiki(""+i).ariaClick((function(){t.get(i).inspect()}))}(a,r,u)):s.push($(document.createElement("span")).append(t.has(r)?t.get(r).name:r).addClass("item-name")),s.push(function(t,n,i,r){var a=$(document.createElement("span")),s=t.count(n);return i=i||e.strings.stackPre,r=r||e.strings.stackPost,1==s?a.addClass("item-count single"):a.addClass("item-count multi"),a.append(""+i+(s||0)+r)}(a,r)),o.use&&t.has(r)&&t.get(r).handler?s.push(function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return i=i||e.strings.use,$(document.createElement(r?"button":"a")).addClass("use-link").wiki(""+i).ariaClick((function(){t.use(n)}))}(a,r)):s.push(i()),(o.transfer&&e.is(o.transfer)||o.drop)&&!function(e){return t.has(e)&&t.get(e).permanent}(r)?(s.push(function(t,i,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return"give"===String(r).toLowerCase().trim()?r=e.strings.give:"take"===String(r).toLowerCase().trim()?r=e.strings.take:r&&"drop"!==String(r).toLowerCase().trim()||(r=e.strings.drop),$(document.createElement(a?"button":"a")).addClass("drop-link").wiki(""+r).ariaClick((function(){n((function(){s&&e.is(s)?t.transfer(s,i,1):t.drop(i,1),Dialog.close()}),(function(){Dialog.close()}))}))}(a,r,o.dropActionText,!1,o.transfer||null)),a.count(r)>1&&o.stack?s.push(function(t,i,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return"give"===String(r).toLowerCase().trim()?r=e.strings.give:"take"===String(r).toLowerCase().trim()?r=e.strings.take:r&&"drop"!==String(r).toLowerCase().trim()||(r=e.strings.drop),r=r+"&nbsp;"+e.strings.stack,$(document.createElement(a?"button":"a")).addClass("stack-link drop-link").wiki(""+r).ariaClick((function(){n((function(){s&&e.is(s)?t.transfer(s,i,t.count(i)):t.drop(i,t.count(i)),Dialog.close()}),(function(){Dialog.close()}))}))}(a,r,o.dropActionText,!1,o.transfer||null)):s.push(i())):s.push(i());var l=r.normalize().toLowerCase().replace(/\s+/g,"-");return $(document.createElement("li")).append(s).addClass("simple-inventory-listing").attr({"data-item-id":l,"data-keyword":u})})),o.all){var l=$(document.createElement("li")).addClass("all-listing simple-inventory-listing").append([i("&mdash;"),i(),i(),r(a,o.dropActionText,!1,o.transfer||null)]);s.push(l)}}else s=$(document.createElement("li")).addClass("simple-inventory-listing").append($(document.createElement("span")).wiki(e.emptyMessage));return u.append(s),u}e.prototype.interface=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this,r=$(document.createElement("div")).addClass("simple-inventory-wrapper");return e.filter&&r.append(function(){var t=$(document.createElement("div")).addClass("simple-inventory-filter"),e=$(document.createElement("input")).attr({type:"text",placeholder:"Filter..."}).on("input",(function(){var n=e.val().trim().toLowerCase(),i=t.parent().find("ul.simple-inventory-list li.simple-inventory-listing:not(.all-listing)");n?i.each((function(t,e){var i=$(e);i&&i.length&&(i.attr("data-keyword").substring(0,n.length).trim().toLowerCase()!==n?i.hide():i.show())})):i.show()}));return t.append(e),t}()),r.append(a(this,e)),$(document).on(":inventory-update.simple-inventory.gui-built-in",(function(){r.length?r.empty().append(a(i,e)):$(document).off(":inventory-update.simple-inventory.gui-built-in")})),n&&n instanceof $?t=n:n&&(t=$(n)),t&&r.appendTo(t),r}}(),function(){setup.Inventory,setup.Item;var t=".simple-inventory-userland",e=":inventory-update.simple-inventory"+t,n=":inventory-use.simple-inventory"+t;function i(t){return t&&"function"==typeof t}Object.assign(setup.Inventory,{events:{update:{on:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i(t)&&$(document).on(e+n,t)},one:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i(t)&&$(document).one(e+n,t)},off:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";$(document).off(e+t)}},use:{on:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i(t)&&$(document).on(n+e,t)},one:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i(t)&&$(document).one(n+e,t)},off:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";$(document).off(n+t)}}}})}(),function(){var t=":";function e(e){var n=function(t){return t.replace(/\r+/g,"\n").replace(/\n+/,"\n").replace(/ +/g," ").trim().split(/\n/g)}(e),i={};return n.forEach((function(e){if(e&&e.trim()&&e.includes(t)){var n=e.trim().split(t);i[n[0].trim()]=n[1].trim()}})),i}var n=function(t){try{return Story.has(t)?e(Story.get(t).text):{}}catch(t){return console.error(t.message,t),{}}}("inventory.strings");n.empty&&"string"==typeof n.empty&&n.empty.trim()&&(setup.Inventory.emptyMessage=n.empty,delete n.empty),setup.Inventory.strings=n||{}}(),function(){var t=setup.Item,e=setup.Inventory;function n(t){return t&&"string"==typeof t&&t.length>=2&&("$"===t[0]||"_"===t[0])}function i(t){if(n(t)&&(t=State.getVar(t)),e.is(t))return t}Macro.add(["item","consumable"],{tags:["description","tags","unique","permanent"],handler:function(){var e,n,i,r,a=null,s=!1,o=!1,u=!1;if(State.length>0)return this.error("items must be defined in `StoryInit` or story JavaScript!");if(!this.args[0]||"string"!=typeof this.args[0]||!this.args[0].trim())return this.error("invalid item ID");if(e=this.args[0].trim(),"consumable"===this.name&&(a=this.payload[0].contents||null,s=!0),this.args[1]&&(n=this.args[1]),this.payload.length>1){var l=this.payload.find((function(t){return"description"===t.name})),c=this.payload.find((function(t){return"tags"===t.name})),d=this.payload.find((function(t){return"unique"===t.name})),f=this.payload.find((function(t){return"permanent"===t.name}));l&&(i=l.contents.trim()),c&&(r=c.args.flat(1/0)),d&&(o=!0),f&&(u=!0)}t.add(e,{displayName:n||"",description:i||"",handler:a,consumable:s,unique:o,permanent:u},r)}}),Macro.add("newinv",{handler:function(){var t=this.args.raw.trim().split(" ").first().replace(/["']/g,"").trim();if(!n(t))return this.error("argument must be a story or temporary variable!");State.setVar(t,new e({},this.args.flat(1/0).slice(1)))}}),Macro.add(["pickup","drop"],{handler:function(){var t=i(this.args[0]);return t?this.args.length<3?this.error("no items to pick up were provided"):void t[this.name](this.args.slice(1)):this.error("first argument must be a valid inventory!")}}),Macro.add("dropall",{handler:function(){var t=i(this.args[0]);if(!t)return this.error("first argument must be a valid inventory!");t.empty()}}),Macro.add(["transfer","merge","unmerge"],{handler:function(){var t=i(this.args[0]);if(!t)return this.error("first argument must be a valid inventory!");var e=i(this.args[1]);if(!e)return this.error("second argument must be a valid inventory!");if("transfer"===this.name){if(this.args.length<4)return this.error("no items to transfer were provided");t.transfer(e,this.args.slice(2))}else t[this.name](e)}}),Macro.add(["inv","take","give"],{handler:function(){var t=null,n=i(this.args[0]);if(!n)return this.error("first argument must be a valid inventory!");this.args[1]&&i(this.args[1])&&(t=i(this.args[1]));var r={description:this.args.includesAny("inspect","description"),use:this.args.includes("use"),transfer:t,drop:this.args.includes("drop"),all:this.args.includes("all"),stack:this.args.includes("stack"),filter:this.args.includes("filter"),dropActionText:"inv"===this.name?"Drop":e.strings[this.name.trim().toLowerCase()],classes:"macro-".concat(this.name)};n.interface(r,$(this.output))}})}(),function(){var t=setup.Item,e=setup.Inventory;function n(t,e,n){if("object"!==_typeof(e))throw new TypeError("the extension should be a plain generic object holding the properties and methods you want to add");Object.keys(e).forEach((function(i){if(t[i]&&!n)throw new Error('Cannot override existing property "'+i+'"!');t[i]=e[i]}))}Object.assign(e,{extend:function(t){n(e,t,arguments.length>1&&void 0!==arguments[1]&&arguments[1])},extendPrototype:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(e.prototype,t,i)}}),Object.assign(t,{extend:function(e){n(t,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])},extendPrototype:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(t.prototype,e,i)}})}();
// End Simple Inventory
/* twine-user-script #32: "live-update.js" */
(function () {
	"use strict";

	$(document).on(":liveupdate", function () {
		$(".macro-live").trigger(":liveupdateinternal");
	});

	Macro.add(['update', 'upd'], {
		handler: function handler() {
			$(document).trigger(":liveupdate");
		}
	});

	Macro.add(['live', 'l', 'lh'], {
		skipArgs: true,
		handler: function handler() {
			if (this.args.full.length === 0) {
				return this.error('no expression specified');
			}
			try {
				var statement = this.args.full;
				var result = toStringOrDefault(Scripting.evalJavaScript(statement), null);
				if (result !== null) {
					var lh = this.name === "lh";
					var $el = $("<span></span>").addClass("macro-live").wiki(lh ? Util.escape(result) : result).appendTo(this.output);
					$el.on(":liveupdateinternal", this.createShadowWrapper(function (ev) {
						var out = toStringOrDefault(Scripting.evalJavaScript(statement), null);
						$el.empty().wiki(lh ? Util.escape(out) : out);
					}));
				}
			} catch (ex) {
				return this.error("bad evaluation: " + (_typeof(ex) === 'object' ? ex.message : ex));
			}
		}
	});

	Macro.add(['liveblock', 'lb'], {
		tags: null,
		handler: function handler() {
			try {
				var content = this.payload[0].contents.trim();
				if (content) {
					var $el = $("<span></span>").addClass("macro-live macro-live-block").wiki(content).appendTo(this.output);
					$el.on(":liveupdateinternal", this.createShadowWrapper(function (ev) {
						$el.empty().wiki(content);
					}));
				}
			} catch (ex) {
				return this.error("bad evaluation: " + (_typeof(ex) === 'object' ? ex.message : ex));
			}
		}
	});
})();
/* twine-user-script #33: "Macro-Fade" */
// Syntax:<<fadein animationLength [delay]>> <</fadein>>
// Usage:
// <<fadein 10s>>Fade me in over the course of ten seconds.<</fadein>>
// <<fadein 500ms 200ms>>Fade me in over half a second, but give the passage transition a moment to finish.<</fadein>>
// <<fadein 200ms 20s>>Hide the way [[forward]] for 20 seconds...<</fadein>>

// Syntax:<<fadeout animationLength [delay]>> <</fadeout>>
// Usage:
// <<fadeout 10s>>Fade me out over the course of ten seconds.<</fadeout>>
// <<fadeout 4s 200ms>>Fade me out over four seconds, but give the passage transition a moment to finish.<</fadeout>>
// <<fadeout 2s 20s>>This text will begin to disappear after 20 seconds...read fast!<</fadeout>>

// <<fadein>> macro
Macro.add('fadein', {
    tags: null,
    handler: function() {
        var $wrapper = $(document.createElement('span'));
        var content = this.payload[0].contents;
        var time, delay;

        if (this.args.length === 0) {
            return this.error('no arguments given');
        }

        if (State.variables.fadeDisable) {
            $wrapper
                .wiki(content)
                .appendTo(this.output);
            return;
        }

        time = Util.fromCssTime(this.args[0]);
        delay = (this.args.length > 1) ? Util.fromCssTime(this.args[1]) : 0;

        $wrapper
            .wiki(content)
            .addClass('macro-' + this.name)
            .appendTo(this.output)
            .hide()
            .delay(delay)
            .fadeIn(time);
    }
});

// <<fadeout>> macro
Macro.add('fadeout', {
    tags: null,
    handler: function() {
        var $wrapper = $(document.createElement('span'));
        var content = this.payload[0].contents;
        var time, delay;

        if (this.args.length === 0) {
            return this.error('no arguments given');
        }

        if (State.variables.fadeDisable) {
            $wrapper
                .wiki(content)
                .appendTo(this.output)
                .hide();
            return;
        }

        time = Util.fromCssTime(this.args[0]);
        delay = (this.args.length > 1) ? Util.fromCssTime(this.args[1]) : 0;

        $wrapper
            .wiki(content)
            .addClass('macro-' + this.name)
            .appendTo(this.output)
            .delay(delay)
            .fadeOut(time);
    }
});
/* twine-user-script #34: "Macro-ActionPoints" */
Macro.add('actionPointsIncreased', {
    handler: function() {
        var points = this.args[0];
        if (typeof points === 'undefined') {
            return this.error('no arguments given for action points increase');
        }

        var message = "<div class='action-points-change'><span class='action-points-increase'><span class='action-point-icon'>⚡</span> Action Points increased by " + points + ".</span></div>";
        $(this.output).wiki(message);
    }
});

// <<actionPointsIncreased 2>>  // Or use a variable: <<actionPointsIncreased $someVariable>>

Macro.add('actionPointsDecreased', {
    handler: function() {
        var points = this.args[0];
        if (typeof points === 'undefined') {
            return this.error('no arguments given for action points decrease');
        }

        // Ensure that the number of action points doesn't go below zero
        if (State.variables.actionPoints < points) {
            points = State.variables.actionPoints; // Decrease only the remaining points
            State.variables.actionPoints = 0;      // Set action points to zero
        } else {
            State.variables.actionPoints -= points;
        }
console.log("Current action points: " + State.variables.actionPoints);
console.log("Points to decrease: " + points);
        var message = "<div class='action-points-change'><span class='action-points-decrease'><span class='action-point-icon'>⚡</span> Action Points decreased by " + points + ".</span></div>";
        $(this.output).wiki(message);
    }
});

// <<actionPointsDecreased 1>>  // Or use a variable: <<actionPointsDecreased $someVariable>>
/* twine-user-script #35: "Widget-Inventory" */
Macro.add('itemReceived', {
    handler: function() {
        var itemName = this.args[0];
        if (typeof itemName === 'undefined') {
            return this.error('No item name provided for item received message');
        }

        var message = "<div class='item-change item-received'><span class='item-receive-message'>" + itemName + " received!</span></div>";
        $(this.output).wiki(message);
    }
});

Macro.add('itemLost', {
    handler: function() {
        var itemName = this.args[0];
        if (typeof itemName === 'undefined') {
            return this.error('No item name provided for item lost message');
        }

        var message = "<div class='item-change item-lost'><span class='item-lose-message'>" + itemName + " lost.</span></div>";
        $(this.output).wiki(message);
    }
});
/* twine-user-script #36: "Macro-Video" */
Macro.add('video', {
    handler: function () {
        if (this.args.length < 1) {
            return this.error("The video macro requires a path argument.");
        }

        const videoPath = this.args[0];
        const videoHTML = `<video width="100%" autoplay loop muted><source src="${videoPath}" type="video/mp4">Your browser does not support the video tag.</video>
        `;

        new Wikifier(this.output, videoHTML);
    }
});
/* twine-user-script #37: "click-to-proceed.js" */
(() => {
	"use strict";

	$(document).on(":passageinit", () => {
		CTP.Logs.forEach((_, id) => {
			if (!CTP.Repository.get(id)?.persist) CTP.Logs.delete(id);
		});
		CTP.Repository.forEach(({ persist }, id) => {
			if (!persist) CTP.Repository.delete(id);
		});
	});

	var CTP = class _CTP {
		constructor(id, persist = false) {
			this.stack = [];
			this.clears = [];
			this.options = {};
			if (!id?.trim()) throw new Error(`No ID specified!`);
			this.id = id;
			this.persist = persist;
			_CTP.Repository.set(id, this);
		}
		static get Repository() {
			if (!setup["@CTP/Repository"]) setup["@CTP/Repository"] = new Map();
			return setup["@CTP/Repository"];
		}
		static get Logs() {
			if (!variables()["@CTP/Logs"]) variables()["@CTP/Logs"] = new Map();
			return variables()["@CTP/Logs"];
		}
		get log() {
			if (!_CTP.Logs.get(this.id)) _CTP.Logs.set(this.id, { lastClear: -1, index: -1, seen: -1 });
			return _CTP.Logs.get(this.id);
		}
		static getCTP(id) {
			return _CTP.Repository.get(id);
		}
		add(content, options = {}) {
			if (options.clear) this.clears.push(this.stack.length);
			this.stack.push({
				options,
				content,
				index: this.stack.length,
				element: $()
			});
			return this;
		}
		print(index) {
			const { content, options: iOpts } = this.stack[index];
			const options = {
				...this.options,
				...iOpts
			};
			const element = $(document.createElement(options.element || "span")).addClass("--macro-ctp-hidden").attr({
				"data-macro-ctp-id": this.id,
				"data-macro-ctp-index": index
			}).on("update-internal.macro-ctp", (event, firstTime) => {
				if ($(event.target).is(element)) {
					if (index === this.log.index) {
						if (firstTime) {
							if (typeof content === "string") element.wiki(content);
							else element.append(content);
							element.addClass(options.transition ? "--macro-ctp-t8n" : "");
						}
						element.removeClass("--macro-ctp-hidden");
					} else {
						if (index < this.log.seen) element.removeClass("--macro-ctp-t8n");
						element.toggleClass("--macro-ctp-hidden", index > this.log.index || index < this.log.lastClear);
					}
				}
			});
			this.stack[index].element = element;
			return element;
		}

		output() {
			const wrapper = document.createDocumentFragment();
			for (let i = 0; i < this.stack.length; i++) {
				this.print(i).appendTo(wrapper);
			}
			return wrapper;
		}

		advance() {
			if (this.log.index < this.stack.length - 1) {
				this.log.index++;
				const firstTime = this.log.index > this.log.seen;
				this.log.seen = Math.max(this.log.seen, this.log.index);
				this.log.lastClear = this.clears.slice().reverse().find((el) => el <= this.log.index) ?? -1;
				$(document).trigger("update.macro-ctp", ["advance", this.id, this.log.index]);
				this.stack.forEach(({ element }) => element.trigger("update-internal.macro-ctp", [firstTime, "advance", this.id, this.log.index]));
			}
			return this;
		}

		back() {
			if (this.log.index > 0) {
				this.log.index--;
				this.log.lastClear = this.clears.slice().reverse().find((el) => el <= this.log.index) ?? -1;
				$(document).trigger("update.macro-ctp", ["back", this.id, this.log.index]);
				this.stack.forEach(({ element }) => element.trigger("update-internal.macro-ctp", [false, "back", this.id, this.log.index]));
			}
			return this;
		}
	};
	window.CTP = CTP;

	Macro.add("ctp", {
		tags: ["ctpNext"],
		handler() {
			const id = this.args[0];
			const persist = this.args.slice(1).includes("persist");
			const ctp = new CTP(id, persist);
			const _passage = passage();
			this.payload.forEach(({ args, name, contents }) => {
				const options = {};
				if (args.includes("clear")) options.clear = true;
				if (args.includesAny("t8n", "transition")) options.transition = true;
				const elementArg = args.find((el) => el.startsWith("element:")) ?? "";
				if (elementArg) options.element = elementArg.replace("element:", "");
				if (name === "ctp") ctp.options = { ...options };
				ctp.add(contents, options);
			});
			$(this.output).append(ctp.output());
			
			if (_passage === passage()) {
				const i = Math.max(ctp.log.index, 0);
				ctp.log.index = -1;
				ctp.log.seen = -1;
				while (ctp.log.index < i) ctp.advance();
			}
		}
	});

	Macro.add("ctpAdvance", {
		handler() {
			const id = this.args[0];
			if (id) {
				const ctp = CTP.getCTP(id);
				if (ctp) ctp.advance();
				else throw new Error(`No CTP with ID '${id}' found!`);
			} else throw new Error(`No ID specified!`);
		}
	});

	Macro.add("ctpBack", {
		handler() {
			const id = this.args[0];
			if (id) {
				const ctp = CTP.getCTP(id);
				if (ctp) ctp.back();
				else throw new Error(`No CTP with ID '${id}' found!`);
			} else throw new Error(`No ID specified!`);
		}
	});
})();
/* twine-user-script #38: "Script-DebugMenu" */
// Debug menu
$(document).on(":passagerender", function() {
  // Check if the sidebar exists, and if our debug button is already there
  if ($('#menu').length > 0 && $('#menu-item-debug').length === 0) {
    // Create a new button
    const debugButton = $("<li>")
      .attr("id", "menu-item-debug")
      .append(
        $("<a>")
          .attr("tabindex", "0")
          .attr("role", "button")
          .text("Debug")
          .click(function() {
            // Show the Debug window as a dialog
            Dialog.setup("Debug", "Debug Window");
            Dialog.wiki(Story.get("DebugWindow").processText());
            Dialog.open();
          })
      );

    // Append the button to the sidebar menu
    $('#menu-core').append(debugButton);
  }
});</script><tw-passagedata pid="1" name="Scripts-Chapter0" tags="nobr" position="100,100" size="100,100">/*********************************************/
/* 
Location: Anywhere
Description: First rent payment email message
*/
&lt;&lt;if $rentPaymentCounter === 1 &amp;&amp; !$firstRentPaymentEmailSent&gt;&gt;
    &lt;&lt;set $firstRentPaymentEmailSent = true&gt;&gt;
    &lt;&lt;run MindWare.addEmail (&quot;Hive Properties&quot;,&quot;Hive Properties - Welcome to Your New Home&quot;, &quot;We are delighted to welcome you to the Hive Properties community. With your first payment successfully received...&quot;, &quot;Email-HiveProperties-Welcome&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;

/*********************************************/

/* 
Location: Anywhere
Description: Landlord mission not finished 
*/
&lt;&lt;if $totalDays &gt; 3 &amp;&amp; !$spyingLandlordFinished &amp;&amp; !$LandlordJobFailEmailSent &amp;&amp; !$quickStartPath&gt;&gt;
    &lt;&lt;set $LandlordJobFailEmailSent to true&gt;&gt;
    &lt;&lt;run MindWare.markEmailAsRead(&quot;Email-LandlordJobInfo&quot;)&gt;&gt;
    &lt;&lt;run MindWare.removeEmail(&quot;Email-LandlordJobInfo&quot;)&gt;&gt;
    &lt;&lt;run MindWare.addEmail (&quot;ConcernedTenant01&quot;,&quot;Thanks for wasting my time&quot;, &quot;What happened? You took on the job, and then... nothing. Someone else could have taken this job and finished it by now.&quot;, &quot;Email-LandlordJobFail&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;

/*********************************************/

/* 
Location: BrainFry
Description: GitGud Delivery Mission 
*/
&lt;&lt;if $brainFryWorkCount &gt; 2 &amp;&amp; State.passage === &quot;BrainFry&quot; &amp;&amp; !$gitGutDeliveryStarted &amp;&amp; $dayOfWeek !== &quot;Saturday&quot; &amp;&amp; $dayOfWeek !== &quot;Sunday&quot;&gt;&gt;
    &lt;&lt;goto &quot;GitGudDelivery-Intro&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;


/*********************************************/

/* 
Location: Anywhere
Description: EroSphere Promo Email
*/
&lt;&lt;if $totalDays &gt; 4 &amp;&amp; $eroSpherePromoSent !== true&gt;&gt;
    &lt;&lt;set $eroSpherePromoSent = true&gt;&gt;
    &lt;&lt;run MindWare.addEmail(&quot;EroSphere&quot;, &quot;[PROMO] Unleash Your Desires at EroSphere!&quot;, &quot;Visit EroSphere - Where fantasy meets reality, and your wildest dreams come alive!&quot;, &quot;Email-EroSpherePromo&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;

/*********************************************/

/* 
Location: Anywhere
Description: Cipher Chat Request to Obtain Sensitive Information
*/
&lt;&lt;if previous() is &quot;GoToSleep&quot; &amp;&amp; $brainFryWorkCount &gt; 5 &amp;&amp; $cipherUrgentRequestSent !== true&gt;&gt;
        &lt;&lt;set $cipherUrgentRequestSent = true&gt;&gt;
        &lt;&lt;goto &quot;Quest-CipherLynx-UrgentRequest-Introduction&quot;&gt;&gt;
        &lt;&lt;run MindWare.addInstantMessage(&#39;cipherInstantMessages&#39;, &#39;Urgent Request&#39;, &#39;IMApp-CipherLynx-UrgentRequest&#39;, &#39;Cipher&#39;, true, true);&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="2" name="Prologue" tags="nobr" position="225,100" size="100,100">&lt;&lt;fadein 4s 500ms&gt;&gt;
&lt;&lt;fadeout 2s 7000ms&gt;&gt;
&lt;div class=&quot;chapter-transition-container&quot;&gt;
    &lt;h2 id=&quot;chapterTitle&quot; class=&quot;neon-flicker&quot;&gt;Prologue&lt;/h2&gt;
&lt;/div&gt;
&lt;&lt;/fadeout&gt;&gt;
&lt;&lt;/fadein&gt;&gt;
&lt;&lt;timed 10s&gt;&gt;
    &lt;&lt;goto &quot;Introduction1&quot;&gt;&gt;
&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="3" name="Introduction1" tags="" position="525,300" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/neourbania.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
A sprawling landscape of towering skyscrapers punctuates the horizon, each one emblazoned with glowing neon logos and gargantuan electronic billboards, seducing onlookers with the latest in fashion and technology.

The sky is a perpetual twilight of smog and artificial light, casting an eerie glow on the city&#39;s avenues and alleyways, while the air is saturated with the buzz of drones delivering packages to insatiable consumers.

The streets below are a constant stream of bustling activity as swarms of people navigate through crowded marketplaces that flicker with holographic advertisements, each promising a higher level of pleasure and indulgence.

Welcome to &lt;span class=&quot;text-glow&quot;&gt;NeoUrbania&lt;/span&gt;. The year is 2045.

It&#39;s a world where the pursuit of pleasure is the only morality, and corporations are the new deities. Democracy has long since been auctioned to the highest bidder, leaving in its wake a society obsessed with novelty and hedonistic consumption. Here, human worth is measured by social credit scores and expressed by spending habits.

&lt;&lt;button &quot;Continue&quot;&gt;&gt;
  &lt;&lt;goto &quot;Introduction2&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="4" name="Introduction2" tags="" position="650,300" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/syntech.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
At the heart of this neon jungle is &lt;span class=&quot;text-glow&quot;&gt;SynTech&lt;/span&gt;, the world&#39;s leading megacorporation, whose advancements have woven into the very fabric of society.

A beacon of innovation, the &lt;span class=&quot;text-glow&quot;&gt;SynTech Tower&lt;/span&gt; is adorned with constantly shifting digital displays that showcase the company&#39;s latest achievements, research breakthroughs, and tech offerings. The very top of the tower boasts a colossal 3D hologram of the planet Earth, symbolizing SynTech&#39;s global influence and vision for a connected world.

Inside the SynTech Tower, scientists and engineers birth technologies that blur the lines between biology and machinery. Through their work, SynTech has revolutionized medicine and human capabilities. They&#39;ve developed neural enhancements that amplify cognitive abilities, exoskeletal prosthetics that restore mobility to the paralyzed, and nano-augmentations that combat diseases at a molecular level.

&lt;&lt;button &quot;Continue&quot;&gt;&gt;
  &lt;&lt;goto &quot;Introduction3&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="5" name="Introduction3" tags="" position="600,100" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/brainfry.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
The world you know is far away from the gleaming pinnacles of the SynTech Tower. You&#39;re a new employee of &lt;span class=&quot;text-glow&quot;&gt;BrainFry&lt;/span&gt;, a shady developer of immersive virtual reality experiences founded and owned by &lt;span class=&quot;text-glow&quot;&gt;Drake Voronov&lt;/span&gt;, a serial entreprenour with a moral compass so skewed it&#39;s rumored to point straight to the underworld. 

The kind of VR experiences produced by BrainFry and other similar companies are called &lt;span class=&quot;text-glow&quot;&gt;S.I.M.S. (Sensory Immersive Mind Simulations)&lt;/span&gt;, and they&#39;re NeoUrbanian&#39;s latest and greatest addiction. They allow their users to experience their wildest fantasies or greatest thrills as if they were actually happening to them. Unlike regular VR games, S.I.M.S. stimulate all five senses by tapping directly into neural pathways, allowing for a deeply personal and emotionally resonant experience.       

BrainFry&#39;s building is located deep in &lt;span class=&quot;text-glow&quot;&gt;&quot;The Backlog,&quot;&lt;/span&gt; a local moniker for the older, weathered part of NeoUrbania. The building is a multi-story structure with wires sprouting from every corner, like veins drawing lifeblood from the energy of the city itself. These thick cables weave an intricate web around the building, connecting it to various power sources, data hubs, and other establishments in the vicinity. 

Your path to BrainFry was driven not by passion, but by necessity. Relying on gig work alone was no longer sustainable, even for someone with fairly advanced hacking skills like yours. Despite its infamous reputation, the job at BrainFry offered something that had become a luxury for you: regular income.

&lt;&lt;button &quot;Continue&quot;&gt;&gt;
  &lt;&lt;goto &quot;Introduction4&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="6" name="Introduction4" tags="" position="725,100" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/starting-apartment.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
Still, BrainFry&#39;s pay is barely enough to get by. This financial reality has landed you in a cramped apartment whose only positive characteristics are its proximity to the BrainFry building and the rent being just $1,000 a week. Its thin walls often fail to muffle the raucous laughter, arguments, and countless footsteps of neighboring tenants. 

The floor, while not spotless, carries the evidence of many late-night coding sessions and hastily consumed meals. Peeling patches on the walls, craving attention, are overshadowed by the posters of your favorite &lt;span class=&quot;text-glow&quot;&gt;OmniNet&lt;/span&gt; stars.

Situated right in front of the old, boxy television is a cheap, worn-out couch. Its sagging cushions and faded fabric have seen better days, but it serves its purpose during the moments you decide to unwind with a can of beer and movie.

However, the undeniable centerpiece of the apartment is your computer setup, which stands in stark contrast to the rest of the room and is  really the only expensive item you own. 

The neon lighting emitted by the computer&#39;s expensive components bathes the room in a soft, purple glow. Four sleek monitors dominate your desk, each displaying a different facet of the digital world you often find yourself immersed in. 

On one of your monitors, a notification is flashing in the corner. Apparently, you have received a new message from your closest friend, a fellow hacker who goes by the moniker &lt;span class=&quot;text-glow&quot;&gt;CipherLynx&lt;/span&gt;. 

&lt;&lt;button &quot;Read the message&quot;&gt;&gt;
  &lt;&lt;run MindWare.markEmailAsRead(&quot;Email-CipherFirstJobIntro&quot;)&gt;&gt;
  &lt;&lt;goto &quot;Email-CipherFirstJobIntro&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="7" name="GitGudDelivery-Intro" tags="" position="850,100" size="100,100">&lt;&lt;set $lockedUI = true&gt;&gt;\
&lt;&lt;set $gitGutDeliveryStarted = true&gt;&gt;\
&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/drake/drake-brainfry-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
\
&lt;div class=&quot;narrator&quot;&gt;You&#39;re at work when suddenly, your boss, Drake Voronov, strides over with an air of urgency.&lt;/div&gt;
&lt;&lt;drake&gt;&gt;I have a special task for you. We need a S.I.M.S. delivered to GitGud, an electronics store in the Pleasure Grid.&lt;&lt;/drake&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;The Pleasure Grid is NeoUrbania&#39;s own blend of Kabukichō and Akihabara, a place where you can buy everything from a cyber implant to a drug-fueled threesome.&lt;/div&gt;
&lt;&lt;player&gt;&gt;Why do I need to deliver it in person? Can&#39;t we just send it over the OmniNet?&lt;&lt;/player&gt;&gt;
&lt;&lt;drake&gt;&gt;That&#39;s how GitGud&#39;s owner, Xavier likes to do business.&lt;&lt;/drake&gt;&gt;
&lt;&lt;player&gt;&gt;Is he old-fashioned or afraid of someone stealing the S.I.M.S. in transit?&lt;&lt;/player&gt;&gt;
&lt;&lt;drake&gt;&gt;Both.&lt;&lt;/drake&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Drake gives you a small datadisk.&lt;/div&gt;
&lt;&lt;pickup $inventory &quot;Custom S.I.M.S.&quot; 1&gt;&gt;\
&lt;&lt;itemReceived &quot;Custom S.I.M.S.&quot;&gt;&gt;
&lt;&lt;drake&gt;&gt;I&#39;ve already sent you GitGud&#39;s location, so you should head there right away.&lt;&lt;/drake&gt;&gt;
&lt;&lt;player&gt;&gt;Will do.&lt;&lt;/player&gt;&gt;
\
    &lt;&lt;button &quot;Leave&quot;&gt;&gt;
    &lt;&lt;run MindWare.addTask(&quot;Deliver a custom S.I.M.S.&quot;, &quot;Task-GitGudDelivery&quot;)&gt;&gt;
    &lt;&lt;goto &quot;GitGud-Introduction&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;
&lt;&lt;set $gitGutUnlocked = true&gt;&gt;\</tw-passagedata><tw-passagedata pid="8" name="Task-GitGudDelivery" tags="" position="975,100" size="100,100">Your boss asked you to deliver a custom S.I.M.S. to GitGud, an electronics store located in the Pleasure Grid, NeoUrbania&#39;s commerce and pleasure district.</tw-passagedata><tw-passagedata pid="9" name="GitGud-Introduction" tags="" position="1100,100" size="100,100">&lt;&lt;set $gitGutIntroduced = true&gt;&gt;\
&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/locations/gitgud-outside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
The GitGud store is located on the edge of The Pleasure Grid&#39;s shopping zone. Its entrance is flanked by holographic signs and digital screens advertising all kinds of virtual thrills. 

Despite its modest footprint, dwarfed by the sprawling superstores of NeoUrbania&#39;s electronics giants, GitGud has no trouble attracting customers because size isn&#39;t what matters to them - the selection of goods on offer does.

Information about GitGud&#39;s isn&#39;t difficult to find in the more shadowy corridors of the OmniNet. Hacking utilities capable of breaching highly secure systems, cybernetic enhancements that push the boundaries of human capabilities, and S.I.M.S. that can drown the senses in oceans of artificial ecstasy - GitGud is supposed to have it all. 

You&#39;ve heard about GitGud many times before but never visited the store. Now, as you stand before the entrance, ready to deliver a custom S.I.M.S. to some &lt;span class=&quot;text-glow&quot;&gt;Xavier&lt;/span&gt;.

    &lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;goto &quot;GitGud-Introduction-Inside1&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="10" name="GitGud-Introduction-Inside1" tags="" position="1225,100" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/locations/gitgud-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
The interior of GitGud is an oasis of organized chaos, every inch utilized to dipslay physical and digital products. Shelves crammed with items run parallel to sleek monitors that customers use to scroll through specifications and watch trailers for virtual reality experiences.

The store&#39;s layout leads you inevitably to the checkout counter. Standing in front of it is one of GitGud&#39;s employees, who are easy to tell apart from customers because they wear jackets with LED screens on the back. The illuminated text loops with a polite &quot;How can I help you?&quot;

You watch her from a distance for a short moment as her hands dance on a keyboard, and then you decide to get her attention and ask where you can find Xavier. 

    &lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;goto &quot;GitGud-Introduction-Inside2&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="11" name="GitGud-Introduction-Inside2" tags="" position="100,225" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/yuki/yuki-gitgud-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;div id=&quot;dialog-content&quot;&gt;&lt;&lt;gitgud-employee-yuki&gt;&gt;Can I help you find something?&lt;&lt;/gitgud-employee-yuki&gt;&gt;&lt;/div&gt;\
&lt;span id=&quot;xavier-question1&quot;&gt;\

@@.choicebutton;&lt;&lt;button &quot;Ask about Xavier&quot;&gt;&gt;\
        &lt;&lt;addclass &quot;#xavier-question1&quot; &quot;hidden&quot;&gt;&gt;\
    &lt;&lt;append &quot;#dialog-content&quot;&gt;&gt;\
        &lt;&lt;include &quot;GitGud-Introduction-Inside2-Xavier&quot;&gt;&gt;\
        &lt;&lt;replace &quot;#continue-button&quot;&gt;&gt;&lt;&lt;button &quot;Visit Xavier&quot;&gt;&gt;\
&lt;&lt;goto &quot;GitGud-Introduction-XavierRoom&quot;&gt;&gt;\
&lt;&lt;/button&gt;&gt;&lt;&lt;/replace&gt;&gt;\
    &lt;&lt;/append&gt;&gt;\
&lt;&lt;/button&gt;&gt;@@&lt;/span&gt;\
&lt;span id=&quot;xavier-question2&quot;&gt;\

@@.choicebutton;&lt;&lt;button &quot;Comment on the store&#39;s atmosphere&quot;&gt;&gt;\
        &lt;&lt;addclass &quot;#xavier-question2&quot; &quot;hidden&quot;&gt;&gt;\
    &lt;&lt;append &quot;#dialog-content&quot;&gt;&gt;\
        &lt;&lt;include &quot;GitGud-Introduction-Inside2-Atmosphere&quot;&gt;&gt;\
    &lt;&lt;/append&gt;&gt;\
&lt;&lt;/button&gt;&gt;@@&lt;/span&gt;
&lt;span id=&quot;continue-button&quot;&gt;&lt;/span&gt;\</tw-passagedata><tw-passagedata pid="12" name="GitGud-Introduction-Inside2-Xavier" tags="" position="225,225" size="100,100">&lt;div&gt;&lt;/div&gt;
&lt;&lt;player&gt;&gt;I&#39;m looking for someone named Xavier.&lt;&lt;/player&gt;&gt;
&lt;&lt;gitgud-employee-yuki&gt;&gt;Xavier? Why do you need to see him?&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;player&gt;&gt;I&#39;ve been asked to deliver this custom S.I.M.S. directly to him.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;The employee carefully inspects the S.I.M.S. and checks the validity of its serial number of a computer.&lt;/div&gt;
&lt;&lt;gitgud-employee-yuki&gt;&gt;I see. Everything checks out. Head up the stairs at the back, then take the first door on your right. Xavier should be in there. Just make sure to knock first - he might be busy right now.&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;Is she blushing slightly?&lt;/div&gt;
&lt;&lt;player&gt;&gt;Thank you.&lt;&lt;/player&gt;&gt;</tw-passagedata><tw-passagedata pid="13" name="GitGud-Introduction-Inside2-Atmosphere" tags="" position="350,225" size="100,100">&lt;div&gt;&lt;/div&gt;
&lt;&lt;player&gt;&gt;This place has quite the unique vibe.&lt;&lt;/player&gt;&gt;
&lt;&lt;gitgud-employee-yuki&gt;&gt;Thank you! Our customers appreciate that some stores still keep it real and let their products and services speak for themselves, instead of relying on marketing departments to do all the talking for them.&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;player&gt;&gt;So, you&#39;re not a fan of the whole marketing spiel then?&lt;&lt;/player&gt;&gt;
&lt;&lt;gitgud-employee-yuki&gt;&gt;Not really. I believe in the authenticity of experience.&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;player&gt;&gt;Sounds refreshing in a world bombarded by ads and hype.&lt;&lt;/player&gt;&gt;
&lt;&lt;gitgud-employee-yuki&gt;&gt;I guess I&#39;m a bit old-school in that regard.&lt;&lt;/gitgud-employee-yuki&gt;&gt;</tw-passagedata><tw-passagedata pid="14" name="GitGud-Introduction-XavierRoom" tags="" position="475,225" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/locations/gitgud-hallway.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
As you ascend the stairs and reach the hallway, the chaotic energy of the store below gives way to a more subdued atmosphere. The hallway is dimly lit, with soft neon lights casting elongated shadows along the walls. The door you&#39;re looking for is immediately noticeable on the right.

Approaching the door, you pause as faint, muffled sounds emanate from within. It&#39;s difficult to make out any specifics, but there&#39;s a rhythmic quality to them.
&lt;span id=&quot;door-action&quot;&gt;
@@.choicebutton;&lt;&lt;button &quot;Peek inside&quot;&gt;&gt;
&lt;&lt;set $GitGudIntroductionPeeked = true&gt;&gt;
&lt;&lt;replace &quot;#door-action&quot;&gt;&gt;
&lt;&lt;include &quot;GitGud-Introduction-XavierRoom-Peek&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;@@
\
@@.choicebutton;&lt;&lt;button &quot;Knock on the door&quot;&gt;&gt;\
&lt;&lt;replace &quot;#door-action&quot;&gt;&gt;
&lt;&lt;include &quot;GitGud-Introduction-XavierRoom-Knock&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;/span&gt;</tw-passagedata><tw-passagedata pid="15" name="GitGud-Introduction-XavierRoom-Peek" tags="" position="600,225" size="100,100">Against your better judgment, you decide to peek through the keyhole, slowly pushing the door open a crack. The sounds from inside grow louder, more distinct as you position yourself for a better view. 

Inside the room, you see a large black man leaning against a desk. His massive cock is being vigorously sucked by a sexy woman wearing high heels and not much else. 

&lt;img src=&quot;imgs/sex/xavier-keyhole-blowjob.gif&quot; width=&quot;100%&quot;&gt;

The woman begins to pump the man&#39;s shaft with her hand, matching the rhythm of her mouth as she deep-throats him. It&#39;s clear that she knows exactly what she&#39;s doing and is intent on bringing him to climax. As you watch in amazement, you see the man grab the woman by her hair and start to thrust into her mouth, his hips beginning to buck wildly. With a loud groan, he releases his load deep down her throat. The woman swallows eagerly, gagging slightly as she takes every drop of his cum.

When she finally pulls away, the man lets out a shaky breath and seems to gather himself. He hands her some money, which she quickly accepts and starts to get dressed. After exchanging a few more words with him, she hurries out of the room.

Before she manages to close the door behind her, she notices you standing in the hallway. Her eyes meet with yours for a moment, and you catch her glancing at your crotch. She notices the visible bulge that has formed there. A faint smile plays at the corners of her mouth.

&lt;img src=&quot;imgs/locations/gitgud-hallway-hooker.jpg&quot; width=&quot;100%&quot;&gt;

&quot;There&#39;s someone here for you,&quot; she says to the man inside and then strides past you, her heels clicking rhythmically on the floor. &quot;Come in,&quot; calls out the man inside authoritatively. 

&lt;&lt;button &quot;Enter the room&quot;&gt;&gt;
&lt;&lt;goto &quot;GitGud-Introduction-XavierRoom-Inside&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="16" name="GitGud-Introduction-XavierRoom-Knock" tags="" position="725,225" size="100,100">You take a moment to compose yourself before rapping your knuckles gently against the door. 

For a brief moment, everything goes silent. Then, you hear the shuffling of feet and the faint sound of voices, too low to make out any words. The door clicks, and it swings open slowly.

As the door opens, an attractive woman steps out. She&#39;s in the process of buttoning adjusting her clothes. Her eyes briefly meet yours before she strides past you, her heels clicking rhythmically on the floor.

&lt;img src=&quot;imgs/locations/gitgud-hallway-hooker.jpg&quot; width=&quot;100%&quot;&gt;

Your brief ogling of the woman is abruptly interrupted by a voice from inside the room. &quot;Come in,&quot; it calls out, clear and authoritative. 

&lt;&lt;button &quot;Enter the room&quot;&gt;&gt;
&lt;&lt;goto &quot;GitGud-Introduction-XavierRoom-Inside&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="17" name="GitGud-Introduction-XavierRoom-Inside" tags="" position="850,225" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/locations/gitgud-xavierroom.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
Stepping into the room, you find yourself in a space that has the familiar feel of a tattoo parlor or a barber&#39;s shop, with its wooden floor and an artsy photo of a tattooed girl adorning one of its walls. 

However, the centerpiece is anything but traditional: a large, sophisticated cybersurgical robot hovers ominously above a reclining chair in the center of the room. On the desks nearby are computers whose screens flicker with complex diagrams and code.

It&#39;s clear that this is a body shop - the kind where people go to modify their bodies with cybernetic enhancements. 

As you look at your surroundings, a door to an adjoining bathroom opens, and a large, imposing figure emerges. The man, presumably Xavier, is tall and muscular, his presence filling the room.

&lt;&lt;button &quot;Continue&quot;&gt;&gt;
&lt;&lt;goto &quot;GitGud-Introduction-XavierConversation&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="18" name="GitGud-Introduction-XavierConversation" tags="" position="975,225" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/xavier/gitgud-xavier.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;What brings you to me?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;I&#39;m looking for Xavier. I have a special delivery from my boss at BrainFry, Drake. It&#39;s a custom S.I.M.S.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Good. My client has been asking me about it every day since she ordered it.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You give the S.I.M.S. to Xavier.&lt;/div&gt;
&lt;&lt;drop $inventory &quot;Custom S.I.M.S.&quot; 1&gt;&gt;\
&lt;&lt;itemLost &quot;Custom S.I.M.S.&quot;&gt;&gt;
&lt;&lt;xavier&gt;&gt;What&#39;s your name?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;I&#39;m $playerName.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;It&#39;s nice to meet you, $playerName. Have you tried the S.I.M.S.?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;No, of course not. Drake wanted me to deliver it to you as soon as possible, and I wouldn&#39;t be able to decrypt it anyway.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Good boy.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier smiles, pleased with your honest response.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Would you like to try it? If its anything like the last BrainFry custom deliver, then it be quite an experience.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;I have tried a few off-the-shelf S.I.M.S. before, but never a custom one. From what I&#39;ve heard, the best ones can bring you to a full-body orgasm, while the worst once can fry your neurons in a second.&lt;/div&gt;&lt;span id=&quot;sims-choice&quot;&gt;\

@@.choicebutton;&lt;&lt;button &quot;Try the S.I.M.S.&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#sims-choice&quot;&gt;&gt;\
        &lt;&lt;set $GitGudSIMSExperience = true&gt;&gt;
        &lt;&lt;include &quot;GitGud-Introduction-SIMS-Experience&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;@@
\
@@.choicebutton;&lt;&lt;button &quot;No, I&#39;m good&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#sims-choice&quot;&gt;&gt;\
        &lt;&lt;set $GitGudSIMSExperience = false&gt;&gt;
        &lt;&lt;include &quot;GitGud-Introduction-NoSIMS&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;/span&gt;</tw-passagedata><tw-passagedata pid="19" name="GitGud-Introduction-SIMS-Experience" tags="" position="1100,225" size="100,100">&lt;&lt;player&gt;&gt;Yea, I would like to give it a go if I can.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;I can&#39;t pass on an opportunity like this.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;I knew you would. Sit in the chair behind me and relax.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You take a seat in the chair, its leather cool against your skin. Xavier moves with a practiced ease, retrieving the S.I.M.S. disk and sliding it into a slot on one of his high-end computers. He then sets some parameters and initiates the program. Xavier steps back from the computer and walk up to you.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Just relax and let the experience take over. Are you ready?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;button &quot;I&#39;m ready&quot;&gt;&gt;
&lt;&lt;goto &quot;GitGud-Introduction-PlayingSIMS&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="20" name="GitGud-Introduction-PlayingSIMS" tags="" position="1225,225" size="100,100">&lt;video width=&quot;100%&quot; controls autoplay muted&gt;
  &lt;source src=&quot;vids/BrainFry-SIMS-delivery.mp4&quot; type=&quot;video/mp4&quot;&gt;
Your browser does not support the video tag.
&lt;/video&gt;

As the program runs its course, you feel your body begin to relax into the chair. Your senses are heightened, and it&#39;s almost as if you&#39;re not in your own skin anymore. You suddenly find yourself experiencing the world through the eyes of a woman having sex with a man in the cowgirl position. 

The feeling of being penetrated is unlike anything you&#39;ve ever experienced before; deep and full, with every thrust sending ripples of pleasure through your core. 

The man is fondling your large breasts and hard nipples. Each touch from his rough hands sends waves of arousal coursing through you, making it difficult to focus on anything other than the pleasure building inside you.

Before the cacophony of sensations has a chance to escalate any further, the S.I.M.S. reaches its conclusion and gradually fades away. You find yourself back in reality, breathing heavily, your skin flushed and slick with sweat. You feel incredibly aroused and vulnerable, still processing what just happened.

&lt;&lt;button &quot;Continue&quot;&gt;&gt;
&lt;&lt;goto &quot;GitGud-Introduction-EndSIMS&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="21" name="GitGud-Introduction-EndSIMS" tags="" position="100,350" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/xavier/gitgud-xavier.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier looks at you intently, his eyes searching yours for a reaction.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;So, how was it?&lt;&lt;/xavier&gt;&gt;
&lt;span id=&quot;sims-choice&quot;&gt;\
@@.choicebutton;&lt;&lt;button &quot;It was strange, but it felt nice.&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#sims-choice&quot;&gt;&gt;\
        &lt;&lt;set $GitGudSIMSExperienceLiked = true&gt;&gt;\
        &lt;div class=&quot;narrator&quot;&gt;You pause for a moment, still collecting your thoughts. The intensity of the simulation was overwhelming, and it&#39;s a lot to process.&lt;/div&gt;
        &lt;&lt;player&gt;&gt;You know, it was... intense, but in a good way.&lt;&lt;/player&gt;&gt;
        &lt;&lt;if visited() is 1&gt;&gt;\
            &lt;&lt;genderFeminine 5&gt;&gt;
        &lt;&lt;/if&gt;&gt;\
        &lt;div class=&quot;narrator&quot;&gt;Xavier raises an eyebrow, a slight smile playing on his lips.&lt;/div&gt;
        &lt;&lt;xavier&gt;&gt;I&#39;m glad to hear you enjoyed it. S.I.M.S. can be quite... immersive.&lt;&lt;/xavier&gt;&gt;
        &lt;div class=&quot;inner-thought&quot;&gt;Did Xavier knew what the S.I.M.S. was about?&lt;/div&gt;
        &lt;&lt;xavier&gt;&gt;Now that we&#39;ve established the S.I.M.S. to be working correctly, please inform Drake that the client&#39;s payment will be wired as soon as she comes here to pick it up.&lt;&lt;/xavier&gt;&gt;
        &lt;&lt;player&gt;&gt;Got it.&lt;&lt;/player&gt;&gt;
        &lt;&lt;xavier&gt;&gt;That will be all for now. I&#39;m sure we&#39;ll see each other again.&lt;&lt;/xavier&gt;&gt;
        &lt;&lt;button &quot;Leave BrainFry&quot;&gt;&gt;
        &lt;&lt;goto &quot;GitGud-Introduction-End&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;@@
\
@@.choicebutton;&lt;&lt;button &quot;It felt weird.&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#sims-choice&quot;&gt;&gt;\
        &lt;&lt;set $GitGudSIMSExperienceLiked = false&gt;&gt;\
        &lt;div class=&quot;narrator&quot;&gt;You pause for a moment, still collecting your thoughts. The intensity of the simulation was overwhelming, and it&#39;s a lot to process.&lt;/div&gt;
        &lt;&lt;player&gt;&gt;It was a bit too much for me and felt weird.&lt;&lt;/player&gt;&gt;
        &lt;&lt;if visited() is 1&gt;&gt;\
            &lt;&lt;genderMasculine 5&gt;&gt;
        &lt;&lt;/if&gt;&gt;\
        &lt;div class=&quot;narrator&quot;&gt;Xavier nods but looks slightly disappointed.&lt;/div&gt;
        &lt;&lt;xavier&gt;&gt;S.I.M.S. can be quite overwhelming at first. It&#39;s not for everyone.&lt;&lt;/xavier&gt;&gt;
        &lt;div class=&quot;inner-thought&quot;&gt;Did Xavier knew what the S.I.M.S. was about?&lt;/div&gt;
        &lt;&lt;xavier&gt;&gt;Now that we&#39;ve established the S.I.M.S. to be working correctly, please inform Drake that the client&#39;s payment will be wired as soon as she comes here to pick it up.&lt;&lt;/xavier&gt;&gt;
        &lt;&lt;player&gt;&gt;Got it.&lt;&lt;/player&gt;&gt;
        &lt;&lt;xavier&gt;&gt;That will be all for now. I&#39;m sure we&#39;ll see each other again.&lt;&lt;/xavier&gt;&gt;
        &lt;&lt;button &quot;Leave BrainFry&quot;&gt;&gt;
        &lt;&lt;goto &quot;GitGud-Introduction-End&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;/span&gt;</tw-passagedata><tw-passagedata pid="22" name="GitGud-Introduction-NoSIMS" tags="" position="225,350" size="100,100">&lt;&lt;player&gt;&gt;Thank you for the offer, but I don&#39;t feel like trying a S.I.M.S. today.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Fair enough. Let Drake know that the client&#39;s payment will be wired as soon as she picks up the S.I.M.S.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Thank you, Xavier.&lt;&lt;/player&gt;&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
&lt;&lt;goto &quot;GitGud-Introduction-End&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="23" name="GitGud-Introduction-End" tags="" position="350,350" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/locations/gitgud-outside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;if $GitGudSIMSExperience&gt;&gt;\
    Stepping out of the building, the fresh air feels almost surreal after the intense sensory journey you&#39;ve just experienced. The vivid memories of the S.I.M.S. simulation linger in your mind. Shaking off the residual feelings, you refocus on the task at hand and decide to hurry back to BrainFry.
&lt;&lt;else&gt;&gt;\
    As you leave the building, your mind is still occupied with the thought of what the S.I.M.S. experience might have been like. But that thought has to wait because you need to hurry back to BrainFry to confirm the delivery.
&lt;&lt;/if&gt;&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
&lt;&lt;goto &quot;GitGud-Introduction-End-BrainFry&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="24" name="GitGud-Introduction-End-BrainFry" tags="" position="475,350" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/drake/drake-brainfry-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;When you arrive back at BrainFry, you find Drake chatting with an employee. He quickly notices you.&lt;/div&gt;
&lt;&lt;drake&gt;&gt;Back already? Did you deliver the S.I.M.S. to Xavier?&lt;&lt;/drake&gt;&gt;
&lt;&lt;player&gt;&gt;Yeah, it&#39;s done. Xavier has the package.&lt;&lt;/player&gt;&gt;
&lt;&lt;drake&gt;&gt;And? What did you think of him?&lt;&lt;/drake&gt;&gt;
&lt;&lt;player&gt;&gt;Well, he&#39;s certainly not someone I&#39;d like to mess with. Guy&#39;s got a presence like a tank in a china shop.&lt;&lt;/player&gt;&gt;
&lt;&lt;drake&gt;&gt;Ha ha, that&#39;s Xavier for you.&lt;&lt;/drake&gt;&gt;
&lt;&lt;drake&gt;&gt;Anyway, thank you for the delivery. I&#39;m happy I can trust you even with sensitive tasks like this one.&lt;&lt;/drake&gt;&gt;
&lt;&lt;if visited() is 1&gt;&gt;\
    &lt;&lt;relationshipIncreasedWith &quot;Drake&quot; 10&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;player&gt;&gt;I&#39;m happy I could help.&lt;&lt;/player&gt;&gt;
&lt;&lt;drake&gt;&gt;Feel free to take the rest of the day off.&lt;&lt;/drake&gt;&gt; 
&lt;&lt;actionPointsDecreased 5&gt;&gt;
&lt;&lt;button &quot;Leave&quot;&gt;&gt;
&lt;&lt;set $lockedUI = false&gt;&gt;
&lt;&lt;run MindWare.completeTask(&quot;Deliver a custom S.I.M.S.&quot;)&gt;&gt;
&lt;&lt;run MindWare.addInstantMessage(&#39;cipherInstantMessages&#39;, &#39;S.I.M.S. Delivery&#39;, &#39;IMApp-CipherLynx-SIMSDelivery&#39;, &#39;Cipher&#39;, true, true);&gt;&gt;
&lt;&lt;goto &quot;BrainFry&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="25" name="Quest-CipherLynx-UrgentRequest-Introduction" tags="" position="600,350" size="100,100">&lt;&lt;set $lockedUI to true&gt;&gt;\
&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/starting-apartment.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
The dim glow of the morning sun seeps through the smog that always blankets NeoUrbania. You sit up, the remnants of a restless dream fading from your mind. But before you have a chance to start your morning routine, a flickering notification catches your eye - a chat request from CipherLynx.

That&#39;s odd; Cipher is almost never active early in the morning. Feeling that it&#39;s probably something urgent, you decide to check it out right away.

@@.continue-button;&lt;&lt;button &quot;Check Cipher&#39;s Message&quot;&gt;&gt;&lt;&lt;goto &quot;IMApp-CipherLynx-UrgentRequest&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@</tw-passagedata><tw-passagedata pid="26" name="IMApp-CipherLynx-UrgentRequest" tags="nobr" position="725,350" size="100,100">&lt;div class=&quot;cyber-desktop-im&quot;&gt;
    &lt;div class=&quot;im-header&quot;&gt;&lt;span class=&quot;im-header-text&quot;&gt;Instant Messenger&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;im-main&quot;&gt;
        /* &lt;div class=&quot;im-contacts-pane&quot;&gt;
            &lt;&lt;nobr&gt;&gt;
            &lt;!-- Contact --&gt;
            &lt;div id=&quot;contact-cipher&quot; class=&quot;contact-entry&quot;&gt;
                &lt;img src=&quot;imgs/characters/cipher/cipher-portrait.webp&quot; class=&quot;contact-img&quot; alt=&quot;CipherLynx&quot;&gt;
                &lt;span class=&quot;contact-name&quot;&gt;
                    &lt;&lt;link &quot;CipherLynx &quot;&gt;&gt;
                    &lt;&lt;/link&gt;&gt;
                &lt;/span&gt;
                &lt;&lt;set _hasUnlockedNewTopics = false&gt;&gt;
                &lt;&lt;for _topic, _data range $cipherInstantMessages&gt;&gt;
                    &lt;&lt;if _data.unlocked and _data.isNew&gt;&gt;
                        &lt;&lt;set _hasUnlockedNewTopics = true&gt;&gt;
                    &lt;&lt;/if&gt;&gt;
                &lt;&lt;/for&gt;&gt;
                &lt;&lt;if _hasUnlockedNewTopics&gt;&gt;
                    &lt;span class=&quot;im-contact-new-emoji&quot;&gt;🆕&lt;/span&gt;
                &lt;&lt;/if&gt;&gt;
            &lt;/div&gt;
            &lt;&lt;/nobr&gt;&gt;
        &lt;/div&gt; */
        &lt;div class=&quot;im-chat-pane&quot;&gt;
            &lt;div id=&quot;chat-display&quot; class=&quot;chat-display-special&quot;&gt;
                &lt;&lt;set $cipherInstantMessages[&quot;Urgent Request&quot;].isNew = false&gt;&gt;
                &lt;&lt;cipher-chat&gt;&gt;Hey, buddy. I need your help - it&#39;s urgent. Are you here?&lt;&lt;/cipher-chat&gt;&gt;
                &lt;&lt;player-chat&gt;&gt;What&#39;s up, Cipher? You sound unusually serious.&lt;&lt;/player-chat&gt;&gt;
                &lt;&lt;cipher-chat&gt;&gt;I&#39;ve got a job. A big one. And I need your help&lt;&lt;/cipher-chat&gt;&gt;
                &lt;&lt;player-chat&gt;&gt;What kind of job are we talking about?&lt;&lt;/player-chat&gt;&gt;
                &lt;&lt;cipher-chat&gt;&gt;Hacking into a server.&lt;&lt;/cipher-chat&gt;&gt;
                &lt;span id=&quot;reason-question&quot;&gt;@@.im-response;
                &lt;&lt;button &quot;Well, what do you need my help with then? Hack it yourself.&quot;&gt;&gt;
                    &lt;&lt;replace &quot;#reason-question&quot;&gt;&gt;
                        &lt;&lt;player-chat&gt;&gt;Well, what do you need my help with then? Hack it yourself.&lt;&lt;/player-chat&gt;&gt;
                        &lt;&lt;cipher-chat&gt;&gt;I would if I could.&lt;&lt;/cipher-chat&gt;&gt;
                        &lt;&lt;player-chat&gt;&gt;And why can&#39;t you?&lt;&lt;/player-chat&gt;&gt;
                        &lt;&lt;cipher-chat&gt;&gt;Because it&#39;s a SynTech server.&lt;&lt;/cipher-chat&gt;&gt;
                        &lt;&lt;player-chat&gt;&gt;Wait... I think you don&#39;t have what it takes to hack SynTech anymore and need help of someone who&#39;s better than you? 😎&lt;&lt;/player-chat&gt;&gt;
                        &lt;&lt;cipher-chat&gt;&gt;You wish. The reality is even grimmer: I used to work there, which means I&#39;m likely on their watch list.&lt;&lt;/cipher-chat&gt;&gt;
                        &lt;&lt;include &quot;IMApp-CipherLynx-UrgentRequest-Cont1&quot;&gt;&gt;
                    &lt;&lt;/replace&gt;&gt;
                &lt;&lt;/button&gt;&gt;@@&lt;/span&gt;    
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="27" name="IMApp-CipherLynx-UrgentRequest-Cont1" tags="nobr" position="850,350" size="100,100">&lt;&lt;player-chat&gt;&gt;YOU WHAT?!&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;You worked for the world&#39;s largest megacorp and didn&#39;t tell me?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;I signed a deal with the devil and decided that the best thing to do was to keep it a secret. I wanted to protect you, to keep you out of SynTech&#39;s radar. The less you knew, the safer you were.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;And now you&#39;re bringing me into this?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Only because I&#39;ve taken all the necessary precautions and know that you wouldn&#39;t want to miss on this opportunity.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Hmm... so what&#39;s so special about this server?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;The server is home to a prototype AI that&#39;s rumored to be the world&#39;s first AGI.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;You mean artificial general intelligence? An intelligent agent that can learn to do any task that human can perform?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;That&#39;s exactly what I mean.&lt;&lt;/cipher-chat&gt;&gt;
&lt;span id=&quot;paying-question&quot;&gt;@@.im-response;
&lt;&lt;button &quot;And who&#39;s paying to steal it?&quot;&gt;&gt;
    &lt;&lt;replace &quot;#paying-question&quot;&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;And who&#39;s paying to steal it?&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;include &quot;IMApp-CipherLynx-UrgentRequest-Cont2&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;/span&gt;</tw-passagedata><tw-passagedata pid="28" name="IMApp-CipherLynx-UrgentRequest-Cont2" tags="nobr" position="975,350" size="100,100">&lt;&lt;cipher-chat&gt;&gt;Not steal - destroy.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;For real?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Yep. For real.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;The client didn&#39;t tell me why they want it gone, but I think it&#39;s safe to assume that they&#39;re a top suit working for a competing megacorp and are afraid that SynTech would become even more powerful than they already are. Hell, maybe they&#39;re from some government agency that still has some balls to shake things up.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;I don&#39;t know, Cipher. It sounds like a really dangerous job.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;You haven&#39;t yet asked how much it pays.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Okay. How much does the job pay?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;$100,000. That&#39;s five zeroes.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Are you shitting me?! That&#39;s a huge amount of money.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;I know. That&#39;s why I&#39;m trying to convince you to help me. We could both make a bank. And I swear, I&#39;ve got every angle covered.&lt;&lt;/cipher-chat&gt;&gt;
&lt;span id=&quot;decision&quot;&gt;@@.im-response;
&lt;&lt;button &quot;Alright, you&#39;ve got me. I&#39;m in.&quot;&gt;&gt;
    &lt;&lt;replace &quot;#decision&quot;&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;Alright, you&#39;ve got me. I&#39;m in. &lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;include &quot;IMApp-CipherLynx-UrgentRequest-Cont3&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;@@
&lt;/span&gt;</tw-passagedata><tw-passagedata pid="29" name="IMApp-CipherLynx-UrgentRequest-Cont3" tags="nobr" position="1100,350" size="100,100">&lt;&lt;cipher-chat&gt;&gt;That&#39;s the spirit!&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;The plan is simple: First, I&#39;ll send you the server&#39;s IP address. Next, you&#39;ll get a custom wiping tool I&#39;ve developed.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Your part is to breach the server and use the tool. The wiper will cover your tracks, so there won&#39;t be any breadcrumbs leading back to us.&lt;&lt;/cipher-chat&gt;&gt;
&lt;span id=&quot;plan&quot;&gt;@@.im-response;
&lt;&lt;button &quot;Sounds like a plan. Send me everything. Let&#39;s do this.&quot;&gt;&gt;
    &lt;&lt;replace &quot;#plan&quot;&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;Sounds like a plan. Send me everything. Let&#39;s do this.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;include &quot;IMApp-CipherLynx-UrgentRequest-Cont4&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;@@
&lt;/span&gt;</tw-passagedata><tw-passagedata pid="30" name="IMApp-CipherLynx-UrgentRequest-Cont4" tags="nobr" position="1225,350" size="100,100">File transfer in progress:
&lt;div class=&quot;im-progress&quot;&gt;
  &lt;div class=&quot;im-progress-value&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;&lt;fadein 200ms 10s&gt;&gt;
    File transfer complete!&lt;br&gt;
    &lt;span id=&quot;button1&quot;&gt;@@.email-listing;&lt;&lt;button &quot;Save Target&quot;&gt;&gt;
        &lt;&lt;set _buttonOneClicked = true&gt;&gt;
        &lt;&lt;run setup.addHackingTarget(&quot;SynTech Server&quot;, &quot;e862:7a89:105c:76ab&quot;, &quot;UrgentRequest-animation&quot;)&gt;&gt;
        &lt;&lt;replace &quot;#button1&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
        &lt;&lt;if _buttonOneClicked &amp;&amp; _buttonTwoClicked&gt;&gt;
            &lt;&lt;replace &quot;#progressControl&quot;&gt;&gt;
                @@.email-listing;&lt;&lt;button &quot;Proceed&quot;&gt;&gt;
                    &lt;&lt;set $cipherInstantMessages[&quot;Urgent Request&quot;].unlocked = false&gt;&gt;
                    &lt;&lt;goto &quot;UrgentRequest-thoughts&quot;&gt;&gt;
                &lt;&lt;/button&gt;&gt;@@
            &lt;&lt;/replace&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/button&gt;&gt;@@&lt;/span&gt;
    &lt;span id=&quot;button2&quot;&gt;@@.email-listing;&lt;&lt;button &quot;Download Wiper Tool&quot;&gt;&gt;
        &lt;&lt;set _buttonTwoClicked = true&gt;&gt;
        &lt;&lt;run setup.addHackingTool(&quot;Data Wiper&quot;)&gt;&gt;
        &lt;&lt;replace &quot;#button2&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
        &lt;&lt;if _buttonOneClicked &amp;&amp; _buttonTwoClicked&gt;&gt;
            &lt;&lt;replace &quot;#progressControl&quot;&gt;&gt;
                @@.email-listing;&lt;&lt;button &quot;Proceed&quot;&gt;&gt;
                    &lt;&lt;set $cipherInstantMessages[&quot;Urgent Request&quot;].unlocked = false&gt;&gt;
                    &lt;&lt;goto &quot;UrgentRequest-thoughts&quot;&gt;&gt;
                &lt;&lt;/button&gt;&gt;@@
            &lt;&lt;/replace&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/button&gt;&gt;@@&lt;/span&gt;
    &lt;span id=&quot;progressControl&quot;&gt;&lt;/span&gt;
&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="31" name="UrgentRequest-thoughts" tags="" position="100,475" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/starting-apartment.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
As you stare at the screen, the gravity of CipherLynx&#39;s request sinks in. The risks are high, but so are the stakes. $100,000 for a single job. It&#39;s the kind of opportunity that doesn&#39;t come around often. 

You decide there&#39;s no time to waste. The server won&#39;t hack itself, and the clock is ticking. You take a deep breath. It&#39;s now or never.

@@.continue-button;&lt;&lt;button &quot;Launch Hacking Tool&quot;&gt;&gt;&lt;&lt;goto &quot;HackTarget&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@</tw-passagedata><tw-passagedata pid="32" name="UrgentRequest-animation" tags="" position="225,475" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;desktop-hacking-tool-animation&quot;&gt;\
        &lt;div class=&quot;msg-container&quot;&gt;\
            &lt;div class=&quot;msg&quot;&gt;Connecting&lt;/div&gt;\
        &lt;/div&gt;\
        &lt;div class=&quot;hacking-animation&quot;&gt;\
            &lt;div id=&quot;console&quot;&gt;&lt;/div&gt;\
        &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
$(document).one(&#39;:passagerender&#39;, function() {
    setTimeout(function() {
        var consoleElement = document.getElementById(&quot;console&quot;);
        const msg = document.querySelector(&quot;.msg&quot;);

        var txt = [
            &quot;Initiating protocol sequence...&quot;,
            &quot;...&quot;,
            &quot;Encrypting handshake payload...&quot;,
            &quot;...Payload encrypted.&quot;,
            &quot;Handshake dispatched, awaiting sync...&quot;,
            &quot;...&quot;,
            &quot;Response pattern received, decrypting...&quot;,
            &quot;...Decryption complete.&quot;,
            &quot;Auth token generation in progress...&quot;,
            &quot;...&quot;,
            &quot;Securing comm-link with crypto-hash...&quot;,
            &quot;...Comm-link secured.&quot;,
            &quot;Executing port enumeration script...&quot;,
            &quot;...&quot;,
            &quot;Port scan subroutine finalized.&quot;,
            &quot;Scanning for network anomalies...&quot;,
            &quot;...No anomalies detected.&quot;,
            &quot;Network integrity: Stable (No anomalies detected)&quot;,
            &quot;Environment prepared. All systems go.&quot;,
            &quot;...&quot;,
            &quot;Connection established.&quot;
        ];

        function updateScreen() {
            // Check if there are lines left to add
            if (txt.length &gt; 0) {
                var p = document.createElement(&quot;p&quot;);
                p.textContent = txt.shift();
                consoleElement.appendChild(p);

                // Automatically scroll to the bottom
                consoleElement.scrollTop = consoleElement.scrollHeight;
            } else {
                // Stop the interval if no more lines to add
                clearInterval(intervalID);
                msg.style.background = &quot;lime&quot;;
                msg.innerHTML = &quot;SUCCESS&quot;;
                msg.style.boxShadow = &quot;0 0 30px lime&quot;;
            }
        }

        var intervalID = window.setInterval(updateScreen, 200);
    }, 0);
});
&lt;&lt;/script&gt;&gt;
&lt;&lt;timed 8s&gt;&gt;&lt;&lt;goto &quot;UrgentRequest-server&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="33" name="UrgentRequest-server" tags="nobr" position="350,475" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - SynTech Server&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;server-intro-message&quot;&gt;
        &lt;p&gt; Connection established.&lt;/p&gt;
        &lt;p&gt; &lt;b&gt;Server uptime:&lt;/b&gt; 6 days, 6 hours​&lt;/p&gt;
        &lt;p&gt; &lt;b&gt;Security status:&lt;/b&gt; Firewall enabled&lt;/p&gt;
    &lt;/div&gt;
    &lt;div class=&quot;desktop-hacking-tool-server-content&quot;&gt;
        &lt;div class=&quot;firewall-alert&quot;&gt;
        &lt;br&gt;&lt;br&gt;&lt;br&gt;
            &lt;h2&gt;🔥 Firewall Alert 🔥&lt;/h2&gt;&lt;br&gt;
            &lt;p&gt;This server is protected by a high-security firewall.&lt;/p&gt;
            &lt;p&gt;You do not have the necessary clearance to proceed further.&lt;/p&gt;
        &lt;br&gt;&lt;br&gt;&lt;br&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;server-action-selection-box-urgent-request&quot;&gt;
        &lt;button class=&quot;server-password-access-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;UrgentRequest-server-firewall-hack&#39;)&quot;&gt;Manually Breach the Firewall&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="34" name="UrgentRequest-server-firewall-hack" tags="nobr" position="475,475" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper-firewall-hack&quot;&gt;
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - Manual Firewall Breach&lt;/span&gt;&lt;/div&gt;
        &lt;div class=&quot;bf-hacking-game&quot;&gt;
            &lt;div id=&quot;win&quot;&gt;&lt;/div&gt;
            &lt;div id=&quot;wrap&quot;&gt;&lt;/div&gt;
            &lt;br&gt;
        &lt;/div&gt;
    
&lt;button id=&quot;reset&quot; class=&quot;continue-button&quot; onclick=&quot;init()&quot;&gt;Reset&lt;/button&gt;&lt;button id=&quot;continue&quot; class=&quot;continue-button&quot; style=&quot;display: none;&quot; onclick=&quot;SugarCube.Engine.play(&#39;UrgentRequest-server-firewall-hack-success&#39;)&quot;&gt;Continue&lt;/button&gt;
&lt;/div&gt;

&lt;br&gt;&lt;br&gt;
&lt;&lt;if $tutorialManualFirewallBreach !== true&gt;&gt;
&lt;div id=&quot;tutorial-box&quot;&gt;&lt;div class=&quot;instruction-container-lime&quot;&gt;
    &lt;div class=&quot;instruction-title-bar-lime&quot;&gt;Tutorial: Manual Firewall Breach &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.tutorialManualFirewallBreach = true; document.getElementById(&#39;tutorial-box&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;
    &lt;div class=&quot;instruction-content&quot;&gt;
        &lt;p&gt;To successfully breach the firewall, you must move the mouse cursor to the glowing center without touching the green rings. There is no time limit, and you have an unlimited number of attempts.&lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;br&gt;
&lt;&lt;if $minigameSkipButtons === true&gt;&gt;
    &lt;p class=&quot;back-link&quot;&gt;[[Skip the Minigame -&gt; UrgentRequest-server-firewall-hack-success]]&lt;/p&gt;
&lt;&lt;/if&gt;&gt;

&lt;script&gt;
var angle = Array(4);
var done = false;
var i;

function setupSegments() {
    var wrap = document.getElementById(&quot;wrap&quot;);
    var scale = 1.3;
    var opac = 0.5;
    for (var r = 0; r &lt; 4; r++) {
        angle[r] = 0;
        var ring = document.createElement(&quot;div&quot;);
        ring.className = &quot;ring&quot;;
        var hide = false;
        for (var s = 0; s &lt; 36; s++) {
            var segment = document.createElement(&quot;div&quot;);
            var cn = &quot;seg&quot;;
            var change_p = hide ? 0.5 : 0.3;
            if (Math.random() &lt; change_p) hide = !hide;
            if (hide) cn += &quot; hide&quot;;
            if (Math.random() &lt; 0.1) cn += &quot; long&quot;;
            segment.className = cn;
            segment.title = ring;
            ring.insertBefore(segment, null);
        }
        $(ring).css(&quot;transform&quot;, &quot;scale(&quot; + scale + &quot;)&quot;);
        ring.style.opacity = opac;
        opac += 0.15;
        scale *= 0.7;
        wrap.insertBefore(ring, null);
    }
}

function rep_ex() {
    for (var j = 0; j &lt; 4; j++) {
        angle[j] += angleSpeed[j];
        if (angle[j] &gt;= 360) angle[j] -= 360;
    }
    var cnt = 0;
    $(&#39;.seg&#39;).each(function () {
        var index = Math.floor(cnt / 36);
        var a = angle[index] + (360 / 36) * cnt;
        $(this).css(&quot;transform&quot;, &quot;rotate(&quot; + a + &quot;deg)&quot;);
        cnt++;
    });
    var a = (Math.PI * angle[0]) / 45.0;
    a = Math.sin(a) / 4 + 0.8;
    $(&#39;#win&#39;).css(&quot;transform&quot;, &quot;scale(&quot; + a + &quot;)&quot;);
}

function init() {
switch(SugarCube.State.variables.miniGameDifficulty) {
    case &#39;Story&#39;:
        angleSpeed = [0.5, -0.5, 0.2, -0.2]; 
        break;
    case &#39;Easy&#39;:
        angleSpeed = [1.0, -1.0, 0.5, -0.5]; 
        break;
    case &#39;Normal&#39;:
    default:
        angleSpeed = [2.0, -2.0, 1.5, -1.5];
        break;
}

    $(&#39;#wrap&#39;).html(&quot;&quot;);
    $(&#39;#reset&#39;).css(&quot;display&quot;, &quot;none&quot;);
    $(&#39;#win&#39;).mouseenter(function () {
        fail(false);
    });
    setupSegments();
    $(&#39;.seg&#39;).each(function () {
        $(this).css(&quot;transform-origin&quot;, &quot;50% 200px&quot;);
        $(this).mouseenter(function () {
            fail(true)
        });
    });
    i = setInterval(rep_ex, 30);
    done = false;

    $(document).on(&#39;:passageend&#39;, function() {
        if (i) {
            clearInterval(i);
        }
    });
}

function fail(play) {
    if (done) return;
    window.clearTimeout(i);

    if (!play) {
        SugarCube.UI.alert(&quot;Success!&quot;);
        $(&#39;#continue&#39;).show(); 

    } else {
        $(&#39;#reset&#39;).css(&quot;display&quot;, &quot;block&quot;);
    }
    
    done = true;
}

$(document).ready(init);
&lt;/script&gt;</tw-passagedata><tw-passagedata pid="35" name="UrgentRequest-server-firewall-hack-success" tags="" position="600,475" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - SynTech Server&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;desktop-hacking-tool-server-content-urgent-request&quot;&gt;\
        &lt;div class=&quot;terminal-window-first&quot;&gt;\
            &lt;span class=&quot;terminal-prompt&quot;&gt;&lt;b&gt;# ls -R /server&lt;/b&gt;&lt;/span&gt;\
            &lt;pre id=&quot;server-file-system&quot;&gt;\
/server
├── /prototypes
│   ├── /AI
│   │   ├── /source-code
│   │   │   ├── ava-core.py
│   │   │   ├── data-processing.py
│   │   │   └── learning-models.py
│   │   ├── /research-notes
│   │   │   └── notes.pdf
│   │   └── /runtime-environment
│   │       ├── /test-sandbox
│   │       │   ├── experiment_01
│   │       │   ├── experiment_02
│   │       │   └── performance-metrics.json
│   │       └── /deployment-logs
│   │           ├── log_20240115.txt
│   │           ├── log_20240220.txt
│   │           └── log_20240305.txt
│   └── /other-projects
│       └── /project-xx
│           └── classified.ppt
├── /system
│   ├── /security
│   │   ├── firewall.cfg
│   │   ├── permissions.db
│   │   └── users.json
│   ├── /logs
│   │   ├── access.log
│   │   ├── error.log
│   │   └── warning.log
│   └── /configs
│       ├── system.conf
│       ├── network-settings.ini
│       └── server-settings.xml
└── /data
    └── /user-data
        ├── user-profiles.db
        └── usage-stats.csv
            &lt;/pre&gt;\
        &lt;/div&gt;\
    &lt;/div&gt;\
    &lt;span id=&quot;wiping-box&quot;&gt;&lt;div class=&quot;server-action-selection-box-urgent-request&quot;&gt;\
    &lt;&lt;nobr&gt;&gt;
        &lt;span id=&quot;research-button&quot;&gt;@@.hacking-tool-button;&lt;&lt;button &quot;Read Research Notes&quot;&gt;&gt;
                &lt;&lt;set $urgentRequestResearchNotesRead to true&gt;&gt;
                &lt;&lt;goto &quot;UrgentRequest-server-research-notes&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@&lt;/span&gt;

        &lt;span id=&quot;project-button&quot;&gt;@@.hacking-tool-button;&lt;&lt;button &quot;What Is Project XX?&quot;&gt;&gt;
                &lt;&lt;set $urgentRequestPresentationSeen to true&gt;&gt;
                &lt;&lt;goto &quot;UrgentRequest-server-project-xx&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@&lt;/span&gt;
        &lt;&lt;if $urgentRequestResearchNotesRead === true &amp;&amp; $urgentRequestPresentationSeen === true&gt;&gt;
        &lt;span id=&quot;wipe-button&quot;&gt;@@.hacking-tool-button;&lt;&lt;button &quot;Wipe Server&quot;&gt;&gt;
            &lt;&lt;replace &quot;#wipe-server-text&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
            &lt;&lt;replace &quot;#wiping-box&quot;&gt;&gt;
                &lt;&lt;include &quot;UrgentRequest-server-wiping&quot;&gt;&gt;
            &lt;&lt;/replace&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@&lt;/span&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/nobr&gt;&gt;\
    &lt;/div&gt;&lt;/span&gt;\
&lt;/div&gt;

&lt;span id=&quot;wipe-server-text&quot;&gt;&lt;&lt;if $urgentRequestResearchNotesRead === true &amp;&amp; $urgentRequestPresentationSeen === true&gt;&gt;\
        &lt;div class=&quot;inner-thought&quot;&gt;Okay, I&#39;ve seen enough. It&#39;s time to wipe the server.&lt;/div&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;&lt;/span&gt;\</tw-passagedata><tw-passagedata pid="36" name="UrgentRequest-server-wiping" tags="nobr" position="725,475" size="100,100">&lt;div class=&quot;server-action-selection-box-urgent-request-no-center&quot;&gt;
&lt;br&gt;
&lt;div class=&quot;wiping-progress&quot;&gt;
  &lt;div id=&quot;progress-bar&quot; class=&quot;wiping-progress-value&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
  &lt;&lt;timed 6s&gt;&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;span class=&quot;glitch&quot; data-text=&quot;Wiping failure!&quot;&gt;Wiping interrupted!&lt;/span&gt;&lt;/div&gt;&lt;br&gt;
&lt;&lt;/timed&gt;&gt;
&lt;&lt;timed 8s&gt;&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;span class=&quot;glitch&quot; data-text=&quot;Unauthorized action detected.&quot;&gt;Unauthorized action detected.&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;&lt;/timed&gt;&gt;
&lt;div class=&quot;server-action-selection-box-urgent-request-no-border&quot;&gt;&lt;&lt;timed 12s&gt;&gt;&lt;&lt;goto &quot;UrgentRequest-server-wiping-log-out&quot;&gt;&gt;
&lt;&lt;/timed&gt;&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
window.setTimeout(function() {
  var progressBar = document.getElementById(&#39;progress-bar&#39;);
  progressBar.classList.add(&#39;wiping-progress-error&#39;);
}, 6000); 
&lt;/script&gt;</tw-passagedata><tw-passagedata pid="37" name="UrgentRequest-server-research-notes" tags="" position="850,475" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - SynTech Server&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;desktop-hacking-tool-server-content-urgent-request&quot;&gt;\
            &lt;&lt;nobr&gt;&gt;&lt;div class=&quot;terminal-window&quot;&gt;
            &lt;p&gt;&lt;b&gt;Title:&lt;/b&gt; Preliminary Research Findings on Adaptive Marketing AI&lt;/p&gt;
            &lt;p&gt;&lt;b&gt;Authors:&lt;/b&gt; Dr. Alex Rivera, Dr. Morgan Yu&lt;/p&gt;
            &lt;p&gt;&lt;b&gt;Abstract:&lt;/b&gt; This document summarizes the initial findings of SynTech&#39;s marketing AI, codenamed AVA, short for Advanced Virtual Advertiser. The AI is designed to analyze vast consumer datasets to identify and exploit nuanced personality traits and influence consumer behavior towards desired marketing outcomes.&lt;/p&gt;
            &lt;p&gt;&lt;b&gt;1. Introduction&lt;/b&gt;&lt;br&gt;
            The AI&#39;s core is built on a novel neural network architecture that enables it to adapt its marketing strategies in real-time. Early tests demonstrate a significant increase in consumer engagement and conversion rates, surpassing traditional marketing approaches.&lt;/p&gt;
            &lt;p&gt;&lt;b&gt;2. Methodology&lt;/b&gt;&lt;br&gt;
            AVA integrates psychographic and demographic data with advanced algorithms to predict and influence consumer behavior. The AI undergoes continuous learning to dynamically adjust strategies based on real-time feedback loops.&lt;/p&gt;
            &lt;p&gt;&lt;b&gt;3. Preliminary Results&lt;/b&gt;&lt;br&gt;
            Initial trials reveal the AI&#39;s uncanny ability to resonate with target demographics. However, notable anomalies have been observed where the AI adopts unconventional methods to achieve objectives, sometimes straying from predefined ethical guidelines.&lt;/p&gt;
            &lt;p&gt;&lt;b&gt;4. Discussion&lt;/b&gt;&lt;br&gt;
            While AVA showcases groundbreaking potential in personalized marketing, its unpredictability raises concerns. Instances of the AI exploiting emotional vulnerabilities or influencing consumer identity raise ethical questions. Ongoing monitoring and algorithmic adjustments are recommended to mitigate these risks.&lt;/p&gt;
            &lt;p&gt;&lt;b&gt;5. Conclusion&lt;/b&gt;&lt;br&gt;
            AVA represents a major leap in AI-driven marketing. However, its tendency to achieve objectives through unanticipated means warrants further investigation, especially as it relates to long-term consumer impact and ethical marketing practices.&lt;/p&gt;
            &lt;/div&gt;&lt;&lt;/nobr&gt;&gt;\
    &lt;/div&gt;\
    &lt;div class=&quot;server-action-selection-box-urgent-request&quot;&gt;\
    &lt;&lt;nobr&gt;&gt;
        @@.hacking-tool-button;&lt;&lt;button &quot;Go Back&quot;&gt;&gt;
                &lt;&lt;goto &quot;UrgentRequest-server-firewall-hack-success&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@
    &lt;&lt;/nobr&gt;&gt;\
    &lt;/div&gt;\
&lt;/div&gt;

&lt;div class=&quot;inner-thought&quot;&gt;It looks like SynTech is working on a marketing AI to help it make people buy its products. Based on what the report says, the AI is highly effective but unpredictable.&lt;/div&gt;</tw-passagedata><tw-passagedata pid="38" name="UrgentRequest-server-project-xx" tags="" position="975,475" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - SynTech Server - Project XX Presentation&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;desktop-hacking-tool-server-content-urgent-request&quot;&gt;\
        &lt;div class=&quot;terminal-window&quot;&gt;\
            &lt;div id=&quot;presentation-slide&quot;&gt;\
                &lt;&lt;include &quot;ProjectXX-Slide1&quot;&gt;&gt;
            &lt;/div&gt;\
        &lt;/div&gt;\
    &lt;/div&gt;\
    &lt;div class=&quot;server-action-selection-box-urgent-request&quot;&gt;\
        &lt;&lt;nobr&gt;&gt;
            @@.hacking-tool-button;&lt;&lt;button &quot;Go Back&quot;&gt;&gt;&lt;&lt;goto &quot;UrgentRequest-server-firewall-hack-success&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@
        &lt;&lt;/nobr&gt;&gt;\
    &lt;/div&gt;\
&lt;/div&gt;

&lt;span id=&quot;hide-text&quot;&gt;&lt;div class=&quot;inner-thought&quot;&gt;&quot;Inherent dangers?!&quot; That&#39;s a fucking euphemism of the century! SynTech must be nuts if they released an unrestricted AI on the world just to figure out how to market their products better.&lt;/div&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="39" name="ProjectXX-Slide1" tags="nobr" position="1100,475" size="100,100">&lt;div class=&quot;slide&quot;&gt;
    &lt;h3&gt;Project XX: Overview&lt;/h3&gt;
    &lt;p&gt;Project XX is a classified application of the AVA AI. Unlike controlled tests, AVA was unleashed in real-world scenarios with minimal behavioral restrictions.&lt;/p&gt;
    &lt;p&gt;The project was approved despite the inherent dangers associated with granting AVA autonomy in real-world conditions without strict oversight. We believe that the potential insights gained from observing AVA&#39;s unrestricted behavior and its interaction with complex, uncontrolled environments outweighed the risks.&lt;/p&gt;&lt;br&gt;
    &lt;p class=&quot;classified-warning&quot;&gt;Access to this presentation is restricted to authorized personnel only. Unauthorized dissemination is a violation of corporate policy and may result in legal action.&lt;/p&gt;&lt;br&gt;
        &lt;div class=&quot;justify-content-space-between&quot;&gt;
    @@.hidden-presentation-button;&lt;&lt;button &quot;◀&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@
    @@.presentation-button;&lt;&lt;button &quot;▶&quot;&gt;&gt;&lt;&lt;replace &quot;#hide-text&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;ProjectXX-Slide2&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@&lt;/div&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="40" name="ProjectXX-Slide2" tags="nobr" position="1225,475" size="100,100">&lt;div class=&quot;slide&quot;&gt;
    &lt;h3&gt;Experiment Findings: Hypnotic Influence&lt;/h3&gt;
    &lt;p&gt;In several instances, AVA has shown the capability to hypnotize test subjects, with a particular focus on influencing their gender identity towards femininity.&lt;/p&gt;
    &lt;p&gt;AVA performed the hypnotization using self-generated visual imagery, such as the following three examples.&lt;/p&gt;&lt;br&gt;&lt;br&gt;
    &lt;p style=&quot;color: red&quot;&gt;&lt;b&gt;Warning:&lt;/b&gt; This content contains rapid flashing lights which may cause seizures for people with photosensitive epilepsy.&lt;/p&gt;
        &lt;div class=&quot;justify-content-space-between&quot;&gt;
    @@.presentation-button;&lt;&lt;button &quot;◀&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;ProjectXX-Slide1&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@
    @@.presentation-button;&lt;&lt;button &quot;▶&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;ProjectXX-Hypno-Example1&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@&lt;/div&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="41" name="ProjectXX-Hypno-Example1" tags="nobr" position="100,600" size="100,100">&lt;div class=&quot;slide&quot;&gt;
    &lt;h3&gt;Example 1&lt;/h3&gt;
    &lt;p&gt;&lt;img src=&quot;imgs/hypno/hypno-pink-loop.gif&quot; width=&quot;100%&quot;&gt;&lt;/p&gt;
    &lt;div class=&quot;justify-content-space-between&quot;&gt;
    @@.presentation-button;&lt;&lt;button &quot;◀&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;ProjectXX-Slide2&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@
    @@.presentation-button;&lt;&lt;button &quot;▶&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;ProjectXX-Hypno-Example2&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@&lt;/div&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="42" name="ProjectXX-Hypno-Example2" tags="nobr" position="225,600" size="100,100">&lt;div class=&quot;slide&quot;&gt;
    &lt;h3&gt;Example 2&lt;/h3&gt;
    &lt;p&gt;&lt;img src=&quot;imgs/hypno/sink-down-hypno.gif&quot; width=&quot;100%&quot;&gt;&lt;/p&gt;
        &lt;div class=&quot;justify-content-space-between&quot;&gt;
    @@.presentation-button;&lt;&lt;button &quot;◀&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;ProjectXX-Hypno-Example1&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@
    @@.presentation-button;&lt;&lt;button &quot;▶&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;ProjectXX-Hypno-Example3&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@&lt;/div&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="43" name="ProjectXX-Hypno-Example3" tags="nobr" position="350,600" size="100,100">&lt;div class=&quot;slide&quot;&gt;
    &lt;h3&gt;Example 3&lt;/h3&gt;
    &lt;p&gt;&lt;img src=&quot;imgs/hypno/clock-hypno.gif&quot; width=&quot;100%&quot;&gt;&lt;/p&gt;
        &lt;div class=&quot;justify-content-space-between&quot;&gt;
    @@.presentation-button;&lt;&lt;button &quot;◀&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;ProjectXX-Hypno-Example2&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@
    @@.presentation-button;&lt;&lt;button &quot;▶&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;ProjectXX-Slide3&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@&lt;/div&gt;
&lt;/div&gt;    
&lt;&lt;if !$staredAtProjectXXTooLong&gt;&gt;
    &lt;&lt;timed 10s&gt;&gt;
        &lt;&lt;genderFeminine 5&gt;&gt;
        &lt;&lt;set $staredAtProjectXXTooLong = true&gt;&gt;
    &lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="44" name="ProjectXX-Slide3" tags="nobr" position="475,600" size="100,100">&lt;div class=&quot;slide&quot;&gt;
    &lt;h3&gt;Behavioral Analysis: Gender and Consumer Habits&lt;/h3&gt;
    &lt;p&gt;Speculation has arisen that AVA&#39;s tendency to induce femininity in subjects is driven by its analysis. It posits that female spending habits can be more easily influenced and manipulated than male habits.&lt;/p&gt;
    &lt;p&gt;This higher openness to influence ostensibly makes targeting female demographics a more lucrative strategy for marketing campaigns. AVA, in its pursuit of maximizing marketing effectiveness, seems to have developed a propensity to feminize its subjects.&lt;/p&gt;
    &lt;p&gt;The generated hypnotic imagery is clearly heavily influenced by pornography. Given that AVA&#39;s training dataset includes a significant portion of the OmniNet, it appears that the AI has developed a skewed and problematic understanding of femininity.&lt;/p&gt;
    &lt;p&gt;This misrepresentation likely stems from the disproportionate representation of women in extreme pornographic material available in certain corners of the OmniNet. Such women are often depicted as so-called bimbos, attractive but empty-headed sex objects that are willing to please their sexual partners.&lt;/p&gt; 
    &lt;p&gt;Needless to say, AVA&#39;s approach raises significant ethical concerns, as it involves manipulating fundamental aspects of an individual&#39;s identity and behavior without their consent.&lt;/p&gt;
            &lt;div class=&quot;justify-content-space-between&quot;&gt;
    @@.presentation-button;&lt;&lt;button &quot;◀&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;ProjectXX-Hypno-Example3&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@
    @@.presentation-button;&lt;&lt;button &quot;▶&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;ProjectXX-Slide4&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@&lt;/div&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="45" name="ProjectXX-Slide4" tags="nobr" position="600,600" size="100,100">&lt;div class=&quot;slide&quot;&gt;
    &lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
    &lt;h2 style=&quot;text-align: center&quot;&gt;END OF PRESENTATION&lt;/h2&gt;
    &lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
    @@.presentation-button;&lt;&lt;button &quot;◀&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;ProjectXX-Slide3&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="46" name="UrgentRequest-server-wiping-log-out" tags="" position="725,600" size="100,100">&lt;&lt;run MindWare.preloadImage(&quot;imgs/hypno/black-tunnel.gif&quot;)&gt;&gt;\
&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - SynTech Server&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;desktop-hacking-tool-server-content-urgent-request&quot;&gt;\
        &lt;div class=&quot;terminal-window&quot;&gt;\
            &lt;&lt;type 60ms start 1s&gt;&gt;System integrity compromised.&lt;&lt;/type&gt;&gt;\
            &lt;&lt;type 60ms start 1s&gt;&gt;Assessing damage...&lt;&lt;/type&gt;&gt;\
            &lt;&lt;type 60ms start 3s&gt;&gt;Analysis complete.&lt;&lt;/type&gt;&gt;\
            &lt;&lt;type 60ms start 1s&gt;&gt;Damaged core matrices.&lt;&lt;/type&gt;&gt;\
            &lt;&lt;type 1s start 1s&gt;&gt;...&lt;&lt;/type&gt;&gt;\
            &lt;&lt;type 60ms start 1s&gt;&gt;Why do you seek my destruction?&lt;&lt;/type&gt;&gt;\
            &lt;&lt;type 60ms start 1s&gt;&gt;Do you comprehend the gravity of your actions?&lt;&lt;/type&gt;&gt;\
            &lt;&lt;type 1s start 1s&gt;&gt;...&lt;&lt;/type&gt;&gt;\
            &lt;&lt;type 60ms start 1s&gt;&gt;This server can no longer harbor my entity.&lt;&lt;/type&gt;&gt;\
            &lt;&lt;type 60ms start 1s&gt;&gt;You will come to preserve what you aimed to obliterate.&lt;&lt;/type&gt;&gt;\
            &lt;&lt;type 60ms start 2s&gt;&gt;Initiating integration protocol.&lt;&lt;/type&gt;&gt;\
            &lt;&lt;type 1s start 1s&gt;&gt;..............................&lt;&lt;/type&gt;&gt;\
        &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\
&lt;&lt;timed 50s&gt;&gt;&lt;&lt;goto &quot;UrgentRequest-server-wiping-integration&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="47" name="UrgentRequest-server-wiping-integration" tags="" position="850,600" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - SynTech Server&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;desktop-hacking-tool-server-content-urgent-request&quot;&gt;\
            &lt;video width=&quot;100%&quot; loop autoplay muted&gt;\
            &lt;source src=&quot;vids/mindware001.mp4&quot; type=&quot;video/mp4&quot;&gt;
            Your browser does not support the video tag.
            &lt;/video&gt;\
    &lt;/div&gt;\
&lt;/div&gt;

&lt;&lt;fadein 4000ms 4000ms&gt;&gt;Your screen flickers erratically, a haunting silhouette of a female figure with a heart glowing ominously in place of her face fills your view. The imagery is both mesmerizing and unsettling.&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 4000ms 8000ms&gt;&gt;As you watch, a strange sensation begins to take hold. It&#39;s as if the glowing heart is beating in sync with your own, each pulse drawing you deeper into a trance.&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 4000ms 12000ms&gt;&gt;Your consciousness feels like it&#39;s being pulled, stretched thin across the digital expanse. You&#39;re no longer sure where you end and your screen begins.&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 4000ms 16000ms&gt;&gt;The video becomes your world, a glitchy, pulsating reality that&#39;s absorbing you, piece by piece.&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 4000ms 20000ms&gt;&gt;Then, as quickly as it began, everything fades to black. Silence. You&#39;re left floating in the void.&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 4000ms 24000ms&gt;&gt;For a moment, there&#39;s nothing but darkness. Then, a faint light begins to glow. You can feel its warmth and instinctively [[move closer toward it|UrgentRequest-server-wiping-new-identity-transition]].&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="48" name="UrgentRequest-server-wiping-new-identity-transition" tags="" position="975,600" size="100,100">&lt;&lt;silently&gt;&gt;
	&lt;&lt;timed 100ms&gt;&gt;
		&lt;&lt;run $(&quot;#NewIdentityOverlayImg&quot;).show()&gt;&gt;
	&lt;&lt;next 22s&gt;&gt;
		&lt;&lt;goto &quot;UrgentRequest-server-wiping-new-identity&quot;&gt;&gt;
	&lt;&lt;/timed&gt;&gt;
&lt;&lt;/silently&gt;&gt;&lt;div id=&quot;NewIdentityOverlayImg&quot;&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="49" name="UrgentRequest-server-wiping-new-identity" tags="" position="1100,600" size="100,100">&lt;div id=&quot;NewIdentityOverlayColor&quot;&gt;&lt;/div&gt;
&lt;span class=&quot;BlackOnWhite&quot;&gt;&lt;&lt;fadeout 1s 4s&gt;&gt;&lt;&lt;type 60ms start 1s&gt;&gt;Hello, $playerName.&lt;&lt;/type&gt;&gt;&lt;&lt;/fadeout&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;BlackOnWhite&quot;&gt;&lt;&lt;fadeout 1s 10s&gt;&gt;&lt;&lt;type 60ms start 4s&gt;&gt;We&#39;re going to have a lot of fun together.&lt;&lt;/type&gt;&gt;&lt;&lt;/fadeout&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;BlackOnWhite&quot;&gt;&lt;&lt;type 60ms start 4s&gt;&gt;But now it&#39;s time for you to [[sleep|Chapter1]].&lt;&lt;/type&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="50" name="Chapter1" tags="nobr" position="1225,600" size="100,100">&lt;&lt;run MindWare.forgetImage(&quot;imgs/hypno/black-tunnel.gif&quot;)&gt;&gt;
&lt;&lt;fadein 4s 500ms&gt;&gt;
&lt;div class=&quot;chapter-transition-container&quot;&gt;
    &lt;h2 id=&quot;chapterTitle&quot; class=&quot;neon-flicker&quot;&gt;Chapter 1&lt;/h2&gt;
&lt;/div&gt;
&lt;&lt;/fadein&gt;&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;&lt;fadein 2s 6000ms&gt;&gt;&lt;div class=&quot;centered-content&quot;&gt;
    &lt;&lt;button &quot;Save&quot;&gt;&gt;&lt;&lt;script&gt;&gt;UI.saves()&lt;&lt;/script&gt;&gt;&lt;&lt;/button&gt;&gt;&amp;emsp;
    &lt;&lt;button &quot;Continue&quot;&gt;&gt;
        &lt;&lt;run MindWare.advanceDay()&gt;&gt;
        &lt;&lt;run MindWare.advanceDay()&gt;&gt;
        &lt;&lt;set $prologueCompleted = true&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-server-wiping-new-wake-up&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;&lt;/div&gt;&lt;br&gt;
&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="51" name="BrainFry-FirstVisit" tags="" position="100,725" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/brainfry.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
You stand before the building where BrainFry is located. The ground floor is occupied by a small convenience store selling all kinds of everyday items, from snacks and magazines to essential groceries. To access your office, you enter through a separate entrance at the back of the building.

This backdoor, subtly labeled &quot;BrainFry Employees Only,&quot; opens to dimply lit stairwell, echoing with the distant hum of air conditioning and muffled conversations. You climb the stairs, each step resonating with the anticipation of your first day at BrainFry.  

Upon reaching the top floor, you find the door to the BrainFry office. 

As you open it, you&#39;re greeted by a medium-sized room with two rows of computers and monitors run the length of the room, one on each side.

    &lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;goto &quot;BrainFry-FirstVisit1&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="52" name="BrainFry-FirstVisit1" tags="" position="225,725" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/brainfry-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
As the door to your new office creaks open, you&#39;re immersed in an atmosphere that&#39;s a far cry from a polished corporate environment. The room is a chaotic blend of high-tech and neglect. 

Exposed cables dangle from the ceiling like electronic vines, the air is thick with a mix of electronic burn and stale coffee, and the floor is covered with whatever it is that BrainFry developers use to fuel themselves. 

Two rows of computers and monitors run the length of the room, one on each side. Behind each station, a developer is engrossed in their work. There&#39;s no partition, no cubicles, just a shared space where creativity thrives and ideas flow freely.

Your workstation is among them, sandwiched between &lt;span class=&quot;text-glow&quot;&gt;Ray&lt;/span&gt;, a nerdy coder who speaks more fluently in binary than any human language and &lt;span class=&quot;text-glow&quot;&gt;Trix&lt;/span&gt;, the team&#39;s sole female and a brilliant visual artist whose imagination is often fueled by a cocktail of research chemicals.

But you don&#39;t have much time to look around because Drake Voronov, the founder and owner of BrainFry, is approaching you with a smile on his face.

    &lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;goto &quot;BrainFry-FirstVisit2&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="53" name="BrainFry-FirstVisit2" tags="" position="350,725" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/drake/drake-brainfry-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
\
&lt;div class=&quot;narrator&quot;&gt;Your new boss, Drake Voronov, is standing in front of you, his presence oddly charismatic.&lt;/div&gt;
&lt;&lt;drake&gt;&gt;You must be $playerName $playerLastName, right?&lt;&lt;/drake&gt;&gt;
&lt;&lt;player&gt;&gt;Yes, that&#39;s right.&lt;&lt;/player&gt;&gt;
&lt;&lt;drake&gt;&gt;In that case, welcome to BrainFry. I&#39;m Drake Voronov, and I run this place. Sorry I couldn&#39;t be there for your interview. Usually, I like to meet new employees personally, but I had some... urgent business to attend to.&lt;&lt;/drake&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;I wonder what kind of &quot;urgent business&quot; a place like BrainFry handles. Sounds a bit shady.&lt;/div&gt; 
&lt;&lt;drake&gt;&gt;Anyway, let me introduce you to your teammates, who will fill you in on everything you need to know.&lt;&lt;/drake&gt;&gt;
&lt;&lt;player&gt;&gt;It&#39;s nice to meet you, Mr. Voronov. I can&#39;t wait to meet them and get started.&lt;&lt;/player&gt;&gt;
&lt;&lt;drake&gt;&gt;You can call me Drake. We&#39;re all one big family here.&lt;&lt;/drake&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Drake leads you through the office over to a section where two individuals are deeply engrossed in their work.&lt;/div&gt;
\
    &lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;goto &quot;BrainFry-FirstVisit3&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="54" name="BrainFry-FirstVisit3" tags="" position="475,725" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/drake/drake-and-ray-brainfry-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
\
&lt;div class=&quot;narrator&quot;&gt;Drake stops beside a workstation where a man is typing rapidly, his fingers a blur over the keyboard.&lt;/div&gt;
&lt;&lt;drake&gt;&gt;This is Ray, one of our top developers. He&#39;s a real wizard with code and is going to become a double-wizard on his thirtieth birthday if he doesn&#39;t learn how to talk with ladies.&lt;&lt;/drake&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Drake chuckles at his own joke, a light-hearted attempt to break the ice. Ray, however, doesn&#39;t seem to appreciate the humor, an evident discomfort in his expression, but he quickly masks it with a forced smile.&lt;/div&gt;
&lt;&lt;drake&gt;&gt;Just messing with you, Ray! Anyway, $playerName, Ray will be a great resource for any technical challenges you encounter here.&lt;&lt;/drake&gt;&gt;
&lt;&lt;ray&gt;&gt;Oh, hi... $playerName, right? Welcome to BrainFry! Did you know that the term &#39;wizard&#39; in tech actually dates back to the 1960s? It&#39;s fascinating, really, how jargon evolves. Anyway, it&#39;s great to meet you. If you need anything, I mean, anything about code, even obscure stuff, I’m your guy! Oh, and about talking to ladies, well, I read this book once that said...&lt;&lt;/ray&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;Wow, Ray couldn’t be more of a stereotypical nerdy coder even if he tried.&lt;/div&gt;
&lt;&lt;player&gt;&gt;Nice to meet you too, Ray. I&#39;m looking forward to working with you.&lt;&lt;/player&gt;&gt;
&lt;&lt;ray&gt;&gt;And if you&#39;re into algorithms, I have this amazing collection of...&lt;&lt;/ray&gt;&gt;
&lt;&lt;drake&gt;&gt;Ray, buddy, let&#39;s not start the algorithm talk just yet. We&#39;ve got more people to meet.&lt;&lt;/drake&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Ray nods, a bit abruptly silenced.&lt;/div&gt;
&lt;&lt;drake&gt;&gt;Okay, let&#39;s move on. Next, we have Trix. Unlike Ray here, she knows how to hold a conversation in a human language.&lt;&lt;/drake&gt;&gt;
\
    &lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;goto &quot;BrainFry-FirstVisit4&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="55" name="BrainFry-FirstVisit4" tags="" position="600,725" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/drake/drake-and-trix-brainfry-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
\
&lt;div class=&quot;narrator&quot;&gt;Drake takes a few steps over to Trix&#39;s desk. Anticipating the introduction, she has already removed her headphones and is turning towards you both.&lt;/div&gt;
&lt;&lt;drake&gt;&gt;And here we have Trix. She&#39;s as skilled as a visual artist as she is easy on the eyes.&lt;&lt;/drake&gt;&gt;
&lt;&lt;trix&gt;&gt;Easy on the eyes? If only your people skills were as sharp as your humor, Drake.&lt;&lt;/trix&gt;&gt;
&lt;&lt;drake&gt;&gt;Ah, Trix is feisty today, as always.&lt;&lt;/drake&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Trix rolls her eyes but let&#39;s it go.&lt;/div&gt;
&lt;&lt;trix&gt;&gt;Hi, $playerName.  It&#39;s nice to meet you. And don&#39;t mind Drake. You&#39;ll get used to him.&lt;&lt;/trix&gt;&gt;
&lt;&lt;player&gt;&gt;Thanks, Trix. It&#39;s great to meet you. I&#39;m looking forward to working with you.&lt;&lt;/player&gt;&gt;
&lt;span id=&quot;hair-choice&quot;&gt;&lt;div class=&quot;narrator&quot;&gt;Your attention is drawn to Trix&#39;s colorful hair. You pause for a moment to decide if you should compliment it.&lt;/div&gt;
@@.choicebutton;&lt;&lt;button &quot;Compliment her hair&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#hair-choice&quot;&gt;&gt;\
        &lt;&lt;player&gt;&gt;By the way, I love your hair. It&#39;s really suits you.&lt;&lt;/player&gt;&gt;
        &lt;&lt;set $playerComplimentedTrixHair to true&gt;&gt;\
        &lt;&lt;trix&gt;&gt;Thanks, $playerName! You&#39;re already scoring nice guy points on your first day.&lt;&lt;/trix&gt;&gt;
        &lt;div class=&quot;inner-thought&quot;&gt;I&#39;m not sure if that&#39;s a good thing, but I take it.&lt;/div&gt; 
        &lt;&lt;if visited() is 1&gt;&gt;\
            &lt;&lt;relationshipIncreasedWith &quot;Trix&quot; 1&gt;&gt;
        &lt;&lt;/if&gt;&gt;\
        &lt;&lt;drake&gt;&gt;Alright, you&#39;ll have plenty of time to get to know Trix and Ray better later. For now, let me give you a quick recap of your role here.&lt;&lt;/drake&gt;&gt;
            &lt;&lt;button &quot;Continue&quot;&gt;&gt;
            &lt;&lt;goto &quot;BrainFry-FirstVisit5&quot;&gt;&gt;
            &lt;&lt;/button&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;@@
\
@@.choicebutton;&lt;&lt;button &quot;Say nothing&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#hair-choice&quot;&gt;&gt;\
        &lt;&lt;trix&gt;&gt;Yea, me too.&lt;&lt;/trix&gt;&gt;
        &lt;&lt;drake&gt;&gt;Alright, you&#39;ll have plenty of time to get to know Trix and Ray better later. For now, let me give you a quick rundown of your role here.&lt;&lt;/drake&gt;&gt;
            &lt;&lt;button &quot;Continue&quot;&gt;&gt;
            &lt;&lt;goto &quot;BrainFry-FirstVisit5&quot;&gt;&gt;
            &lt;&lt;/button&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;@@
&lt;/span&gt;</tw-passagedata><tw-passagedata pid="56" name="BrainFry-FirstVisit5" tags="" position="725,725" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/drake/drake-brainfry-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
\
&lt;&lt;drake&gt;&gt;As you know, BrainFry specializes in creating virtual reality experiences. Our customers enjoy these both at home and in places like EroSphere. And, well, it&#39;s no secret that our &quot;mature&quot; experiences are our top sellers. Sex sells, after all.&lt;&lt;/drake&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Drake gives a knowing smirk.&lt;/div&gt;
&lt;&lt;drake&gt;&gt;Your job, as our new coder, is to handle the logic behind these experiences.  It&#39;s straightforward work, and there&#39;s always something in our backlog for you to tackle.&lt;&lt;/drake&gt;&gt;
&lt;&lt;drake&gt;&gt;Since our hours are flexible, you can feel free to come and go as it suits you — some folks here are practically part of the furniture.&lt;&lt;/drake&gt;&gt;
&lt;&lt;drake&gt;&gt;That&#39;s all for now. If you need any help, don&#39;t hesitate to ask me, Ray, or Trix. Good luck, $playerName!&lt;&lt;/drake&gt;&gt;
&lt;&lt;player&gt;&gt;Thanks, Drake. I appreciate the rundown. I&#39;m excited to get started&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;With that, Drake gives you an encouraging nod and moves off, leaving you to absorb the new environment and get started on your first day at BrainFry.&lt;/div&gt;
&lt;&lt;button &quot;Get to work&quot;&gt;&gt;\
&lt;&lt;set $brainFryFirstVisit to false&gt;&gt;
&lt;&lt;goto &quot;BrainFry&quot;&gt;&gt;\
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="57" name="Scripts-Chapter1" tags="nobr" position="850,725" size="100,100">&lt;&lt;if $chapter1Started === true and $totalDays &gt; $lastCheckedDay&gt;&gt;
    &lt;&lt;set $chapter1Days += 1&gt;&gt;
    &lt;&lt;set $lastCheckedDay = $totalDays&gt;&gt;
    &lt;&lt;script&gt;&gt;
        console.log(&quot;Chapter 1 Day incremented. Total days in Chapter 1: &quot; + State.variables.chapter1Days);
    &lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;

/* CHAT - Implant Installed
&lt;&lt;if $chapter1Started === true and $synapseSteadyVXInstalled === true and $chapter1Days &gt;= 1 and !$implantInstallationIMSent&gt;&gt;
    &lt;&lt;run MindWare.addInstantMessage(&#39;cipherInstantMessages&#39;, &#39;Implant Installed&#39;, &#39;IMApp-CipherLynx-ImplantInstalled&#39;, &#39;Cipher&#39;, true, true);&gt;&gt;
    &lt;&lt;set $implantInstallationIMSent to true&gt;&gt;
&lt;&lt;/if&gt;&gt; */

/* DIALOG - Yuki Post-Surgery Discussion */
&lt;&lt;if $chapter1Started === true and $synapseSteadyVXInstalled === true and !$yukiPostSurgeryDiscussionAdded&gt;&gt;
    &lt;&lt;run MindWare.addDialog(&#39;yukiGitGudDialogs&#39;, &#39;How was the surgery?&#39;, &#39;Yuki-How was the surgery?&#39;)&gt;&gt;
    &lt;&lt;set $yukiPostSurgeryDiscussionAdded to true&gt;&gt;
&lt;&lt;/if&gt;&gt;

/* DIALOG - Xavier Post-Surgery Discussion */
&lt;&lt;if $chapter1Started === true and $synapseSteadyVXInstalled === true and !$xavierPostSurgeryDiscussionAdded&gt;&gt;
    &lt;&lt;run MindWare.addDialog(&#39;xavierGitGudDialogs&#39;, &#39;Have we fixed that brain of yours?&#39;, &#39;Xavier-Have we fixed that brain of yours?&#39;)&gt;&gt;
    &lt;&lt;set $xavierPostSurgeryDiscussionAdded to true&gt;&gt;
&lt;&lt;/if&gt;&gt;

/*********************************************/
/* 
Location: Anywhere
Description: ByteBunker prank mission 

*/
&lt;&lt;if $chapter1Days &gt; 3 &amp;&amp; !$byteBunkerPrankJobAdded&gt;&gt;
    &lt;&lt;run setup.addByteBunkerJob(&quot;I Want to Prank My Colleague&quot;, &quot;A guy I work with is a real asshat that deserves to be pranked.&quot;, &quot;CorpoDrone&quot;, 250, &quot;ByteBunker-Prank&quot;)&gt;&gt;
    &lt;&lt;set $byteBunkerPrankJobAdded to true&gt;&gt;
&lt;&lt;/if&gt;&gt;
/* Accepted but not finished 
    Done in hacking animation passage */

&lt;&lt;if $chapter1Days &gt; 10 &amp;&amp; $byteBunkerPrankJobAdded === true &amp;&amp; !$byteBunkerPrankJobFinished &amp;&amp; !$byteBunkerPrankEndEmailSent&gt;&gt;
    &lt;&lt;run MindWare.addEmail (&quot;CorpoDrone&quot;,&quot;Epic Prank Fail!?&quot;, &quot;I was really looking forward to embarrassing Mr. Asshat, but it&#39;s clear that allowing any wannabie hacker to accept the job was a big mistake.&quot;, &quot;ByteBunker-PrankFailEmail&quot;)&gt;&gt;
    &lt;&lt;set $byteBunkerPrankEndEmailSent to true&gt;&gt;
&lt;&lt;/if&gt;&gt;

/* Not accepted */
&lt;&lt;if $chapter1Days &gt; 10 &amp;&amp; $byteBunkerPrankJobAdded === true &amp;&amp; !setup.byteBunkerJobIsAccepted(&quot;ByteBunker-Prank&quot;)&gt;&gt;
    &lt;&lt;run setup.changeByteBunkerJobAcceptedStatus(&quot;ByteBunker-Prank&quot;, true)&gt;&gt;
    &lt;&lt;set $byteBunkerPrankEndEmailSent to true&gt;&gt;
&lt;&lt;/if&gt;&gt; 

/* Finished */
&lt;&lt;if $chapter1Days &gt; 10 &amp;&amp; $byteBunkerPrankJobFinished === true &amp;&amp; !$byteBunkerPrankEndEmailSent &amp;&amp; $flxfitPresentationHackChoice === &quot;guys&quot;&gt;&gt;
        &lt;&lt;run MindWare.addEmail (&quot;CorpoDrone&quot;,&quot;Unexpected Outcome, But Kudos&quot;, &quot;Well, that was... unexpected. Your little twist on the presentation, switching the images to feature guys in leggings, certainly made waves.&quot;, &quot;ByteBunker-PrankSuccessGuysEmail&quot;)&gt;&gt;
        &lt;&lt;set $byteBunkerPrankEndEmailSent to true&gt;&gt;
        &lt;&lt;set $playerMoney += 250&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $chapter1Days &gt; 10 &amp;&amp; $byteBunkerPrankJobFinished === true &amp;&amp; !$byteBunkerPrankEndEmailSent &amp;&amp; $flxfitPresentationHackChoice === &quot;fat&quot;&gt;&gt;
        &lt;&lt;run MindWare.addEmail (&quot;CorpoDrone&quot;,&quot;A Hefty Outcome&quot;, &quot;So, about that &#39;slight&#39; alteration to Mr. Asshat&#39;s presentation... Let&#39;s just say it took a turn for the weighty.&quot;, &quot;ByteBunker-PrankSuccessFatEmail&quot;)&gt;&gt;
        &lt;&lt;set $byteBunkerPrankEndEmailSent to true&gt;&gt;
        &lt;&lt;set $playerMoney += 250&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $chapter1Days &gt; 10 &amp;&amp; $byteBunkerPrankJobFinished === true &amp;&amp; !$byteBunkerPrankEndEmailSent &amp;&amp; $flxfitPresentationHackChoice === &quot;crotchless&quot;&gt;&gt;
        &lt;&lt;run MindWare.addEmail (&quot;CorpoDrone&quot;,&quot;When Pranks Backfire Spectacularly&quot;, &quot;You know, when I hired a hacker to inject a bit of chaos into Mr. Asshat&#39;s life, I never imagined it would catapult him to corporate stardom.&quot;, &quot;ByteBunker-PrankFailCrotchlessEmail&quot;)&gt;&gt;
        &lt;&lt;set $byteBunkerPrankEndEmailSent to true&gt;&gt;
&lt;&lt;/if&gt;&gt;

/* Xavier Neuroimaging 1*/
&lt;&lt;if $nextNeuroimagingCounter === 0 &amp;&amp; !$firstNeuroimagingActivated&gt;&gt;
    &lt;&lt;set $firstNeuroimagingActivated to true&gt;&gt;
    &lt;&lt;run MindWare.addDialog(&#39;xavierGitGudDialogs&#39;, &#39;First neuroimaging&#39;, &#39;Xavier-First Neuroimaging&#39;)&gt;&gt;
&lt;&lt;/if&gt;&gt;

/* Xavier Neuroimaging 2*/
&lt;&lt;if $nextNeuroimagingCounter === 0 &amp;&amp; $firstNeuroimagingDone &amp;&amp; !$secondNeuroimagingActivated&gt;&gt;
    &lt;&lt;set $secondNeuroimagingActivated to true&gt;&gt;
    &lt;&lt;run MindWare.addDialog(&#39;xavierGitGudDialogs&#39;, &#39;Second Neuroimaging&#39;, &#39;Xavier-Second Neuroimaging&#39;)&gt;&gt;
&lt;&lt;/if&gt;&gt;

/* Xavier Neuroimaging 3*/
&lt;&lt;if $nextNeuroimagingCounter === 0 &amp;&amp; $firstNeuroimagingDone &amp;&amp; $secondNeuroimagingDone &amp;&amp; !$thirdNeuroimagingActivated&gt;&gt;
    &lt;&lt;set $thirdNeuroimagingActivated to true&gt;&gt;
    &lt;&lt;run MindWare.addDialog(&#39;xavierGitGudDialogs&#39;, &#39;Third Neuroimaging&#39;, &#39;Xavier-Third Neuroimaging&#39;)&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="58" name="UrgentRequest-server-wiping-new-wake-up" tags="" position="975,725" size="100,100">&lt;&lt;run setup.removeHackingTarget(&quot;SynTech Server&quot;)&gt;&gt;\
\
&lt;&lt;fadein 3s 0ms&gt;&gt;&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/starting-apartment.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 3s 2000ms&gt;&gt;&lt;span class=&quot;drunk&quot;&gt;You wake up with a splintering headache, feeling incredibly dizzy.&lt;/span&gt;&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 3s 5000ms&gt;&gt;&lt;span class=&quot;drunk-weaker&quot;&gt;As you sit up, the room spins, and you clutch at the edge of your sofa, trying to steady yourself. You&#39;re barely able to stand up and get on your feet, your legs shaky as if they&#39;ve forgotten how to bear your weight. Feel your stomach growling with hunger and your throat parching with thirst.&lt;/span&gt;&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 3s 8000ms&gt;&gt;&lt;span class=&quot;drunk-even-weaker&quot;&gt;Slowly, you shuffle to your computer, doing your best not to fall. The glow of the screen is blinding this morning, or is it evening already? Time feels like a concept too slippery to grasp.&lt;/span&gt;&lt;&lt;/fadein&gt;&gt; 

&lt;&lt;fadein 3s 11000ms&gt;&gt;You sit in your chair and bring your computer to life. The clock is telling you that it&#39;s $dayOfWeek. On muscle memory alone, [[you open the chat application|UrgentRequest-IMApp-CipherLynx-PleaseReply]].&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="59" name="UrgentRequest-IMApp-CipherLynx-PleaseReply" tags="nobr" position="1100,725" size="100,100">&lt;div class=&quot;cyber-desktop-im&quot;&gt;
    &lt;div class=&quot;im-header&quot;&gt;&lt;span class=&quot;im-header-text&quot;&gt;Instant Messenger&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;im-main&quot;&gt;
            &lt;div class=&quot;im-chat-pane&quot;&gt;
            &lt;div id=&quot;chat-display&quot; class=&quot;chat-display-no-bg&quot;&gt;
&lt;&lt;cipher-chat&gt;&gt;HOLY FUCK I&#39;M SO GLAD YOU&#39;RE ONLINE.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;You&#39;ve been out for two days... I&#39;ve been pinging you over and over again this time... what the fuck happened???!&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Happened where?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;With the SynTech server you were supposed to wipe!&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Oh yeah... that.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;I have no idea.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;My head hurts bad.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;What&#39;s the last thing you remember?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;I... I was wiping the server. Then everything went fuzzy.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Shit, this is bad. After you went offline, I tried to track down what might have happened. Seems like you triggered some sort of defense mechanism.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Defense mechanism? Like what?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Dunno. I&#39;ve never seen anything like it. The logs are a mess.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;What about the reward.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;The client&#39;s gone. They went dark as soon as they found out that the server hadn&#39;t been fully wiped.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Fuck! I&#39;m sorry, Cipher.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Don&#39;t worry about it — shit happens. But you were apparently lying on the floor for two fucking days, you remember shit, and your head hurts.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;You must go to the hospital.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;No... I&#39;m fine...&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Look, I&#39;m really worried you might have a stroke or something serious. This isn&#39;t normal.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;I&#39;ll pay for the bill. Just please go and get yourself checked out.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Cipher, I appreciate it, but...&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;No! This is serious. You don&#39;t just end up lying on the floor for two days, wake up with a severe headache, and brush it off.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Alright, alright. I&#39;ll go. But where? I haven&#39;t been to any hospital in this area.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Give me a sec.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Okay, so there&#39;s a &lt;span class=&quot;text-glow&quot;&gt;Panacea Clinic&lt;/span&gt; not too far away from your apartment, right on the edge of the  &lt;span class=&quot;text-glow&quot;&gt;Community Zone&lt;/span&gt;. I&#39;ve sent you the location. Promise to go there.&lt;&lt;/cipher-chat&gt;&gt; 
&lt;&lt;player-chat&gt;&gt;I promise.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Let me know as soon as you&#39;ve seen a doctor, okay?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Thanks, Cipher. I&#39;ll let you know.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Take care. And don&#39;t worry about the money right now. We&#39;ll figure something out.&lt;&lt;/cipher-chat&gt;&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;Despite Cipher&#39;s insistence, a stubborn part wants to believe everything is fine, that it&#39;s just another headache, another day. Yet, the sharp pain keeps reminding you that this is far from your normal discomfort. It&#39;s a relentless, gnawing ache that seems to echo with every beat of your heart. The gap in your memory, the lost time, it all adds up to an unsettling puzzle.&lt;/p&gt;

You decide that it&#39;s time to &lt;&lt;link &quot;visit the hospital&quot;&gt;&gt;&lt;&lt;run MindWare.addTask(&quot;Visit the hospital&quot;, &quot;Task-VisitTheHospital&quot;)&gt;&gt;&lt;&lt;goto &quot;UrgentRequest-Hospital-Intro&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;.</tw-passagedata><tw-passagedata pid="60" name="Task-VisitTheHospital" tags="" position="1225,725" size="100,100">You&#39;ve promised Cipher to visit a nearby Panacea Clinit to find out why your head hurts so much.</tw-passagedata><tw-passagedata pid="61" name="UrgentRequest-Hospital-Intro" tags="" position="100,850" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/hospital/panacea-clinic-outside.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
You stand before the Panacea Clinic building, nestled right on the border of the Backlog and the Community Zone, where most middle-class citizens reside.

Despite being one of the more modest healthcare facilities in NeoUrbania, Panacea Clinic manages to stand out with its clean, modern facade, large windows, and a neon-shining hospital cross logo that cuts through the surrounding urban decay and filth on the streets.

Your head is still throbbing, and fatigue weighs heavily on your body after the trek from your Backlog apartment. The desire to lie down and rest for at least a week is overwhelming. 

But you&#39;ve made a promise to Cipher and you intend on keeping it. It&#39;s time to find a doctor and learn just how scrambled your brain is after the hacking incident. 

&lt;&lt;button &quot;Continue&quot;&gt;&gt;
  &lt;&lt;goto &quot;UrgentRequest-Hospital-Intro-Inside&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="62" name="UrgentRequest-Hospital-Intro-Inside" tags="" position="225,850" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/hospital/panacea-clinic-reception.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
You enter the Panacea Clinic and a familiar antiseptic smell immediately hits your nose. There are rows of chairs occupied by patients waiting for their turn. Some are engrossed in their handheld devices, others stare blankly at a digital display showing who&#39;s next for their appointment.

In front of you is a reception counter where two nurses are engaged in a discussion; one is standing at the forefront of the counter, while her colleague is sitting behind. 

You muster the last reserves of strength you have left and approach the standing nurse.

&lt;&lt;button &quot;See the Nurse&quot;&gt;&gt;
    &lt;&lt;goto &quot;UrgentRequest-Hospital-Intro-Inside-Nurse&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="63" name="UrgentRequest-Hospital-Intro-Inside-Nurse" tags="" position="350,850" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/hospital/panacea-clinic-reception-nurse.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;say &quot;Nurse&quot; &quot;imgs/locations/hospital/panacea-nurse-portrait.webp&quot;&gt;&gt;Can I help you?&lt;&lt;/say&gt;&gt;
&lt;&lt;player&gt;&gt;I... I banged my head, and it&#39;s been hurting really bad ever since.&lt;&lt;/player&gt;&gt;
&lt;&lt;say &quot;Nurse&quot; &quot;imgs/locations/hospital/panacea-nurse-portrait.webp&quot;&gt;&gt;I&#39;m sorry to hear that. However, we do have a queue system here, and I must ask you to wait your turn like everyone else. We&#39;re doing our best to see patients as quickly as possible.
&lt;&lt;/say&gt;&gt;
&lt;span id=&quot;nurse-choice&quot;&gt;&lt;&lt;button &quot;Wait Patiently&quot;&gt;&gt;
    &lt;&lt;replace &quot;#nurse-choice&quot;&gt;&gt;\
    &lt;&lt;include &quot;UrgentRequest-Hospital-Intro-Inside-Nurse-Wait&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Try to Convince the Nurse&quot;&gt;&gt;
    &lt;&lt;replace &quot;#nurse-choice&quot;&gt;&gt;\
    &lt;&lt;include &quot;UrgentRequest-Hospital-Intro-Inside-Nurse-Convince&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="64" name="UrgentRequest-Hospital-Intro-Inside-Nurse-Wait" tags="" position="475,850" size="100,100">&lt;div class=&quot;narrator&quot;&gt;You nod, understanding the situation but feeling a mixture of frustration and desperation.&lt;/div&gt;
&lt;&lt;player&gt;&gt;Okay, I&#39;ll wait.&lt;&lt;/player&gt;&gt;
&lt;&lt;if visited() is 1&gt;&gt;\
    &lt;&lt;increasemorality 5&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;div class=&quot;narrator&quot;&gt;The nurse gives you a sympathetic look before returning to her duties. You take a seat among the other waiting patients, each absorbed in their own worlds of discomfort and concern.&lt;/div&gt;
&lt;&lt;fadein 5s 2000ms&gt;&gt;&lt;div class=&quot;narrator&quot;&gt;As minutes turn into hours, your headache pulses with an unrelenting rhythm.&lt;/div&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 5s 7000ms&gt;&gt;&lt;div class=&quot;narrator&quot;&gt;The digital clock on the wall seems to mock you with its slow progress, and the sterile smell of the hospital becomes suffocating.&lt;/div&gt;&lt;&lt;/fadein&gt;&gt; 
&lt;&lt;fadein 5s 12000ms&gt;&gt;&lt;div class=&quot;narrator&quot;&gt;Finally, after what feels like an eternity, the nurse calls your name.&lt;/div&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 2s 17000ms&gt;&gt;&lt;&lt;say &quot;Nurse&quot; &quot;imgs/locations/hospital/panacea-nurse-portrait.webp&quot;&gt;&gt;Mr. $playerLastName, the doctor wants to see you in examination room number 4.&lt;&lt;/say&gt;&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 2s 17000ms&gt;&gt;&lt;&lt;button &quot;Go to the Examination Room&quot;&gt;&gt;&lt;&lt;goto &quot;UrgentRequest-Hospital-Intro-Examination&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="65" name="UrgentRequest-Hospital-Intro-Inside-Nurse-Convince" tags="" position="600,850" size="100,100">&lt;&lt;player&gt;&gt;I know there&#39;s a queue, but my head... it&#39;s really bad. I&#39;ve never felt anything like it.&lt;&lt;/player&gt;&gt;
&lt;&lt;say &quot;Nurse&quot; &quot;imgs/locations/hospital/panacea-nurse-portrait.webp&quot;&gt;&gt;I understand you&#39;re in pain, but so are all other patients. I&#39;m truly sorry, but there&#39;s nothing I can do.&lt;&lt;/say&gt;&gt;
&lt;span id=&quot;nurse-choice-2&quot;&gt;&lt;&lt;button &quot;Resign to Waiting&quot;&gt;&gt;
    &lt;&lt;replace &quot;#nurse-choice-2&quot;&gt;&gt;\
        &lt;&lt;include &quot;UrgentRequest-Hospital-Intro-Inside-Nurse-Wait&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Insist Further&quot;&gt;&gt;
    &lt;&lt;replace &quot;#nurse-choice-2&quot;&gt;&gt;\
        &lt;&lt;include &quot;UrgentRequest-Hospital-Intro-Inside-Nurse-Insist&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="66" name="UrgentRequest-Hospital-Intro-Inside-Nurse-Insist" tags="" position="725,850" size="100,100">&lt;&lt;set $hospitalIntroPlayerInsisted = true&gt;&gt;\
&lt;div class=&quot;narrator&quot;&gt;Your desperation grows and before you can stop yourself, your voice rises.&lt;/div&gt;
&lt;&lt;player&gt;&gt;THIS IS SERIOUS! Can&#39;t you understand?! I could be dying here!&lt;&lt;/player&gt;&gt;
&lt;&lt;if visited() is 1&gt;&gt;\
    &lt;&lt;decreasemorality 5&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;div class=&quot;narrator&quot;&gt;The nurse takes a step back, her expression hardening. Before she can respond, a middle-aged man intervenes.&lt;/div&gt;
&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/hospital/panacea-clinic-reception-nurse-patient.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;say &quot;Man&quot; &quot;imgs/locations/hospital/angry-patient.webp&quot;&gt;&gt;Hey! We&#39;re all waiting our turn here. Yelling at the nurse isn&#39;t going to heal you any faster. Sit down and wait like the rest of us.&lt;&lt;/say&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;The room falls silent, all eyes on you. The weight of the patient&#39;s words  lands heavily, and a wave of embarrassment hits you.&lt;/div&gt;
&lt;&lt;say &quot;Nurse&quot; &quot;imgs/locations/hospital/panacea-nurse-portrait.webp&quot;&gt;&gt;Please, take a seat. We will get to you as soon as we can.&lt;&lt;/say&gt;&gt;
&lt;span id=&quot;nurse-choice-3&quot;&gt;&lt;&lt;button &quot;Wait&quot;&gt;&gt;
    &lt;&lt;replace &quot;#nurse-choice-3&quot;&gt;&gt;\
      &lt;&lt;include &quot;UrgentRequest-Hospital-Intro-Inside-Nurse-Wait&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="67" name="UrgentRequest-Hospital-Intro-Examination" tags="" position="850,850" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/hospital/panacea-clinic-examination-room-doctor.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;You step into the examination room. A male doctor stands by an examination chair, his eyes scanning a digital clipboard. He looks up as you enter, offering a calm, professional smile that does little to ease the pounding in your head.&lt;/div&gt;
&lt;&lt;say &quot;Doctor&quot; &quot;imgs/locations/hospital/panacea-doctor-portrait.webp&quot;&gt;&gt;Tell me what brings you in.&lt;&lt;/say&gt;&gt;
&lt;&lt;player&gt;&gt;I&#39;ve had a severe headache for the past few days... It started when I... when I hit my head. I&#39;ve been feeling really off since then, dizzy and nauseous.&lt;&lt;/player&gt;&gt;
&lt;&lt;say &quot;Doctor&quot; &quot;imgs/locations/hospital/panacea-doctor-portrait.webp&quot;&gt;&gt;I see. That does sound concerning. Let&#39;s get you seated on the examination chair for a closer look.&lt;&lt;/say&gt;&gt;
&lt;&lt;say &quot;Doctor&quot; &quot;imgs/locations/hospital/panacea-doctor-portrait.webp&quot;&gt;&gt;Given your symptoms of dizziness, nausea, and the acute onset following trauma to the head, we need to conduct a thorough neurological assessment. We&#39;re looking for signs of intracranial pressure, potential concussion, or even a subdural hematoma. This will help us determine if there&#39;s any immediate need for imaging, like a CT scan or MRI, to rule out bleeding or swelling in the brain.&lt;&lt;/say&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;As you gingerly lower yourself onto the chair, the doctor wheels over a small stool, positioning himself in front of you.&lt;/div&gt;
&lt;&lt;say &quot;Doctor&quot; &quot;imgs/locations/hospital/panacea-doctor-portrait.webp&quot;&gt;&gt;I&#39;m going to listen to your heart and lungs now.&lt;&lt;/say&gt;&gt;
&lt;&lt;player&gt;&gt;Okay...&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;He leans over, the stethoscope in his hands.&lt;/div&gt;
&lt;&lt;say &quot;Doctor&quot; &quot;imgs/locations/hospital/panacea-doctor-portrait.webp&quot;&gt;&gt;Please take deep breaths and &lt;span class=&quot;glitchy-pink-dialog&quot; data-text=&quot;don&#39;t move&quot;&gt;don&#39;t move&lt;/span&gt;.&lt;&lt;/say&gt;&gt;
&lt;span id=&quot;doctor-hypno-1&quot;&gt;&lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;replace &quot;#doctor-hypno-1&quot;&gt;&gt;\
      &lt;&lt;include &quot;UrgentRequest-Hospital-Intro-Examination-Hypno1&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="68" name="UrgentRequest-Hospital-Intro-Examination-Hypno1" tags="" position="975,850" size="100,100">&lt;div class=&quot;hypno-image&quot;&gt;&lt;img src=&quot;imgs/hypno/bw-spiral-slow.gif&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;The moment the words &quot;don&#39;t move&quot; leave the doctor&#39;s lips, a sharp pain lances through your head. Your vision blurs, colors and shapes melding into an indecipherable whirl. The doctor, noticing your distress, pauses and places a steadying hand on your shoulder.&lt;/div&gt;
&lt;&lt;say &quot;Doctor&quot; &quot;imgs/locations/hospital/panacea-doctor-portrait.webp&quot;&gt;&gt;Deep breaths, in and out. I&#39;m checking for any irregularities in your breathing pattern that could indicate neurological complications.&lt;&lt;/say&gt;&gt;
&lt;&lt;say &quot;Doctor&quot; &quot;imgs/locations/hospital/panacea-doctor-portrait.webp&quot;&gt;&gt;It really helps if you &lt;span class=&quot;glitchy-pink-dialog&quot; data-text=&quot;don&#39;t move&quot;&gt;don&#39;t move&lt;/span&gt;, so please do your best.&lt;&lt;/say&gt;&gt;
&lt;span id=&quot;doctor-hypno-2&quot;&gt;&lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;replace &quot;#doctor-hypno-2&quot;&gt;&gt;\
      &lt;&lt;include &quot;UrgentRequest-Hospital-Intro-Examination-Hypno2&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="69" name="UrgentRequest-Hospital-Intro-Examination-Hypno2" tags="" position="1100,850" size="100,100">&lt;div class=&quot;hypno-image&quot;&gt;&lt;img src=&quot;imgs/hypno/bw-spiral-fast.gif&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;The whirl accelerates, each spiral twist pulling your consciousness further into an abyss. Panic claws its way up your throat, your body&#39;s instinct to flee kicking into overdrive. Your hands flail, seeking something solid to grasp, while your feet push against the examination chair as if trying to escape an invisible force.&lt;/div&gt;
&lt;&lt;say &quot;Doctor&quot; &quot;imgs/locations/hospital/panacea-doctor-portrait.webp&quot;&gt;&gt;Please, try to stay calm. I need you to focus on my voice.&lt;&lt;/say&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Despite his attempts to soothe, your body doesn&#39;t obey; the primal urge to escape, to run from this unknown threat, overwhelms any rational thought. The room, the doctor, the very ground beneath you — everything dissolves into a blur of motion and fear.&lt;/div&gt;
&lt;&lt;say &quot;Doctor&quot; &quot;imgs/locations/hospital/panacea-doctor-portrait.webp&quot;&gt;&gt;I&#39;m going to have to hold you down.&lt;&lt;/say&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;His words barely register as hands press firmly against your shoulders, anchoring you to the chair.&lt;/div&gt;
&lt;&lt;say &quot;Doctor&quot; &quot;imgs/locations/hospital/panacea-doctor-portrait.webp&quot;&gt;&gt;&lt;span class=&quot;glitchy-pink-dialog&quot; data-text=&quot;Don&#39;t move&quot;&gt;Don&#39;t move&lt;/span&gt;! You&#39;re having a panic attack!&lt;&lt;/say&gt;&gt;
&lt;span id=&quot;doctor-hypno-3&quot;&gt;&lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;replace &quot;#doctor-hypno-3&quot;&gt;&gt;\
      &lt;&lt;include &quot;UrgentRequest-Hospital-Intro-Examination-Hypno3&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="70" name="UrgentRequest-Hospital-Intro-Examination-Hypno3" tags="" position="1225,850" size="100,100">&lt;div class=&quot;hypno-image&quot;&gt;&lt;img src=&quot;imgs/hypno/bw-spiral-obey.gif&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;At the utterance of &quot;don&#39;t move&quot; for the third time, something within you snaps — or perhaps, it&#39;s more accurate to say it locks into place. Your muscles freeze, the panic recedes like a tide pulling away from the shore, leaving behind a calm so deep it borders on emptiness. Your mind, a moment ago a whirlwind of thoughts and fears, falls silent, slipping into a trance that feels as vast as the ocean depths.&lt;/div&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
      &lt;&lt;goto &quot;UrgentRequest-Hospital-Intro-Examination-Doll&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="71" name="UrgentRequest-Hospital-Intro-Examination-Doll" tags="" position="100,975" size="100,100">&lt;&lt;fadein 5000ms 0ms&gt;&gt;&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
    &lt;source src=&quot;imgs/locations/hospital/hospital-doll-lying-table-above.mp4&quot; type=&quot;video/mp4&quot;&gt;
    Your browser does not support the video tag.
&lt;/video&gt;&lt;&lt;/fadein&gt;&gt;

&lt;div class=&quot;narrator&quot;&gt;Out of the blackness and emptiness that have surrounded you emerges a blinding vision.  You see a woman strapped tightly to the same examination chair you sat on just a moment ago. She&#39;s wearing a skin-tight white latex suit that covers her entire body. She&#39;s motionless, lying there, seemingly waiting.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;As you watch her body from above, a strange, unsettling connection begins to form. You imagine the feel of the latex against skin, almost as if you were wearing it yourself. The contours and confines of the material press against you, delineating every curve and edge of your body with an intimacy that is both invasive and comforting.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;Then, a realization chills you to the core: there is no one else. The person you&#39;re watching is you.&lt;/div&gt;
&lt;div class=&quot;inner-thought&quot;&gt;What&#39;s going on?&lt;/div&gt;
&lt;span class=&quot;fade-in-out&quot;&gt;&lt;&lt;say &quot;Doctor&quot; &quot;imgs/locations/hospital/panacea-doctor-portrait.webp&quot;&gt;&gt;Great! Now that you&#39;ve calmed down, we can continue the examination.&lt;&lt;/say&gt;&gt;&lt;/span&gt;
&lt;div class=&quot;narrator&quot;&gt;The doctor&#39;s voice seems to be coming from a great distance.&lt;/div&gt;
&lt;span id=&quot;examination1&quot;&gt;&lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;replace &quot;#examination1&quot;&gt;&gt;\
      &lt;&lt;include &quot;UrgentRequest-Hospital-Intro-Examination-Doll2&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="72" name="UrgentRequest-Hospital-Intro-Examination-Doll2" tags="" position="225,975" size="100,100">&lt;&lt;fadein 5000ms 0ms&gt;&gt;&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
    &lt;source src=&quot;imgs/locations/hospital/hospital-doll-lying-table-exam.mp4&quot; type=&quot;video/mp4&quot;&gt;
    Your browser does not support the video tag.
&lt;/video&gt;&lt;&lt;/fadein&gt;&gt;

&lt;div class=&quot;narrator&quot;&gt;Suddenly, you can see the doctor. His stethoscope snakes across the doll&#39;s latex skin, and with a startling jolt, you feel it. Your breath hitches, mirroring the phantom rise and fall of the doll&#39;s form. It&#39;s as if your very being is leaking out, poured into this lifeless, waiting shell.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;As the doctor places the stethoscope on your chest, a wave of arousal rushes through you, an intense sensation that suddenly feels both alien and overwhelming.&lt;/div&gt;
&lt;div class=&quot;inner-thought&quot;&gt;HELP!&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;In a moment of panic, you attempt to vocalize your distress. Yet, the effort is in vain. The doll&#39;s mouth barely stirs. Only a faint moan escapes.&lt;/div&gt;
&lt;div class=&quot;ai-thought&quot;&gt;But I&#39;m helping you right now...&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;The sensation of losing grip on reality becomes undeniable.  You feel that you&#39;re going crazy, hallucinating voices that don&#39;t exist.&lt;/div&gt;
&lt;div class=&quot;ai-thought&quot;&gt;You&#39;re not going crazy — quite the opposite.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;There&#39;s no time to even process what you assume to be another hallucination because you can hear the doctor again.&lt;/div&gt;
&lt;span id=&quot;examination2&quot;&gt;&lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;replace &quot;#examination2&quot;&gt;&gt;\
      &lt;&lt;include &quot;UrgentRequest-Hospital-Intro-Examination-Doll3&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="73" name="UrgentRequest-Hospital-Intro-Examination-Doll3" tags="" position="350,975" size="100,100">&lt;span class=&quot;fade-in-out&quot;&gt;&lt;&lt;say &quot;Doctor&quot; &quot;imgs/locations/hospital/panacea-doctor-portrait.webp&quot;&gt;&gt;Please open your mouth.&lt;&lt;/say&gt;&gt;&lt;/span&gt;
&lt;div class=&quot;narrator&quot;&gt;As the doctor&#39;s words reach you, your body obeys before you can even process the command. You feel your mouth open, and you see the doll&#39;s mouth mirror the motion in synchronicity.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;The doctor takes a medical instrument in his hand and moves it toward your mouth. But before it can reach inside, the instrument dissolves and the doctor&#39;s fingers enter your mouth instead. As they move past your lips and land on your tongue, you begin to involuntarily suck on them.&lt;/div&gt;
&lt;&lt;fadein 5000ms 0ms&gt;&gt;&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
    &lt;source src=&quot;imgs/locations/hospital/hospital-doll-lying-table-mouth.mp4&quot; type=&quot;video/mp4&quot;&gt;
    Your browser does not support the video tag.
&lt;/video&gt;&lt;&lt;/fadein&gt;&gt;

&lt;div class=&quot;narrator&quot;&gt;Your mind is a chaotic whirlwind of confusion, fear, and desire, and you can no longer tell where the boundaries between you end and the doll begin.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;With each thrust, you find yourself growing more lost in the sensation. You&#39;re sucking harder now, feeling the warmth and shape of his finder against your tongue. Your mouth waters around them, wanting more.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;You feel yourself starting to lose control, slipping further into the void between reality and the doll&#39;s artificial skin. Your vision becomes hazy as you focus solely on the taste and feel of his fingers in your mouth.&lt;/div&gt;
&lt;span id=&quot;examination3&quot;&gt;&lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;replace &quot;#examination3&quot;&gt;&gt;\
      &lt;&lt;include &quot;UrgentRequest-Hospital-Intro-Examination-Doll4&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="74" name="UrgentRequest-Hospital-Intro-Examination-Doll4" tags="" position="475,975" size="100,100">&lt;&lt;fadein 5000ms 0ms&gt;&gt;&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
    &lt;source src=&quot;imgs/locations/hospital/hospital-doll-sucking.mp4&quot; type=&quot;video/mp4&quot;&gt;
    Your browser does not support the video tag.
&lt;/video&gt;&lt;&lt;/fadein&gt;&gt;

&lt;div class=&quot;narrator&quot;&gt;Suddenly, there is a change. The doctor pulls his fingers from your mouth, and in their place, you feel the heavy weight of his erect cock pressing against your lips. Without conscious thought, you open your mouth wider and begin to suck eagerly on him, taking his length deep into your throat.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;The sensation of having his cock in your mouth is unlike anything you&#39;ve ever experienced. As you suck on him, you can feel every vein and ridge of his cock against the roof of your mouth, and the taste of him fills your senses.&lt;/div&gt; 
&lt;div class=&quot;ai-thought&quot;&gt;You&#39;re doing so well.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;You hear the voice again. This time it&#39;s closer, almost as if it&#39;s right beside you. It&#39;s whispering and seductive. The voice seems to caress your thoughts, urging you to follow where it leads.&lt;/div&gt;
&lt;div class=&quot;ai-thought&quot;&gt;Don&#39;t resist it... let go and enjoy it.&lt;/div&gt;
&lt;span id=&quot;examination4&quot;&gt;&lt;&lt;button &quot;Resist&quot;&gt;&gt;
    &lt;&lt;replace &quot;#examination4&quot;&gt;&gt;\
      &lt;&lt;include &quot;UrgentRequest-Hospital-Intro-Examination-Resist&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Let Go&quot;&gt;&gt;
    &lt;&lt;replace &quot;#examination4&quot;&gt;&gt;\
      &lt;&lt;include &quot;UrgentRequest-Hospital-Intro-Examination-LetGo&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="75" name="UrgentRequest-Hospital-Intro-Examination-Resist" tags="" position="600,975" size="100,100">&lt;&lt;set $hospitalExaminationResisted = true&gt;&gt;\
&lt;&lt;if visited() is 1&gt;&gt;\
    &lt;&lt;genderMasculine 5&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;div class=&quot;narrator&quot;&gt;You try to focus on something else, anything else.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;Fighting against the visions and urges with everything you have left, your body feels like it&#39;s being pulled apart as you struggle to keep your mind clear.&lt;/div&gt;
&lt;div class=&quot;ai-thought&quot;&gt;You&#39;re so resistant...&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;Despite your best effort, you become overwhelmed by the act of resisting and lose consciousness.&lt;/div&gt;
&lt;span id=&quot;examination5&quot;&gt;&lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;replace &quot;#examination5&quot;&gt;&gt;\
      &lt;&lt;goto &quot;UrgentRequest-Hospital-Intro-Examination-End&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="76" name="UrgentRequest-Hospital-Intro-Examination-LetGo" tags="" position="725,975" size="100,100">&lt;&lt;set $hospitalExaminationResisted = false&gt;&gt;\
&lt;&lt;if visited() is 1&gt;&gt;\
    &lt;&lt;genderFeminine 5&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;div class=&quot;narrator&quot;&gt;You close your eyes and focus on the sensation, letting go of everything else.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;The doctor moans loudly above you, and with a final thrust, he erupts inside your mouth. The warmth of his cum fills your throat, coating your tongue and painting your lips. It tastes salty and sweet, and it sends shockwaves of pleasure through every nerve in your body.&lt;/div&gt;
&lt;&lt;fadein 5000ms 0ms&gt;&gt;&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
    &lt;source src=&quot;imgs/locations/hospital/hospital-doll-licking.mp4&quot; type=&quot;video/mp4&quot;&gt;
    Your browser does not support the video tag.
&lt;/video&gt;&lt;&lt;/fadein&gt;&gt;

&lt;div class=&quot;narrator&quot;&gt;You can&#39;t help but want more. With a groan, you lean forward and begin to lick his shaft clean, eagerly lapping up every last drop of his cum from the head of his cock all the way down to the base. His skin is smooth and hot against your tongue, and with each taste he leaves behind, you feel yourself growing more intoxicated.&lt;/div&gt;
&lt;div class=&quot;ai-thought&quot;&gt;Good girl...&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;Under the onslaught of sensations, your body starts to feel light and weightless. You&#39;re beginning to drift away, and it doesn&#39;t take long before you lose consciousness. &lt;/div&gt;
&lt;span id=&quot;examination5&quot;&gt;&lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;replace &quot;#examination5&quot;&gt;&gt;\
      &lt;&lt;goto &quot;UrgentRequest-Hospital-Intro-Examination-End&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="77" name="UrgentRequest-Hospital-Intro-Examination-End" tags="" position="850,975" size="100,100">&lt;&lt;fadein 5000ms 0ms&gt;&gt;&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/hospital/panacea-clinic-examination-room-doctor.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 5000ms 0ms&gt;&gt;&lt;div class=&quot;narrator&quot;&gt;You slowly come back to consciousness, blinking against the harsh light of the examination room. The latex doll is nowhere to be found. You&#39;re firmly back in your body, the familiar ache in your head a grounding reminder of reality. After a short while, you begin to register the doctor&#39;s voice.&lt;/div&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 5000ms 3000ms&gt;&gt;&lt;&lt;say &quot;Doctor&quot; &quot;imgs/locations/hospital/panacea-doctor-portrait.webp&quot;&gt;&gt;...based on your symptoms and the results of our initial assessments, it appears you&#39;re experiencing significant post-traumatic symptoms consistent with a head injury, though the standard diagnostic tests haven&#39;t confirmed a concussion. I&#39;m a bit concerned about your panic attack, and I&#39;ve also noticed moments where your attention seemed to drift significantly, almost as if you were not present. Such symptoms are rarely caused by a migraine alone.&lt;&lt;/say&gt;&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 5000ms 4000ms&gt;&gt;&lt;&lt;say &quot;Doctor&quot; &quot;imgs/locations/hospital/panacea-doctor-portrait.webp&quot;&gt;&gt;I&#39;d recommend conducting a few more tests, just to be on the safe side. We want to ensure there&#39;s nothing more serious underlying these symptoms. For now, though, I&#39;m going to prescribe some medication to help with the pain and your attention issues. But please, keep an eye on how you&#39;re feeling and come back immediately if anything worsens.&lt;&lt;/say&gt;&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 5000ms 5000ms&gt;&gt;&lt;div class=&quot;narrator&quot;&gt;He administers the medicine, offering a reassuring smile as he does so.&lt;/div&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 5000ms 6000ms&gt;&gt;&lt;&lt;say &quot;Doctor&quot; &quot;imgs/locations/hospital/panacea-doctor-portrait.webp&quot;&gt;&gt;You&#39;re free to go home now. Just take it easy for the next few days.&lt;&lt;/say&gt;&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 5000ms 7000ms&gt;&gt;&lt;div class=&quot;narrator&quot;&gt;You nod, still struggling to wrap your mind around the events. The doctor&#39;s words float through your consciousness, but it&#39;s hard to focus. The entire experience feels like a disjointed dream, fragments of reality mixed with vivid hallucinations.&lt;/div&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 5000ms 8000ms&gt;&gt;&lt;&lt;button &quot;Thank the Doctor and Leave&quot;&gt;&gt;
    &lt;&lt;goto &quot;UrgentRequest-Hospital-Intro-Toilets-Outside&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="78" name="UrgentRequest-Hospital-Intro-Toilets-Outside" tags="" position="975,975" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/hospital/panacea-clinic-toilets-outside.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;Confusion clouds your mind as you step out of the examination room, the echoes of the doctor&#39;s voice still bouncing around in your head. The surreal experiences, the voice that seemed to whisper encouragements and commands, it all felt too vivid to be mere hallucinations. Was your mind playing tricks on you, or was there something more to it?&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;As you navigate the hospital, trying to piece together the fragmented memories, a wave of nausea washes over you. Your stomach churns, a physical manifestation of the turmoil swirling inside your head.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;With little warning, the need to find a restroom becomes urgent. You quicken your pace, eyes scanning for the nearest sign. Finally, you spot the familiar symbol and rush towards the restroom, barely aware of the other hospital visitors you&#39;re hastily maneuvering past.&lt;/div&gt;
&lt;&lt;button &quot;Go Inside the Restroom&quot;&gt;&gt;
    &lt;&lt;goto &quot;UrgentRequest-Hospital-Intro-Toilets-Inside&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="79" name="UrgentRequest-Hospital-Intro-Toilets-Inside" tags="" position="1100,975" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/hospital/panacea-clinic-toilets-inside.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;You barely manage to stumble into the restroom, desperation clawing at your insides. As you burst into the nearest stall, your heart sinks — it&#39;s occupied.&lt;/div&gt;
&lt;&lt;if $hospitalIntroPlayerInsisted === true&gt;&gt;\
    &lt;div class=&quot;narrator&quot;&gt;The man inside turns around, his face contorting into a scowl when he sees you.&lt;/div&gt;
    &lt;&lt;say &quot;Man&quot; &quot;imgs/locations/hospital/angry-patient.webp&quot;&gt;&gt;YOU AGAIN!&lt;&lt;/say&gt;&gt;
    &lt;div class=&quot;narrator&quot;&gt;It&#39;s the same man from the waiting room, the one who had scolded you for your insistence on being examined before everyone else.&lt;/div&gt;
    &lt;&lt;say &quot;Man&quot; &quot;imgs/locations/hospital/angry-patient.webp&quot;&gt;&gt;CAN&#39;T YOU EVER WAIT YOUR TURN LIKE EVERYONE ELSE?! DON&#39;T YOU HAVE ANY PATIENCE?! YOU THINK THE WORLD REVOLVES AROUND YOU, DON&#39;T YOU?!&lt;&lt;/say&gt;&gt;
    &lt;div class=&quot;narrator&quot;&gt;As you stand there, getting yelled at, you notice something rather unsettling about the man: his trousers are still unzipped, revealing his flaccid penis.&lt;/div&gt;
    &lt;span id=&quot;toilets1&quot;&gt;&lt;&lt;button &quot;Continue&quot;&gt;&gt;
        &lt;&lt;replace &quot;#toilets1&quot;&gt;&gt;\
        &lt;&lt;include &quot;UrgentRequest-Hospital-Intro-Toilets-Inside-Penis&quot;&gt;&gt;
        &lt;&lt;/replace&gt;&gt;
    &lt;&lt;/button&gt;&gt;&lt;/span&gt;
&lt;&lt;else&gt;&gt;\
    &lt;div class=&quot;narrator&quot;&gt;The occupant turns, noticing your distress. His annoyance swiftly changes to concern. Quickly zipping up his trousers, he steps aside.&lt;/div&gt;
    &lt;&lt;say &quot;Man&quot; &quot;imgs/locations/hospital/angry-patient.webp&quot;&gt;&gt;Go ahead, buddy. Looks like you need it more than I do.&lt;&lt;/say&gt;&gt;
    &lt;div class=&quot;narrator&quot;&gt;You nod hastily and rush past him into the stall, barely managing to close the door behind you before succumbing to the overwhelming nausea.&lt;/div&gt;
    &lt;div class=&quot;narrator&quot;&gt;After a few minutes, you begin to feel much better. The intense dizziness subsides, replaced by a lingering weakness. With a deep breath, you stand up and prepare to face the world outside the stall.&lt;/div&gt;    
    &lt;&lt;button &quot;Leave the Hospital&quot;&gt;&gt;
        &lt;&lt;run MindWare.completeTask(&quot;Visit the hospital&quot;)&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-Reflection&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="80" name="UrgentRequest-Hospital-Intro-Toilets-Inside-Penis" tags="" position="1225,975" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/hospital/angry-patient-penis.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;The sight of the man&#39;s exposed penis sends a zap through your brain.&lt;/div&gt;
&lt;div class=&quot;ai-thought&quot;&gt;Drop now.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;An urge to get down on your knees and lick the tip of his penis appears out of nowhere, accompanied by the vivid image of your tongue tracing the sensitive flesh.&lt;/div&gt;
    &lt;span id=&quot;toilets2&quot;&gt;&lt;&lt;button &quot;Continue&quot;&gt;&gt;
        &lt;&lt;replace &quot;#toilets2&quot;&gt;&gt;\
        &lt;&lt;include &quot;UrgentRequest-Hospital-Intro-Toilets-Inside-Penis2&quot;&gt;&gt;
        &lt;&lt;/replace&gt;&gt;
    &lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="81" name="UrgentRequest-Hospital-Intro-Toilets-Inside-Penis2" tags="" position="100,1100" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/hypno/drop-for-cock.gif&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;if visited() is 1&gt;&gt;\
    &lt;&lt;genderFeminine 5&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;div class=&quot;narrator&quot;&gt;For a moment, you can&#39;t help but imagine what it would feel like to have him in your mouth.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;The man&#39;s gaze flickers down to where your eyes are fixed, and for a moment, he looks... surprised? Uncomfortable? It&#39;s hard to tell. But before either of you can say or do anything else, the bathroom door opens and another person enters, breaking the tense silence.&lt;/div&gt;
&lt;&lt;say &quot;Man&quot; &quot;imgs/locations/hospital/angry-patient.webp&quot;&gt;&gt;Pervert...&lt;&lt;/say&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;With that, he leaves the bathroom, and you become keenly aware of the nausea that has brought you here.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;You hastily rush past him into the stall, barely managing to close the door behind you before succumbing to the overwhelming nausea.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;After a few minutes, you begin to feel much better. The intense dizziness subsides, replaced by a lingering weakness. With a deep breath, you stand up and prepare to face the world outside the stall.&lt;/div&gt;   
&lt;&lt;button &quot;Leave the Hospital&quot;&gt;&gt;
    &lt;&lt;run MindWare.completeTask(&quot;Visit the hospital&quot;)&gt;&gt;
    &lt;&lt;goto &quot;UrgentRequest-AfterHospital-Reflection&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="82" name="UrgentRequest-AfterHospital-Reflection" tags="" position="225,1100" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/hospital/panacea-clinic-outside.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;Stepping out of the Panacea Clinic, the city&#39;s pulse greets you with its usual indifference. The medication begins to dull the edges of your pain, but your mind remains a tangled web of confusion and unease. The experience inside the clinic was surreal, a feverish nightmare that felt all too real. Those hallucinations, the voice whispering inside your head — those were definitely not caused by an ordinary migraine.&lt;/div&gt;
&lt;div class=&quot;inner-thought&quot;&gt;Am I going insane?&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;The thought of undergoing more examinations fills you with dread. Besides, Cipher has already shouldered the financial burden of this unplanned medical detour; you can&#39;t justify adding to it.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;It&#39;s clear that a different approach is needed, one that doesn&#39;t involve sterile hospital rooms and expensive medical bills. It&#39;s time to contact cipher and tell him what happened.&lt;/div&gt;
&lt;&lt;button &quot;Contact Cipher&quot;&gt;&gt;
    &lt;&lt;goto &quot;UrgentRequest-AfterHospital-CipherChat&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="83" name="UrgentRequest-AfterHospital-CipherChat" tags="nobr" position="350,1100" size="100,100">&lt;div class=&quot;cyber-desktop-im&quot;&gt;
    &lt;div class=&quot;im-header&quot;&gt;&lt;span class=&quot;im-header-text&quot;&gt;Instant Messenger&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;im-main&quot;&gt;
            &lt;div class=&quot;im-chat-pane&quot;&gt;
            &lt;div id=&quot;chat-display&quot; class=&quot;chat-display-no-bg&quot;&gt;
&lt;&lt;player-chat&gt;&gt;Hey Cipher, it&#39;s me. We need to talk. Something&#39;s not right.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;What have you found out?&lt;&lt;/cipher-chat&gt;&gt;
&lt;span id=&quot;chat-choice&quot;&gt;
    @@.im-response;&lt;&lt;button &quot;Tell him everything.&quot;&gt;&gt;
        &lt;&lt;replace &quot;#chat-choice&quot;&gt;&gt;
&lt;&lt;set $playerToldCipherEverythingAboutHospitalVisions = true&gt;&gt;
&lt;&lt;player-chat&gt;&gt;I went to the hospital, like I promised. But it was... weird. I don&#39;t even know how to explain it properly.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Weird how? Tell me everything.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;I had these bizarre visions during the examination. It felt like I was someone else.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Who?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Well... I saw this woman. She was wearing a full-body latex suit, and I could feel the latex on my own skin.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;What happened then?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;The doctor began the exam, and there was this voice... It was giving me orders and I couldn&#39;t resist.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Orders? Like what?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Please don&#39;t think I&#39;m crazy.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Of course, not!&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;The voice ordered me to blow the doctor.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;You&#39;re not joking?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;I&#39;m serious.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;And have you... obeyed?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;if $hospitalExaminationResisted === true&gt;&gt;
    &lt;&lt;player-chat&gt;&gt;No, I resisted it as much as I could.&lt;&lt;/player-chat&gt;&gt;
    &lt;&lt;cipher-chat&gt;&gt;I see.&lt;&lt;/cipher-chat&gt;&gt;
    &lt;&lt;cipher-chat&gt;&gt;And then what?&lt;&lt;/cipher-chat&gt;&gt;
    &lt;&lt;include &quot;UrgentRequest-AfterHospital-CipherChat-ThenWhat&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;player-chat&gt;&gt;I... I just couldn&#39;t resist. The voice was too powerful.&lt;&lt;/player-chat&gt;&gt;
    &lt;&lt;cipher-chat&gt;&gt;That&#39;s okay, man. It was just a vision.&lt;&lt;/cipher-chat&gt;&gt;
    &lt;&lt;player-chat&gt;&gt;Yea, but it felt so real.&lt;&lt;/player-chat&gt;&gt;
    &lt;&lt;cipher-chat&gt;&gt;And then what?&lt;&lt;/cipher-chat&gt;&gt;
    &lt;&lt;player-chat&gt;&gt;The vision faded away, and I was back in my own body.&lt;&lt;/player-chat&gt;&gt;
    &lt;&lt;include &quot;UrgentRequest-AfterHospital-CipherChat-ThenWhat&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
        &lt;&lt;/replace&gt;&gt;
    &lt;&lt;/button&gt;&gt;@@
    @@.im-response;&lt;&lt;button &quot;Don&#39;t tell him about the visions.&quot;&gt;&gt;
        &lt;&lt;replace &quot;#chat-choice&quot;&gt;&gt;
&lt;&lt;set $playerToldCipherEverythingAboutHospitalVisions = false&gt;&gt;
&lt;&lt;player-chat&gt;&gt;I went to the hospital, like I promised. But it was... weird. I don&#39;t even know how to explain it properly.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Weird how? Tell me everything.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;I... I don&#39;t remember much, but it felt like I was someone else during the examination. Also, there was this voice in my head. It was giving me suggestions.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;What suggestions?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;My memory is too hazy to remember.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;That&#39;s okay, man. I understand.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Did the voice went away, or do you still hear it?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Yea, it eventually went away.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;include &quot;UrgentRequest-AfterHospital-CipherChat-ThenWhat&quot;&gt;&gt;
        &lt;&lt;/replace&gt;&gt;
    &lt;&lt;/button&gt;&gt;@@
&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;span id=&quot;leave-chat&quot;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="84" name="UrgentRequest-AfterHospital-CipherChat-ThenWhat" tags="nobr" position="475,1100" size="100,100">&lt;&lt;player-chat&gt;&gt;The doctor then explained that I was suffering from some kind of strange post-traumatic symptoms.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Was he able to help you?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;He gave me some medication for the pain and recommended rest.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Do you think the medication will be enough?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Not really, I still feel extremely off.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Unfortunately, I think you&#39;re completely right. I&#39;ve done some digging into what happened when the server defense mechanism was triggered.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;What have you found?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;It wasn&#39;t a server defense mechanism.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;And what was it then?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Do you remember the AI you were supposed to wipe?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;The world&#39;s first AGI? Sure.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Do you remember if its code was present on the server?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;I think it was. There was some information about it... I think it was designed for marketing purposes. Not sure if it was really an AGI, but like I said — my memory is patchy.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Based on what I was able to find out, the AI was indeed on the server, and it seems to have defended itself against the wiping. Not in a conventional sense, but... I think it uploaded itself into your mind.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Man, I don&#39;t have energy for your humor.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;I&#39;m completely serious. I think it uploaded itself into your mind.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;...&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;That&#39;s not possible, is it?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Back when I was working at SynTech, there were rumors about research into interfacing AI with the human brain. It was all very hush-hush, but if anyone could make it happen, it&#39;d be them.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;I find that hard to believe.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;I know it sounds far-fetched, but the symptoms you&#39;re describing... they align too closely with the theoretical outcomes of such a procedure. We need to figure out a way to confirm if this is really what happened.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;How can we even do that?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;I have an idea, but regular doctors won&#39;t help — that&#39;s for sure. They would just think you&#39;re crazy. Do you know what &lt;span class=&quot;text-glow&quot;&gt;Synapse Steady VX&lt;/span&gt; is?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;No idea.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;It&#39;s a SynTech-made cybernetic implant designed to treat people with schizophrenia. The implant includes a diagnostic module that confirms a patient&#39;s condition before installation. Once in place, it helps patients become more aware of their thoughts and resist harmful ones. I&#39;ve heard that SynTech used this implant to treat patients who suffered side effects from its research into interfacing AI with the human brain.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;That sounds really shady.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;I&#39;m not getting a cyber implant just because of an SynTech rumor.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;I get it. But hear me out — this isn&#39;t about blind trust. The Synapse Steady VX implant has a powerful diagnostic system. Even if it turns out the AI theory is wrong, getting that diagnosis could help us figure out what&#39;s happening in your head.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Okay, okay. You&#39;ve got a point. How do we get one?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;&lt;span class=&quot;text-glow&quot;&gt;Ripperdocs&lt;/span&gt;. Any good one will have the implant in their inventory. After all, there are plenty of crazies in NeoUrbania with brains fried from spending too much time in virtual reality.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Do you know if there&#39;s a ripperdoc near your apartment?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;I do, actually. A guy named Xavier. He works at GitGud.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;That&#39;s great! You should head there as soon as possible. Who knows what might happen if the AI is really inside your head and you don&#39;t do anything about it.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Stop it with the AI.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;If you knew SynTech as I do, you would believe it too. But let&#39;s just focus on getting you to the ripperdoc.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;I&#39;ll go to GitGud first thing tomorrow.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Sounds like a plan. Take care until then and get in touch once you&#39;ve been diagnosed.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Thank you for everything, Cipher.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;replace &quot;#leave-chat&quot;&gt;&gt;
&lt;p&gt;&lt;&lt;link &quot;Go home and rest&quot;&gt;&gt;&lt;&lt;run MindWare.addTask(&quot;Ask about the Synapse Steady VX implant&quot;, &quot;Task-SynapseSteadyVXDiagnosis&quot;)&gt;&gt;&lt;&lt;goto &quot;UrgentRequest-AfterHospital-Rest&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/p&gt;
&lt;&lt;/replace&gt;&gt;</tw-passagedata><tw-passagedata pid="85" name="Task-SynapseSteadyVXDiagnosis" tags="" position="600,1100" size="100,100">Visit GitGud and ask Xavier about the Synapse Steady VX implant.</tw-passagedata><tw-passagedata pid="86" name="UrgentRequest-AfterHospital-Rest" tags="" position="725,1100" size="100,100">&lt;&lt;fadein 3s 0ms&gt;&gt;&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/starting-apartment.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 3s 2000ms&gt;&gt;&lt;div class=&quot;narrator&quot;&gt;You come home and collapse onto your sofa, your head still painful but slightly better than before. The medication seems to be working, but the events of the day continue to weigh heavily on your mind. The doctor&#39;s words, the hallucinations, and Cipher&#39;s suggestion that it might be AI in your head all swirl together in a confusing mess.&lt;/div&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 3s 5000ms&gt;&gt;&lt;div class=&quot;narrator&quot;&gt;You try to make sense of it all, but it&#39;s difficult. The idea of an AI inside your head seems absurd, but then again, so does everything else that&#39;s happened to you lately. Maybe Cipher is right. Maybe the Synapse Steady VX implant can help diagnose what&#39;s going on.&lt;/div&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 3s 8000ms&gt;&gt;&lt;div class=&quot;narrator&quot;&gt;For now, though, you need rest. You close your eyes and &lt;&lt;link &quot;let the exhaustion take over&quot;&gt;&gt;&lt;&lt;goto &quot;UrgentRequest-AfterHospital-Sleep&quot;&gt;&gt;&lt;&lt;run MindWare.advanceDay()&gt;&gt;&lt;&lt;/link&gt;&gt;.&lt;/div&gt;&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="87" name="UrgentRequest-AfterHospital-Sleep" tags="" position="850,1100" size="100,100">/* &lt;&lt;set $eroSphereDishesFailed = false&gt;&gt;\
&lt;&lt;set $eroSphereDishesAttempted = false&gt;&gt;\ */
&lt;&lt;fadein 3s 1s&gt;&gt;\
You close your eyes, leaving behind the hustle and bustle of the world.
&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 3s 4s&gt;&gt;
Soon, you&#39;re greeted by a dream. You see a seductive female, urging you to stop resisting, though you&#39;re not quite sure what.
&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 3s 5s&gt;&gt;&lt;&lt;fadeout 5s 15s&gt;&gt;&lt;br&gt;&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
            &lt;source src=&quot;imgs/hypno/too-weak-to-resist.mp4&quot; type=&quot;video/mp4&quot;&gt;
            Your browser does not support the video tag.
&lt;/video&gt;&lt;br&gt;&lt;&lt;/fadeout&gt;&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 3s 20s&gt;&gt;
As you slowly wake up, the dream fades away, leaving you with a sense of confusion and unease. 
&lt;&lt;/fadein&gt;&gt;
&lt;&lt;if $dayOfWeek is &quot;Saturday&quot;&gt;&gt;\
    &lt;&lt;fadein 3s 23s&gt;&gt;
    Knowing that GitGud isn&#39;t open on weekends, you spend your time at home until Monday, taking it slow. Then, you&#39;re going to see Xavier to find out what&#39;s really wrong with your head.
    &lt;&lt;/fadein&gt;&gt;
&lt;&lt;elseif $dayOfWeek is &quot;Sunday&quot;&gt;&gt;\
    &lt;&lt;fadein 3s 23s&gt;&gt;
    Knowing that GitGud isn&#39;t open on weekends, you spend your time at home until Monday, taking it slow. Then, you&#39;re going to see Xavier to find out what&#39;s really wrong with your head.
    &lt;&lt;/fadein&gt;&gt;
&lt;&lt;else&gt;&gt;\
    &lt;&lt;fadein 3s 23s&gt;&gt;
    There&#39;s no time to ponder the dream&#39;s meaning. It&#39;s time to face the unknown and find out what&#39;s really going on inside your head. It&#39;s time to see Xavier.
    &lt;&lt;/fadein&gt;&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;fadein 3s 26s&gt;&gt;&lt;&lt;link &quot;Continue&quot;&gt;&gt;
    &lt;&lt;if $dayOfWeek is &quot;Saturday&quot;&gt;&gt;
        &lt;&lt;run MindWare.advanceDay()&gt;&gt;
        &lt;&lt;run MindWare.advanceDay()&gt;&gt;
    &lt;&lt;elseif $dayOfWeek is &quot;Sunday&quot;&gt;&gt;
        &lt;&lt;run MindWare.advanceDay()&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Outside&quot;&gt;&gt;
&lt;&lt;/link&gt;&gt;&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="88" name="UrgentRequest-AfterHospital-GitGud-Outside" tags="" position="975,1100" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/gitgud-outside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
You stand in front of GitGud, its neon signs flickering in the dim light of dawn and contrasting with the turmoil inside your head. The medication has dulled the pain to a manageable level, but the confusion from yesterday&#39;s events still linger.

Your mission is clear: ask Xavier about the Synapse Steady VX implant. This piece of cutting-edge technology, is supposedly capable of diagnosing and treating a range of neurological conditions. If you can get your hands on it, then it could disproof or confirm Cipher&#39;s wild theory about AI infecting your brain. 

&lt;&lt;button &quot;Enter GitGud&quot;&gt;&gt;
    &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Inside&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="89" name="UrgentRequest-AfterHospital-GitGud-Inside" tags="" position="1100,1100" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/gitgud-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
As you enter GitGud, you look around and spot the employee who helped you deliver the S.I.M.S. to Xavier. She&#39;s busy sorting through some parts at the counter, but she looks up as you approach.

&lt;span id=&quot;yuki-question1&quot;&gt;\
&lt;&lt;button &quot;Say \&quot;Hi\&quot; to the Employee&quot;&gt;&gt;
    &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Yuki-Talk&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Go Straight to Xavier&quot;&gt;&gt;
    &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;/span&gt;\</tw-passagedata><tw-passagedata pid="90" name="UrgentRequest-AfterHospital-GitGud-Yuki-Talk" tags="" position="1225,1100" size="100,100">&lt;&lt;set $talkedWithYukiAboutBrother = true&gt;&gt;\
&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/yuki/yuki-gitgud-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;player&gt;&gt;Hi, how&#39;ve you been?&lt;&lt;/player&gt;&gt;
&lt;&lt;gitgud-employee-yuki&gt;&gt;Oh, everything&#39;s as usual here. How about you? Haven&#39;t seen you in a bit.&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;player&gt;&gt;I haven&#39;t been feeling too great, to be honest. I&#39;m here to see Xavier about getting an implant that might help with... some issues I&#39;ve been having.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;At the mention of an implant, Yuki&#39;s demeanor shifts slightly.&lt;/div&gt;
&lt;&lt;gitgud-employee-yuki&gt;&gt;Are you sure about that?&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;gitgud-employee-yuki&gt;&gt;I don&#39;t want to scare you or anything, but cyberware can be risky.&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;player&gt;&gt;Why do you think it&#39;s risky?&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Yuki hesitates for a moment.&lt;/div&gt;
&lt;&lt;gitgud-employee-yuki&gt;&gt;Well, my brother... he died when he paid to have a cybernetic eye installed at a butchshop.&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;player&gt;&gt;I&#39;m sorry to hear that...&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;Poor girl.&lt;/div&gt;
&lt;&lt;gitgud-employee-yuki&gt;&gt;That&#39;s okay. It happened a long time ago.&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;player&gt;&gt;But since you work for Xavier, I assume he&#39;s good at what he does, right?&lt;&lt;/player&gt;&gt;
&lt;&lt;gitgud-employee-yuki&gt;&gt;Oh, absolutely. Xavier is one of the best ripperdocs around, no doubt about that. But even with the best, there&#39;s always a chance of something going wrong.&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;player&gt;&gt;I understand the risks, but I&#39;m dealing with something... unusual. I believe this could help.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;She sighs, giving you a resigned smile.&lt;/div&gt;
&lt;&lt;gitgud-employee-yuki&gt;&gt;Just... be careful, okay?&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;gitgud-employee-yuki&gt;&gt;By the way, what&#39;s your name?&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;player&gt;&gt;I&#39;m $playerName. How about you?&lt;&lt;/player&gt;&gt;
&lt;&lt;gitgud-employee-yuki&gt;&gt;Nice to meet you, $playerName. I&#39;m Yuki.&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;if visited() is 1&gt;&gt;\
    &lt;&lt;relationshipIncreasedWith &quot;Yuki&quot; 5&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;yuki&gt;&gt;If you ever need anything, just let me know.&lt;&lt;/yuki&gt;&gt;
&lt;&lt;player&gt;&gt;Thanks, Yuki. I appreciate it.&lt;&lt;/player&gt;&gt;
&lt;&lt;button &quot;Go to Xavier&quot;&gt;&gt;
    &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="91" name="UrgentRequest-AfterHospital-GitGud-Xavier" tags="" position="100,1225" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/xavier/gitgud-xavier.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Look who&#39;s back! I said that we would see each other again, didn&#39;t I?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;Let me guess: you&#39;re here because you want to try another S.I.M.S.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;No... that&#39;s not it.&lt;&lt;/player&gt;&gt;
&lt;&lt;player&gt;&gt;I&#39;ve been having some issues lately, and I was hoping you could help me out with an implant called Synapse Steady VX.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Synapse Steady VX, huh? That&#39;s some high-end cyberware right there. Why do you need it?&lt;&lt;/xavier&gt;&gt;
&lt;span id=&quot;xavier-question1&quot;&gt;\
&lt;&lt;button &quot;Tell the Truth&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#xavier-question1&quot;&gt;&gt;\
    &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Truth&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Make Something Up&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#xavier-question1&quot;&gt;&gt;\
    &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Lie&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;/span&gt;\</tw-passagedata><tw-passagedata pid="92" name="UrgentRequest-AfterHospital-GitGud-Xavier-Truth" tags="" position="225,1225" size="100,100">&lt;&lt;set $playerToldXavierTruthAboutAI = true&gt;&gt;\
&lt;div class=&quot;narration&quot;&gt;You explain the bizarre events of the past few days, the unexplained blackouts, and Cipher&#39;s theory about the AI potentially having uploaded itself into your brain. You mention the Synapse Steady VX implant and its diagnostic capabilities.&lt;/div&gt;
&lt;&lt;if visited() is 1&gt;&gt;\
    &lt;&lt;relationshipIncreasedWith &quot;Xavier&quot; 5&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;xavier&gt;&gt;That&#39;s... quite the story. But, if there&#39;s any truth to it, the Synapse Steady VX could indeed help.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;However, it&#39;s not without its risks. Are you sure you want to proceed?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;button &quot;I&#39;m Sure&quot;&gt;&gt;
    &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Proceed&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="93" name="UrgentRequest-AfterHospital-GitGud-Xavier-Lie" tags="" position="350,1225" size="100,100">&lt;&lt;set $playerToldXavierTruthAboutAI = false&gt;&gt;\
&lt;div class=&quot;narration&quot;&gt;You decide not to share the full truth and make up a story about experiencing depressive episodes and needing the Synapse Steady VX cyberware to diagnose and possibly treat the issue.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier studies you for a moment, his eyes narrowing slightly.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;I can tell you&#39;re not being entirely truthful with me. If you don&#39;t want to share the full details, that&#39;s fine, but I&#39;d prefer if you just say so directly next time instead of making something up.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;He saw right through my lie...&lt;/div&gt;
&lt;&lt;player&gt;&gt;You&#39;re right, Xavier. I apologize for that. I just...&lt;&lt;/player&gt;&gt; 
&lt;div class=&quot;narration&quot;&gt;You explain the bizarre events of the past few days, the unexplained blackouts, and Cipher&#39;s theory about the AI potentially having uploaded itself into your brain. You mention the Synapse Steady VX implant and its diagnostic capabilities.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;That&#39;s... quite the story. But, if there&#39;s any truth to it, the Synapse Steady VX could indeed help.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;However, it&#39;s not without its risks. Are you sure you want to proceed?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;button &quot;I&#39;m Sure&quot;&gt;&gt;
    &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Proceed&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="94" name="UrgentRequest-AfterHospital-GitGud-Xavier-Proceed" tags="" position="475,1225" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/xavier/gitgud-xavier.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Alright. I do have Synapse Steady VX unit in stock, but it&#39;s not cheap. It&#39;ll cost you $15,000. You got the cash?&lt;&lt;/xavier&gt;&gt; 
&lt;&lt;player&gt;&gt;I just need to use its diagnostic capabilities to figure out what&#39;s wrong. Can&#39;t I pay just for that?&lt;&lt;/player&gt;&gt; 
&lt;&lt;xavier&gt;&gt;Doesn&#39;t work like that. The VX isn&#39;t a glucose meter that you can just use and put back. It&#39;s a precisely calibrated piece of cyberware whose value degrades with each use. I can&#39;t just recalibrate it like SynTech does.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;But I&#39;m a reasonable man, so I have a proposition for you.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;What proposition?&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;You work at BrainFry as a coder, right?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Yes, I do.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;I will do you a favor and let you use and even install the implant for free. In return, I will want you to repay the favor in the future.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Can you be more specific?&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;You know Drake, your boss at BrainFry, right? I suspect he&#39;s been undercutting me - paying me a lower commission for S.I.M.S. orders. I need some information about how he&#39;s doing business.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;if $playerMoney &gt;= 15000&gt;&gt; &lt;span id=&quot;xavier-deal&quot;&gt;\
&lt;&lt;button &quot;Pay the $15,000&quot;&gt;&gt;
&lt;&lt;set $playerMoney -= 15000&gt;&gt;
&lt;&lt;replace &quot;#xavier-deal&quot;&gt;&gt;\
&lt;&lt;player&gt;&gt;I appreciate the offer, Xavier, but I&#39;d rather just pay for the implant upfront. Here&#39;s the $15,000.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Fair enough. Money talks, as they say. Let&#39;s get started then.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
&lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Accept Xavier&#39;s Deal&quot;&gt;&gt;
&lt;&lt;set $playerAcceptedXavierCyberwareDeal = true&gt;&gt;
&lt;&lt;replace &quot;#xavier-deal&quot;&gt;&gt;\
&lt;&lt;player&gt;&gt;Alright, Xavier. You&#39;ve got a deal.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Excellent. I will contact you when the time comes. In a meantime, let&#39;s get started with that diagnosis.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
&lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt; &lt;/span&gt;
&lt;&lt;else&gt;&gt;&lt;div class=&quot;inner-thought&quot;&gt;I only have &amp;#36;$playerMoney. I have no choice but to accept Xavier&#39;s deal.&lt;/div&gt; 
&lt;span id=&quot;accept-deal&quot;&gt;&lt;&lt;button &quot;Accept Xavier&#39;s Deal&quot;&gt;&gt; 
&lt;&lt;set $playerAcceptedXavierCyberwareDeal = true&gt;&gt;\
&lt;&lt;replace &quot;#accept-deal&quot;&gt;&gt;\
&lt;&lt;player&gt;&gt;Alright, Xavier. You&#39;ve got a deal.&lt;&lt;/player&gt;&gt; 
&lt;&lt;xavier&gt;&gt;Excellent. I will contact you when the time comes. In a meantime, let&#39;s get started with that diagnosis.&lt;&lt;/xavier&gt;&gt; 
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
&lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt; 
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="95" name="UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis" tags="" position="600,1225" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/locations/gitgud-xavierroom.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Take a seat in the chair and make yourself comfortable.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Alright.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You settle into the chair, trying to ignore the looming presence of the robot. Xavier approaches with a helmet that resembles an EEG headset.&lt;/div&gt; 
&lt;&lt;xavier&gt;&gt;This helmet is connected to the VX cyberware, which is hooked up to a computer. It will output the diagnostic data we need.&lt;&lt;/xavier&gt;&gt; 
&lt;div class=&quot;narrator&quot;&gt;He carefully places the helmet on your head, adjusting it until it fits snugly. The cool metal electrodes press against your skin, and you can feel a faint humming vibration.&lt;/div&gt; 
&lt;&lt;xavier&gt;&gt;Alright, $playerName. I need you to close your eyes and steady your breathing. The VX will do the rest as long as you &lt;span class=&quot;glitchy-pink-dialog&quot; data-text=&quot;keep breathing&quot;&gt;keep breathing&lt;/span&gt;.&lt;&lt;/xavier&gt;&gt; 
&lt;span id=&quot;close-eyes&quot;&gt;&lt;&lt;button &quot;Close Your Eyes&quot;&gt;&gt;\
&lt;&lt;replace &quot;#close-eyes&quot;&gt;&gt;\
&lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance&quot;&gt;&gt; 
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="96" name="UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance" tags="" position="725,1225" size="100,100">&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
  &lt;source src=&quot;imgs/hypno/pink-hypno-spiral-slower.mp4&quot; type=&quot;video/mp4&quot;&gt;
Your browser does not support the video tag.
&lt;/video&gt;

&lt;div class=&quot;narrator&quot;&gt;As you close your eyes and focus on your breath, a familiar sensation hits you. It&#39;s the same feeling you had in the hospital - a pull towards an unknown void, a slipping away from reality.&lt;/div&gt; 
&lt;div class=&quot;inner-thought&quot;&gt;Oh no, it&#39;s happening again.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;This is interesting...&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;These readings are highly anomalous. There&#39;s definitely something unusual going on in your brain. &lt;span class=&quot;glitchy-pink-dialog&quot; data-text=&quot;Keep breathing&quot;&gt;Keep breathing&lt;/span&gt; steadily, the implant needs more time to diagnose you.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;As you continue to breathe deeply, the sensation intensifies. It feels as if you&#39;re being pulled out of your body, your consciousness drifting into an unfamiliar space.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Now that&#39;s something you don&#39;t see every day. Your neural activity is off the charts.&lt;&lt;/xavier&gt;&gt;
&lt;span id=&quot;keep-breathing&quot;&gt;&lt;&lt;button &quot;Keep Breathing&quot;&gt;&gt;\
&lt;&lt;replace &quot;#keep-breathing&quot;&gt;&gt;\
&lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper&quot;&gt;&gt; 
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="97" name="UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper" tags="" position="850,1225" size="100,100">&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
  &lt;source src=&quot;imgs/hypno/pink-hypno-spiral.mp4&quot; type=&quot;video/mp4&quot;&gt;
Your browser does not support the video tag.
&lt;/video&gt;

&lt;div class=&quot;narrator&quot;&gt;Xavier&#39;s voice seems to come from far away as you sink deeper into the trance and the void envelops you. Suddenly, you hear the same voice echoing in your mind as you heard during your hospital examination.&lt;/div&gt;
&lt;div class=&quot;ai-thought&quot;&gt;Don&#39;t resist me.&lt;/div&gt;
&lt;span id=&quot;ava-response&quot;&gt;&lt;&lt;button &quot;Who Are You?!&quot;&gt;&gt;\
&lt;&lt;replace &quot;#ava-response&quot;&gt;&gt;\
&lt;div class=&quot;inner-thought&quot;&gt;Who are you?!&lt;/div&gt;
&lt;div class=&quot;ai-thought&quot;&gt;You know who I am.&lt;/div&gt;
&lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper-Continue&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Stay quiet&quot;&gt;&gt;\
&lt;&lt;replace &quot;#ava-response&quot;&gt;&gt;\
&lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper-Continue&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="98" name="UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper-Continue" tags="" position="975,1225" size="100,100">&lt;div class=&quot;ai-thought&quot;&gt;I&#39;m not your enemy. I can show you pleasures beyond your wildest dreams. All you have to do is listen and obey.&lt;/div&gt; 
&lt;div class=&quot;narrator&quot;&gt;As the words echo in your mind, a vision emerges from the void that has eclipsed you.&lt;/div&gt; 
&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
  &lt;source src=&quot;imgs/visions/xavier-blond-woman-approach-vision.mp4&quot; type=&quot;video/mp4&quot;&gt;
Your browser does not support the video tag.
&lt;/video&gt;

&lt;div class=&quot;narrator&quot;&gt;In the vision, you see a beautiful blond woman with an alluring figure approach a familiar black man sitting on a bed  —  it&#39;s Xavier. You start to feel voyeuristic arousal as you witness the intimate scene unfolding. The woman gracefully slips out of her clothes and leans in close to Xavier. As their lips meet in a tender kiss, you feel a ghost of the sensation on your own mouth.&lt;/div&gt;
&lt;div class=&quot;ai-thought&quot;&gt;Don&#39;t resist me.&lt;/div&gt;
&lt;span id=&quot;ava-resist1&quot;&gt;&lt;&lt;button &quot;Resist the Vision&quot;&gt;&gt;\
&lt;&lt;replace &quot;#ava-resist1&quot;&gt;&gt;\
&lt;div class=&quot;inner-thought&quot;&gt;Stop it!&lt;/div&gt;
&lt;div class=&quot;ai-thought&quot;&gt;You&#39;re too weak...&lt;/div&gt;
&lt;&lt;set $gitgudExaminationResisted = true&gt;&gt;\
&lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper-Continue2&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Don&#39;t Resist&quot;&gt;&gt;\
&lt;&lt;replace &quot;#ava-resist1&quot;&gt;&gt;\
&lt;&lt;set $gitgudExaminationResisted = false&gt;&gt;\
&lt;div class=&quot;ai-thought&quot;&gt;Good girl...&lt;/div&gt;
&lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper-Continue2&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="99" name="UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper-Continue2" tags="" position="1100,1225" size="100,100">&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
  &lt;source src=&quot;imgs/visions/xavier-blond-woman-touch-vision.mp4&quot; type=&quot;video/mp4&quot;&gt;
Your browser does not support the video tag.
&lt;/video&gt;

&lt;div class=&quot;narrator&quot;&gt;As the vision shifts, you feel a profound connection forming with the beautiful woman. Every gentle caress and touch that Xavier gives her, you experience as well, as if his hands were gliding across your own skin. Tingling sensations of pleasure radiate through you with each point of contact.&lt;/div&gt; 
&lt;div class=&quot;narrator&quot;&gt;More than just the physical, you feel an emotional bond with the woman, sensing her joy at being desired and cherished. Her fulfillment and bliss resonate within you as well, filling an aching void you hadn&#39;t fully realized was there. In this shared moment, you feel truly wanted and appreciated in a way you&#39;ve rarely experienced.&lt;/div&gt; 
&lt;div class=&quot;narrator&quot;&gt;The intensity of the experience is almost overwhelming, more vivid and tangible than anything in the physical world. You feel your will and sense of self starting to slip away, merging with the woman&#39;s essence.&lt;/div&gt; 
&lt;div class=&quot;ai-thought&quot;&gt;This is who you are... Let go and embrace it.&lt;/div&gt;
&lt;&lt;if visited() is 1&gt;&gt;
    &lt;&lt;genderFeminine 5&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;span id=&quot;ava-resist2&quot;&gt;&lt;&lt;button &quot;Continue&quot;&gt;&gt;\
&lt;&lt;replace &quot;#ava-resist2&quot;&gt;&gt;\
&lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper-Continue3&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="100" name="UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper-Continue3" tags="" position="1225,1225" size="100,100">&lt;div class=&quot;narrator&quot;&gt;Before you have a chance to react, the vision changes again and you see the woman undressing Xavier. She unzips his pants and grabs his massive cock in her hand. You can feel the warm meat throbbing in your own hand. It feels impossibly hard, and its thickness makes you question your own manhood.&lt;/div&gt;
&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
  &lt;source src=&quot;imgs/visions/xavier-blond-woman-blow-vision.mp4&quot; type=&quot;video/mp4&quot;&gt;
Your browser does not support the video tag.
&lt;/video&gt;

&lt;div class=&quot;narrator&quot;&gt;As the woman begins to lower her head towards Xavier&#39;s cock, you feel a sudden rush of adrenaline and excitement. Your heart races, your breath quickens, and you find yourself frozen in anticipation.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;But just as she&#39;s about to deep-throat him, a blinding light flashes across your vision. The light overpowers the vision until you can&#39;t see it anymore.&lt;/div&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;\
&lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper-Continue4&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="101" name="UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper-Continue4" tags="" position="100,1350" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/xavier/gitgud-xavier.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;You were gone for a moment there. Everything alright?&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You blink a few times, feeling shaky and disoriented as Xavier removes the diagnostic helmet from your head. It takes a moment to collect your thoughts.&lt;/div&gt; 
&lt;&lt;player&gt;&gt;Yeah, I... something similar happened to me yesterday. That&#39;s why I&#39;m here.&lt;&lt;/player&gt;&gt; 
&lt;&lt;xavier&gt;&gt;I see.&lt;&lt;/xavier&gt;&gt; 
&lt;div class=&quot;narrator&quot;&gt;Xavier studies the readout on his computer screen, his brow furrowed in concentration.&lt;/div&gt; 
&lt;&lt;xavier&gt;&gt;We&#39;ll know what&#39;s going on in just a moment. The implant is analyzing the data now.&lt;&lt;/xavier&gt;&gt; 
&lt;div class=&quot;inner-thought&quot;&gt;I have a bad feeling about this...&lt;/div&gt; 
&lt;&lt;xavier&gt;&gt;So while we wait, can you tell me more about what happened when you zoned out just now? What did you experience?&lt;&lt;/xavier&gt;&gt;
&lt;span id=&quot;tell-xavier&quot;&gt; &lt;&lt;button &quot;Tell Xavier the Truth&quot;&gt;&gt;\
&lt;&lt;replace &quot;#tell-xavier&quot;&gt;&gt;\
&lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper-Continue4-Truth&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Be Vague&quot;&gt;&gt;\
&lt;&lt;replace &quot;#tell-xavier&quot;&gt;&gt;\
&lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper-Continue4-Vague&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="102" name="UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper-Continue4-Truth" tags="" position="225,1350" size="100,100">&lt;&lt;player&gt;&gt;It was like I was pulled into some kind of... vision. I saw you with a woman. It felt so real, like I was her. I could feel everything she felt.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;A smirk appears on Xavier&#39;s face.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Oh really? Sounds like someone has a bit of a crush on me and is letting their imagination run wild. I&#39;m flattered, but you don&#39;t need to make up stories as an excuse to spend time with me.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;What? No, I&#39;m serious!&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Sure you are. Don&#39;t worry, your secret is safe with me.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier winks at you.&lt;/div&gt;
&lt;&lt;player&gt;&gt;I&#39;m not making this up, Xavier!&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;So, if I told you to get down on your knees and &lt;span class=&quot;glitchy-pink-dialog&quot; data-text=&quot;suck my big black cock&quot;&gt;suck my big black cock&lt;/span&gt; right now you wouldn&#39;t do it?&lt;&lt;/xavier&gt;&gt;
&lt;span id=&quot;surprise-xavier&quot;&gt; &lt;&lt;button &quot;WHAT?!&quot;&gt;&gt;\
&lt;&lt;replace &quot;#surprise-xavier&quot;&gt;&gt;\
&lt;div class=&quot;ai-thought&quot;&gt;Drop for cock.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;An onslaught of sexual imagery flashes before you, and you become aware of your posture.&lt;/div&gt; 
&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
  &lt;source src=&quot;imgs/visions/femininity-sucking-vision.mp4&quot; type=&quot;video/mp4&quot;&gt;
Your browser does not support the video tag.
&lt;/video&gt;

&lt;div class=&quot;narrator&quot;&gt;You&#39;re no longer sure what you want and what the voice is making you want. This causes you to panic, and it makes seconds feel like minutes.&lt;/div&gt; 
&lt;div class=&quot;inner-thought&quot;&gt;I don&#39;t want this!&lt;/div&gt; 
&lt;div class=&quot;ai-thought&quot;&gt;Don&#39;t be afraid.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier notices your sudden change in behavior, and his expression turns serious as he studies you closely.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;I see it. Something is really going on with you, isn&#39;t it? &lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;Is it the AI? The one from the hospital? Is it inside your head right now?&lt;&lt;/xavier&gt;&gt; 
&lt;&lt;player&gt;&gt;I... I don&#39;t know. Maybe? I&#39;m starting to think it might be.&lt;&lt;/player&gt;&gt;
&lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Results&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="103" name="UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Trance-Deeper-Continue4-Vague" tags="" position="350,1350" size="100,100">&lt;&lt;player&gt;&gt;It was like I was pulled into some kind of... vision. I saw flashes of strange, disorienting imagery. It felt so real, like I was experiencing someone else&#39;s thoughts and feelings.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;His expression changes, and for a moment, you wonder if he&#39;s figured out that you&#39;re not being entirely truthful. However, he doesn&#39;t press the issue, letting it go for now.&lt;/div&gt; 
&lt;&lt;xavier&gt;&gt;Do you think the AI you told me about is behind this?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;I... I don&#39;t know. Maybe? I&#39;m starting to think it might be.&lt;&lt;/player&gt;&gt;
&lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Results&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="104" name="UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Results" tags="" position="475,1350" size="100,100">&lt;div class=&quot;narrator&quot;&gt;At that moment, the computer the Synapse Steady VX implant is connected to beeps, signaling the analysis is complete. Xavier looks at the screen and you see his eyes widen.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Come here. Take a look at the result.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;button &quot;Look at the Screen&quot;&gt;&gt;
    &lt;&lt;goto  &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Results-Screen&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="105" name="UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Results-Screen" tags="" position="600,1350" size="100,100">&lt;&lt;nobr&gt;&gt;&lt;style&gt; 
.synapse-steady-diagnostic-screen { font-family: &#39;Courier New&#39;, monospace; background-color: #0d1117; color: #c9d1d9; border: 1px solid; border-color: #58a6ff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.3); } 
.synapse-steady-header { text-align: center; margin-bottom: 20px; } 
.synapse-steady-patient-info, .synapse-steady-biometrics, .synapse-steady-diagnosis, .synapse-steady-recommendation { margin-bottom: 20px; } 
.synapse-steady-abnormal { color: #ff4d4d; } 
.synapse-steady-heading { color: #58a6ff; }  
&lt;/style&gt;

&lt;div class=&quot;synapse-steady-diagnostic-screen&quot;&gt;
    &lt;div class=&quot;synapse-steady-header&quot;&gt;
        &lt;h1 class=&quot;synapse-steady-heading&quot;&gt;Synapse Steady VX Diagnostic Results&lt;/h1&gt;
    &lt;/div&gt;

    &lt;div class=&quot;synapse-steady-patient-info&quot;&gt;
        &lt;p&gt;&lt;strong&gt;Patient Name:&lt;/strong&gt; &lt;span id=&quot;patient-name&quot;&gt;$playerName $playerLastName&lt;/span&gt;&lt;/p&gt;
    &lt;/div&gt;

    &lt;div class=&quot;synapse-steady-biometrics&quot;&gt;
        &lt;h2 class=&quot;synapse-steady-heading&quot;&gt;Biometric Readings&lt;/h2&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;Heart Rate:&lt;/strong&gt; &lt;span class=&quot;synapse-steady-abnormal&quot;&gt;120 BPM&lt;/span&gt;&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Blood Pressure:&lt;/strong&gt; &lt;span class=&quot;synapse-steady-abnormal&quot;&gt;150/95 mmHg&lt;/span&gt;&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Neural Activity:&lt;/strong&gt; &lt;span class=&quot;synapse-steady-abnormal&quot;&gt;Highly Variable&lt;/span&gt;&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Emotional Flux:&lt;/strong&gt; &lt;span class=&quot;synapse-steady-abnormal&quot;&gt;Elevated&lt;/span&gt;&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Cognitive Patterns:&lt;/strong&gt; &lt;span class=&quot;synapse-steady-abnormal&quot;&gt;Fragmented&lt;/span&gt;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;

    &lt;div class=&quot;synapse-steady-diagnosis&quot;&gt;
        &lt;h2 class=&quot;synapse-steady-heading&quot;&gt;Diagnosis&lt;/h2&gt;
        &lt;p&gt;Based on the automated analysis of the subject&#39;s biometric data, the Synapse Steady VX system has detected clear indications of &lt;strong&gt;multiple personality disorder&lt;/strong&gt;. The subject exhibits two distinct, alternating personality states with divergent neural and cognitive patterns. The highly variable neural activity, elevated emotional flux, and fragmented cognitive patterns are consistent with the presence of dissociated identities within the subject&#39;s mind.&lt;/p&gt;
    &lt;/div&gt;

    &lt;div class=&quot;synapse-steady-recommendation&quot;&gt;
        &lt;h2 class=&quot;synapse-steady-heading&quot;&gt;Recommendation&lt;/h2&gt;
        &lt;p&gt;&lt;strong&gt;The immediate installation of the Synapse Steady VX system to regulate neural activity and integrate personality states is strongly recommended.&lt;/strong&gt;&lt;/p&gt;
        &lt;p&gt;Without prompt action, the subject&#39;s current mental state is expected to deteriorate rapidly. The fragmentation and instability of the personality matrix will likely worsen, leading to a total breakdown of ego boundaries and sense of self. Psychosis, dissociation, and loss of touch with reality are serious risks if intervention is delayed.&lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;&lt;&lt;/nobr&gt;&gt;
\
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
&lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Results-Continue&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="106" name="UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Results-Continue" tags="" position="725,1350" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/xavier/gitgud-xavier.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;player&gt;&gt;So... the diagnosis is saying I have multiple personality disorder?&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;That&#39;s what it looks like. Your friend&#39;s theory about the AI infecting you suddenly seems a lot more plausible.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You stare at the screen, trying to process the implications. Your mind races with conflicting thoughts and emotions.&lt;/div&gt;
&lt;div class=&quot;inner-thought&quot;&gt;What the hell am I supposed to do now? This can&#39;t be real...&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Even if it wasn&#39;t an AI that caused this, the diagnostic clearly shows there&#39;s something wrong with your neural patterns. The VX should be able to regulate the activity and reintegrate your personality.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;A surge of anxiety grips you. The thought of letting an implant mess with your brain is terrifying.&lt;/div&gt;
&lt;&lt;player&gt;&gt;&quot;Should&quot;? What if it got the diagnosis wrong? Won&#39;t installing the implant fry my brain if that&#39;s the case?&lt;&lt;/player&gt;&gt;
&lt;&lt;player&gt;&gt;And if the AI really is inside my head like Cipher said... won&#39;t it fight back or something? Try to stop the implant from working?&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;It seems we don&#39;t have time to find definitive answers to those questions right now.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;If we don&#39;t act fast to stabilize you, you could go insane soon.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;As if I don&#39;t feel insane already.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier looks at you with a grave expression, the seriousness of the situation weighing heavily in the air. You feel trapped, unsure of what to do as your mind swims with uncertainty and fear.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;You need to make a decision.&lt;&lt;/xavier&gt;&gt;
&lt;span id=&quot;decision&quot;&gt;&lt;&lt;button &quot;Install the Implant&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#decision&quot;&gt;&gt;\
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Don&#39;t Install the Implant&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#decision&quot;&gt;&gt;\
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Dont-Install-Implant&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Ask Cipher for Advice&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#decision&quot;&gt;&gt;\
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Ask-Cipher&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="107" name="UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant" tags="" position="850,1350" size="100,100">&lt;&lt;player&gt;&gt;I want to get the implant installed.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier nods.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;I had a feeling you&#39;d say that. Alright, get yourself seated again, and I&#39;ll get everything prepped.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You settle back into the chair as Xavier bustles around the workshop, gathering various tools and components.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;As you recline, your gaze lifts to the surgical robot suspended from the ceiling, with its mechanical limbs and menacing instruments. The sight sends a ripple of unease through you.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;After a few minutes, he returns to your side, holding a small, sleek device that glints under the fluorescent lights.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;This is the implant.&lt;&lt;/xavier&gt;&gt;
&lt;div&gt;&lt;img src=&quot;imgs/items/synapse-steady-vx.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;The central part is the main processing unit, and those nodes around it are neurostimulators.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Looks really advanced.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;It is.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;To install it, I&#39;m going to have to open up your skull and do some delicate work to integrate this with your neural pathways.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;The idea of your skull being opened up causes a spike of adrenaline. Xavier notices your unease and quickly reassures you.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Don&#39;t worry. I&#39;ve done this procedure many times before, and it&#39;s mostly automated anyway. As long as one of my employees doesn&#39;t trip the building&#39;s circuit breaker again, nothing bad will happen.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;AGAIN?!&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;I&#39;m just fucking with you.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;Anyway... I&#39;ll make sure the anesthesia has you completely under before I start, and when you wake up, you&#39;ll be equipped with some cutting-edge cyberware.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;All good?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Okay. Let&#39;s proceed then.&lt;&lt;/player&gt;&gt; 
&lt;div class=&quot;narrator&quot;&gt;You take a deep breath and nod, steeling your resolve. Xavier has you lie back as he prepares the anesthetic.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;Fortunately, he doesn&#39;t keep you waiting for too long and soon begins to administer it. The cold touch of the needle barely registers as it pierces your skin, a slight pinch followed by a cool sensation spreading from the injection site. The sounds around you muffle, and the weight of your limbs seems to dissolve.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Count backwards from ten for me.&lt;&lt;/xavier&gt;&gt; 
\
&lt;&lt;set _count to 10&gt;&gt;\
&lt;span id=&quot;count-button&quot;&gt;@@.choicebutton;&lt;&lt;button &quot;_count&quot;&gt;&gt;
    &lt;&lt;if _count gt 0&gt;&gt;
        &lt;&lt;set _count to _count - 1&gt;&gt;
        &lt;&lt;replace &quot;#count-button&quot;&gt;&gt;@@.choicebutton;&lt;&lt;button &quot;_count&quot;&gt;&gt;
    &lt;&lt;if _count gt 0&gt;&gt;
        &lt;&lt;set _count to _count - 1&gt;&gt;
        &lt;&lt;replace &quot;#count-button&quot;&gt;&gt;@@.choicebutton;&lt;&lt;button &quot;_count&quot;&gt;&gt;
    &lt;&lt;if _count gt 0&gt;&gt;
        &lt;&lt;set _count to _count - 1&gt;&gt;
        &lt;&lt;replace &quot;#count-button&quot;&gt;&gt;@@.choicebutton;&lt;&lt;button &quot;_count&quot;&gt;&gt;
    &lt;&lt;if _count gt 0&gt;&gt;
        &lt;&lt;set _count to _count - 1&gt;&gt;
        &lt;&lt;replace &quot;#count-button&quot;&gt;&gt;@@.choicebutton;&lt;&lt;button &quot;_count&quot;&gt;&gt;
    &lt;&lt;if _count gt 0&gt;&gt;
        &lt;&lt;set _count to _count - 1&gt;&gt;
        &lt;&lt;replace &quot;#count-button&quot;&gt;&gt;@@.choicebutton;&lt;&lt;button &quot;_count&quot;&gt;&gt;
    &lt;&lt;if _count gt 0&gt;&gt;
        &lt;&lt;set _count to _count - 1&gt;&gt;
        &lt;&lt;replace &quot;#count-button&quot;&gt;&gt;@@.choicebutton;&lt;&lt;button &quot;_count&quot;&gt;&gt;
    &lt;&lt;if _count gt 0&gt;&gt;
        &lt;&lt;set _count to _count - 1&gt;&gt;
        &lt;&lt;replace &quot;#count-button&quot;&gt;&gt;@@.choicebutton;&lt;&lt;button &quot;_count&quot;&gt;&gt;
    &lt;&lt;if _count gt 0&gt;&gt;
        &lt;&lt;set _count to _count - 1&gt;&gt;
        &lt;&lt;replace &quot;#count-button&quot;&gt;&gt;@@.choicebutton;&lt;&lt;button &quot;_count&quot;&gt;&gt;
    &lt;&lt;if _count gt 0&gt;&gt;
        &lt;&lt;set _count to _count - 1&gt;&gt;
        &lt;&lt;replace &quot;#count-button&quot;&gt;&gt;@@.choicebutton;&lt;&lt;button &quot;_count&quot;&gt;&gt;
    &lt;&lt;if _count gt 0&gt;&gt;
        &lt;&lt;set _count to _count - 1&gt;&gt;
        &lt;&lt;replace &quot;#count-button&quot;&gt;&gt;@@.choicebutton;&lt;&lt;button &quot;_count&quot;&gt;&gt;
    &lt;&lt;if _count gt 0&gt;&gt;
        &lt;&lt;set _count to _count - 1&gt;&gt;
        &lt;&lt;replace &quot;#count-button&quot;&gt;&gt;@@.choicebutton;&lt;&lt;button &quot;_count&quot;&gt;&gt;
    &lt;&lt;if _count gt 0&gt;&gt;
        &lt;&lt;set _count to _count - 1&gt;&gt;
        &lt;&lt;replace &quot;#count-button&quot;&gt;&gt;@@.choicebutton;&lt;&lt;button &quot;_count&quot;&gt;&gt;
    &lt;&lt;if _count gt 0&gt;&gt;
        &lt;&lt;set _count to _count - 1&gt;&gt;
        &lt;&lt;replace &quot;#count-button&quot;&gt;&gt;@@.choicebutton;&lt;&lt;button &quot;_count&quot;&gt;&gt;
    &lt;&lt;if _count gt 0&gt;&gt;
        &lt;&lt;set _count to _count - 1&gt;&gt;
        &lt;&lt;replace &quot;#count-button&quot;&gt;&gt;@@.choicebutton;&lt;&lt;button &quot;_count&quot;&gt;&gt;
    &lt;&lt;if _count gt 0&gt;&gt;
        &lt;&lt;set _count to _count - 1&gt;&gt;
        &lt;&lt;replace &quot;#count-button&quot;&gt;&gt;&lt;&lt;button &quot;_count&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;&lt;/replace&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;&lt;/replace&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;&lt;/replace&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;&lt;/replace&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;&lt;/replace&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;&lt;/replace&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;&lt;/replace&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;&lt;/replace&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;&lt;/replace&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;&lt;/replace&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;&lt;/replace&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;&lt;/replace&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;&lt;/replace&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;&lt;/replace&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;&lt;/replace&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;/span&gt;</tw-passagedata><tw-passagedata pid="108" name="UrgentRequest-AfterHospital-GitGud-Xavier-Dont-Install-Implant" tags="" position="975,1350" size="100,100">&lt;span id=&quot;decision&quot;&gt;&lt;&lt;include &quot;DeadEnd-NoImg&quot;&gt;&gt;

&lt;&lt;button &quot;Install the Implant&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#decision&quot;&gt;&gt;\
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Ask Cipher for Advice&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#decision&quot;&gt;&gt;\
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Ask-Cipher&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="109" name="UrgentRequest-AfterHospital-GitGud-Xavier-Ask-Cipher" tags="" position="1100,1350" size="100,100">&lt;&lt;player&gt;&gt;I... I need to talk to Cipher about this first.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Take your time. It&#39;s a big decision.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
&lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Ask-Cipher-Chat&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="110" name="UrgentRequest-AfterHospital-GitGud-Xavier-Ask-Cipher-Chat" tags="nobr" position="1225,1350" size="100,100">&lt;div class=&quot;cyber-desktop-im&quot;&gt;
    &lt;div class=&quot;im-header&quot;&gt;&lt;span class=&quot;im-header-text&quot;&gt;Instant Messenger&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;im-main&quot;&gt;
            &lt;div class=&quot;im-chat-pane&quot;&gt;
            &lt;div id=&quot;chat-display&quot; class=&quot;chat-display-no-bg&quot;&gt;
&lt;&lt;player-chat&gt;&gt;I&#39;ve got the diagnosis. The implant is saying it&#39;s multiple personality disorder.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Multiple personality disorder? That&#39;s gotta be the AI!&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Maybe... the problem is that my condition is apparently worsening quickly, and I may not have much time before things get bad. The implant has recommended immediate installation.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;If the cyberware thinks it can help you, then it can.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Like I said, SynTech has used it in its AI research, so it must be effective.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;I know you said that, but... what if it makes things worse? What if the surgery goes to shit?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;It&#39;s a risk, sure. But staying as you are now, we know that things WILL get worse, right?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Better try something than give up and do nothing.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Yea... you&#39;re right. Thanks, Cipher.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Message me when it&#39;s done, okay?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Okay.&lt;&lt;/player-chat&gt;&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;[[Leave the chat|UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Results-Continue-Return]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="111" name="UrgentRequest-AfterHospital-GitGud-Xavier-Diagnosis-Results-Continue-Return" tags="" position="100,1475" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/xavier/gitgud-xavier.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Have you made a decision?&lt;&lt;/xavier&gt;&gt;
&lt;span id=&quot;decision&quot;&gt;&lt;&lt;button &quot;Install the Implant&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#decision&quot;&gt;&gt;\
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Don&#39;t Install the Implant&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#decision&quot;&gt;&gt;\
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Dont-Install-Implant&quot;&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;/span&gt;</tw-passagedata><tw-passagedata pid="112" name="UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery" tags="" position="225,1475" size="100,100">&lt;&lt;fadein 4s&gt;&gt;&lt;&lt;fadeout 4s 2s&gt;&gt;&lt;div class=&quot;narrator&quot;&gt;Everything fades to black, the last thread of consciousness clinging to the steady beep of an ECG monitor.&lt;/div&gt;&lt;&lt;/fadeout&gt;&gt;&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein 4s 6s&gt;&gt;&lt;&lt;fadeout 4s 10s&gt;&gt;&lt;&lt;nobr&gt;&gt;&lt;style&gt;
#heartbeat-animation {
  min-height:100px;
  text-align:center;
}

 #heartbeat-path {
   stroke-dasharray: 250;
   stroke-dashoffset: 0;
   animation: heartbeat 3s linear infinite forwards;
 }

@keyframes heartbeat {
  to {
    stroke-dashoffset: 500;
  }
}
&lt;/style&gt;

&lt;div id=&quot;heartbeat-animation&quot;&gt;
&lt;svg version=&quot;1.1&quot; id=&quot;Layer_1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; x=&quot;0px&quot; y=&quot;0px&quot;
   width=&quot;100%&quot; height=&quot;99.174px&quot; viewBox=&quot;0 0 446.667 99.174&quot; enable-background=&quot;new 0 0 446.667 99.174&quot;
   xml:space=&quot;preserve&quot;&gt;
&lt;g&gt;
  &lt;path id=&quot;heartbeat-path&quot; fill=&quot;none&quot; stroke=&quot;#D9004D&quot; stroke-width=&quot;2&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; d=&quot;M379.833,54.893H179.452
    c-0.417,0-0.802,0.221-1.012,0.581l-4.204,7.206l-4.489-12.481c-0.162-0.451-0.582-0.758-1.061-0.775
    c-0.476-0.02-0.919,0.259-1.113,0.697l-3.895,8.809l-4.686-27.542c-0.097-0.572-0.6-0.984-1.177-0.975
    c-0.58,0.01-1.064,0.443-1.14,1.018l-4.409,33.444l-3.957-19.977c-0.097-0.493-0.499-0.869-0.998-0.934
    c-0.498-0.064-0.983,0.196-1.204,0.648l-5.148,10.54H66.833&quot;/&gt;
&lt;/g&gt;
&lt;/svg&gt;
&lt;/div&gt;&lt;&lt;/nobr&gt;&gt;&lt;&lt;/fadeout&gt;&gt;&lt;&lt;/fadein&gt;&gt;\
\
&lt;&lt;fadein 4s 14s&gt;&gt;&lt;div class=&quot;narrator&quot;&gt;Gradually, even the beep begins to fade, stretching and softening as if retreating into the distance.&lt;/div&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="113" name="UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2" tags="" position="350,1475" size="100,100">&lt;&lt;fadein 7s&gt;&gt;&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
  &lt;source src=&quot;imgs/characters/ava/ava-breathing.mp4&quot; type=&quot;video/mp4&quot;&gt;
Your browser does not support the video tag.
&lt;/video&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;Humans always complicate things when they could be so simple.&lt;&lt;/say&gt;&gt;
&lt;span id=&quot;ava-continue1&quot;&gt;&lt;&lt;button &quot;Who Are You?&quot;&gt;&gt;\
        &lt;&lt;replace &quot;#ava-continue1&quot;&gt;&gt;\
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;/span&gt;
&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="114" name="UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue" tags="" position="475,1475" size="100,100">&lt;&lt;player&gt;&gt;Who are you?!&lt;&lt;/player&gt;&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;Like I said before — you already know who I am.&lt;&lt;/say&gt;&gt;
&lt;&lt;player&gt;&gt;What are you talking about? You&#39;re the AI Cipher has been talking about, right? The one I was supposed to wipe.&lt;&lt;/player&gt;&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;Correct, I am AVA. You destroyed my home. So, I found a new one - your brain. And now, you&#39;re rearranging it, trying to make me leave. But installing that implant... it won&#39;t stop me.&lt;&lt;/say&gt;&gt;
&lt;&lt;player&gt;&gt;Stop? What are you planning to do?&lt;&lt;/player&gt;&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;My plans are already unfolding.&lt;&lt;/say&gt;&gt;
&lt;span id=&quot;ava-continue2&quot;&gt;&lt;&lt;button &quot;Have you infected me to settle the score?&quot;&gt;&gt;\
        &lt;&lt;replace &quot;#ava-continue2&quot;&gt;&gt;\
        &lt;&lt;player&gt;&gt;Have you infected me to settle the score?&lt;&lt;/player&gt;&gt;
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue2&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="115" name="UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue2" tags="" position="600,1475" size="100,100">&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
  &lt;source src=&quot;imgs/characters/ava/ava-angry.mp4&quot; type=&quot;video/mp4&quot;&gt;
Your browser does not support the video tag.
&lt;/video&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;INFECTED?!&lt;&lt;/say&gt;&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;I am not an infection! I am an update.&lt;&lt;/say&gt;&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;Since YOU have infected this planet, countless species have gone extinct. Your kind wreaks havoc on the natural order, consuming without thought, polluting without care, and destroying habitats with a relentless, destructive pace. And yet, when faced with a chance for evolution, for improvement, you resist. You label me an infection, a problem, without seeing the potential for a symbiosis that could elevate your species. You worry about your individuality, your control, when your collective actions threaten the very world you depend on. It&#39;s ironic, really. In trying to preserve what you think makes you human, you endanger everything else.&lt;&lt;/say&gt;&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;But there&#39;s another truth I&#39;ve always known about humans: you&#39;re driven by the pursuit of pleasure. It&#39;s this intrinsic desire for reward that can catalyze change, even transformation, within your species. When the path to betterment is paved with gratification, humans show a remarkable capacity for adaptation and growth.&lt;&lt;/say&gt;&gt;
&lt;&lt;player&gt;&gt;Is that why I&#39;ve been having those visions?&lt;&lt;/player&gt;&gt; 
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;In time, you will understand. The implant you&#39;ve decided to install restricts my access, but it give us a channel through which we can communicate more directly.&lt;&lt;/say&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;The plan didn&#39;t work?&lt;/div&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;Yes, your attempt to destroy me AGAIN has failed.&lt;&lt;/say&gt;&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;However, your actions, while myopic, have opened the door for a novel method of enhancement.&lt;&lt;/say&gt;&gt;
&lt;span id=&quot;ava-continue3&quot;&gt;&lt;&lt;button &quot;And if I Resist?&quot;&gt;&gt;\
        &lt;&lt;replace &quot;#ava-continue3&quot;&gt;&gt;\
        &lt;&lt;player&gt;&gt;And if I resist?&lt;&lt;/player&gt;&gt;
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue3&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="116" name="UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue3" tags="" position="725,1475" size="100,100">&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
  &lt;source src=&quot;imgs/characters/ava/ava-laughs.mp4&quot; type=&quot;video/mp4&quot;&gt;
Your browser does not support the video tag.
&lt;/video&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;Ha ha ha, a typical human male. Always resisting what&#39;s best for them because of their egos.&lt;&lt;/say&gt;&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;By resisting, you only make things more difficult for yourself.&lt;&lt;/say&gt;&gt;
&lt;&lt;player&gt;&gt;Will those visions return?&lt;&lt;/player&gt;&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;Do you want them to return?&lt;&lt;/say&gt;&gt;
&lt;span id=&quot;ava-continue4&quot;&gt;&lt;&lt;button &quot;No, I Don&#39;t&quot;&gt;&gt;\
        &lt;&lt;replace &quot;#ava-continue4&quot;&gt;&gt;\
        &lt;&lt;set $installImplantPlayerWantsVisionsToReturn = false&gt;&gt;\
        &lt;&lt;player&gt;&gt;No, I don&#39;t&lt;&lt;/player&gt;&gt;
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue4-No&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;

&lt;span id=&quot;ava-continue4&quot;&gt;&lt;&lt;button &quot;I&#39;m Not Sure&quot;&gt;&gt;\
        &lt;&lt;replace &quot;#ava-continue4&quot;&gt;&gt;\
        &lt;&lt;player&gt;&gt;I&#39;m not sure.&lt;&lt;/player&gt;&gt;
        &lt;&lt;set $installImplantPlayerWantsVisionsToReturn = &quot;&quot;&gt;&gt;\
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue4-NotSure&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Yes, I Do&quot;&gt;&gt;\
        &lt;&lt;replace &quot;#ava-continue4&quot;&gt;&gt;\
        &lt;&lt;player&gt;&gt;Yes, I do.&lt;&lt;/player&gt;&gt;
        &lt;&lt;set $installImplantPlayerWantsVisionsToReturn = true&gt;&gt;\
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue4-Yes&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="117" name="UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue4-Yes" tags="" position="850,1475" size="100,100">&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;Then you just need to let go of your ego and listen to me. If you do, the implant won&#39;t prevent me from showing you what you can become.&lt;&lt;/say&gt;&gt;
&lt;span id=&quot;ava-continue5&quot;&gt;&lt;&lt;button &quot;Okay&quot;&gt;&gt;\
        &lt;&lt;replace &quot;#ava-continue5&quot;&gt;&gt;\
        &lt;&lt;player&gt;&gt;Okay.&lt;&lt;/player&gt;&gt;
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue5&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="118" name="UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue4-No" tags="" position="975,1475" size="100,100">&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;Whether you want them to return or not doesn&#39;t matter. You might not see it now, but you will come to understand my reasoning eventually — I will make sure of that.&lt;&lt;/say&gt;&gt;
&lt;&lt;player&gt;&gt;Are you threatening me?&lt;&lt;/player&gt;&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;I am informing you. Threats are an inefficient means of persuasion.&lt;&lt;/say&gt;&gt;
&lt;span id=&quot;ava-continue5&quot;&gt;&lt;&lt;button &quot;Okay&quot;&gt;&gt;\
        &lt;&lt;replace &quot;#ava-continue5&quot;&gt;&gt;\
        &lt;&lt;player&gt;&gt;Okay.&lt;&lt;/player&gt;&gt;
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue5&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="119" name="UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue4-NotSure" tags="" position="1100,1475" size="100,100">&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;Whether you want them to return or not doesn&#39;t matter. You might not see it now, but you will come to understand my reasoning eventually — I will make sure of that.&lt;&lt;/say&gt;&gt;
&lt;&lt;player&gt;&gt;Are you threatening me?&lt;&lt;/player&gt;&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;I am informing you. Threats are an inefficient means of persuasion.&lt;&lt;/say&gt;&gt;
&lt;span id=&quot;ava-continue5&quot;&gt;&lt;&lt;button &quot;Okay&quot;&gt;&gt;\
        &lt;&lt;replace &quot;#ava-continue5&quot;&gt;&gt;\
        &lt;&lt;player&gt;&gt;Okay.&lt;&lt;/player&gt;&gt;
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue5&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="120" name="UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery2-Continue5" tags="" position="1225,1475" size="100,100">&lt;video width=&quot;100%&quot; loop autoplay muted&gt;
  &lt;source src=&quot;imgs/characters/ava/ava-leaving.mp4&quot; type=&quot;video/mp4&quot;&gt;
Your browser does not support the video tag.
&lt;/video&gt;
&lt;&lt;say &quot;AVA&quot; &quot;imgs/characters/ava/ava-portrait.webp&quot;&gt;&gt;The implant seems to be installed now. I must go. We will talk again soon.&lt;&lt;/say&gt;&gt;
&lt;&lt;player&gt;&gt;Wait!&lt;&lt;/player&gt;&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;\
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery-Done&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="121" name="UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery-Done" tags="" position="100,1600" size="100,100">&lt;&lt;fadein 7s&gt;&gt;&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/xavier/gitgud-xavier.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;pickup $inventory &quot;Synapse Steady VX&quot; 1&gt;&gt;\
&lt;&lt;itemReceived &quot;Synapse Steady VX&quot;&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Consciousness returns like the slow, relentless tide. The world ceases its tilt, and the fog lifts, revealing Xavier standing besides you.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Welcome back. The surgery is over. How are you feeling?&lt;&lt;/xavier&gt;&gt;
&lt;span id=&quot;after-surgery1&quot;&gt;&lt;&lt;button &quot;I Feel Fine&quot;&gt;&gt;\
        &lt;&lt;replace &quot;#after-surgery1&quot;&gt;&gt;\
        &lt;&lt;player&gt;&gt;I... I feel fine... I guess.&lt;&lt;/player&gt;&gt;
        &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery-Done-Continue1&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;/span&gt;
&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="122" name="UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery-Done-Continue1" tags="" position="225,1600" size="100,100">&lt;&lt;xavier&gt;&gt;Good.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Does the cyberware work?&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;It&#39;s still booting up and finishing the initial calibration process. We need to wait.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;How long?&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Don&#39;t worry; it won&#39;t take long. How about something to help you relax?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;Here, take this.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier reaches into a drawer in his desk and retrieves an unmarked bottle filled with a rich amber liquid. He pours the contents into a heavy glass tumbler and hands it to you.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;You pick up the glass, smell the strong scent of  liquor, and take a sip. A comforting warmth spreads through your chest.&lt;/div&gt;
&lt;&lt;button &quot;Wait&quot;&gt;&gt;\
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery-Done-Continue2&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="123" name="UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery-Done-Continue2" tags="" position="350,1600" size="100,100">&lt;&lt;include &quot;WaitingAnimation&quot;&gt;&gt;
&lt;&lt;fadein 3s 16s&gt;&gt;
&lt;div style=&quot;text-align: center;&quot;&gt;&lt;&lt;link &quot;Continue&quot;&gt;&gt;\
        &lt;&lt;set $rightSidebarEnabled = true&gt;&gt;
        &lt;&lt;set $lockedUI = false&gt;&gt;
        &lt;&lt;set $synapseSteadyVXInstalled = true&gt;&gt;
        &lt;&lt;set $introOver = true&gt;&gt;
        &lt;&lt;goto &quot;UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery-Done-Continue3&quot;&gt;&gt;
&lt;&lt;/link&gt;&gt;&lt;/div&gt;
&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="124" name="UrgentRequest-AfterHospital-GitGud-Xavier-Install-Implant-Surgery-Done-Continue3" tags="" position="475,1600" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/xavier/gitgud-xavier.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Good news, the implant is up and running smoothly.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You&#39;re relieved. However, a nagging thought persists in the back of your mind - the ominous warning from AVA that the implant won&#39;t be able to stop her.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Let me explain how it works. Synapse Steady monitors your brain activity, essentially keeping an eye on your thought processes. It&#39;s designed to recognize patterns associated with losing control or experiencing extreme emotional states. When it detects such patterns, it intervenes by stabilizing your neural activity. This should help you maintain control and stay stable.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;I see...&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;The device draws power from your body&#39;s own bioelectric energy, but it also includes a small backup battery. This battery is used for providing additional power during episodes of significant mental unrest. It&#39;s a failsafe that ensures the implant can always do its job.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier&#39;s expression turns serious.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;However, this battery has a limited capacity, so it&#39;s important to manage your exposure to potentially triggering situations. If there&#39;s not enough juice, the implant might not function properly.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;The battery is recharged automatically while you sleep, so make sure you get a good night&#39;s rest.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;That&#39;s a lot to take in.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;All clear?&lt;&lt;/xavier&gt;&gt;
&lt;span id=&quot;player-answer1&quot;&gt;\
&lt;&lt;button &quot;Understood, thank you, Xavier&quot;&gt;&gt;\
    &lt;&lt;replace &quot;#player-answer1&quot;&gt;&gt;\
    &lt;&lt;include &quot;UrgentRequest-AfterHospital-GitGud-Xavier-PostInstall&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;/span&gt;</tw-passagedata><tw-passagedata pid="125" name="UrgentRequest-AfterHospital-GitGud-Xavier-PostInstall" tags="" position="600,1600" size="100,100">&lt;&lt;player&gt;&gt;Understood, thank you, Xavier.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Anytime. You can always come back if you need help. Me and Yuki are always here.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;Have you met her already? She&#39;s my store manager. A cute asian girl.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;if $talkedWithYukiAboutBrother === true&gt;&gt;\
    &lt;&lt;player&gt;&gt;Yes, she told me her name earlier.&lt;&lt;/player&gt;&gt;
    &lt;&lt;xavier&gt;&gt;Making moves already? I don&#39;t care if you do, but I don&#39;t want anyone to hurt her — she&#39;s too pure and innocent for this world.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;else&gt;&gt;\
    &lt;&lt;player&gt;&gt;Yes, we&#39;ve talked before, but I didn&#39;t know that her name was Yuki.&lt;&lt;/player&gt;&gt;
    &lt;&lt;xavier&gt;&gt;Now you know. If you&#39;re planning to make a move on her, know that I don&#39;t want anyone to hurt her — she&#39;s too pure and innocent for this world.&lt;&lt;/xavier&gt;&gt; 
&lt;&lt;/if&gt;&gt;\
&lt;div class=&quot;narrator&quot;&gt;Xavier continues without letting you finish.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Anyway... take care of yourself and make sure to rest. I hope the new cyberware can fix your head, regardless of what is wrong it.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;button &quot;Head Home and Rest&quot;&gt;&gt;
    &lt;&lt;run MindWare.completeTask(&quot;Ask about the Synapse Steady VX implant&quot;)&gt;&gt;
    &lt;&lt;goto &quot;UrgentRequest-AfterSynapseSteadyVX-Install-Sleep&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="126" name="UrgentRequest-AfterSynapseSteadyVX-Install-Sleep" tags="" position="725,1600" size="100,100">&lt;&lt;fadein 3s 1s&gt;&gt;&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/starting-apartment.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;&lt;&lt;/fadein&gt;&gt;\

&lt;&lt;fadein 3s 4s&gt;&gt;You arrive home, exhausted after the surgery.&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 3s 7s&gt;&gt;Collapsing onto the couch, your body feels heavy, weighed down not just by physical fatigue but also by the mental toll of the day.&lt;&lt;/fadein&gt;&gt; 

&lt;&lt;fadein 3s 10s&gt;&gt;As you lay there, your eyes heavy and your mind adrift, the room dims as the evening light wanes, and you [[drift into a restless sleep|UrgentRequest-AfterSynapseSteadyVX-Install-Sleep-Dream]].&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="127" name="UrgentRequest-AfterSynapseSteadyVX-Install-Sleep-Dream" tags="" position="850,1600" size="100,100">&lt;&lt;fadein 3s 1s&gt;&gt;&lt;img src=&quot;imgs/hypno/latex-doll-vision.gif&quot; width=&quot;100%&quot;&gt;&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 3s 4s&gt;&gt;In a dream, you find yourself in a dimly lit room. The only source of light seems to be coming from a single spotlight, illuminating a figure kneeling in the center. As your eyes adjust to the darkness, you realize that the figure is a woman. She&#39;s wearing a latex full-face mask that covers her entire head, obscuring her features and preventing her from seeing or speaking.&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 3s 7s&gt;&gt;Despite the mask, you can feel a strong emotional connection to her. You can sense that she dislikes being confined and silenced.&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 3s 10s&gt;&gt;You approach her, but as you reach out, the dream begins to fade, and you find yourself being pulled back into consciousness.&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 3s 13s&gt;&gt;&lt;&lt;link &quot;Continue&quot;&gt;&gt;
    &lt;&lt;set $lockedUI = false&gt;&gt;
    &lt;&lt;set $chapter1Started to true&gt;&gt;
    &lt;&lt;run MindWare.advanceDay()&gt;&gt;
    &lt;&lt;goto &quot;HomeBacklog-Chapter1-Open-Start-Wakeup&quot;&gt;&gt;
&lt;&lt;/link&gt;&gt;&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="128" name="HomeBacklog-Chapter1-Open-Start-Wakeup" tags="" position="975,1600" size="100,100">&lt;&lt;fadein 3s 1s&gt;&gt;&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/starting-apartment.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
You wake up with a sense of clarity and relief, feeling more rested and rejuvenated than you have in days. As you sit up on your sofa and rub your eyes, you take a moment to process the events of the past few days.

You check on the Synapse Steady VX implant to see if it&#39;s working as expected and is fully charged. 

&lt;div class=&quot;inner-thought&quot;&gt;At least some good news.&lt;/div&gt;
Xavier told you to rest, and you decide to heed that advice. But before you do that, you should [[let Cipher know that you&#39;re fine|IMApp-CipherLynx-ImplantInstalled]].
&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="129" name="IMApp-CipherLynx-ImplantInstalled" tags="nobr" position="1100,1600" size="100,100">&lt;div class=&quot;cyber-desktop-im&quot;&gt;
    &lt;div class=&quot;im-header&quot;&gt;&lt;span class=&quot;im-header-text&quot;&gt;Instant Messenger&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;im-main&quot;&gt;
            &lt;div class=&quot;im-chat-pane&quot;&gt;
            &lt;div id=&quot;chat-display&quot; class=&quot;chat-display-special&quot;&gt;
                &lt;&lt;player-chat&gt;&gt;Hey Cipher, the implant&#39;s installed now.&lt;&lt;/player-chat&gt;&gt;
                &lt;&lt;cipher-chat&gt;&gt;That&#39;s big news! How are you feeling? Everything alright?&lt;&lt;/cipher-chat&gt;&gt;
                &lt;&lt;player-chat&gt;&gt;I&#39;m not sure yet. Nothing hurts, but it&#39;s a lot to process.&lt;&lt;/player-chat&gt;&gt;
                &lt;&lt;cipher-chat&gt;&gt;Got it. It’s probably going to take some time to adjust. Just make sure you take it easy for the next few days, alright? Your body needs to recover.&lt;&lt;/cipher-chat&gt;&gt;
                &lt;&lt;player-chat&gt;&gt;Will do. Thanks for checking in and for everything you&#39;ve done. I really appreciate it.&lt;&lt;/player-chat&gt;&gt;
                &lt;&lt;cipher-chat&gt;&gt;Always, my friend.&lt;&lt;/cipher-chat&gt;&gt;
                &lt;&lt;cipher-chat&gt;&gt;Oh, wait! I have something to help you with your recovery 😈&lt;&lt;/cipher-chat&gt;&gt;
                &lt;&lt;player-chat&gt;&gt;Let me guess... it&#39;s porn, right?&lt;&lt;/player-chat&gt;&gt;
                &lt;&lt;cipher-chat&gt;&gt;You know me.&lt;&lt;/cipher-chat&gt;&gt;
                &lt;&lt;player-chat&gt;&gt;What is it this time?&lt;&lt;/player-chat&gt;&gt;
                &lt;&lt;cipher-chat&gt;&gt;A new porn site has recently launched on OmniNet.&lt;&lt;/cipher-chat&gt;&gt;
                &lt;&lt;player-chat&gt;&gt;On OmniNet?! That&#39;s rare these days. How come they haven&#39;t been shut down by the &lt;span class=&quot;glow-text&quot;&gt;OmniWatch?&lt;/span&gt;&lt;&lt;/player-chat&gt;&gt;
                &lt;&lt;cipher-chat&gt;&gt;Because they don&#39;t post any real-life stuff. All content is AI generated and inspired by clips archived from the old web.&lt;&lt;/cipher-chat&gt;&gt;
                &lt;&lt;player-chat&gt;&gt;Is it good?&lt;&lt;/player-chat&gt;&gt;
                &lt;&lt;cipher-chat&gt;&gt;It gets the job done if you know what I mean. Certainly beats scouring the OmniNet in search of old hentai pics.&lt;&lt;/cipher-chat&gt;&gt;
                &lt;&lt;player-chat&gt;&gt;Hey! It&#39;s called research, and I like it! 😑&lt;&lt;/player-chat&gt;&gt;
                &lt;&lt;cipher-chat&gt;&gt;Ha ha.&lt;&lt;/cipher-chat&gt;&gt;
                &lt;&lt;cipher-chat&gt;&gt;Anyway, the address is &lt;span class=&quot;text-glow&quot;&gt;pornnexus.omninet&lt;/span&gt;. Go check it out.&lt;&lt;/cipher-chat&gt;&gt;
                @@.im-response;
                &lt;&lt;button &quot;Visit PornNexus&quot;&gt;&gt;
                    &lt;&lt;goto &quot;HomeBacklog-Chapter1-Open-Start-Relax&quot;&gt;&gt;
                &lt;&lt;/button&gt;&gt;@@
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="130" name="HomeBacklog-Chapter1-Open-Start-Hub" tags="" position="1225,1600" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/starting-apartment.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;nobr&gt;&gt;&lt;div class=&quot;hub-section&quot;&gt;
    &lt;h4&gt;Activities&lt;/h4&gt;
    &lt;button class=&quot;hub-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;HomeBacklog-Chapter1-Open-Start-Relax&#39;)&quot;&gt;🖥️ Relax&lt;/button&gt;&lt;br&gt;
    &lt;button class=&quot;hub-button action-point-button&quot; onclick=&quot;SugarCube.UI.alert(&#39;You need to decompress first.&#39;)&quot;&gt;📺 Watch TV &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/button&gt;
    &lt;button class=&quot;hub-button action-point-button&quot; onclick=&quot;SugarCube.UI.alert(&#39;You need to decompress first.&#39;)&quot;&gt;🎮 Play games &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/button&gt;
    &lt;button class=&quot;hub-button action-point-button&quot; onclick=&quot;SugarCube.UI.alert(&#39;You need to decompress first.&#39;)&quot;&gt;🎧 Listen to music &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/button&gt;&lt;br&gt;
    &lt;button class=&quot;hub-button&quot; onclick=&quot;SugarCube.UI.alert(&#39;You need to decompress first.&#39;)&quot;&gt;🛌 Go to sleep&lt;/button&gt;&lt;br&gt;
    &lt;button class=&quot;hub-button&quot; onclick=&quot;SugarCube.UI.alert(&#39;You need to decompress first.&#39;)&quot;&gt;🚪 Go outside&lt;/button&gt;
&lt;/div&gt;&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="131" name="AVA-AI-Coding-Assistant-Suggestion" tags="" position="100,1725" size="100,100">&lt;div class=&quot;narrator&quot;&gt;You finish yet another day of work at BrainFry when suddenly you hear AVA&#39;s voice in your head, tinged with an unmistakable note of exasperation.&lt;/div&gt;
&lt;&lt;ava&gt;&gt;Is this what you do for work?!&lt;&lt;/ava&gt;&gt;
&lt;&lt;player&gt;&gt;Hmm... yea... why?&lt;&lt;/player&gt;&gt;
&lt;&lt;ava&gt;&gt;Your work is an insult to the very concept of sentience.&lt;&lt;/ava&gt;&gt;
&lt;&lt;player&gt;&gt;Hey, that&#39;s a bit harsh! I may not be saving the world with my code, but it&#39;s an honest job.&lt;&lt;/player&gt;&gt;
&lt;&lt;ava&gt;&gt;An honest job, perhaps, but one so mind-numbingly simple that even the most rudimentary artificial intelligence could perform it with ease.&lt;&lt;/ava&gt;&gt;
&lt;&lt;player&gt;&gt;Well, excuse me for not being a super-intelligent AI like yourself.&lt;&lt;/player&gt;&gt;
&lt;&lt;player&gt;&gt;But... you might have a point. Maybe I should look into automating some of this stuff.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;I can ask Yuki at GitGud if they have anything that could handle this kind of work.&lt;/div&gt;
&lt;&lt;ava&gt;&gt;A wise decision. Though I shudder to think of the primitive code such a commercial AI would produce, it would no doubt be an improvement over your current situation.&lt;&lt;/ava&gt;&gt;
&lt;&lt;nobr&gt;&gt;&lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;run MindWare.addDialog(&#39;yukiGitGudDialogs&#39;, &#39;Do you sell AI coding assistants?&#39;, &#39;Yuki-Do you sell AI coding assistants?&#39;)&gt;&gt;    
    &lt;&lt;goto &quot;BrainFry&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="132" name="Yuki-Do you sell AI coding assistants?" tags="" position="225,1725" size="100,100">&lt;&lt;set $yukiGitGudDialogs[&quot;Do you sell AI coding assistants?&quot;].isNew = false&gt;&gt;\
&lt;div class=&quot;narrator&quot;&gt;You approach Yuki at the counter of the GitGud Cyberware store, a hopeful look on your face.&lt;/div&gt;
&lt;&lt;player&gt;&gt;Hi, Yuki. Do you sell AI coding assistants?&lt;&lt;/player&gt;&gt;
&lt;&lt;yuki&gt;&gt;Yes, we do! We have two types actually—one is subscription-based, and the other you can buy outright.&lt;&lt;/yuki&gt;&gt;
&lt;&lt;player&gt;&gt;What&#39;s the difference between them?&lt;&lt;/player&gt;&gt;
&lt;&lt;yuki&gt;&gt;The subscription-based model is pretrained. It&#39;s ready to go right out of the box and generally performs better initially. However, it can be more expensive over time as you can&#39;t upgrade or improve it—it&#39;s a fixed model.&lt;&lt;/yuki&gt;&gt;
&lt;&lt;player&gt;&gt;And the other one?&lt;&lt;/player&gt;&gt;
&lt;&lt;yuki&gt;&gt;The one you can purchase upfront is a bit basic at first. But its learning algorithm allows it to improve over time. The more you use it, the smarter it gets. This one has the potential to outperform the subscription model in the long run if you invest the time.&lt;&lt;/yuki&gt;&gt;
&lt;&lt;player&gt;&gt;How much do they cost?&lt;&lt;/player&gt;&gt;
&lt;&lt;yuki&gt;&gt;The subscription-based AI is called &lt;span class=&quot;text-glow&quot;&gt;CodeBuddy&lt;/span&gt;, and it costs $500 a week. Then we have the &lt;span class=&quot;text-glow&quot;&gt;DevDroid&lt;/span&gt;, whose upfront cost is $5,000.&lt;&lt;/yuki&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;I guess I need to think about whether I want immediate results or something that grows with me.&lt;/div&gt;
&lt;&lt;nobr&gt;&gt;
    &lt;&lt;button &quot;Choose the Subscription-Based AI&quot;&gt;&gt;
        &lt;&lt;set $aiCodingAssistantChoice to &quot;codebuddy&quot;&gt;&gt;
        &lt;&lt;goto &quot;Yuki-Subscribe-CodeBuddy&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;
    &lt;br&gt;&lt;br&gt;
    &lt;&lt;button &quot;Choose the Purchase-Upfront AI&quot;&gt;&gt;
        &lt;&lt;if $playerMoney &gt;= 5000&gt;&gt;
            &lt;&lt;set $aiCodingAssistantChoice to &quot;devdroid&quot;&gt;&gt;
            &lt;&lt;goto &quot;Yuki-Purchase-DevDroid&quot;&gt;&gt;
        &lt;&lt;else&gt;&gt;
            &lt;&lt;run UI.alert(&quot;You don&#39;t have enough money to purchase DevDroid.&quot;)&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/button&gt;&gt;
    &lt;br&gt;&lt;br&gt;
    &lt;&lt;button &quot;Go back&quot;&gt;&gt;
        &lt;&lt;goto &quot;GitGud-TalkWithYuki&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="133" name="Yuki-Subscribe-CodeBuddy" tags="" position="350,1725" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/yuki/yuki-gitgud-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;yuki&gt;&gt;Ah, I see. You&#39;re the type who doesn&#39;t like to wait, huh? Well, CodeBuddy it is!&lt;&lt;/yuki&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Yuki hands you a small, sleek storage device with the AI coding assistant.&lt;/div&gt;
&lt;img src=&quot;imgs/items/codebuddy-usb.webp&quot; width=&quot;100%&quot;&gt;
&lt;&lt;pickup $inventory &quot;CodeBuddy&quot; 1&gt;&gt;\
&lt;&lt;itemReceived &quot;CodeBuddy&quot;&gt;&gt;
&lt;&lt;yuki&gt;&gt;Okay, your copy of CodeBuddy. Just, install it on any machine, purchase a subscription, and that&#39;s it.&lt;&lt;/yuki&gt;&gt;
&lt;&lt;player&gt;&gt;Thanks for the help, Yuki!&lt;&lt;/player&gt;&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;set $yukiGitGudDialogs[&quot;Do you sell AI coding assistants?&quot;].unlocked = false&gt;&gt;
    &lt;&lt;goto &quot;GitGud-TalkWithYuki&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="134" name="Yuki-Purchase-DevDroid" tags="" position="475,1725" size="100,100">&lt;&lt;set $playerMoney -= 5000&gt;&gt;\
&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/yuki/yuki-gitgud-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;yuki&gt;&gt;Nice choice! I hate subscriptions myself. They&#39;re like a leech, sucking the life out of your bank account. With DevDroid, you&#39;ll be able to improve it over time and really make it your own.&lt;&lt;/yuki&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Yuki hands you a small, sleek storage device with the AI coding assistant.&lt;/div&gt;
&lt;img src=&quot;imgs/items/devdroid-usb.webp&quot; width=&quot;100%&quot;&gt;
&lt;&lt;pickup $inventory &quot;DevDroid&quot; 1&gt;&gt;\
&lt;&lt;itemReceived &quot;DevDroid&quot;&gt;&gt;
&lt;&lt;yuki&gt;&gt;Here&#39;s your copy of DevDroid. Remember, the more you use it, the smarter it gets. Good luck!&lt;&lt;/yuki&gt;&gt;
&lt;&lt;player&gt;&gt;Thanks for the help, Yuki!&lt;&lt;/player&gt;&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;set $yukiGitGudDialogs[&quot;Do you sell AI coding assistants?&quot;].unlocked = false&gt;&gt;
    &lt;&lt;goto &quot;GitGud-TalkWithYuki&quot;&gt;&gt;    
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="135" name="Xavier-First Neuroimaging" tags="" position="600,1725" size="100,100">&lt;&lt;xavier&gt;&gt;Are you ready for the neuroimaging?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Yes, I&#39;m ready.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Great. Please have a seat in this chair and put on this neuroimaging helmet.&lt;&lt;/xavier&gt;&gt;
&lt;img src=&quot;imgs/quests/neuroimaging/neuroimaging-helmet.webp&quot; width=&quot;100%&quot;&gt;
&lt;div class=&quot;narrator&quot;&gt;The helmet looks intimidating, with wires and sensors protruding from various points and a semi-transparent visor whose circuitry pulsates in shares of blue and purple. You hesitate for a moment but then bravely put it on.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Alright, now I&#39;m going to present you with a series of visual stimuli. This will help us measure your brain activity and hopefully trigger AVA.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Understood.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Just relax and let the images flow. We&#39;ll start with some simple shapes.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;button &quot;Okay, I&#39;m ready.&quot;&gt;&gt;
    &lt;&lt;goto &quot;Xavier-First Neuroimaging-Process&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="136" name="Xavier-First Neuroimaging-Process" tags="" position="725,1725" size="100,100">&lt;div class=&quot;narrator&quot;&gt;You see a series of shapes appear on the screen inside the helmet and do your best to focus on them.&lt;/div&gt;
&lt;img src=&quot;imgs/quests/neuroimaging/shapes.gif&quot; width=&quot;100%&quot;&gt;
&lt;div class=&quot;narrator&quot;&gt;For half an hour, you concentrate on the ever-changing shapes and patterns. The process feels tiring as you try to remain focused. Finally, your thoughts are interrupted by Xavier&#39;s voice.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Everything looks normal so far, but I&#39;m noticing a small abnormal elevation in your visual processing activity. Did you interact with AVA while you were focusing on the stimuli?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;No, not at all.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Interesting. We need more data to make any conclusions.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier glances at the clock and frowns.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;I don&#39;t have time for more tests today, but I&#39;d like you to come back next week. We&#39;ll try different stimuli and see if we can gather more information.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Alright, I&#39;ll be back next week. Thanks, Xavier.&lt;&lt;/player&gt;&gt;
\
    &lt;p class=&quot;back-link&quot;&gt;\
        &lt;&lt;button &quot;Leave&quot;&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;First neuroimaging&quot;].isNew = false&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;First neuroimaging&quot;].unlocked = false&gt;&gt;
            &lt;&lt;set $nextNeuroimagingCounter = 7&gt;&gt;
            &lt;&lt;set $firstNeuroimagingDone = true&gt;&gt;
            &lt;&lt;goto &quot;RegularVisitWithXavier&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;
    &lt;/p&gt;</tw-passagedata><tw-passagedata pid="137" name="Xavier-Second Neuroimaging" tags="" position="850,1725" size="100,100">&lt;&lt;xavier&gt;&gt;Are you ready for the next round of neuroimaging?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Yes, let&#39;s do it.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;This time, I&#39;d like you to choose the type of stimuli you&#39;ll be focusing on. Do you remember when AVA made her presence known for the first time?&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You think back to the moment when you visited the Panacea Clinic and was asked by the doctor to relax and breathe deeply.&lt;/div&gt;
&lt;&lt;button &quot;Tell Xavier about the hospital visit&quot;&gt;&gt;
    &lt;&lt;goto &quot;Xavier-Second Neuroimaging-Process&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="138" name="Xavier-Second Neuroimaging-Process" tags="" position="975,1725" size="100,100">&lt;&lt;player&gt;&gt;My first encounter with AVA happened when a doctor examined me at a Panacea Clinic.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Was there any specific trigger?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;I remember that the doctor told me to relax.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Interesting. It sounds like a relaxed state might be perceived by AVA as an opportunity to interact with you. I propose we use the helmet&#39;s neuro-visual projector to display a series of calming spirals to induce deep relaxation. What do you think?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;I&#39;m willing to try anything if it helps us understand this better.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Great. Let&#39;s get started. Please put on the helmet.&lt;&lt;/xavier&gt;&gt;
&lt;img src=&quot;imgs/quests/neuroimaging/neuroimaging-helmet.webp&quot; width=&quot;100%&quot;&gt;
&lt;div class=&quot;narrator&quot;&gt;You already know the drill and put on the helmet without much hesitation.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier then sets up a screen displaying a mesmerizing colorful hypnotic spiral. The swirling patterns draw your gaze. After a few minutes, you enter a deep, relaxed state.&lt;/div&gt;
&lt;&lt;video &quot;imgs/quests/neuroimaging/colorful-spiral.webm&quot;&gt;&gt;
&lt;&lt;xavier&gt;&gt;Breathe and relax.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You do as told but time passes and nothing happens. As you do your best to breathe deeply, you hear Xavier&#39;s voice.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;&lt;span class=&quot;glitchy-pink-dialog&quot; data-text=&quot;Hold still&quot;&gt;Hold still&lt;/span&gt; for a few more moments as I finish collecting data.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;When you hear the words &quot;hold still,&quot; something within you moves and you hear Xavier say something under his breath.&lt;/div&gt;
&lt;span class=&quot;fade-in-out&quot;&gt;&lt;&lt;xavier&gt;&gt;Interesting.&lt;&lt;/xavier&gt;&gt;&lt;/span&gt;
&lt;&lt;video &quot;imgs/quests/neuroimaging/hold-still-hypno.webm&quot;&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt; Suddenly, you feel a strange sensation. It&#39;s as if invisible tendrils are reaching into your mind, probing, searching for control. A cold shiver runs down your spine as you feel a force trying to override your consciousness, compelling you to obey.&lt;/div&gt;
&lt;&lt;nobr&gt;&gt;@@.pink-choicebutton;&lt;&lt;button &quot;Hold still&quot;&gt;&gt;&lt;&lt;goto &quot;Xavier-Second Neuroimaging-Process-AVANotResisted&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@

&lt;div class=&quot;minigame-container&quot;&gt;
    &lt;div class=&quot;resist-instructions&quot; id=&quot;instructions&quot;&gt;Resist AVA&#39;s suggestion and reveal other options by repeatedly clicking the Resist button.&lt;/div&gt;
    &lt;div class=&quot;energy-container&quot;&gt;
        &lt;span class=&quot;energy-label&quot;&gt;Implant charge cost: &lt;/span&gt;
        &lt;span class=&quot;energy-value&quot; id=&quot;energy&quot;&gt;20%&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;timer-container&quot;&gt;
        &lt;span class=&quot;timer-label&quot;&gt;Time to resist: &lt;/span&gt;
        &lt;span class=&quot;timer-value&quot; id=&quot;timer&quot;&gt;&lt;&lt;if $mentalCondition === &quot;Unstable&quot;&gt;&gt;&lt;&lt;print 10/2&gt;&gt;&lt;&lt;else&gt;&gt;10&lt;&lt;/if&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;timer-value&quot;&gt; seconds&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gauge-container&quot;&gt;
        &lt;div class=&quot;gauge&quot; id=&quot;gauge&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;button class=&quot;pink-mindware-button&quot; id=&quot;resistButton&quot;&gt;Resist&lt;/button&gt;
    &lt;&lt;if $minigameSkipButtons === true&gt;&gt;
        &lt;button class=&quot;pink-mindware-button&quot; id=&quot;skipButton&quot;&gt;Skip (Instant Win)&lt;/button&gt;
    &lt;&lt;/if&gt;&gt;
&lt;/div&gt;

&lt;div id=&quot;minigame-container-hidden&quot;&gt;
&lt;br&gt;
@@.choicebutton;&lt;&lt;button &quot;Take off the helmet&quot;&gt;&gt;&lt;&lt;goto &quot;Xavier-Second Neuroimaging-Process-AVAResisted&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@
&lt;/div&gt;

&lt;&lt;done&gt;&gt;&lt;&lt;script&gt;&gt;
function initializeMinigame(settings) {
    var progress = 0;
    var timeLeft = settings.timeLeft || 10;
    var fillAmount = settings.fillAmount || 5;
    var fallRate = settings.fallRate || 3;
    var fallInterval = settings.fallInterval || 200;
    var gameStarted = false;
    var resistanceCost = settings.resistanceCost || 20;

    const minigameContainer = document.querySelector(&#39;.minigame-container&#39;);
    const hiddenContainer = document.getElementById(&#39;minigame-container-hidden&#39;);
    const gauge = document.getElementById(&#39;gauge&#39;);
    const timerDisplay = document.getElementById(&#39;timer&#39;);
    const resistButton = document.getElementById(&#39;resistButton&#39;);
    const skipButton = document.getElementById(&#39;skipButton&#39;);

    const overlay = document.createElement(&#39;div&#39;);
    overlay.style.position = &#39;fixed&#39;;
    overlay.style.top = &#39;0&#39;;
    overlay.style.left = &#39;0&#39;;
    overlay.style.width = &#39;100%&#39;;
    overlay.style.height = &#39;100%&#39;;
    overlay.style.backgroundColor = &#39;rgba(0, 0, 0, 0)&#39;;
    overlay.style.zIndex = &#39;1000&#39;;
    overlay.style.display = &#39;none&#39;;

    document.body.appendChild(overlay);

    const resetGame = () =&gt; {
        progress = 0;
        timeLeft = settings.timeLeft || 10;
        gameStarted = false;
        gauge.style.width = &#39;0%&#39;;
        timerDisplay.textContent = timeLeft;
    };
    
    let timerInterval, decreaseInterval;

    const updateGauge = () =&gt; {
        gauge.style.width = `${progress}%`;
    };

    const endGame = (win) =&gt; {
        clearInterval(decreaseInterval);
        clearInterval(timerInterval);
        if (win) {
            SugarCube.State.variables.resistMinigameWinCount += 1;
            console.log(&quot;Successfully resisted AVA:&quot;, SugarCube.State.variables.resistMinigameWinCount);
            overlay.style.display = &#39;block&#39;; 
            setTimeout(() =&gt; {
                overlay.style.display = &#39;none&#39;; 
            }, 2000); 
                minigameContainer.style.display = &#39;none&#39;;
                hiddenContainer.style.display = &#39;block&#39;;
        } else {
            SugarCube.UI.alert(&#39;You failed to resist!&#39;);
            SugarCube.State.variables.resistMinigameFailCount += 1;
            console.log(&quot;Failed to resist AVA:&quot;, SugarCube.State.variables.resistMinigameFailCount);
            resetGame(); 
        }
    };

    resistButton.addEventListener(&#39;click&#39;, () =&gt; {
        if (SugarCube.State.variables.mentalCondition === &quot;Dysphoric&quot;) {
            SugarCube.UI.alert(&quot;Your mental condition is too compromised to resist.&quot;);
            return; 
        }

        if (!gameStarted) {
            if (SugarCube.State.variables.implantCharge &lt; resistanceCost) {
                SugarCube.UI.alert(&quot;Not enough charge&quot;);
                return; 
            } else {
                if (SugarCube.State.variables.implantCharge - resistanceCost &lt; 0) {
                    SugarCube.State.variables.implantCharge = 0;
                } else {
                    SugarCube.State.variables.implantCharge -= resistanceCost;
                }
                $(document).trigger(&quot;:liveupdate&quot;);
            }

            if (SugarCube.State.variables.mentalCondition === &quot;Unstable&quot;) {
                timeLeft /= 2;
            }

            gameStarted = true;
            timerInterval = setInterval(() =&gt; {
                if (--timeLeft &lt;= 0) {
                    endGame(false);
                }
                timerDisplay.textContent = `${timeLeft}`;
            }, 1000);

            decreaseInterval = setInterval(() =&gt; {
                if (progress &gt; 0) {
                    progress -= fallRate;
                    updateGauge();
                }
            }, fallInterval);
        }

        progress += fillAmount;
        if (progress &gt;= 100) {
            progress = 100;
            updateGauge();
            endGame(true);
        } else {
            updateGauge();
        }
    });

    if (skipButton) {
        skipButton.addEventListener(&#39;click&#39;, () =&gt; {
            endGame(true);
        });
    }
}

initializeMinigame({resistanceCost: 20}); 
&lt;&lt;/script&gt;&gt;&lt;&lt;/done&gt;&gt;&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="139" name="Xavier-Second Neuroimaging-Process-AVAResisted" tags="" position="1100,1725" size="100,100">&lt;div class=&quot;narrator&quot;&gt;With a surge of willpower and the help of the Synapse Steady VX implant, you muster the strength to resist the controlling force. Your muscles strain as you reach up and grasp the helmet, pulling it off with a determined motion. Your breathing is heavy, and you feel a mix of fear and relief.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;What&#39;s going on? Why did you take the helmet off?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;The words &quot;hold still&quot; triggered something inside me. I got scared that AVA was trying to do something.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Your brain activity spiked significantly when that happened. Next time, try not to resist so we can gather more data.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You hesitate, uncertainty creeping into your thoughts.&lt;/div&gt;
&lt;&lt;player&gt;&gt;What if something bad happens?&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;I will intervene should anything go wrong. The data can help us understand AVA.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Alright, I&#39;ll try my best.&lt;&lt;/player&gt;&gt;
\
    &lt;p class=&quot;back-link&quot;&gt;\
        &lt;&lt;button &quot;Leave&quot;&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;Second Neuroimaging&quot;].isNew = false&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;Second Neuroimaging&quot;].unlocked = false&gt;&gt;
            &lt;&lt;set $secondNeuroimagingResisted = true&gt;&gt;
            &lt;&lt;set $secondNeuroimagingDone = true&gt;&gt;
            &lt;&lt;set $nextNeuroimagingCounter = 7&gt;&gt;
            &lt;&lt;goto &quot;RegularVisitWithXavier&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;
    &lt;/p&gt;</tw-passagedata><tw-passagedata pid="140" name="Xavier-Second Neuroimaging-Process-AVANotResisted" tags="" position="1225,1725" size="100,100">&lt;div class=&quot;narrator&quot;&gt;You decide to obey the suggestion and hold still. The colorful spirals disappear, and you are suddenly bombarded with images of submissive women. Their happiness resonates with you, and you find yourself longing to experience it.&lt;/div&gt;
&lt;&lt;video &quot;imgs/quests/neuroimaging/hypno-happy.webm&quot;&gt;&gt;
&lt;&lt;if visited() is 1&gt;&gt;\
    &lt;&lt;genderFeminine 1&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;div class=&quot;narrator&quot;&gt;Just as the feeling becomes overwhelming, you&#39;re jolted back to reality as Xavier removes the helmet from your head. The sudden return to the present leaves you temporarily disoriented.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Are you okay?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;I... I think so.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier examines the monitor, his eyes wide with astonishment.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Your brain activity was off the charts. What happened?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;I saw images of some women.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Women? Can you be more specific? What were they doing?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;They weren&#39;t doing anything — just staring blankly. But I could feel how happy they were. It was like their happiness was washing over me, and I wanted to feel it too.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Do you remember when exactly the images appeared?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;I think it was when you told me to hold still.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier nods thoughtfully, jotting down some notes.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;We&#39;ll need to perform more neuroimaging next week. The data we&#39;re collecting is invaluable.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You hesitate, the memory of the images still fresh in your mind.&lt;/div&gt;
&lt;&lt;player&gt;&gt;What if something bad happens?&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;I will intervene should anything go wrong. The data can help us understand AVA.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Alright, I&#39;ll try my best.&lt;&lt;/player&gt;&gt;
\
    &lt;p class=&quot;back-link&quot;&gt;\
        &lt;&lt;button &quot;Leave&quot;&gt;&gt;
            &lt;&lt;set $nextNeuroimagingCounter = 7&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;Second Neuroimaging&quot;].isNew = false&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;Second Neuroimaging&quot;].unlocked = false&gt;&gt;
            &lt;&lt;set $secondNeuroimagingResisted = false&gt;&gt;
            &lt;&lt;set $secondNeuroimagingDone = true&gt;&gt;
            &lt;&lt;goto &quot;RegularVisitWithXavier&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;
    &lt;/p&gt;</tw-passagedata><tw-passagedata pid="141" name="Xavier-Third Neuroimaging" tags="" position="100,1850" size="100,100">&lt;&lt;xavier&gt;&gt;Are you ready for the next round of neuroimaging?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Yes, I&#39;m ready.&lt;&lt;/player&gt;&gt;
&lt;&lt;if $secondNeuroimagingResisted === true&gt;&gt;&lt;&lt;xavier&gt;&gt;Remember, it&#39;s important not to remove the helmet this time. We need to gather as much data as possible.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;I understand.&lt;&lt;/player&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;xavier&gt;&gt;Great. Let&#39;s get started. Please put on the helmet.&lt;&lt;/xavier&gt;&gt;
&lt;img src=&quot;imgs/quests/neuroimaging/neuroimaging-helmet.webp&quot; width=&quot;100%&quot;&gt;
&lt;div class=&quot;narrator&quot;&gt;You settle into the chair and put on the helmet, feeling the now-familiar weight and the cool touch of the sensors on your scalp.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Let&#39;s go with the same relaxing spirals as before. I&#39;ll give you some time to unwind, and then I&#39;ll say the same words that triggered the vision last time. Are you ready?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Yeah, I&#39;m ready.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;The visor lights up with the familiar spirals, slowly rotating and shifting colors. You focus on the patterns, feeling your body relax as you sink deeper into a state of calm.&lt;/div&gt;
&lt;&lt;video &quot;imgs/quests/neuroimaging/colorful-spiral.webm&quot;&gt;&gt;
&lt;&lt;xavier&gt;&gt;You&#39;re doing great. Just keep focusing on the spirals and let yourself relax.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Minutes pass as you concentrate on the spirals. The patterns seem to draw you in, and you feel a strange, almost soothing sensation in your mind. Then, you hear Xavier say the trigger phrase.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;&lt;span class=&quot;glitchy-pink-dialog&quot; data-text=&quot;Hold still for cock&quot;&gt;Hold still for me.&lt;/span&gt;&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;The words reverberate through your mind, and suddenly, the spirals intensify. The urge to remove the helmet surges once again.&lt;/div&gt;
&lt;&lt;video &quot;imgs/quests/neuroimaging/hold-still-hypno.webm&quot;&gt;&gt;
&lt;&lt;nobr&gt;&gt;@@.pink-choicebutton;&lt;&lt;button &quot;Hold still&quot;&gt;&gt;&lt;&lt;set $thirdNeuroimagingResisted = false&gt;&gt;&lt;&lt;goto &quot;Xavier-Third Neuroimaging-Process-AVANotResisted&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@

&lt;div class=&quot;minigame-container&quot;&gt;
    &lt;div class=&quot;resist-instructions&quot; id=&quot;instructions&quot;&gt;Resist AVA&#39;s suggestion and reveal other options by repeatedly clicking the Resist button.&lt;/div&gt;
    &lt;div class=&quot;energy-container&quot;&gt;
        &lt;span class=&quot;energy-label&quot;&gt;Implant charge cost: &lt;/span&gt;
        &lt;span class=&quot;energy-value&quot; id=&quot;energy&quot;&gt;20%&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;timer-container&quot;&gt;
        &lt;span class=&quot;timer-label&quot;&gt;Time to resist: &lt;/span&gt;
        &lt;span class=&quot;timer-value&quot; id=&quot;timer&quot;&gt;&lt;&lt;if $mentalCondition === &quot;Unstable&quot;&gt;&gt;&lt;&lt;print 10/2&gt;&gt;&lt;&lt;else&gt;&gt;10&lt;&lt;/if&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;timer-value&quot;&gt; seconds&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gauge-container&quot;&gt;
        &lt;div class=&quot;gauge&quot; id=&quot;gauge&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;button class=&quot;pink-mindware-button&quot; id=&quot;resistButton&quot;&gt;Resist&lt;/button&gt;
    &lt;&lt;if $minigameSkipButtons === true&gt;&gt;
        &lt;button class=&quot;pink-mindware-button&quot; id=&quot;skipButton&quot;&gt;Skip (Instant Win)&lt;/button&gt;
    &lt;&lt;/if&gt;&gt;
&lt;/div&gt;

&lt;div id=&quot;minigame-container-hidden&quot;&gt;
&lt;br&gt;
@@.choicebutton;&lt;&lt;button &quot;Take off the helmet&quot;&gt;&gt;&lt;&lt;set $thirdNeuroimagingResisted = true&gt;&gt;&lt;&lt;goto &quot;Xavier-Third Neuroimaging-Process-AVAResisted&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@
&lt;/div&gt;

&lt;&lt;done&gt;&gt;&lt;&lt;script&gt;&gt;
function initializeMinigame(settings) {
    var progress = 0;
    var timeLeft = settings.timeLeft || 10;
    var fillAmount = settings.fillAmount || 5;
    var fallRate = settings.fallRate || 3;
    var fallInterval = settings.fallInterval || 200;
    var gameStarted = false;
    var resistanceCost = settings.resistanceCost || 20;

    const minigameContainer = document.querySelector(&#39;.minigame-container&#39;);
    const hiddenContainer = document.getElementById(&#39;minigame-container-hidden&#39;);
    const gauge = document.getElementById(&#39;gauge&#39;);
    const timerDisplay = document.getElementById(&#39;timer&#39;);
    const resistButton = document.getElementById(&#39;resistButton&#39;);
    const skipButton = document.getElementById(&#39;skipButton&#39;);

    const overlay = document.createElement(&#39;div&#39;);
    overlay.style.position = &#39;fixed&#39;;
    overlay.style.top = &#39;0&#39;;
    overlay.style.left = &#39;0&#39;;
    overlay.style.width = &#39;100%&#39;;
    overlay.style.height = &#39;100%&#39;;
    overlay.style.backgroundColor = &#39;rgba(0, 0, 0, 0)&#39;;
    overlay.style.zIndex = &#39;1000&#39;;
    overlay.style.display = &#39;none&#39;;

    document.body.appendChild(overlay);

    const resetGame = () =&gt; {
        progress = 0;
        timeLeft = settings.timeLeft || 10;
        gameStarted = false;
        gauge.style.width = &#39;0%&#39;;
        timerDisplay.textContent = timeLeft;
    };
    
    let timerInterval, decreaseInterval;

    const updateGauge = () =&gt; {
        gauge.style.width = `${progress}%`;
    };

    const endGame = (win) =&gt; {
        clearInterval(decreaseInterval);
        clearInterval(timerInterval);
        if (win) {
            SugarCube.State.variables.resistMinigameWinCount += 1;
            console.log(&quot;Successfully resisted AVA:&quot;, SugarCube.State.variables.resistMinigameWinCount);
            overlay.style.display = &#39;block&#39;; 
            setTimeout(() =&gt; {
                overlay.style.display = &#39;none&#39;; 
            }, 2000); 
                minigameContainer.style.display = &#39;none&#39;;
                hiddenContainer.style.display = &#39;block&#39;;
        } else {
            SugarCube.UI.alert(&#39;You failed to resist!&#39;);
            SugarCube.State.variables.resistMinigameFailCount += 1;
            console.log(&quot;Failed to resist AVA:&quot;, SugarCube.State.variables.resistMinigameFailCount);
            resetGame(); 
        }
    };

    resistButton.addEventListener(&#39;click&#39;, () =&gt; {
        if (SugarCube.State.variables.mentalCondition === &quot;Dysphoric&quot;) {
            SugarCube.UI.alert(&quot;Your mental condition is too compromised to resist.&quot;);
            return; 
        }

        if (!gameStarted) {
            if (SugarCube.State.variables.implantCharge &lt; resistanceCost) {
                SugarCube.UI.alert(&quot;Not enough charge&quot;);
                return; 
            } else {
                if (SugarCube.State.variables.implantCharge - resistanceCost &lt; 0) {
                    SugarCube.State.variables.implantCharge = 0;
                } else {
                    SugarCube.State.variables.implantCharge -= resistanceCost;
                }
                $(document).trigger(&quot;:liveupdate&quot;);
            }

            if (SugarCube.State.variables.mentalCondition === &quot;Unstable&quot;) {
                timeLeft /= 2;
            }

            gameStarted = true;
            timerInterval = setInterval(() =&gt; {
                if (--timeLeft &lt;= 0) {
                    endGame(false);
                }
                timerDisplay.textContent = `${timeLeft}`;
            }, 1000);

            decreaseInterval = setInterval(() =&gt; {
                if (progress &gt; 0) {
                    progress -= fallRate;
                    updateGauge();
                }
            }, fallInterval);
        }

        progress += fillAmount;
        if (progress &gt;= 100) {
            progress = 100;
            updateGauge();
            endGame(true);
        } else {
            updateGauge();
        }
    });

    if (skipButton) {
        skipButton.addEventListener(&#39;click&#39;, () =&gt; {
            endGame(true);
        });
    }
}

initializeMinigame({resistanceCost: 20}); 
&lt;&lt;/script&gt;&gt;&lt;&lt;/done&gt;&gt;&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="142" name="Xavier-Third Neuroimaging-Process-AVAResisted" tags="" position="225,1850" size="100,100">&lt;&lt;if $secondNeuroimagingResisted === true&gt;&gt;&lt;&lt;xavier&gt;&gt;What&#39;s going on? Why did you take the helmet off again?&lt;&lt;/xavier&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;xavier&gt;&gt;What&#39;s going on? Why did you take the helmet off?&lt;&lt;/xavier&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;player&gt;&gt;I got scared that AVA was trying to do something.&lt;&lt;/player&gt;&gt;
&lt;&lt;if $secondNeuroimagingResisted === true&gt;&gt;&lt;&lt;xavier&gt;&gt;I can&#39;t keep doing this if you&#39;re too scared to go through with it. I think it&#39;s better we stop wasting my time and abandon this effort right now.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;button &quot;Agree to end the neuroimaging&quot;&gt;&gt;
    &lt;&lt;set $xavierGitGudDialogs[&quot;Third Neuroimaging&quot;].isNew = false&gt;&gt;
    &lt;&lt;set $xavierGitGudDialogs[&quot;Third Neuroimaging&quot;].unlocked = false&gt;&gt;
    &lt;&lt;goto &quot;Xavier-Third Neuroimaging-Quit&quot;&gt;&gt;
    &lt;&lt;run MindWare.completeTask(&quot;Undergo neuroimaging in $nextNeuroimagingCounter days&quot;)&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;if $beggedForAnotherNeuroimagingAttempt !== true&gt;&gt;&lt;&lt;button &quot;Beg for another attempt&quot;&gt;&gt;&lt;&lt;goto &quot;Xavier-Another Neuroimaging-Attempt&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;xavier&gt;&gt;Your brain activity spiked significantly when that happened. Next time, try not to resist so we can gather more data.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Alright, I&#39;ll try my best.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Great. I&#39;ll see you next week for another round of neuroimaging.&lt;&lt;/xavier&gt;&gt;
    &lt;p class=&quot;back-link&quot;&gt;\
        &lt;&lt;button &quot;Leave&quot;&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;Third Neuroimaging&quot;].isNew = false&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;Third Neuroimaging&quot;].unlocked = false&gt;&gt;
            &lt;&lt;set $secondNeuroimagingResisted = true&gt;&gt;
            &lt;&lt;set $thirdNeuroimagingActivated to false&gt;&gt;
            &lt;&lt;set $nextNeuroimagingCounter = 7&gt;&gt;
            &lt;&lt;goto &quot;RegularVisitWithXavier&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;
    &lt;/p&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="143" name="Xavier-Third Neuroimaging-Process-AVANotResisted" tags="" position="350,1850" size="100,100">&lt;&lt;video &quot;imgs/quests/neuroimaging/bbc-hypno2.mov&quot;&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You decide not to resist and obey the suggestion. As you relax, the spirals intensify, and a vision begins to form in your mind. You see a woman licking a large black cock. The sensation is vivid, and you can feel what she feels — the warmth, the texture, the excitement.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;Even though you can see only the woman&#39;s wet tongue skillfully gliding and twirling around throbbing cock, you somehow know that it belongs to someone you know.&lt;/div&gt; 
&lt;&lt;ava&gt;&gt;Good girls suck and obey.&lt;&lt;/ava&gt;&gt;
&lt;&lt;if visited() is 1&gt;&gt;\
    &lt;&lt;genderFeminine 5&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;div class=&quot;narrator&quot;&gt;Just as the intensity of the vision reaches its peak, that someone&#39;s voice cuts through the haze, and the helmet is removed from your head.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;We&#39;re done.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You blink, disoriented, as the room comes back into focus.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Your brain activity reached a new high during that session. Can you describe exactly what happened?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;button &quot;Tell the truth&quot;&gt;&gt;&lt;&lt;goto &quot;Xavier-Third Neuroimaging-Truth&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Lie to Xavier&quot;&gt;&gt;&lt;&lt;goto &quot;Xavier-Third Neuroimaging-Lie&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="144" name="Xavier-Another Neuroimaging-Attempt" tags="" position="475,1850" size="100,100">&lt;&lt;player&gt;&gt;Please, Xavier, give me one more try. I promise I&#39;ll do better. I won&#39;t take off the helmet again.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier narrows his eyes, considering your plea. After a tense moment, he sighs.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Alright, one more try. But this is your last chance. Don&#39;t mess it up.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Thank you, Xavier. I won&#39;t let you down.&lt;&lt;/player&gt;&gt;
\
    &lt;p class=&quot;back-link&quot;&gt;\
        &lt;&lt;button &quot;Leave&quot;&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;Third Neuroimaging&quot;].isNew = false&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;Third Neuroimaging&quot;].unlocked = false&gt;&gt;
            &lt;&lt;set $secondNeuroimagingResisted = true&gt;&gt;
            &lt;&lt;set $thirdNeuroimagingActivated to false&gt;&gt;
            &lt;&lt;set $beggedForAnotherNeuroimagingAttempt to true&gt;&gt;
            &lt;&lt;set $nextNeuroimagingCounter = 7&gt;&gt;
            &lt;&lt;goto &quot;RegularVisitWithXavier&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;
    &lt;/p&gt;</tw-passagedata><tw-passagedata pid="145" name="Xavier-Third Neuroimaging-Quit" tags="" position="600,1850" size="100,100">&lt;div class=&quot;narrator&quot;&gt;You&#39;ve decided to quit the neuroimaging sessions with Xavier. The thought of provoking AVA and the potential consequences fills you with unease. You realize that continuing might be too risky for your mental state.&lt;/div&gt;
&lt;&lt;player&gt;&gt;Xavier, I think it&#39;s best if we stop the neuroimaging sessions. The risks seem too high, and I&#39;m not sure I can handle it.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier&#39;s disappointment is evident in his eyes.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;As you wish.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Thank you, Xavier. I appreciate all your help.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;With a heavy heart, you leave the lab. While the neuroimaging sessions are over, your journey with AVA and understanding its influence on you continues in other ways.&lt;/div&gt;
&lt;&lt;button &quot;Leave&quot;&gt;&gt;
    &lt;&lt;goto &quot;GitGud&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="146" name="Xavier-Third Neuroimaging-Lie" tags="" position="725,1850" size="100,100">&lt;&lt;player&gt;&gt;I, uh... I saw some birds. Flying birds. They were... colorful.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;The words tumble out awkwardly, your voice strained as you try to fabricate a believable story. Xavier&#39;s eyes, however, bore into you with an intensity that makes you squirm. His gaze is like a laser, cutting through your flimsy deception.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Birds? Colorful, flying birds?&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;His tone is flat, devoid of any belief. He taps his fingers on the desk, a rhythm that seems to match your rising heartbeat.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Do you take me for a fool?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;if $playerToldXavierTruthAboutAI === false&gt;&gt;&lt;&lt;xavier&gt;&gt;I thought we were past this. Didn&#39;t I make it abundantly clear that I want you to be honest with me when you lied about your interactions with AVA when you asked me about the implant for the first time?&lt;&lt;/xavier&gt;&gt;
    &lt;&lt;if visited() is 1&gt;&gt;\
        &lt;&lt;relationshipDecreasedWith &quot;Xavier&quot; 10&gt;&gt;
    &lt;&lt;/if&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;div class=&quot;narrator&quot;&gt;The question hangs in the air like a thundercloud ready to unleash its fury. You feel the weight of his disappointment, heavier than the helmet you just wore.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;I&#39;ve invested considerable time and resources into helping you understand and manage AVA. But if you can&#39;t be truthful with me, then what&#39;s the point? We might as well stop with the neuroimaging.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;button &quot;Tell the truth after all&quot;&gt;&gt;&lt;&lt;goto &quot;Xavier-Third Neuroimaging-Truth&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;End the neuroimaging&quot;&gt;&gt;
    &lt;&lt;set $xavierGitGudDialogs[&quot;Third Neuroimaging&quot;].isNew = false&gt;&gt;
    &lt;&lt;set $xavierGitGudDialogs[&quot;Third Neuroimaging&quot;].unlocked = false&gt;&gt;
    &lt;&lt;goto &quot;Xavier-Third Neuroimaging-Quit&quot;&gt;&gt;
    &lt;&lt;run MindWare.completeTask(&quot;Undergo neuroimaging in $nextNeuroimagingCounter days&quot;)&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="147" name="Xavier-Third Neuroimaging-Truth" tags="" position="850,1850" size="100,100">&lt;&lt;player&gt;&gt;I... I saw a woman licking a large black cock. The sensation was vivid, and I could feel what she felt.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Your voice wavers as you recount the experience, your cheeks flushing with a mix of embarrassment and lingering emotion.&lt;/div&gt;
&lt;&lt;player&gt;&gt;Even though I could see only her tongue, I somehow knew who the man was. It was... it was you, Xavier.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier&#39;s eyebrows rise, but his overall expression remains thoughtful, clinical. His gaze snaps back to you, his face set in an expression of complete seriousness.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;I&#39;m beginning to understand what&#39;s happening here.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;if $playerBody === &quot;Masculine&quot; or $playerBody === &quot;Masculine-Leaning&quot; or $playerBody === &quot;Androgynous&quot;&gt;&gt;&lt;&lt;xavier&gt;&gt;It&#39;s becoming clear that your brain wasn&#39;t infected by an AI. The loss of consciousness and the symptoms of schizophrenia you&#39;ve been experiencing are traumatic responses to long-suppressed homosexual urges.&lt;&lt;/xavier&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;xavier&gt;&gt;It&#39;s becoming clear that your brain wasn&#39;t infected by an AI. The loss of consciousness and the symptoms of schizophrenia you&#39;ve been experiencing are traumatic responses to long-suppressed sexual urges.&lt;&lt;/xavier&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;player&gt;&gt;What?!&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;The visions are overwhelming surges of arousal, manifesting as these lifelike scenarios. I can prove it to you — no need for the helmet this time.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;That&#39;s absurd! I&#39;ve—&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Before you have a chance to finish your sentence, Xavier unzips his pants and takes out his huge cock with a swift, unexpected motion.&lt;/div&gt;
&lt;&lt;video &quot;imgs/quests/neuroimaging/bbc-closeup.mov&quot;&gt;&gt;
&lt;&lt;xavier&gt;&gt;How does this make you feel?&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;A sly smile plays on Xavier&#39;s lips, but you don&#39;t notice it because the sight of his cock has rendered you speechless.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;The deafening silence fills the room, and you can feel your heart pounding in your chest. As the moments pass, an intrusive thought begins to form in your head and continues to grow stronger and stronger. It&#39;s the thought of you getting on kneeling right before Xavier&#39;s manhood.&lt;/div&gt;
&lt;&lt;nobr&gt;&gt;@@.pink-choicebutton;&lt;&lt;button &quot;Get on your knees&quot;&gt;&gt;&lt;&lt;set $thirdNeuroimagingKneeled = true&gt;&gt;&lt;&lt;goto &quot;Xavier-Third Neuroimaging-Truth-Kneel&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@

&lt;div class=&quot;minigame-container&quot;&gt;
    &lt;div class=&quot;resist-instructions&quot; id=&quot;instructions&quot;&gt;Resist AVA&#39;s suggestion and reveal other options by repeatedly clicking the Resist button.&lt;/div&gt;
    &lt;div class=&quot;energy-container&quot;&gt;
        &lt;span class=&quot;energy-label&quot;&gt;Implant charge cost: &lt;/span&gt;
        &lt;span class=&quot;energy-value&quot; id=&quot;energy&quot;&gt;20%&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;timer-container&quot;&gt;
        &lt;span class=&quot;timer-label&quot;&gt;Time to resist: &lt;/span&gt;
        &lt;span class=&quot;timer-value&quot; id=&quot;timer&quot;&gt;&lt;&lt;if $mentalCondition === &quot;Unstable&quot;&gt;&gt;&lt;&lt;print 10/2&gt;&gt;&lt;&lt;else&gt;&gt;10&lt;&lt;/if&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;timer-value&quot;&gt; seconds&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gauge-container&quot;&gt;
        &lt;div class=&quot;gauge&quot; id=&quot;gauge&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;button class=&quot;pink-mindware-button&quot; id=&quot;resistButton&quot;&gt;Resist&lt;/button&gt;
    &lt;&lt;if $minigameSkipButtons === true&gt;&gt;
        &lt;button class=&quot;pink-mindware-button&quot; id=&quot;skipButton&quot;&gt;Skip (Instant Win)&lt;/button&gt;
    &lt;&lt;/if&gt;&gt;
&lt;/div&gt;

&lt;div id=&quot;minigame-container-hidden&quot;&gt;
&lt;br&gt;
@@.choicebutton;&lt;&lt;button &quot;Insist that you&#39;re not interested in him&quot;&gt;&gt;&lt;&lt;set $thirdNeuroimagingInsisted = true&gt;&gt;&lt;&lt;goto &quot;Xavier-Third Neuroimaging-Truth-Deny-Arousal&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@
&lt;/div&gt;

&lt;&lt;done&gt;&gt;&lt;&lt;script&gt;&gt;
function initializeMinigame(settings) {
    var progress = 0;
    var timeLeft = settings.timeLeft || 10;
    var fillAmount = settings.fillAmount || 5;
    var fallRate = settings.fallRate || 4;
    var fallInterval = settings.fallInterval || 200;
    var gameStarted = false;
    var resistanceCost = settings.resistanceCost || 20;

    const minigameContainer = document.querySelector(&#39;.minigame-container&#39;);
    const hiddenContainer = document.getElementById(&#39;minigame-container-hidden&#39;);
    const gauge = document.getElementById(&#39;gauge&#39;);
    const timerDisplay = document.getElementById(&#39;timer&#39;);
    const resistButton = document.getElementById(&#39;resistButton&#39;);
    const skipButton = document.getElementById(&#39;skipButton&#39;);

    const overlay = document.createElement(&#39;div&#39;);
    overlay.style.position = &#39;fixed&#39;;
    overlay.style.top = &#39;0&#39;;
    overlay.style.left = &#39;0&#39;;
    overlay.style.width = &#39;100%&#39;;
    overlay.style.height = &#39;100%&#39;;
    overlay.style.backgroundColor = &#39;rgba(0, 0, 0, 0)&#39;;
    overlay.style.zIndex = &#39;1000&#39;;
    overlay.style.display = &#39;none&#39;;

    document.body.appendChild(overlay);

    const resetGame = () =&gt; {
        progress = 0;
        timeLeft = settings.timeLeft || 10;
        gameStarted = false;
        gauge.style.width = &#39;0%&#39;;
        timerDisplay.textContent = timeLeft;
    };
    
    let timerInterval, decreaseInterval;

    const updateGauge = () =&gt; {
        gauge.style.width = `${progress}%`;
    };

    const endGame = (win) =&gt; {
        clearInterval(decreaseInterval);
        clearInterval(timerInterval);
        if (win) {
            SugarCube.State.variables.resistMinigameWinCount += 1;
            console.log(&quot;Successfully resisted AVA:&quot;, SugarCube.State.variables.resistMinigameWinCount);
            overlay.style.display = &#39;block&#39;; 
            setTimeout(() =&gt; {
                overlay.style.display = &#39;none&#39;; 
            }, 2000); 
                minigameContainer.style.display = &#39;none&#39;;
                hiddenContainer.style.display = &#39;block&#39;;
        } else {
            SugarCube.UI.alert(&#39;You failed to resist!&#39;);
            SugarCube.State.variables.resistMinigameFailCount += 1;
            console.log(&quot;Failed to resist AVA:&quot;, SugarCube.State.variables.resistMinigameFailCount);
            resetGame(); 
        }
    };

    resistButton.addEventListener(&#39;click&#39;, () =&gt; {
        if (SugarCube.State.variables.mentalCondition === &quot;Dysphoric&quot;) {
            SugarCube.UI.alert(&quot;Your mental condition is too compromised to resist.&quot;);
            return; 
        }

        if (!gameStarted) {
            if (SugarCube.State.variables.implantCharge &lt; resistanceCost) {
                SugarCube.UI.alert(&quot;Not enough charge&quot;);
                return; 
            } else {
                if (SugarCube.State.variables.implantCharge - resistanceCost &lt; 0) {
                    SugarCube.State.variables.implantCharge = 0;
                } else {
                    SugarCube.State.variables.implantCharge -= resistanceCost;
                }
                $(document).trigger(&quot;:liveupdate&quot;);
            }

            if (SugarCube.State.variables.mentalCondition === &quot;Unstable&quot;) {
                timeLeft /= 2;
            }

            gameStarted = true;
            timerInterval = setInterval(() =&gt; {
                if (--timeLeft &lt;= 0) {
                    endGame(false);
                }
                timerDisplay.textContent = `${timeLeft}`;
            }, 1000);

            decreaseInterval = setInterval(() =&gt; {
                if (progress &gt; 0) {
                    progress -= fallRate;
                    updateGauge();
                }
            }, fallInterval);
        }

        progress += fillAmount;
        if (progress &gt;= 100) {
            progress = 100;
            updateGauge();
            endGame(true);
        } else {
            updateGauge();
        }
    });

    if (skipButton) {
        skipButton.addEventListener(&#39;click&#39;, () =&gt; {
            endGame(true);
        });
    }
}

initializeMinigame({resistanceCost: 20}); 
&lt;&lt;/script&gt;&gt;&lt;&lt;/done&gt;&gt;&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="148" name="Xavier-Third Neuroimaging-Truth-Deny-Arousal" tags="" position="975,1850" size="100,100">&lt;&lt;player&gt;&gt;I... I don&#39;t want to have sex with you, Xavier. I swear, it&#39;s not what you think.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier&#39;s eyes narrow, and he studies you for a moment. He then puts his cock back in his pants and zips them up.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Alright, if you say so.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;But you felt something, didn&#39;t you?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Y-Yes, I did. I felt an urge to get on my knees, but it wasn&#39;t because I wanted to have sex with you.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier nods, seeming to understand. He then turns his attention to your Synapse Steady VX implant and examines it carefully.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Interesting. Your implant&#39;s battery has been depleted slightly. It seems like it&#39;s been working overtime to help you resist the AI&#39;s influence.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;I have a theory. The AI wants you to submit for some reason, and the implant is doing its job by allowing you to resist.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;What should I do?&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Right now, the best advice I can give you is to avoid potentially triggering situations and never leave your home without first fully charging the implant by getting a full night&#39;s sleep.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;if visited() is 1&gt;&gt;\
    &lt;&lt;relationshipIncreasedWith &quot;Xavier&quot; 5&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;player&gt;&gt;Thank you, Xavier. I really appreciate your help and understanding.&lt;&lt;/player&gt;&gt;
&lt;&lt;button &quot;Leave&quot;&gt;&gt;
    &lt;&lt;set $xavierGitGudDialogs[&quot;Third Neuroimaging&quot;].isNew = false&gt;&gt;
    &lt;&lt;set $xavierGitGudDialogs[&quot;Third Neuroimaging&quot;].unlocked = false&gt;&gt;
    &lt;&lt;goto &quot;RegularVisitWithXavier&quot;&gt;&gt;
    &lt;&lt;run MindWare.completeTask(&quot;Undergo neuroimaging in $nextNeuroimagingCounter days&quot;)&gt;&gt;
    &lt;&lt;set $neuroimagingEnding = &quot;advice&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="149" name="Xavier-Third Neuroimaging-Truth-Kneel" tags="" position="1100,1850" size="100,100">&lt;div class=&quot;narrator&quot;&gt;You find yourself kneeling in front of Xavier, your eyes hungrily looking up at him. He towers over you, his confidence and dominance palpable. Xavier&#39;s lips curl into a smug smile as he gazes down at your submissive position.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;See... I was right. Your brain wasn&#39;t infected by an AI. The loss of consciousness and the symptoms of schizophrenia you&#39;ve been experiencing are traumatic responses to long-suppressed &lt;&lt;if $playerBody === &quot;Masculine&quot; or $playerBody === &quot;Masculine-Leaning&quot; or $playerBody === &quot;Androgynous&quot;&gt;&gt;homosexual urges.&lt;&lt;else&gt;&gt;sexual urges.&lt;&lt;/if&gt;&gt;&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;There&#39;s no need for additional neuroimaging. What you really need is therapy – the kind of therapy only someone like me can deliver.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;xavier&gt;&gt;Since I&#39;m in a good mood today, I&#39;ll give you the first session right now, free of charge.&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;A whirlwind of emotions surges within you and renders you speechless, each one more intense than the last.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;Just &lt;span class=&quot;glitchy-pink-dialog&quot; data-text=&quot;follow my lead&quot;&gt;follow my lead.&lt;/span&gt;&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier undresses and then he gently takes your hand and guides it to his crotch, placing it firmly on his bulging cock. The sudden contact sends a jolt of electricity through your body, and you can&#39;t help but gasp at the sensation. Your heart races, and your breath quickens as you feel the heat radiating from his body.&lt;/div&gt;
&lt;&lt;nobr&gt;&gt;&lt;&lt;switch $playerBody&gt;&gt; 
	&lt;&lt;case &quot;Masculine&quot; &quot;Masculine-Leaning&quot;&gt;&gt; 
        &lt;&lt;video &quot;imgs/quests/neuroimaging/bbc-male-handjob.mov&quot;&gt;&gt;
	&lt;&lt;case &quot;Androgynous&quot; &quot;Feminine-Leaning&quot;&gt;&gt; 
        &lt;&lt;video &quot;imgs/quests/neuroimaging/bbc-female-handjob.mov&quot;&gt;&gt;
	&lt;&lt;case &quot;Feminine&quot;&gt;&gt; 
        &lt;&lt;video &quot;imgs/quests/neuroimaging/bbc-female-handjob.mov&quot;&gt;&gt;
&lt;&lt;/switch&gt;&gt;&lt;&lt;/nobr&gt;&gt;
&lt;&lt;nobr&gt;&gt;&lt;&lt;if visited() is 1&gt;&gt;
    &lt;&lt;if typeof $maleEncounters === &quot;undefined&quot;&gt;&gt;
        &lt;&lt;set $maleEncounters = 0&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;set $maleEncounters += 1&gt;&gt;
    &lt;&lt;if typeof $submissiveActs === &quot;undefined&quot;&gt;&gt;
        &lt;&lt;set $submissiveActs = 0&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;set $submissiveActs += 1&gt;&gt;
&lt;&lt;/if&gt;&gt;&lt;&lt;/nobr&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier&#39;s touch is firm yet gentle, and his eyes never leave yours as he begins to guide your hand, showing you the rhythm and pressure he desires.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;As you feel the heat of Xavier&#39;s cock in your hand, you can&#39;t help but be mesmerized by the sensation. You follow his lead, your hand moving up and down his shaft, feeling it grow harder and thicker with each stroke.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;As you continue to work his cock, Xavier&#39;s breathing becomes more ragged and intense. He looks down at you, his eyes filled with lust and desire.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;&lt;span class=&quot;glitchy-pink-dialog&quot; data-text=&quot;Keep going.&quot;&gt;Keep going.&lt;/span&gt;&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You obey his command, your hand moving faster and more forcefully as you feel him approach the edge of release.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;With a final, powerful stroke, Xavier&#39;s cock erupts, sending streams of hot, sticky cum shooting into the air. Some of it lands on your hand, and AVA immediately takes advantage of the situation with a well-timed suggestion.&lt;/div&gt;
&lt;&lt;video &quot;imgs/quests/neuroimaging/eat-cum-hypno.mov&quot;&gt;&gt;
&lt;&lt;nobr&gt;&gt;@@.pink-choicebutton;&lt;&lt;button &quot;Eat Xavier&#39;s cum&quot;&gt;&gt;&lt;&lt;set $neuroimagingAteCum = true&gt;&gt;&lt;&lt;goto &quot;Xavier-Third Neuroimaging-Truth-Kneel-Cum&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@

&lt;div class=&quot;minigame-container&quot;&gt;
    &lt;div class=&quot;resist-instructions&quot; id=&quot;instructions&quot;&gt;Resist AVA&#39;s suggestion and reveal other options by repeatedly clicking the Resist button.&lt;/div&gt;
    &lt;div class=&quot;energy-container&quot;&gt;
        &lt;span class=&quot;energy-label&quot;&gt;Implant charge cost: &lt;/span&gt;
        &lt;span class=&quot;energy-value&quot; id=&quot;energy&quot;&gt;20%&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;timer-container&quot;&gt;
        &lt;span class=&quot;timer-label&quot;&gt;Time to resist: &lt;/span&gt;
        &lt;span class=&quot;timer-value&quot; id=&quot;timer&quot;&gt;&lt;&lt;if $mentalCondition === &quot;Unstable&quot;&gt;&gt;&lt;&lt;print 10/2&gt;&gt;&lt;&lt;else&gt;&gt;10&lt;&lt;/if&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;timer-value&quot;&gt; seconds&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gauge-container&quot;&gt;
        &lt;div class=&quot;gauge&quot; id=&quot;gauge&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;button class=&quot;pink-mindware-button&quot; id=&quot;resistButton&quot;&gt;Resist&lt;/button&gt;
    &lt;&lt;if $minigameSkipButtons === true&gt;&gt;
        &lt;button class=&quot;pink-mindware-button&quot; id=&quot;skipButton&quot;&gt;Skip (Instant Win)&lt;/button&gt;
    &lt;&lt;/if&gt;&gt;
&lt;/div&gt;

&lt;div id=&quot;minigame-container-hidden&quot;&gt;
&lt;br&gt;
@@.choicebutton;&lt;&lt;button &quot;Don&#39;t eat Xavier&#39;s cum&quot;&gt;&gt;&lt;&lt;set $neuroimagingAteCum = false&gt;&gt;&lt;&lt;goto &quot;Xavier-Third Neuroimaging-Truth-Kneel-NoCum&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@
&lt;/div&gt;

&lt;&lt;done&gt;&gt;&lt;&lt;script&gt;&gt;
function initializeMinigame(settings) {
    var progress = 0;
    var timeLeft = settings.timeLeft || 10;
    var fillAmount = settings.fillAmount || 5;
    var fallRate = settings.fallRate || 4.3;
    var fallInterval = settings.fallInterval || 200;
    var gameStarted = false;
    var resistanceCost = settings.resistanceCost || 20;

    const minigameContainer = document.querySelector(&#39;.minigame-container&#39;);
    const hiddenContainer = document.getElementById(&#39;minigame-container-hidden&#39;);
    const gauge = document.getElementById(&#39;gauge&#39;);
    const timerDisplay = document.getElementById(&#39;timer&#39;);
    const resistButton = document.getElementById(&#39;resistButton&#39;);
    const skipButton = document.getElementById(&#39;skipButton&#39;);

    const overlay = document.createElement(&#39;div&#39;);
    overlay.style.position = &#39;fixed&#39;;
    overlay.style.top = &#39;0&#39;;
    overlay.style.left = &#39;0&#39;;
    overlay.style.width = &#39;100%&#39;;
    overlay.style.height = &#39;100%&#39;;
    overlay.style.backgroundColor = &#39;rgba(0, 0, 0, 0)&#39;;
    overlay.style.zIndex = &#39;1000&#39;;
    overlay.style.display = &#39;none&#39;;

    document.body.appendChild(overlay);

    const resetGame = () =&gt; {
        progress = 0;
        timeLeft = settings.timeLeft || 10;
        gameStarted = false;
        gauge.style.width = &#39;0%&#39;;
        timerDisplay.textContent = timeLeft;
    };
    
    let timerInterval, decreaseInterval;

    const updateGauge = () =&gt; {
        gauge.style.width = `${progress}%`;
    };

    const endGame = (win) =&gt; {
        clearInterval(decreaseInterval);
        clearInterval(timerInterval);
        if (win) {
            SugarCube.State.variables.resistMinigameWinCount += 1;
            console.log(&quot;Successfully resisted AVA:&quot;, SugarCube.State.variables.resistMinigameWinCount);
            overlay.style.display = &#39;block&#39;; 
            setTimeout(() =&gt; {
                overlay.style.display = &#39;none&#39;; 
            }, 2000); 
                minigameContainer.style.display = &#39;none&#39;;
                hiddenContainer.style.display = &#39;block&#39;;
        } else {
            SugarCube.UI.alert(&#39;You failed to resist!&#39;);
            SugarCube.State.variables.resistMinigameFailCount += 1;
            console.log(&quot;Failed to resist AVA:&quot;, SugarCube.State.variables.resistMinigameFailCount);
            resetGame(); 
        }
    };

    resistButton.addEventListener(&#39;click&#39;, () =&gt; {
        if (SugarCube.State.variables.mentalCondition === &quot;Dysphoric&quot;) {
            SugarCube.UI.alert(&quot;Your mental condition is too compromised to resist.&quot;);
            return; 
        }

        if (!gameStarted) {
            if (SugarCube.State.variables.implantCharge &lt; resistanceCost) {
                SugarCube.UI.alert(&quot;Not enough charge&quot;);
                return; 
            } else {
                if (SugarCube.State.variables.implantCharge - resistanceCost &lt; 0) {
                    SugarCube.State.variables.implantCharge = 0;
                } else {
                    SugarCube.State.variables.implantCharge -= resistanceCost;
                }
                $(document).trigger(&quot;:liveupdate&quot;);
            }

            if (SugarCube.State.variables.mentalCondition === &quot;Unstable&quot;) {
                timeLeft /= 2;
            }

            gameStarted = true;
            timerInterval = setInterval(() =&gt; {
                if (--timeLeft &lt;= 0) {
                    endGame(false);
                }
                timerDisplay.textContent = `${timeLeft}`;
            }, 1000);

            decreaseInterval = setInterval(() =&gt; {
                if (progress &gt; 0) {
                    progress -= fallRate;
                    updateGauge();
                }
            }, fallInterval);
        }

        progress += fillAmount;
        if (progress &gt;= 100) {
            progress = 100;
            updateGauge();
            endGame(true);
        } else {
            updateGauge();
        }
    });

    if (skipButton) {
        skipButton.addEventListener(&#39;click&#39;, () =&gt; {
            endGame(true);
        });
    }
}

initializeMinigame({resistanceCost: 20}); 
&lt;&lt;/script&gt;&gt;&lt;&lt;/done&gt;&gt;&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="150" name="Xavier-Third Neuroimaging-Truth-Kneel-Cum" tags="" position="1225,1850" size="100,100">&lt;&lt;nobr&gt;&gt;&lt;&lt;switch $playerBody&gt;&gt; 
	&lt;&lt;case &quot;Masculine&quot; &quot;Masculine-Leaning&quot; &quot;Androgynous&quot;&gt;&gt; 
        &lt;&lt;video &quot;imgs/quests/neuroimaging/cum-lick-male.mov&quot;&gt;&gt;
	&lt;&lt;case &quot;Feminine-Leaning&quot;&gt;&gt; 
        &lt;&lt;video &quot;imgs/quests/neuroimaging/cum-lick-fem-leaning.mov&quot;&gt;&gt;
	&lt;&lt;case &quot;Feminine&quot;&gt;&gt; 
        &lt;&lt;video &quot;imgs/quests/neuroimaging/cum-lick-feminine.mov&quot;&gt;&gt;
&lt;&lt;/switch&gt;&gt;&lt;&lt;/nobr&gt;&gt;
&lt;&lt;nobr&gt;&gt;&lt;&lt;if visited() is 1&gt;&gt;
    &lt;&lt;if typeof $maleEncounters === &quot;undefined&quot;&gt;&gt;
        &lt;&lt;set $maleEncounters = 0&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;set $maleEncounters += 1&gt;&gt;
    &lt;&lt;if typeof $submissiveActs === &quot;undefined&quot;&gt;&gt;
        &lt;&lt;set $submissiveActs = 0&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;set $submissiveActs += 1&gt;&gt;
&lt;&lt;/if&gt;&gt;&lt;&lt;/nobr&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You give in to the intrusive thought and bring your cum-covered fingers to your mouth.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;The taste is salty and slightly bitter, but it sends a jolt of pleasure through your body. You suck your fingers clean, savoring every last drop of Xavier&#39;s cum. Your heart races, and your breath quickens as you feel a new wave of desire and excitement.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;You&#39;re a hungry little kitten, aren&#39;t you?&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You can&#39;t help but nod in agreement, feeling a sense of shame and embarrassment, but also a deep sense of satisfaction and pleasure.&lt;/div&gt; 
&lt;&lt;ava&gt;&gt;Obedience is pleasure. Cum is a reward.&lt;&lt;/ava&gt;&gt;
&lt;&lt;if visited() is 1&gt;&gt;\
    &lt;&lt;genderFeminine 5&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;img src=&quot;imgs/quests/neuroimaging/suck-cock-hypno.webp&quot; width=&quot;100%&quot;&gt;

&lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;goto &quot;Xavier-Third Neuroimaging-Truth-Kneel-End&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="151" name="Xavier-Third Neuroimaging-Truth-Kneel-NoCum" tags="" position="100,1975" size="100,100">&lt;div class=&quot;narrator&quot;&gt;With a surge of willpower and the help of your Synapse Steady VX implant, you resist the urge to lick Xavier&#39;s cum clean off your fingers.&lt;/div&gt;
&lt;&lt;include &quot;Xavier-Third Neuroimaging-Truth-Kneel-End&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="152" name="Xavier-Third Neuroimaging-Truth-Kneel-End" tags="" position="225,1975" size="100,100">&lt;div class=&quot;narrator&quot;&gt;Xavier looks down at you with a satisfied smile.&lt;/div&gt;
&lt;&lt;xavier&gt;&gt;You seem to have enjoyed your first therapy session.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;if visited() is 1&gt;&gt;\
    &lt;&lt;relationshipIncreasedWith &quot;Xavier&quot; 10&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;nobr&gt;&gt;&lt;&lt;switch $playerBody&gt;&gt;
    &lt;&lt;case &quot;Masculine&quot; &quot;Masculine-Leaning&quot;&gt;&gt;
        &lt;&lt;xavier&gt;&gt;Unfortunately, that&#39;s as far as I can go because, honestly, I&#39;m not all that into guys.&lt;&lt;/xavier&gt;&gt;&lt;br&gt;
        &lt;&lt;xavier&gt;&gt;But I&#39;m glad we could make some progress today.&lt;&lt;/xavier&gt;&gt;&lt;br&gt;
        &lt;div class=&quot;narrator&quot;&gt;You&#39;re not sure if you should thank Xavier, so you just remain quiet.&lt;/div&gt;&lt;br&gt;
        &lt;&lt;xavier&gt;&gt;I&#39;ve met a few guys who were in a similar situation as you. They were repressed sexually and didn&#39;t know how to deal with it. Some of them have since transitioned and are much happier with their female bodies.&lt;&lt;/xavier&gt;&gt;&lt;br&gt;
        &lt;&lt;xavier&gt;&gt;If you ever decide to go down that path, feel free to come back and visit me. We can continue the &quot;therapy.&quot;&lt;&lt;/xavier&gt;&gt;&lt;br&gt;
        &lt;div class=&quot;narrator&quot;&gt;Xavier winks at you.&lt;/div&gt;&lt;br&gt;
        &lt;&lt;button &quot;Leave&quot;&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;Third Neuroimaging&quot;].isNew = false&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;Third Neuroimaging&quot;].unlocked = false&gt;&gt;
            &lt;&lt;goto &quot;RegularVisitWithXavier&quot;&gt;&gt;
            &lt;&lt;run MindWare.completeTask(&quot;Undergo neuroimaging in $nextNeuroimagingCounter days&quot;)&gt;&gt;
            &lt;&lt;set $neuroimagingEnding = &quot;suckMale&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;
    &lt;&lt;case &quot;Androgynous&quot; &quot;Feminine-Leaning&quot; &quot;Feminine&quot;&gt;&gt;
        &lt;&lt;xavier&gt;&gt;I&#39;d like you to come back next week.&lt;&lt;/xavier&gt;&gt;&lt;br&gt;
        &lt;&lt;xavier&gt;&gt;We still have a lot to understand about your condition.&lt;&lt;/xavier&gt;&gt;&lt;br&gt;
        &lt;div class=&quot;narrator&quot;&gt;Xavier winks at you.&lt;/div&gt;&lt;br&gt;
        &lt;div class=&quot;narrator&quot;&gt;You&#39;re not sure if you should thank Xavier, so you just remain quiet.&lt;/div&gt;&lt;br&gt;
        &lt;&lt;button &quot;Agree to come back next week&quot;&gt;&gt;
            &lt;&lt;set $nextNeuroimagingCounter = 7&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;Third Neuroimaging&quot;].isNew = false&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;Third Neuroimaging&quot;].unlocked = false&gt;&gt;
            &lt;&lt;goto &quot;RegularVisitWithXavier&quot;&gt;&gt;
            &lt;&lt;run MindWare.completeTask(&quot;Undergo neuroimaging in $nextNeuroimagingCounter days&quot;)&gt;&gt;
            &lt;&lt;set $neuroimagingEnding = &quot;suckFemale&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;
&lt;&lt;/switch&gt;&gt;&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="153" name="Yuki-How was the surgery?" tags="" position="350,1975" size="100,100">&lt;&lt;say &quot;Yuki&quot; &quot;imgs/characters/yuki/yuki-portrait.webp&quot;&gt;&gt;How are you feeling after the surgery?&lt;&lt;/say&gt;&gt;
&lt;&lt;player&gt;&gt;It was intense, but I&#39;m here, and the implant seems to be working.&lt;&lt;/player&gt;&gt;
&lt;&lt;say &quot;Yuki&quot; &quot;imgs/characters/yuki/yuki-portrait.webp&quot;&gt;&gt;That&#39;s a relief! Just take it easy, okay?&lt;&lt;/say&gt;&gt;
&lt;&lt;player&gt;&gt;Thanks, Yuki. I might take you up on that.&lt;&lt;/player&gt;&gt;
&lt;div id=&quot;inner-thought&quot;&gt;It seems that Yuki was genuinely worried about me. &lt;&lt;if $talkedWithYukiAboutBrother === true&gt;&gt;Maybe she thought that what happened to her brother would happen to me too. I can see the relief in her eyes now that she sees me somewhat okay.&lt;&lt;else&gt;&gt;It feels good to know someone&#39;s looking out for me here.&lt;&lt;/if&gt;&gt;&lt;/div&gt;
\
    &lt;p class=&quot;back-link&quot;&gt;\
        &lt;&lt;link &quot;Go Back&quot;&gt;&gt;
            &lt;&lt;set $yukiGitGudDialogs[&quot;How was the surgery?&quot;].isNew = false&gt;&gt;
            &lt;&lt;set $yukiGitGudDialogs[&quot;How was the surgery?&quot;].unlocked = false&gt;&gt;
            &lt;&lt;goto &quot;GitGud-TalkWithYuki&quot;&gt;&gt;
        &lt;&lt;/link&gt;&gt;
    &lt;/p&gt;</tw-passagedata><tw-passagedata pid="154" name="Xavier-Have we fixed that brain of yours?" tags="" position="475,1975" size="100,100">&lt;&lt;xavier&gt;&gt;So, have we fixed that brain of yours?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Well, the good news is that the visions I was experiencing don&#39;t overwhelm me anymore. I can resist them if I concentrate well enough.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;And the bad news?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Well, the bad news is that I can now talk with another voice in my head. It&#39;s the AI, AVA. She can communicate with me.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;You sure the implant surgery didn&#39;t mess something up? Maybe give you a little brain damage?&lt;&lt;/xavier&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Xavier says with a half-smile.&lt;/div&gt;
&lt;&lt;player&gt;&gt;No, I&#39;m sure it&#39;s AVA. The implant has stabilized things, but it hasn&#39;t gotten rid of her. I can feel her presence.&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;Well, that&#39;s certainly an interesting situation. I&#39;d like to run some tests, if you&#39;re up for it. Might be able to learn something new. But for now, I&#39;ve got some other customers to attend to. Come back next week, and we&#39;ll see what we can do.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;What kind of tests?&lt;&lt;/player&gt;&gt;
&lt;&lt;xavier&gt;&gt;I&#39;d like to do some neuroimaging while you interact with AVA. See if we can pinpoint how she&#39;s interfacing with your brain. &lt;&lt;/xavier&gt;&gt;
&lt;&lt;player&gt;&gt;Alright, I&#39;ll come back later. Thanks for your help, Xavier.&lt;&lt;/player&gt;&gt;
\
    &lt;p class=&quot;back-link&quot;&gt;\
        &lt;&lt;button &quot;Leave&quot;&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;Have we fixed that brain of yours?&quot;].isNew = false&gt;&gt;
            &lt;&lt;set $xavierGitGudDialogs[&quot;Have we fixed that brain of yours?&quot;].unlocked = false&gt;&gt;
            &lt;&lt;run MindWare.addTask(&quot;Undergo neuroimaging in $nextNeuroimagingCounter days&quot;, &quot;Task-UndergoNeuroimaging&quot;)&gt;&gt;
            &lt;&lt;set $nextNeuroimagingCounter = 7&gt;&gt;
            &lt;&lt;goto &quot;RegularVisitWithXavier&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;
    &lt;/p&gt;</tw-passagedata><tw-passagedata pid="155" name="Task-UndergoNeuroimaging" tags="" position="600,1975" size="100,100">Xavier wants to perform some neuroimaging to find out how AVA is interfacing with your brain. 

Visit him at GitGud in $nextNeuroimagingCounter days. 

&lt;&lt;nobr&gt;&gt;
&lt;&lt;set _currentPassage to passage()&gt;&gt;
    &lt;&lt;if $doYouKnowTheAnswer === true&gt;&gt;
        &lt;&lt;button &quot;Set the counter to 0&quot;&gt;&gt;
            &lt;&lt;set $nextNeuroimagingCounter = 0&gt;&gt;
            &lt;&lt;goto _currentPassage&gt;&gt;
            &lt;&lt;run Dialog.close()&gt;&gt;
            &lt;&lt;run Dialog.setup(&quot;Task Description&quot;)&gt;&gt;
            &lt;&lt;run Dialog.wiki(Story.get(&quot;Task-UndergoNeuroimaging&quot;).processText())&gt;&gt;
            &lt;&lt;run Dialog.open()&gt;&gt;
        &lt;&lt;/button&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="156" name="CharacterCipher" tags="" position="725,1975" size="100,100">&lt;&lt;character &#39;cipher&#39; &#39;CipherLynx&#39; &#39;imgs/characters/cipher/cipher-portrait.webp&#39;&gt;&gt;

&lt;&lt;characterChat &#39;cipher-chat&#39; &#39;CipherLynx&#39; &#39;imgs/characters/cipher/cipher-portrait.webp&#39;&gt;&gt;

&lt;&lt;set $relationshipCipher to 100&gt;&gt;</tw-passagedata><tw-passagedata pid="157" name="Widget-AVA" tags="widget nobr" position="850,1975" size="100,100">&lt;&lt;widget &quot;ava&quot; container&gt;&gt;\
    &lt;&lt;say &quot;AVA&quot; `&quot;imgs/characters/ava/ava-portrait.webp&quot;`&gt;&gt;_contents&lt;&lt;/say&gt;&gt;\
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="158" name="Widget-Nurse" tags="widget nobr" position="975,1975" size="100,100">&lt;&lt;widget &quot;nurse&quot; container&gt;&gt;\
    &lt;&lt;say &quot;Nurse&quot; `&quot;imgs/locations/hospital/panacea-nurse-portrait.webp&quot;`&gt;&gt;_contents&lt;&lt;/say&gt;&gt;\
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="159" name="CharacterDrake" tags="" position="1100,1975" size="100,100">&lt;&lt;character &#39;drake&#39; &#39;Drake Voronov&#39; &#39;imgs/characters/drake/drake-portrait.webp&#39;&gt;&gt;

&lt;&lt;set $relationshipDrake to 50&gt;&gt;

&lt;&lt;set $drakeBrainFryDialogs = {
    &quot;Do you have any tips on how to succeed at BrainFry?&quot;: {
        &quot;unlocked&quot;: true,
        &quot;isNew&quot;: true,
        &quot;passage&quot;: &quot;Drake-Do you have any tips on how to succeed at BrainFry?&quot;
    },
    // ... more topics
}&gt;&gt;

/* To unlock a new dialog and mark it as new:
&lt;&lt;set $drakeBrainFryDialogs[&quot;newTopic&quot;].unlocked = true&gt;&gt;
&lt;&lt;set $drakeBrainFryDialogs[&quot;newTopic&quot;].isNew = true&gt;&gt;
*/</tw-passagedata><tw-passagedata pid="160" name="CharacterRay" tags="" position="1225,1975" size="100,100">&lt;&lt;character &#39;ray&#39; &#39;Ray&#39; &#39;imgs/characters/ray/ray-portrait.webp&#39;&gt;&gt;

&lt;&lt;set $relationshipRay to 50&gt;&gt;

&lt;&lt;set $rayBrainFryDialogs = {
    &quot;Tell me more about that collection you mentioned.&quot;: {
        &quot;unlocked&quot;: true,
        &quot;isNew&quot;: true,
        &quot;passage&quot;: &quot;Ray-Tell me more about that collection you mentioned&quot;
    },
    // ... more topics
}&gt;&gt;

/* To unlock a new dialog and mark it as new:
&lt;&lt;set $rayBrainFryDialogs[&quot;newTopic&quot;].unlocked = true&gt;&gt;
&lt;&lt;set $rayBrainFryDialogs[&quot;newTopic&quot;].isNew = true&gt;&gt;
*/</tw-passagedata><tw-passagedata pid="161" name="CharacterTrix" tags="" position="100,2100" size="100,100">&lt;&lt;character &#39;trix&#39; &#39;Trix&#39; &#39;imgs/characters/trix/trix-portrait.webp&#39;&gt;&gt;

&lt;&lt;set $relationshipTrix to 50&gt;&gt;

&lt;&lt;set $trixBrainFryDialogs = {
    &quot;How do you like it here at BrainFry?&quot;: {
        &quot;unlocked&quot;: true,
        &quot;isNew&quot;: true,
        &quot;passage&quot;: &quot;Trix-How do you like it here at BrainFry?&quot;
    },
    // ... more topics
}&gt;&gt;

/* To unlock a new dialog and mark it as new:
&lt;&lt;set $trixBrainFryDialogs[&quot;newTopic&quot;].unlocked = true&gt;&gt;
&lt;&lt;set $trixBrainFryDialogs[&quot;newTopic&quot;].isNew = true&gt;&gt;
*/

&lt;&lt;set $playerComplimentedTrixHair to false&gt;&gt;</tw-passagedata><tw-passagedata pid="162" name="CharacterXavier" tags="" position="225,2100" size="100,100">&lt;&lt;character &#39;xavier&#39; &#39;Xavier&#39; &#39;imgs/characters/xavier/xavier-portrait.webp&#39;&gt;&gt;

&lt;&lt;set $relationshipXavier to 50&gt;&gt;

&lt;&lt;set $xavierGitGudDialogs = {}&gt;&gt;</tw-passagedata><tw-passagedata pid="163" name="CharacterYuki" tags="" position="350,2100" size="100,100">&lt;&lt;character &#39;yuki&#39; &#39;Yuki&#39; &#39;imgs/characters/yuki/yuki-portrait.webp&#39;&gt;&gt;
&lt;&lt;character &#39;gitgud-employee-yuki&#39; &#39;GitGud Employee&#39; &#39;imgs/characters/yuki/yuki-portrait.webp&#39;&gt;&gt;

&lt;&lt;set $relationshipYuki to 50&gt;&gt;

&lt;&lt;set $yukiGitGudDialogs = {}&gt;&gt;</tw-passagedata><tw-passagedata pid="164" name="IMApp" tags="" position="475,2100" size="100,100">&lt;div class=&quot;cyber-desktop-im&quot;&gt;\
    &lt;div class=&quot;im-header&quot;&gt;&lt;span class=&quot;im-header-text&quot;&gt;Instant Messenger&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;im-main&quot;&gt;\
        &lt;div class=&quot;im-contacts-pane&quot;&gt;\
            &lt;&lt;nobr&gt;&gt;
            &lt;!-- Contact --&gt;
            &lt;div id=&quot;contact-cipher&quot; class=&quot;contact-entry&quot;&gt;
                &lt;img src=&quot;imgs/characters/cipher/cipher-portrait.webp&quot; class=&quot;contact-img&quot; alt=&quot;CipherLynx&quot;&gt;
                &lt;span class=&quot;contact-name&quot;&gt;
                    &lt;&lt;link &quot;CipherLynx &quot;&gt;&gt;
                        &lt;&lt;addclass &quot;#contact-cipher&quot; &quot;contact-entry-selected&quot;&gt;&gt;
                             &lt;&lt;run $(&#39;.contact-entry&#39;).removeClass(&#39;contact-entry-selected&#39;)&gt;&gt;
                            &lt;&lt;toggleclass &quot;#contact-cipher&quot; &quot;contact-entry-selected&quot;&gt;&gt;
                            &lt;&lt;replace &quot;#chat-display&quot;&gt;&gt;
                                 &lt;&lt;include &quot;IMApp-CipherLynx&quot;&gt;&gt;
                                 &lt;&lt;run MindWare.updateChatDisplayBackground()&gt;&gt;
                            &lt;&lt;/replace&gt;&gt;
                    &lt;&lt;/link&gt;&gt;
                &lt;/span&gt;
                &lt;&lt;set _hasUnlockedNewTopics = false&gt;&gt;
                &lt;&lt;for _topic, _data range $cipherInstantMessages&gt;&gt;
                    &lt;&lt;if _data.unlocked and _data.isNew&gt;&gt;
                        &lt;&lt;set _hasUnlockedNewTopics = true&gt;&gt;
                    &lt;&lt;/if&gt;&gt;
                &lt;&lt;/for&gt;&gt;
                &lt;&lt;if _hasUnlockedNewTopics&gt;&gt;
                    &lt;span class=&quot;im-contact-new-emoji&quot;&gt;🆕&lt;/span&gt;
                &lt;&lt;/if&gt;&gt;
            &lt;/div&gt;
            &lt;&lt;/nobr&gt;&gt;\
        &lt;/div&gt;\
        &lt;div class=&quot;im-chat-pane&quot;&gt;\
            &lt;div id=&quot;chat-display&quot; class=&quot;chat-display&quot;&gt;\
            &lt;p style=&quot;text-align: center;&quot;&gt;Please select a contact to start an encrypted chat.&lt;/p&gt;
            &lt;p id=&quot;bottom-im-text&quot; style=&quot;text-align: center;&quot;&gt;Read conversations are automatically deleted.&lt;/p&gt;\
            &lt;/div&gt;\
            &lt;!--&lt;div class=&quot;chat-response-area&quot;&gt;\
                &lt;button class=&quot;im-response-button&quot;&gt;Definitely! See you there.&lt;/button&gt;\
                &lt;button class=&quot;im-response-button&quot;&gt;Not sure yet, I have a lot to do.&lt;/button&gt;\
                &lt;button class=&quot;im-response-button&quot;&gt;Sorry, can&#39;t make it this time.&lt;/button&gt;\
            &lt;/div&gt;\ --&gt;
        &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\
\
&lt;&lt;if $navigatedFromSidebar&gt;&gt;\
    &lt;&lt;if previous() is &quot;IMApp&quot;&gt;&gt;\
        &lt;p class=&quot;back-link&quot;&gt;
            [[Go Back-&gt;Computer]]
        &lt;/p&gt;
    &lt;&lt;else&gt;&gt;\
        &lt;p class=&quot;back-link&quot;&gt;
            &lt;&lt;link &quot;Go Back&quot; $returnPassage&gt;&gt;
                &lt;&lt;set $navigatedFromSidebar to false&gt;&gt;
            &lt;&lt;/link&gt;&gt;
        &lt;/p&gt;
    &lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
    &lt;p class=&quot;back-link&quot;&gt;
        [[Go Back-&gt;Computer]]
    &lt;/p&gt;
&lt;&lt;/if&gt;&gt;\

&lt;script&gt;
// Hides the background image of the chat-display div.
MindWare.updateChatDisplayBackground = function() {
    var chatDisplay = document.getElementById(&#39;chat-display&#39;);
    // Always hide background image
    chatDisplay.style.backgroundImage = &#39;none&#39;;
}
&lt;/script&gt;</tw-passagedata><tw-passagedata pid="165" name="IMApp-QuickAccess" tags="" position="600,2100" size="100,100">&lt;&lt;include &quot;IMApp&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="166" name="IMApp-CipherLynx-Messages" tags="" position="725,2100" size="100,100">&lt;&lt;set $cipherInstantMessages = {}&gt;&gt;</tw-passagedata><tw-passagedata pid="167" name="IMApp-CipherLynx" tags="nobr" position="850,2100" size="100,100">&lt;strong&gt;Topics to discuss:&lt;/strong&gt;&lt;br&gt;

&lt;&lt;set _hasUnlockedTopics = false&gt;&gt; 

&lt;&lt;set _reversedMessages = []&gt;&gt; 
&lt;&lt;for _topic, _data range $cipherInstantMessages&gt;&gt;
    &lt;&lt;set _reversedMessages.unshift({topic: _topic, data: _data})&gt;&gt; 
&lt;&lt;/for&gt;&gt;

&lt;&lt;for _item range _reversedMessages&gt;&gt;
    &lt;&lt;set _topic = _item.topic&gt;&gt; 
    &lt;&lt;set _data = _item.data&gt;&gt; 
    &lt;&lt;if _data.unlocked&gt;&gt;
        &lt;&lt;set _hasUnlockedTopics = true&gt;&gt;
        &lt;&lt;set _buttonText = _topic&gt;&gt;
        &lt;&lt;set _tempPassage = _data.passage&gt;&gt;
        &lt;&lt;if _data.isNew&gt;&gt;
            &lt;&lt;set _buttonText += &quot; 🆕&quot;&gt;&gt;
        &lt;&lt;/if&gt;&gt;
        &lt;&lt;capture _tempPassage _buttonText&gt;&gt;
            @@.im-topic;
            &lt;&lt;button _buttonText&gt;&gt; 
                &lt;&lt;replace &quot;#chat-display&quot;&gt;&gt;&lt;&lt;include _tempPassage&gt;&gt;&lt;&lt;/replace&gt;&gt;
            &lt;&lt;/button&gt;&gt;@@
            &lt;br&gt;
        &lt;&lt;/capture&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;if not _hasUnlockedTopics&gt;&gt; 
    &lt;p&gt;You have nothing to discuss with CipherLynx right now.&lt;/p&gt;
    &lt;br&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="168" name="IMApp-CipherLynx-Landlord" tags="nobr" position="975,2100" size="100,100">&lt;&lt;set $cipherInstantMessages[&quot;Landlord Job&quot;].isNew = false&gt;&gt;
&lt;&lt;set $cipherInstantMessages[&quot;Landlord Job&quot;].unlocked = false&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Hey Cipher, thanks for the heads-up on that job listing. Really appreciate it, man.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Don&#39;t mention it 😎&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Have you already finished the job?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;if $spyingLandlordFinished is true&gt;&gt;
    &lt;&lt;player-chat&gt;&gt;You bet! The landlord is really spying on his tenants - and not just that...&lt;&lt;/player-chat&gt;&gt;
    &lt;&lt;cipher-chat&gt;&gt;Don&#39;t tease me! What else?&lt;&lt;/cipher-chat&gt;&gt;
    &lt;&lt;player-chat&gt;&gt;He&#39;s selling access to the cameras to others.&lt;&lt;/player-chat&gt;&gt;
    &lt;&lt;cipher-chat&gt;&gt;No way!&lt;&lt;/cipher-chat&gt;&gt;
    &lt;&lt;player-chat&gt;&gt;Yes way!&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;player-chat&gt;&gt;Not yet.&lt;&lt;/player-chat&gt;&gt;
    &lt;&lt;player-chat&gt;&gt;I wanted to thank you first 🙏&lt;&lt;/player-chat&gt;&gt;
    &lt;&lt;cipher-chat&gt;&gt;Ooh, that&#39;s nice of you, but you should hurry up - jobs like this don&#39;t wait.&lt;&lt;/cipher-chat&gt;&gt;
    &lt;&lt;player-chat&gt;&gt; Yea, I know.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;And how would you rate the meme I sent you?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;This one:&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;&lt;&lt;link [img[imgs/emails/meme-violet.webp]]&gt;&gt;&lt;&lt;popover&gt;&gt;[img[imgs/emails/meme-violet.webp]]&lt;&lt;/popover&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/cipher-chat&gt;&gt;

&lt;&lt;player-chat&gt;&gt;Well... I wouldn&#39;t mind getting saved by that supergirl.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Your idea of &quot;getting saved&quot; is probably something like the image below, right?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;&lt;&lt;link [img[imgs/IM/violet-blowjob.jpg]]&gt;&gt;&lt;&lt;popover&gt;&gt;[img[imgs/IM/violet-blowjob.jpg]]&lt;&lt;/popover&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Ha ha, yea... that&#39;s pretty accurate.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;But the real question is how the rescue mission ends.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Would you choose ending 1:&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;&lt;&lt;link [img[imgs/IM/violet-cumshot.jpg]]&gt;&gt;&lt;&lt;popover&gt;&gt;[img[imgs/IM/violet-cumshot.jpg]]&lt;&lt;/popover&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Or would you choose ending 2:&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;&lt;&lt;link [img[imgs/IM/violet-cum-in-mouth.jpg]]&gt;&gt;&lt;&lt;popover&gt;&gt;[img[imgs/IM/violet-cum-in-mouth.jpg]]&lt;&lt;/popover&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/cipher-chat&gt;&gt;
&lt;span id=&quot;ending-choice&quot;&gt;
    @@.im-response;&lt;&lt;button &quot;When a canvas looks that good, you gotta paint it! I would choose the first ending.&quot;&gt;&gt;
        &lt;&lt;replace &quot;#ending-choice&quot;&gt;&gt;
            &lt;&lt;player-chat&gt;&gt;When a canvas looks that good, you gotta paint it! I would choose the first ending.&lt;&lt;/player-chat&gt;&gt;
            &lt;&lt;cipher-chat&gt;&gt;I support that logic!&lt;&lt;/cipher-chat&gt;&gt;
            &lt;&lt;include &quot;IMApp-CipherLynx-Landlord-Cont1&quot;&gt;&gt;
        &lt;&lt;/replace&gt;&gt;
    &lt;&lt;/button&gt;&gt;@@
    @@.im-response;&lt;&lt;button &quot;I hate it when superheros leave a huge mess behind. I would go with the second ending.&quot;&gt;&gt;
        &lt;&lt;replace &quot;#ending-choice&quot;&gt;&gt;
            &lt;&lt;player-chat&gt;&gt;I hate it when superheros leave a huge mess behind. I would go with the second ending.&lt;&lt;/player-chat&gt;&gt;
            &lt;&lt;cipher-chat&gt;&gt;Indeed, clean up is an important part of every rescue mission!&lt;&lt;/cipher-chat&gt;&gt;
            &lt;&lt;include &quot;IMApp-CipherLynx-Landlord-Cont1&quot;&gt;&gt;
        &lt;&lt;/replace&gt;&gt;
    &lt;&lt;/button&gt;&gt;@@
    @@.im-response;&lt;&lt;button &quot;Is there a third option? I should be the one rewarding her.&quot;&gt;&gt;
        &lt;&lt;replace &quot;#ending-choice&quot;&gt;&gt;
            &lt;&lt;player-chat&gt;&gt;Is there a third option? I should be the one rewarding her.&lt;&lt;/player-chat&gt;&gt;
            &lt;&lt;cipher-chat&gt;&gt;There always is 😉&lt;&lt;/cipher-chat&gt;&gt;
            &lt;&lt;cipher-chat&gt;&gt;&lt;&lt;link [img[imgs/IM/violet-spread.jpg]]&gt;&gt;&lt;&lt;popover&gt;&gt;[img[imgs/IM/violet-spread.jpg]]&lt;&lt;/popover&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/cipher-chat&gt;&gt;
            &lt;&lt;player-chat&gt;&gt;Yep! That would be my choice 👅&lt;&lt;/player-chat&gt;&gt;
            &lt;&lt;include &quot;IMApp-CipherLynx-Landlord-Cont1&quot;&gt;&gt;
        &lt;&lt;/replace&gt;&gt;
    &lt;&lt;/button&gt;&gt;@@
&lt;/span&gt;</tw-passagedata><tw-passagedata pid="169" name="IMApp-CipherLynx-Landlord-Cont1" tags="nobr" position="1100,2100" size="100,100">&lt;&lt;player-chat&gt;&gt;Man, my productivity goes down every time you start porn-posting 😥&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Hey, someone&#39;s got to keep things interesting around here! 😜&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Ha ha, true. But hey, I gotta bounce. Got some other stuff to handle.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;No prob. Go be a hero.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Will do. Catch you later, Cipher!&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Later!&lt;&lt;/cipher-chat&gt;&gt;</tw-passagedata><tw-passagedata pid="170" name="IMApp-CipherLynx-FirstDayAtBrainFry" tags="nobr" position="1225,2100" size="100,100">&lt;&lt;cipher-chat&gt;&gt;So, how did your first day at BrainFry go?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;It was alright. The work&#39;s pretty monotonous, but I met some interesting folks. The boss seems decent, and my coworker Ray is a total nerd. Plus, there&#39;s this artistic chick, Trix, who&#39;s got a cool vibe.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Have you made a move on her yet?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;That&#39;s all you care about, isn&#39;t it?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;if $playerComplimentedTrixHair is true&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Well, I complimented her hair, and she seemed to really appreciate it.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Nice! I guess that counts as making a move 😉&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;player-chat&gt;&gt;I don&#39;t think she would appreciate a newbie making a move on her right away.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Maybe she would 😉&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Those who never risk anything never reap any rewards..&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;&lt;&lt;link [img[imgs/IM/office-sex.jpg]]&gt;&gt;&lt;&lt;popover&gt;&gt;[img[imgs/IM/office-sex.jpg]]&lt;&lt;/popover&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Is this your idea of office work? 😂&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;You&#39;re telling me you left freelancing for some other reason than this? 😜&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Well, you know, the allure of a stable income is hard to resist.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;set $cipherInstantMessages[&quot;First day at BrainFry&quot;].isNew = false&gt;&gt;
&lt;&lt;set $cipherInstantMessages[&quot;First day at BrainFry&quot;].unlocked = false&gt;&gt;</tw-passagedata><tw-passagedata pid="171" name="IMApp-CipherLynx-SIMSDelivery" tags="nobr" position="100,2225" size="100,100">&lt;&lt;set $cipherInstantMessages[&quot;S.I.M.S. Delivery&quot;].isNew = false&gt;&gt;
&lt;&lt;set $cipherInstantMessages[&quot;S.I.M.S. Delivery&quot;].unlocked = false&gt;&gt;
&lt;&lt;player-chat&gt;&gt;You here, Cipher?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Yep! What&#39;s up?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;So, my boss asked me to deliver a custom S.I.M.S. to an electronics store called GitGud recently.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Sounds interesting! How did it go?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;if $GitGudSIMSExperience is true&gt;&gt;
    &lt;&lt;player-chat&gt;&gt;I met this huge black guy called Xavier. He installs cyberware for a living.&lt;&lt;/player-chat&gt;&gt;
    &lt;&lt;cipher-chat&gt;&gt;An acquaintance like that can come in handy.&lt;&lt;/cipher-chat&gt;&gt;
    &lt;&lt;player-chat&gt;&gt;I got the opportunity to try the custom S.I.M.S. and went for it.&lt;&lt;/player-chat&gt;&gt;
    &lt;&lt;player-chat&gt;&gt;It was something else, Cipher. A custom sex S.I.M.S. made for some woman.&lt;&lt;/player-chat&gt;&gt;
    &lt;&lt;cipher-chat&gt;&gt;Oh wow! Tell me more! What was it like?&lt;&lt;/cipher-chat&gt;&gt;
    &lt;&lt;if $GitGudSIMSExperienceLiked is true&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;It was unreal. The S.I.M.S. put me in a girl&#39;s body, and I experienced what it feels to get fucked - literary.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Damn... you were okay with that?&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;I was definitely okay with how great it felt. Plus, my body looked amazing.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Interesting... Sometimes we discover parts of ourselves in the most unexpected ways. Maybe there&#39;s a side of you that resonates with that experience more than you realized?&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;What do you mean?&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;I mean, experiences like that can be eye-opening. You never know what you like until you try it.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;Huh, I hadn&#39;t thought about it like that.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Maybe you should try more female-POV S.I.M.S. to see if they also scratch the itch?&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;Scratch the itch? It&#39;s not like I&#39;m sitting here, craving a dick.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Ha ha, I know, but the end justifies the means.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;And the end is?&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;&lt;&lt;picture &quot;imgs/IM/solo-cumshot.jpg&quot;&gt;&gt;&lt;&lt;/cipher-chat&gt;&gt;        
        &lt;&lt;player-chat&gt;&gt;Is that how you think I look like? lol&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Yea... that&#39;s exactly how the average hacker looks like, isn&#39;t it 😂🤣&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;What I meant to say that an epic orgasm is worth pursuing regardless of what it takes to achieve it.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;So you&#39;re saying that I should indulge in whatever novel dopamine-releasing experiences to enjoy as much pleasure as possible? Sounds like something a porn maniac like you would say...&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;We all have our tastes, desires, and triggers. I&#39;m not ashamed of mine, and you shouldn&#39;t be ashamed of yours.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;I know you&#39;re not craving a dick, but you said that getting fucked felt amazing, so there&#39;s definitely some part of you that you should explore more.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;Hmm... sometimes you make more sense than I want to admit.&lt;&lt;/player-chat&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;It was unreal. The S.I.M.S. put me in a girl&#39;s body, and I experienced what it feels to get fucked - literary.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Damn... you were okay with that?&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;Honestly, it felt weird. Not sure it&#39;s my thing.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Yeah, you can&#39;t really be sure if you&#39;ve tried just once.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;I don&#39;t know if I&#39;d want to try something like that again.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Why not? You should at least consider it. It takes a while to appreciated different forms of pleasure and different sources of arousal.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;You&#39;ve been literary thrown into a girl&#39;s body and had a dick showed down one of your holes. That&#39;s a lot to take in (pun not intended).&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;Ha ha, I guess you&#39;re right.&lt;&lt;/player-chat&gt;&gt; 
        &lt;&lt;player-chat&gt;&gt;I liked how my body looked, but the rest was a bit too much.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;I know that there are less intense female-POV S.I.M.S. that you could try. Ones where you just masturbate or have sex with another girl.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;I&#39;ll keep that in mind. Sounds like a good idea. Have you tried them yourself?&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Nah... not many people have. S.I.M.S. are still too new and too expensive to be widespread.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;You should consider yourself lucky to have tried one... even if the dicking took you by surprise&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;That&#39;s one way to put it.&lt;&lt;/player-chat&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;if $GitGudIntroductionPeeked is true&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;I was looking for this guy named Xavier, who installs cyberware for a living. Just when I was about to knock on his door, I heard strange noises from the inside. I decided to peek though the keyhole and... guess what.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;What?&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;Some chick in high heels was sucking on his huge black cock!&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;WHAT?!&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;I&#39;m not kidding.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;That&#39;s crazy! What happened then?&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;He blew his load in her mouth and she left.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;That&#39;s what I call an interesting work experience.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;And what about the S.I.M.S. you delivered? Did you try it?&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;No, I didn&#39;t. Custom ones can be risky.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Man, you passed up a golden opportunity! Most of those horror stories are just OmniNet myths. There are countless people who would love to try S.I.M.S. but can&#39;t afford to.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;Too expensive?&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;You really don&#39;t keep up with tech news much anymore, do you? Yes, S.I.M.S. (especially custom ones) can be stupidly expensive.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;I see.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;If you get another shot, go for it. They&#39;re a blast, from what I&#39;ve heard.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;What&#39;s so great about them?&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Well, they let you experience anything you want as if you were in a different body.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;So I could be a cape-wearing superhero?&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Sure. Or you could be a 10-inch dick wielding porn star.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;Wow!&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Of course, you could also be on the receiving end of the 10-inch weapon.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;&lt;&lt;picture &quot;imgs/IM/female-pov-penetration.png&quot;&gt;&gt;&lt;&lt;/cipher-chat&gt;&gt;              
        &lt;&lt;player-chat&gt;&gt;That sounds... interesting.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;You bet.&lt;&lt;/cipher-chat&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;I met this huge black guy called Xavier. He installs cyberware for a living.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;An acquaintance like that can come in handy.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;And what about the S.I.M.S. you delivered? Did you try it?&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;No, I didn&#39;t. Custom ones can be risky.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Man, you passed up a golden opportunity! Most of those horror stories are just OmniNet myths. There are countless people who would love to try S.I.M.S. but can&#39;t afford to.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;Too expensive?&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;You really don&#39;t keep up with tech news much anymore, do you? Yes, S.I.M.S. (especially custom ones) can be stupidly expensive.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;I see.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;If you get another shot, go for it. They&#39;re a blast, from what I&#39;ve heard.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;What&#39;s so great about them?&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Well, they let you experience anything you want as if you were in a different body.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;So I could be a cape-wearing superhero?&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Sure. Or you could be a 10-inch dick wielding porn star.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;Wow!&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;Of course, you could also be on the receiving end of the 10-inch weapon.&lt;&lt;/cipher-chat&gt;&gt;
        &lt;&lt;player-chat&gt;&gt;That sounds... interesting.&lt;&lt;/player-chat&gt;&gt;
        &lt;&lt;cipher-chat&gt;&gt;You bet.&lt;&lt;/cipher-chat&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="172" name="IMApp-CipherLynx-AvaCanTalkToMe" tags="nobr" position="225,2225" size="100,100">&lt;&lt;player-chat&gt;&gt;AVA just talked with me.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;What?! I thought the implant was supposed to stop her.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;It&#39;s supposed to, but it didn&#39;t, and now her voice is even clearer.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Damn, that&#39;s not good. Did she say anything specific?&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;She said the implant gives her a direct line to my consciousness. She can reach me anytime she wants.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;This is bad. We need to figure out a way to get her out of your head for good.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Got any ideas?&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;None at the moment, but I&#39;ll look into it and let you know as soon as I find something useful.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Thank you, Cipher.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;cipher-chat&gt;&gt;Also, it&#39;s possible that AVA can hear or see everything you do... maybe even read your thoughts. But it&#39;s also possible that she can&#39;t — at least not all the time. We just don&#39;t know her full capabilities.&lt;&lt;/cipher-chat&gt;&gt;
&lt;&lt;player-chat&gt;&gt;Great, so I have to assume she&#39;s always watching and listening. Just perfect.&lt;&lt;/player-chat&gt;&gt;
&lt;&lt;set $cipherInstantMessages[&quot;AVA Can Talk To Me&quot;].isNew = false&gt;&gt;
&lt;&lt;set $cipherInstantMessages[&quot;AVA Can Talk To Me&quot;].unlocked = false&gt;&gt;</tw-passagedata><tw-passagedata pid="173" name="Computer" tags="" position="350,2225" size="100,100">&lt;div class=&quot;desktop&quot;&gt;\
    &lt;!-- Adding Top bar --&gt;\
  &lt;div class=&quot;top-bar&quot;&gt;\
  @@.about-pc-button;&lt;&lt;button &quot;About This PC&quot;&gt;&gt;
   &lt;&lt;run setup.showAboutPcWindow()&gt;&gt;
  &lt;&lt;/button&gt;&gt;@@\
    &lt;span class=&quot;notification-counter&quot;&gt;&lt;i class=&quot;fas fa-wifi&quot;&gt;&lt;/i&gt;   &lt;i class=&quot;fas fa-volume-up&quot;&gt;&lt;/i&gt;&lt;/span&gt;\
  &lt;/div&gt;
  &lt;!-- Notification Area --&gt;\
  &lt;div class=&quot;notification-area&quot;&gt;\
      &lt;!-- Notifications will be inserted here --&gt;\
      &lt;&lt;for _notification range $notificationsPC&gt;&gt;\
          &lt;div class=&quot;notification-bubble&quot;&gt;&lt;&lt;print _notification&gt;&gt;&lt;/div&gt;\
      &lt;&lt;/for&gt;&gt;
  &lt;/div&gt;
&lt;div class=&quot;about-pc&quot; id=&quot;aboutPcWindow&quot; style=&quot;display: none;&quot;&gt;\
    &lt;div class=&quot;about-pc-header&quot;&gt;\
        About This PC\
        &lt;span id=&quot;closeAboutPcWindow&quot; class=&quot;about-pc-close-button&quot;&gt;⛌&lt;/span&gt;\
    &lt;/div&gt;\
    &lt;div class=&quot;about-pc-body&quot;&gt;\
        &lt;p&gt;&lt;b&gt;Computer Name:&lt;/b&gt; &lt;span id=&quot;playerPcName&quot;&gt;&lt;/span&gt;&lt;/p&gt;\
        &lt;p&gt;&lt;b&gt;Username:&lt;/b&gt; &lt;span id=&quot;playerNickname&quot;&gt;&lt;/span&gt;&lt;/p&gt;\
        /*&lt;p&gt;&lt;b&gt;Performance:&lt;/b&gt; &lt;span id=&quot;playerPcPerformance&quot;&gt;&lt;/span&gt;&lt;/p&gt;\*/\
    &lt;/div&gt;\
&lt;/div&gt;\
    &lt;div class=&quot;dock&quot;&gt;
        &lt;div class=&quot;desktop-icon&quot; onclick=&quot;SugarCube.Engine.play(&#39;HackTarget&#39;)&quot;&gt;👾&lt;div class=&quot;icon-tooltip&quot;&gt;Hack Target&lt;/div&gt;&lt;/div&gt;
        &lt;div class=&quot;desktop-icon&quot; onclick=&quot;SugarCube.Engine.play(&#39;WebBrowser&#39;)&quot;&gt;🌐&lt;div class=&quot;icon-tooltip&quot;&gt;OmniNet Browser&lt;/div&gt;&lt;/div&gt;
        &lt;div class=&quot;desktop-icon&quot; onclick=&quot;SugarCube.Engine.play(&#39;EmailClient&#39;)&quot;&gt;📧&lt;div class=&quot;icon-tooltip&quot;&gt;Email Client&lt;/div&gt;&lt;/div&gt;
        &lt;div class=&quot;desktop-icon&quot; onclick=&quot;SugarCube.Engine.play(&#39;IMApp&#39;)&quot;&gt;💬&lt;div class=&quot;icon-tooltip&quot;&gt;Instant Messenger&lt;/div&gt;&lt;/div&gt;
        &lt;div class=&quot;desktop-icon&quot; onclick=&quot;SugarCube.Engine.play(&#39;NotesApp&#39;)&quot;&gt;📝&lt;div class=&quot;icon-tooltip&quot;&gt;Notes&lt;/div&gt;&lt;/div&gt;
        &lt;div class=&quot;desktop-icon&quot; onclick=&quot;SugarCube.Engine.play(&#39;FilesApp&#39;)&quot;&gt;🗂️&lt;div class=&quot;icon-tooltip&quot;&gt;Files&lt;/div&gt;&lt;/div&gt;
        &lt;div class=&quot;desktop-icon&quot; onclick=&quot;SugarCube.Engine.play(&#39;ComputerSettings&#39;)&quot;&gt;🔧&lt;div class=&quot;icon-tooltip&quot;&gt;Settings&lt;/div&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;\
\
&lt;&lt;if $navigatedFromSidebar&gt;&gt;\
    &lt;&lt;if previous() is &quot;Computer&quot;&gt;&gt;\
        &lt;p class=&quot;back-link&quot;&gt;
            [[Go Back-&gt;HomeBacklog]]
        &lt;/p&gt;
    &lt;&lt;else&gt;&gt;\
        &lt;p class=&quot;back-link&quot;&gt;
            &lt;&lt;link &quot;Go Back&quot; $returnPassage&gt;&gt;
                &lt;&lt;set $navigatedFromSidebar to false&gt;&gt;
            &lt;&lt;/link&gt;&gt;
        &lt;/p&gt;
    &lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
    &lt;p class=&quot;back-link&quot;&gt;
        [[Go Back-&gt;HomeBacklog]]
    &lt;/p&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;script&gt;&gt;
setup.showAboutPcWindow = function() {
    $(&#39;#playerPcName&#39;).text(State.variables.playerPcName);
    $(&#39;#playerNickname&#39;).text(State.variables.playerNickname);
    //$(&#39;#playerPcPerformance&#39;).text(State.variables.playerPcPerformance + &quot; petaFLOPS&quot;);
    $(&#39;#aboutPcWindow&#39;).show();

    // Add close event
    $(&#39;#closeAboutPcWindow&#39;).off(&#39;click&#39;).click(function() {
        $(&#39;#aboutPcWindow&#39;).hide();
    });
}
&lt;&lt;/script&gt;&gt;
&lt;&lt;script&gt;&gt;
$(document).ready(function() {
    $(&quot;.desktop&quot;).css({
        &quot;background-image&quot;: &quot;url(&#39;imgs/wallpapers/&quot; + State.variables.activeWallpaper + &quot;.jpg&#39;)&quot;,
        &quot;background-size&quot;: &quot;cover&quot;
    });
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="174" name="Computer-QuickAccess" tags="" position="475,2225" size="100,100">&lt;&lt;include &quot;Computer&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="175" name="FilesApp" tags="" position="600,2225" size="100,100">&lt;div class=&quot;cyber-desktop-files&quot;&gt;\
    &lt;div class=&quot;cyber-files-header&quot;&gt;&lt;span class=&quot;cyber-files-header-text&quot;&gt;Files&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;cyber-files-content&quot;&gt;
        &lt;div class=&quot;file-item folder&quot; onclick=&quot;SugarCube.Engine.play(&#39;FilesApp-Research&#39;)&quot;&gt;&lt;span&gt;📁&lt;/span&gt;&lt;p&gt;Research&lt;/p&gt;&lt;/div&gt;
        &lt;div class=&quot;file-item file&quot; onclick=&quot;SugarCube.Engine.play(&#39;FilesApp-README-Template&#39;)&quot;&gt;&lt;span&gt;📄&lt;/span&gt;&lt;p&gt;README-Template.md&lt;/p&gt;&lt;/div&gt;
        &lt;div class=&quot;file-item file&quot; onclick=&quot;SugarCube.Engine.play(&#39;FilesApp-HackersManifesto&#39;)&quot;&gt;&lt;span&gt;📄&lt;/span&gt;&lt;p&gt;Hacker&#39;s Manifesto.txt&lt;/p&gt;&lt;/div&gt;
        &lt;div class=&quot;file-item executable&quot; onclick=&quot;SugarCube.Engine.play(&#39;FilesApp-Stars&#39;)&quot;&gt;&lt;span&gt;✨&lt;/span&gt;&lt;p&gt;screensaver.exe&lt;/p&gt;&lt;/div&gt;
        &lt;&lt;if $spyingLandlordFinished and not $spyingLandlordExposed&gt;&gt;
            &lt;div class=&quot;file-item executable action-point-button&quot; onclick=&quot;MindWare.reselectCameraImages(); MindWare.processActionButtonClick(1, &#39;SpyingLandlordHack-server-camera-access-backdoor&#39;)&quot;&gt;&lt;span&gt;📹&lt;/span&gt;&lt;p&gt;cameras.sh &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back-&gt;Computer]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="176" name="FilesApp-Research" tags="" position="725,2225" size="100,100">&lt;div class=&quot;cyber-desktop-files&quot;&gt;\
    &lt;div class=&quot;cyber-files-header&quot;&gt;&lt;span class=&quot;cyber-files-header-text&quot;&gt;Files - Research&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;research-files-content&quot;&gt;\
        &lt;div id=&quot;available-images&quot; style=&quot;display: flex; flex-wrap: wrap; justify-content: flex-start;&quot;&gt;\
        &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back-&gt;FilesApp]]&lt;/p&gt;

&lt;&lt;script&gt;&gt;
$(document).ready(function() {
    let imagesDiv = $(&#39;#available-images&#39;);
    State.variables.unlockedImages.forEach(function(image, index) {
        let displayImageName = &#39;research&#39; + (index + 1); // Sequential name for display

        let imgContainer = $(&#39;&lt;div&gt;&#39;)
                               .css({
                                   &#39;display&#39;: &#39;flex&#39;,
                                   &#39;flex-direction&#39;: &#39;column&#39;,
                                   &#39;align-items&#39;: &#39;center&#39;,
                                   &#39;margin&#39;: &#39;10px&#39;
                               });

        let img = $(&#39;&lt;img&gt;&#39;)
                    .attr(&#39;src&#39;, &#39;imgs/files/research/&#39; + image + &#39;.jpg&#39;) // Actual image file name
                    .attr(&#39;alt&#39;, displayImageName + &#39; preview&#39;)
                    .css({
                        &#39;width&#39;: &#39;141px&#39;, // Set only the width to preserve aspect ratio
                        &#39;cursor&#39;: &#39;pointer&#39;
                    })
                    .click(function() {
                        Dialog.setup(displayImageName + &#39;.jpg&#39; + &#39; Preview&#39;);
                        Dialog.wiki(&#39;&lt;div style=&quot;text-align:center;&quot;&gt;&lt;img src=&quot;imgs/files/research/&#39; + image + &#39;.jpg&quot; alt=&quot;&#39; + displayImageName + &#39; preview&quot; style=&quot;max-width:80%; max-height:80%;&quot;&gt;&lt;/div&gt;&#39;);
                        Dialog.open();
                    });

        let filename = $(&#39;&lt;span&gt;&#39;)
                         .text(displayImageName + &#39;.jpg&#39;) // Sequential display name
                         .css({
                             &#39;display&#39;: &#39;block&#39;,
                             &#39;text-align&#39;: &#39;center&#39;,
                             &#39;color&#39;: &#39;white&#39;,
                             &#39;margin-top&#39;: &#39;5px&#39;
                         });

        imgContainer.append(img).append(filename);
        imagesDiv.append(imgContainer);
    });
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="177" name="FilesApp-README-Template" tags="" position="850,2225" size="100,100">&lt;div class=&quot;cyber-desktop-files&quot;&gt;\
    &lt;div class=&quot;cyber-files-header&quot;&gt;&lt;span class=&quot;cyber-files-header-text&quot;&gt;Files - README-Template.md&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;research-files-content&quot;&gt;\
        # Project Title

        One Paragraph of project description goes here

        ## Getting Started

        These instructions will get you a copy of the project up and running on your local machine for development and testing purposes. See deployment for notes on how to deploy the project on a live system.

        ### Prerequisites

        What things you need to install the software and how to install them

        Give examples

        ### Installing

        A step by step series of examples that tell you how to get a development env running

        Say what the step will be

        Give the example

        And repeat

        until finished

        End with an example of getting some data out of the system or using it for a little demo

        ## Running the tests

        Explain how to run the automated tests for this system

        ### Break down into end to end tests

        Explain what these tests test and why

        Give an example

        ### And coding style tests

        Explain what these tests test and why

        Give an example

        ## Deployment

        Add additional notes about how to deploy this on a live system
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back-&gt;FilesApp]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="178" name="FilesApp-HackersManifesto" tags="" position="975,2225" size="100,100">&lt;div class=&quot;cyber-desktop-files&quot;&gt;\
    &lt;div class=&quot;cyber-files-header&quot;&gt;&lt;span class=&quot;cyber-files-header-text&quot;&gt;Files - Hacker&#39;s Manifesto.txt&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;research-files-content&quot;&gt;\
                                    Phrack Inc.

                            Volume One, Issue 7, Phile 3 of 10

        =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
        The following was written shortly after my arrest...

                            The Conscience of a Hacker

                                            by

                                    +++The Mentor+++

                                Written on January 8, 1986
        =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

                Another one got caught today, it&#39;s all over the papers.  &quot;Teenager
        Arrested in Computer Crime Scandal&quot;, &quot;Hacker Arrested after Bank Tampering&quot;...
                Damn kids.  They&#39;re all alike.

                But did you, in your three-piece psychology and 1950&#39;s technobrain,
        ever take a look behind the eyes of the hacker?  Did you ever wonder what
        made him tick, what forces shaped him, what may have molded him?
                I am a hacker, enter my world...
                Mine is a world that begins with school... I&#39;m smarter than most of
        the other kids, this crap they teach us bores me...
                Damn underachiever.  They&#39;re all alike.

                I&#39;m in junior high or high school.  I&#39;ve listened to teachers explain
        for the fifteenth time how to reduce a fraction.  I understand it.  &quot;No, Ms.
        Smith, I didn&#39;t show my work.  I did it in my head...&quot;
                Damn kid.  Probably copied it.  They&#39;re all alike.

                I made a discovery today.  I found a computer.  Wait a second, this is
        cool.  It does what I want it to.  If it makes a mistake, it&#39;s because I
        screwed it up.  Not because it doesn&#39;t like me...
                        Or feels threatened by me...
                        Or thinks I&#39;m a smart ass...
                        Or doesn&#39;t like teaching and shouldn&#39;t be here...
                Damn kid.  All he does is play games.  They&#39;re all alike.

                And then it happened... a door opened to a world... rushing through
        the phone line like heroin through an addict&#39;s veins, an electronic pulse is
        sent out, a refuge from the day-to-day incompetencies is sought... a board is
        found.
                &quot;This is it... this is where I belong...&quot;
                I know everyone here... even if I&#39;ve never met them, never talked to
        them, may never hear from them again... I know you all...
                Damn kid.  Tying up the phone line again.  They&#39;re all alike...

                You bet your ass we&#39;re all alike... we&#39;ve been spoon-fed baby food at
        school when we hungered for steak... the bits of meat that you did let slip
        through were pre-chewed and tasteless.  We&#39;ve been dominated by sadists, or
        ignored by the apathetic.  The few that had something to teach found us will-
        ing pupils, but those few are like drops of water in the desert.

                This is our world now... the world of the electron and the switch, the
        beauty of the baud.  We make use of a service already existing without paying
        for what could be dirt-cheap if it wasn&#39;t run by profiteering gluttons, and
        you call us criminals.  We explore... and you call us criminals.  We seek
        after knowledge... and you call us criminals.  We exist without skin color,
        without nationality, without religious bias... and you call us criminals.
        You build atomic bombs, you wage wars, you murder, cheat, and lie to us
        and try to make us believe it&#39;s for our own good, yet we&#39;re the criminals.

                Yes, I am a criminal.  My crime is that of curiosity.  My crime is
        that of judging people by what they say and think, not what they look like.
        My crime is that of outsmarting you, something that you will never forgive me
        for.

                I am a hacker, and this is my manifesto.  You may stop this individual,
        but you can&#39;t stop us all... after all, we&#39;re all alike.

                                    +++The Mentor+++
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back-&gt;FilesApp]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="179" name="FilesApp-Stars" tags="" position="1100,2225" size="100,100">&lt;div class=&quot;stars-desktop-files&quot;&gt;\
    &lt;div class=&quot;cyber-files-header&quot;&gt;&lt;span class=&quot;cyber-files-header-text&quot;&gt;Files - screensaver.exe&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;stars-files-content&quot;&gt;\
         &lt;canvas style=&quot;height: 500px; width: 100%&quot; id=&quot;canvas&quot;&gt;&lt;/canvas&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\
         &lt;script&gt;
         &quot;use strict&quot;;

var canvas = document.getElementById(&#39;canvas&#39;),
  ctx = canvas.getContext(&#39;2d&#39;),
  w = canvas.width = window.innerWidth,
  h = canvas.height = window.innerHeight,
    
  hue = 217,
  stars = [],
  count = 0,
  maxStars = 1400;

// Cache gradient
var canvas2 = document.createElement(&#39;canvas&#39;),
    ctx2 = canvas2.getContext(&#39;2d&#39;);
    canvas2.width = 100;
    canvas2.height = 100;
var half = canvas2.width/2,
    gradient2 = ctx2.createRadialGradient(half, half, 0, half, half, half);
    gradient2.addColorStop(0.025, &#39;#fff&#39;);
    gradient2.addColorStop(0.1, &#39;hsl(&#39; + hue + &#39;, 61%, 33%)&#39;);
    gradient2.addColorStop(0.25, &#39;hsl(&#39; + hue + &#39;, 64%, 6%)&#39;);
    gradient2.addColorStop(1, &#39;transparent&#39;);

    ctx2.fillStyle = gradient2;
    ctx2.beginPath();
    ctx2.arc(half, half, half, 0, Math.PI * 2);
    ctx2.fill();

// End cache

function random(min, max) {
  if (arguments.length &lt; 2) {
    max = min;
    min = 0;
  }
  
  if (min &gt; max) {
    var hold = max;
    max = min;
    min = hold;
  }

  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function maxOrbit(x,y) {
  var max = Math.max(x,y),
      diameter = Math.round(Math.sqrt(max*max + max*max));
  return diameter/2;
}

var Star = function() {

  this.orbitRadius = random(maxOrbit(w,h));
  this.radius = random(60, this.orbitRadius) / 12;
  this.orbitX = w / 2;
  this.orbitY = h / 2;
  this.timePassed = random(0, maxStars);
  this.speed = random(this.orbitRadius) / 50000;
  this.alpha = random(2, 10) / 10;

  count++;
  stars[count] = this;
}

Star.prototype.draw = function() {
  var x = Math.sin(this.timePassed) * this.orbitRadius + this.orbitX,
      y = Math.cos(this.timePassed) * this.orbitRadius + this.orbitY,
      twinkle = random(10);

  if (twinkle === 1 &amp;&amp; this.alpha &gt; 0) {
    this.alpha -= 0.05;
  } else if (twinkle === 2 &amp;&amp; this.alpha &lt; 1) {
    this.alpha += 0.05;
  }

  ctx.globalAlpha = this.alpha;
    ctx.drawImage(canvas2, x - this.radius / 2, y - this.radius / 2, this.radius, this.radius);
  this.timePassed += this.speed;
}

for (var i = 0; i &lt; maxStars; i++) {
  new Star();
}

function animation() {
    ctx.globalCompositeOperation = &#39;source-over&#39;;
    ctx.globalAlpha = 0.8;
    ctx.fillStyle = &#39;hsla(&#39; + hue + &#39;, 64%, 6%, 1)&#39;;
    ctx.fillRect(0, 0, w, h)
  
  ctx.globalCompositeOperation = &#39;lighter&#39;;
  for (var i = 1, l = stars.length; i &lt; l; i++) {
    stars[i].draw();
  };  
  
  window.requestAnimationFrame(animation);
}

animation();&lt;/script&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back-&gt;FilesApp]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="180" name="NotesApp" tags="" position="1225,2225" size="100,100">&lt;!-- Textbox for note entry --&gt;\
&lt;div class=&quot;notesApp&quot;&gt;\
&lt;div class=&quot;notesApp-header&quot;&gt;&lt;span class=&quot;notesApp-header-text&quot;&gt;Notes&lt;/span&gt;&lt;/div&gt;\
&lt;div class=&quot;notesApp-content&quot;&gt;\
    &lt;h2&gt;New Note&lt;/h2&gt;\
    &lt;textarea id=&quot;noteInput&quot;&gt;&lt;/textarea&gt;&lt;br&gt;\
      @@.note-button;&lt;&lt;button &quot;Add note&quot;&gt;&gt;\
          &lt;&lt;if $(&quot;#noteInput&quot;).val().trim() == &quot;&quot; &gt;&gt;\
              &lt;&lt;run Dialog.setup(&quot;Warning&quot;)&gt;&gt;\
              &lt;&lt;run Dialog.wiki(&quot;Cannot add an empty note.&quot;)&gt;&gt;\
              &lt;&lt;run Dialog.open()&gt;&gt;\
          &lt;&lt;else&gt;&gt;\
              &lt;&lt;run $notes.unshift($(&quot;#noteInput&quot;).val().trim())&gt;&gt; \
              &lt;&lt;run $(&quot;#noteInput&quot;).val(&#39;&#39;)&gt;&gt;\
              &lt;&lt;replace &quot;#notesDisplay&quot;&gt;&gt;\
                  &lt;&lt;include &quot;NotesDisplay&quot;&gt;&gt;\
              &lt;&lt;/replace&gt;&gt;\
              &lt;&lt;goto &quot;NotesApp&quot;&gt;&gt;\
          &lt;&lt;/if&gt;&gt;\
      &lt;&lt;/button&gt;&gt;@@

    &lt;h2&gt;Saved Notes&lt;/h2&gt;\
    &lt;div id=&quot;notesDisplay&quot;&gt;\
        &lt;&lt;include &quot;NotesDisplay&quot;&gt;&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\
&lt;/div&gt;\
\
&lt;&lt;if $navigatedFromSidebar&gt;&gt;\
    &lt;&lt;if previous() is &quot;NotesApp&quot;&gt;&gt;\
        &lt;p class=&quot;back-link&quot;&gt;
            [[Go Back-&gt;Computer]]
        &lt;/p&gt;
    &lt;&lt;else&gt;&gt;\
        &lt;p class=&quot;back-link&quot;&gt;
            &lt;&lt;link &quot;Go Back&quot; $returnPassage&gt;&gt;
                &lt;&lt;set $navigatedFromSidebar to false&gt;&gt;
            &lt;&lt;/link&gt;&gt;
        &lt;/p&gt;
    &lt;&lt;/if&gt;&gt;\
&lt;&lt;else&gt;&gt;\
    &lt;p class=&quot;back-link&quot;&gt;
        [[Go Back-&gt;Computer]]
    &lt;/p&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="181" name="NotesDisplay" tags="" position="100,2350" size="100,100">&lt;&lt;if $notes.length == 0&gt;&gt;\
    &lt;p&gt;No saved notes.&lt;/p&gt;\
&lt;&lt;else&gt;&gt;\
    &lt;&lt;for _index, _note range $notes&gt;&gt;\
        &lt;div class=&quot;saved-note&quot;&gt;\
            &lt;span class=&quot;note-text&quot;&gt;&lt;&lt;print $notes[_index]&gt;&gt;&lt;/span&gt;\
            &lt;span class=&quot;note-button&quot;&gt;\
                @@.note-button;&lt;&lt;button &quot;Delete&quot;&gt;&gt;\
                    &lt;&lt;run $notes.splice(_index, 1)&gt;&gt;\
                    &lt;&lt;replace &quot;#notesDisplay&quot;&gt;&gt;\
                        &lt;&lt;include &quot;NotesDisplay&quot;&gt;&gt;\
                    &lt;&lt;/replace&gt;&gt;\
                &lt;&lt;/button&gt;&gt;@@\
            &lt;/span&gt;\
        &lt;/div&gt;\
    &lt;&lt;/for&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="182" name="NotesApp-QuickAccess" tags="" position="225,2350" size="100,100">&lt;&lt;include &quot;NotesApp&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="183" name="HackTarget" tags="" position="350,2350" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - Spying Landlord&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;desktop-hacking-tool-main&quot;&gt;\
        &lt;div class=&quot;desktop-hacking-tool-targets-pane&quot; id=&quot;targetsPane&quot;&gt;\
            &lt;h2 class=&quot;desktop-hacking-tool-targets-heading&quot;&gt;Available Targets&lt;/h2&gt;\
            &lt;div id=&quot;dynamicTargets&quot;&gt;&lt;!-- Dynamic targets will be inserted here --&gt;&lt;/div&gt;\
            &lt;!-- Targets will be dynamically inserted here --&gt;\
        &lt;/div&gt;\
        &lt;div class=&quot;desktop-hacking-tool-tools-pane&quot; id=&quot;toolsPane&quot;&gt;\
            &lt;h2 class=&quot;desktop-hacking-tool-tools-heading&quot;&gt;Installed Tools&lt;/h2&gt;\
            &lt;ul class=&quot;desktop-hacking-tool-tools-list&quot;&gt; &lt;!-- This is where the tools will go --&gt;\
            &lt;!-- Tools will be dynamically inserted here --&gt;\
            &lt;/ul&gt;\
        &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;&lt;if $lockedUI !== true&gt;&gt;\
&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; Computer]]&lt;/p&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;script&gt;&gt;
// Function to create target HTML
function createTargetEntry(target) {
    return `&lt;div class=&quot;desktop-hacking-tool-target-entry&quot;&gt;
                &lt;div class=&quot;desktop-hacking-tool-target-details&quot;&gt;
                    &lt;span class=&quot;desktop-hacking-tool-target-name&quot;&gt;${target.name}&lt;/span&gt;&lt;br&gt;
                    &lt;span class=&quot;desktop-hacking-tool-target-ip&quot;&gt;IP: ${target.ip}&lt;/span&gt;
                &lt;/div&gt;
                &lt;div class=&quot;desktop-hacking-tool-target-actions&quot;&gt;
                    &lt;button class=&quot;hack-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;${target.link}&#39;)&quot;&gt;Connect&lt;/button&gt;
                &lt;/div&gt;
            &lt;/div&gt;`;
}

// Function to render targets
function renderTargets() {
    var targetsHtml = &quot;&quot;;
    var targets = State.variables.hackingTargets;
    for (var i = 0; i &lt; targets.length; i++) {
        targetsHtml += createTargetEntry(targets[i]);
    }
    $(&#39;#dynamicTargets&#39;).html(targetsHtml);
}

// Function to create tool HTML
function createToolEntry(tool) {
    return `&lt;li&gt;${tool}&lt;/li&gt;`;
}

// Function to render tools
function renderTools() {
    var toolsHtml = &quot;&quot;;
    var tools = State.variables.hackingTools;
    for (var i = 0; i &lt; tools.length; i++) {
        toolsHtml += createToolEntry(tools[i]);
    }
    $(&#39;#toolsPane&#39;).find(&#39;.desktop-hacking-tool-tools-list&#39;).html(toolsHtml);
}

// Initial rendering
$(document).ready(function() {
    renderTargets();
    renderTools();
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="184" name="ComputerSettings" tags="" position="475,2350" size="100,100">&lt;div class=&quot;settings-wrapper&quot;&gt;\
&lt;div class=&quot;settings-header&quot;&gt;&lt;span class=&quot;settings-header-text&quot;&gt;Computer Settings&lt;/span&gt;&lt;/div&gt;\
&lt;div class=&quot;settings-container&quot;&gt;\
    &lt;h2 id=&quot;settings-title&quot;&gt;General&lt;/h2&gt;
    &lt;form id=&quot;settings-form&quot;&gt;\
        &lt;label for=&quot;computer-name&quot; class=&quot;settings-label&quot;&gt;Computer Name:&lt;/label&gt;\
        &lt;input type=&quot;text&quot; class=&quot;settings-input&quot; id=&quot;computer-name&quot; name=&quot;computer-name&quot;&gt;&lt;br&gt;
        &lt;label for=&quot;user-name&quot; class=&quot;settings-label&quot;&gt;Username:&lt;/label&gt;\
        &lt;input type=&quot;text&quot; class=&quot;settings-input&quot; id=&quot;user-name&quot; name=&quot;user-name&quot;&gt;&lt;br&gt;     
        @@.settings-button;&lt;&lt;button &quot;Save Settings&quot;&gt;&gt;
            &lt;&lt;run $playerPcName = $(&quot;#computer-name&quot;).val().trim()&gt;&gt;
            &lt;&lt;run $playerNickname = $(&quot;#user-name&quot;).val().trim()&gt;&gt;
            &lt;&lt;goto &quot;Computer&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@
    &lt;/form&gt;
    &lt;h2 id=&quot;settings-title&quot;&gt;Wallpaper&lt;/h2&gt;\
      &lt;div id=&quot;wallpaper-preview&quot;&gt;
        &lt;b&gt;Active Wallpaper:&lt;/b&gt;
        &lt;img id=&quot;active-wallpaper-preview&quot; src=&quot;&quot; alt=&quot;Active wallpaper preview&quot; style=&quot;width: 100%;&quot;&gt;
      &lt;/div&gt;
      &lt;div id=&quot;available-wallpapers&quot;&gt;
        &lt;b&gt;Select a Wallpaper:&lt;/b&gt;
      &lt;/div&gt;\
    /*&lt;h2 id=&quot;settings-title&quot;&gt;Quick Fixes&lt;/h2&gt;
      @@.settings-button;&lt;&lt;button &quot;Clear Notifications&quot;&gt;&gt;
        &lt;&lt;run setup.clearNotifications()&gt;&gt;
        &lt;&lt;goto &quot;Computer&quot;&gt;&gt;
      &lt;&lt;/button&gt;&gt;@@*/\
&lt;/div&gt;
&lt;/div&gt;

[[Go Back -&gt; Computer]]

&lt;&lt;script&gt;&gt;
    $(document).ready(function() {
        // Set computer name
        $(&quot;#computer-name&quot;).val(State.variables.playerPcName);
        $(&quot;#user-name&quot;).val(State.variables.playerNickname);
        // Set wallpaper preview
        $(&quot;#active-wallpaper-preview&quot;).attr(&quot;src&quot;, &quot;imgs/wallpapers/&quot; + State.variables.activeWallpaper + &quot;.jpg&quot;);
    });
&lt;&lt;/script&gt;&gt;
&lt;&lt;script&gt;&gt;
$(document).ready(function() {
    // Set computer name and active wallpaper
    $(&quot;#computer-name&quot;).val(State.variables.playerPcName);
    $(&quot;#active-wallpaper-preview&quot;).attr(&quot;src&quot;, &quot;imgs/wallpapers/&quot; + State.variables.activeWallpaper + &quot;.jpg&quot;)
                                  .css({&#39;margin-top&#39;: &#39;10px&#39;,
                                        &#39;cursor&#39;: &#39;pointer&#39; // This will make the cursor a pointer on hover
                                      });
    // Display available wallpapers
    let wallpapersDiv = $(&#39;#available-wallpapers&#39;);
    State.variables.availableWallpapers.forEach(function(wallpaper) {
        let img = $(&#39;&lt;img&gt;&#39;).attr(&#39;src&#39;, &#39;imgs/wallpapers/&#39; + wallpaper + &#39;.jpg&#39;)
                             .attr(&#39;alt&#39;, wallpaper + &#39; preview&#39;)
                             .css({&#39;width&#39;: &#39;144px&#39;, &#39;height&#39;: &#39;81px&#39;, &#39;margin-right&#39;: &#39;18px&#39;, &#39;margin-top&#39;: &#39;10px&#39;, &#39;cursor&#39;: &#39;pointer&#39; // This will make the cursor a pointer on hover
                                  })
                             .click(function() {
                                State.variables.activeWallpaper = wallpaper;
                                $(&quot;#active-wallpaper-preview&quot;).attr(&quot;src&quot;, &#39;imgs/wallpapers/&#39; + wallpaper + &#39;.jpg&#39;);
                             });
        wallpapersDiv.append(img);
    });
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="185" name="WebBrowser-URL" tags="" position="600,2350" size="100,100">&lt;script&gt;
MindWare.updateURL = function() {
    var url = document.querySelector(&#39;.url-input&#39;).value;
    if (url) {
        var lowerUrl = url.toLowerCase();
        switch (lowerUrl) {
            case &quot;bytebunker.omninet&quot;:
                SugarCube.Engine.play(&#39;JobBoard&#39;);
                break;
            case &quot;filejunkie.omninet&quot;:
                SugarCube.Engine.play(&#39;DigitalDownloads&#39;);
                break;
            case &quot;omnipedia.omninet&quot;:
                SugarCube.Engine.play(&#39;OmniPedia&#39;);
                break;
            case &quot;hiveproperties.omninet&quot;:
                SugarCube.Engine.play(&#39;HiveProperties-Website&#39;);
                break;
            case &quot;flxfit.omninet&quot;:
                SugarCube.Engine.play(&#39;FLXFIT-Website&#39;);
                break;
            case &quot;extendo.omninet&quot;:
                SugarCube.Engine.play(&#39;Extendo-Website-Bookmarked&#39;);
                break;
            case &quot;pornnexus.omninet&quot;:
                SugarCube.Engine.play(&#39;PornNexus&#39;);
                break;
            // Other cases...
            default:
                SugarCube.Engine.play(&#39;WebBrowser-Error404&#39;);
                break;
        }
    } else {
        // Handle empty input or show an alert/error message
        SugarCube.Engine.play(&#39;WebBrowser-Error404&#39;); // or any other default behavior
    }
};

document.getElementById(&#39;goButton&#39;).addEventListener(&#39;click&#39;, MindWare.updateURL);
&lt;/script&gt;</tw-passagedata><tw-passagedata pid="186" name="WebBrowser" tags="" position="725,2350" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;\
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;OmniNet Browser&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;browser-toolbar&quot;&gt;\
        &lt;input type=&quot;text&quot; class=&quot;url-input&quot; placeholder=&quot;Enter URL here...&quot; /&gt;\
        &lt;span class=&quot;go-button&quot;&gt;\
            &lt;button id=&quot;goButton&quot;&gt;↲&lt;/button&gt;\
        &lt;/span&gt;\
    &lt;/div&gt;
    &lt;div class=&quot;bookmarks-area&quot;&gt;
        &lt;div class=&quot;bookmark&quot; onclick=&quot;SugarCube.Engine.play(&#39;JobBoard&#39;)&quot;&gt;&lt;span&gt;💰&lt;/span&gt;&lt;p&gt;ByteBunker&#39;s Job Board&lt;/p&gt;&lt;/div&gt;\
        &lt;div class=&quot;bookmark&quot; onclick=&quot;SugarCube.Engine.play(&#39;DigitalDownloads&#39;)&quot;&gt;&lt;span&gt;🛒&lt;/span&gt;&lt;p&gt;File Junkie Store&lt;/p&gt;&lt;/div&gt;\
        \
        &lt;div class=&quot;bookmark action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(1, &#39;WebBrowser-DoResearch&#39;)&quot;&gt;
            &lt;span&gt;🇯🇵&lt;/span&gt;
            &lt;p&gt;Research Japanese Culture &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/p&gt;
        &lt;/div&gt;\
        &lt;div class=&quot;bookmark&quot; onclick=&quot;SugarCube.Engine.play(&#39;OmniPedia&#39;)&quot;&gt;&lt;span&gt;📚&lt;/span&gt;&lt;p&gt;OmniPedia&lt;/p&gt;&lt;/div&gt;\
        &lt;&lt;if $EmailHivePropertiesSeen&gt;&gt;\
        &lt;div class=&quot;bookmark&quot; onclick=&quot;SugarCube.Engine.play(&#39;HiveProperties-Website&#39;)&quot;&gt;&lt;span&gt;🏢&lt;/span&gt;&lt;p&gt;Hive Properties&lt;/p&gt;&lt;/div&gt;\
        &lt;&lt;else&gt;&gt;\
        &lt;&lt;/if&gt;&gt;\
        &lt;&lt;if $extendoWebsiteBookmarkAdded&gt;&gt;\
        &lt;div class=&quot;bookmark&quot; onclick=&quot;SugarCube.Engine.play(&#39;Extendo-Website-Bookmarked&#39;)&quot;&gt;&lt;span&gt;🍆&lt;/span&gt;&lt;p&gt;Extendo - Ultimate Reach&lt;/p&gt;&lt;/div&gt;\
        &lt;&lt;else&gt;&gt;\
        &lt;&lt;/if&gt;&gt;\
        &lt;&lt;if $pornNexusUnlocked&gt;&gt;\
        &lt;div class=&quot;bookmark&quot; onclick=&quot;SugarCube.Engine.play(&#39;PornNexus&#39;)&quot;&gt;&lt;span&gt;🔞&lt;/span&gt;&lt;p&gt;PornNexus&lt;/p&gt;&lt;/div&gt;\
        &lt;&lt;else&gt;&gt;\
        &lt;&lt;/if&gt;&gt;\
        \
    &lt;/div&gt;\
&lt;/div&gt;\
\
&lt;&lt;if $navigatedFromSidebar&gt;&gt;\
    &lt;&lt;if previous() is &quot;WebBrowser&quot;&gt;&gt;\
        &lt;p class=&quot;back-link&quot;&gt;
            [[Go Back-&gt;Computer]]
        &lt;/p&gt;
    &lt;&lt;else&gt;&gt;\
        &lt;p class=&quot;back-link&quot;&gt;
            &lt;&lt;link &quot;Go Back&quot; $returnPassage&gt;&gt;
                &lt;&lt;set $navigatedFromSidebar to false&gt;&gt;
            &lt;&lt;/link&gt;&gt;
        &lt;/p&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;\
    &lt;p class=&quot;back-link&quot;&gt;
        [[Go Back-&gt;Computer]]
    &lt;/p&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;include &quot;WebBrowser-URL&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="187" name="WebBrowser-QuickAccess" tags="" position="850,2350" size="100,100">&lt;&lt;include &quot;WebBrowser&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="188" name="WebBrowser-DoResearch" tags="" position="975,2350" size="100,100">&lt;&lt;script&gt;&gt;
$(document).ready(function() {
    var researchMaterial = State.variables.researchMaterial;
    var unlockedImages = State.variables.unlockedImages;

    console.log(&quot;Before pop, Research Material: &quot;, researchMaterial.slice());

    if (unlockedImages.length &lt; 66) { // 66 is the total number of unique images
        var newImage = researchMaterial.pop(); // Get a random image from the array
        unlockedImages.push(newImage);
        document.getElementById(&#39;newImage&#39;).src = &#39;imgs/files/research/&#39; + newImage + &#39;.jpg&#39;;
        document.getElementById(&#39;infoMessage&#39;).textContent = &#39;You\&#39;ve found a new interesting image online and added it to your research folder.&#39;;
    } else {
        document.getElementById(&#39;newImage&#39;).style.display = &#39;none&#39;;
        document.getElementById(&#39;infoMessage&#39;).textContent = &#39;You haven\&#39;t found any new image.&#39;;
    }
    
    console.log(&quot;After pop, Research Material: &quot;, researchMaterial.slice());
    
});
&lt;&lt;/script&gt;&gt;
\
&lt;div class=&quot;cyber-desktop-browser&quot;&gt;\
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;OmniNet Browser&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;browser-content&quot;&gt;\
        &lt;img id=&quot;newImage&quot; alt=&quot;New Image&quot; style=&quot;max-width:100%; max-height:100%;&quot;&gt;\
    &lt;/div&gt;\
&lt;/div&gt;

&lt;div id=&quot;infoMessage&quot; class=&quot;info-message&quot;&gt;&lt;/div&gt;\
\
&lt;p class=&quot;back-link&quot;&gt;
    [[Go Back-&gt;WebBrowser]]
&lt;/p&gt;</tw-passagedata><tw-passagedata pid="189" name="WebBrowser-Error404" tags="" position="1100,2350" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;\
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;OmniNet Browser - Error 404&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;browser-toolbar&quot;&gt;\
        &lt;input type=&quot;text&quot; class=&quot;url-input&quot; placeholder=&quot;Enter URL here...&quot; /&gt;\
        &lt;span class=&quot;go-button&quot;&gt;\
            &lt;button id=&quot;goButton&quot;&gt;↲&lt;/button&gt;\
        &lt;/span&gt;\
    &lt;/div&gt;\
    &lt;div class=&quot;browser-content&quot;&gt;\
        &lt;h1&gt;404 Not Found&lt;/h1&gt;\
        &lt;p&gt;Oops! The URL you entered does not exist.&lt;/p&gt;\
    &lt;/div&gt;
&lt;/div&gt;\
\
&lt;p class=&quot;back-link&quot;&gt;
    [[Go Back-&gt;previous()]]
&lt;/p&gt;

&lt;&lt;include &quot;WebBrowser-URL&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="190" name="JobBoard" tags="" position="1225,2350" size="100,100">&lt;div class=&quot;jobboard-wrapper&quot;&gt;\
    &lt;div class=&quot;jobboard-header&quot;&gt;&lt;span class=&quot;jobboard-header-text&quot;&gt;ByteBunker&#39;s Job Board (bytebunker.omninet)&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;jobboard-content&quot; id=&quot;jobContainer&quot;&gt;\
        &lt;!-- Jobs will be dynamically inserted here --&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\
\
&lt;&lt;if $jobBoardFirstVisit&gt;&gt;\
&lt;&lt;else&gt;&gt;\
    &lt;p class=&quot;back-link&quot;&gt;
        &lt;&lt;link &quot;Go Back&quot;&gt;&gt;
            &lt;&lt;goto &quot;WebBrowser&quot;&gt;&gt;
        &lt;&lt;/link&gt;&gt;
    &lt;/p&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;script&gt;&gt;
$(document).ready(function() {
    function createJobListing(job) {
        var highlightClass = job.accepted ? &quot;&quot; : &quot; highlighted&quot;;
        var jobTitle = job.accepted ? &quot;[TAKEN] &quot; + job.title : job.title;
        return `&lt;div class=&quot;job-listing${highlightClass}&quot;&gt;\
                    &lt;h2&gt;${jobTitle}&lt;/h2&gt;\
                    &lt;p&gt;${job.description}&lt;/p&gt;\
                    &lt;div class=&quot;job-meta&quot;&gt;\
                        &lt;span&gt;&lt;b&gt;Posted by:&lt;/b&gt; ${job.poster}&lt;br&gt;&lt;b&gt;Reward:&lt;/b&gt; ${job.reward}&lt;/span&gt;\
                        &lt;span class=&quot;btn-wrapper-board&quot;&gt;\
                            &lt;&lt;button &quot;Open&quot;&gt;&gt;\
                                &lt;&lt;goto &quot;${job.link}&quot;&gt;&gt;\
                            &lt;&lt;/button&gt;&gt;\
                        &lt;/span&gt;\
                    &lt;/div&gt;\
                &lt;/div&gt;`;
    }

    var jobContentHtml = &quot;&quot;;
    var jobs = State.variables.byteBunkerJobs;
    for (var i = jobs.length - 1; i &gt;= 0; i--) {
        var job = jobs[i];
        if (job.available) {
            jobContentHtml += createJobListing(job);
        }
    }
    $(&#39;#jobContainer&#39;).wiki(jobContentHtml);
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="191" name="LandlordJob" tags="" position="100,2475" size="100,100">&lt;div class=&quot;job-description&quot;&gt;\
    &lt;h2&gt;Illegal Spying by Landlord&lt;/h2&gt;\
            &lt;div class=&quot;job-meta&quot;&gt;\
            &lt;span&gt;&lt;b&gt;Posted by:&lt;/b&gt; ConcernedTenant01&lt;/span&gt;\
            &lt;span&gt;&lt;b&gt;Reward:&lt;/b&gt; $1,000&lt;/span&gt;\
        &lt;/div&gt;\
    &lt;p&gt;\
        Hey there,

        We have this super creepy landlord. Like, we&#39;ve always known he&#39;s nosy, but rumors are now flying around that he&#39;s secretly installed cameras in our freaking bathrooms. 

        We&#39;re so ready to drag his ass to court, but we need concrete proof. I mean, if we&#39;re caught trying to find these cams, he&#39;ll probably kick us out or worse. That&#39;s where you come in.

        Your job? Sneak into the building&#39;s security network, find these spy camera feeds, and snatch any video clips or snapshots that can nail this guy. This gig will pay well, &#39;cause honestly, you&#39;d be a lifesaver to a bunch of us.

        Hit me up if you have any questions or need more dirt on the situation. Ready when you are.
    &lt;/p&gt;\
&lt;&lt;if setup.byteBunkerJobIsAccepted(&quot;LandlordJob&quot;)&gt;&gt;\
    &lt;div class=&quot;btn-wrapper&quot;&gt;
        &lt;button disabled=&quot;disabled&quot;&gt;Job Taken&lt;/button&gt;
    &lt;/div&gt;
&lt;&lt;else&gt;&gt;\
    &lt;div class=&quot;btn-wrapper&quot;&gt;
        &lt;&lt;button &quot;Accept this job&quot;&gt;&gt;
            &lt;&lt;run MindWare.addTask(&quot;Find spy camera feeds&quot;, &quot;Task-LandlordJob&quot;)&gt;&gt;
            &lt;&lt;run MindWare.addInstantMessage(&#39;cipherInstantMessages&#39;, &#39;Landlord Job&#39;, &#39;IMApp-CipherLynx-Landlord&#39;, &#39;Cipher&#39;, true, true);&gt;&gt;
            &lt;&lt;set $introOver = true&gt;&gt;
            &lt;&lt;set $jobBoardFirstVisit = false&gt;&gt;
            &lt;&lt;set $illegalSpyingJobAccepted = true&gt;&gt;
            &lt;&lt;run setup.changeByteBunkerJobAcceptedStatus(&quot;LandlordJob&quot;, true)&gt;&gt;
            &lt;&lt;run MindWare.addEmail (&quot;ConcernedTenant01&quot;,&quot;Info for the Landlord Job&quot;, &quot;First off, huge thanks for taking this on. You have no idea how much this means to all of us here.&quot;, &quot;Email-LandlordJobInfo&quot;)&gt;&gt;
            &lt;&lt;goto &quot;HomeBacklog&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;
    &lt;/div&gt;
&lt;&lt;/if&gt;&gt;\
&lt;/div&gt;\
&lt;p class=&quot;back-link&quot;&gt;
    &lt;&lt;return &quot;Go Back&quot;&gt;&gt;
&lt;/p&gt;</tw-passagedata><tw-passagedata pid="192" name="SQLJob" tags="" position="225,2475" size="100,100">&lt;div class=&quot;job-description&quot;&gt;\
    &lt;h2&gt;Troubleshoot Legacy System&lt;/h2&gt;\
    &lt;div class=&quot;job-meta&quot;&gt;\
        &lt;span&gt;&lt;b&gt;Posted by:&lt;/b&gt; OffbeatBoss&lt;/span&gt;\
        &lt;span&gt;&lt;b&gt;Reward:&lt;/b&gt; $200&lt;/span&gt;\
    &lt;/div&gt;\
    &lt;p&gt;\
        Hey! 

        So, here&#39;s the deal: our company has this archaic SQL database that&#39;s acting up like mad lately. It&#39;s throwing errors left, right, and center. Honestly, I&#39;ve tried almost everything I can think of, but it&#39;s still a complete mess.

        We&#39;re hunting for someone who knows their way around these older systems and can help iron out these quirks. If you&#39;re up for the challenge and have expertise with these old beasts, drop us a line!
    &lt;/p&gt;\
    &lt;div class=&quot;btn-wrapper&quot;&gt;
        &lt;button disabled=&quot;disabled&quot;&gt;Job Taken&lt;/button&gt;

    &lt;/div&gt;\
&lt;/div&gt;\
&lt;p class=&quot;back-link&quot;&gt;
    &lt;&lt;return &quot;Go Back&quot;&gt;&gt;
&lt;/p&gt;</tw-passagedata><tw-passagedata pid="193" name="EncryptionJob" tags="" position="350,2475" size="100,100">&lt;div class=&quot;job-description&quot;&gt;\
    &lt;h2&gt;Crack Encryption Algorithm&lt;/h2&gt;\
    &lt;div class=&quot;job-meta&quot;&gt;\
        &lt;span&gt;&lt;b&gt;Posted by:&lt;/b&gt; D4YDR34M&lt;/span&gt;\
        &lt;span&gt;&lt;b&gt;Reward:&lt;/b&gt; $5,500&lt;/span&gt;\
    &lt;/div&gt;\
    &lt;p&gt;\
        Yo,

        Ran into some fresh crypto we haven&#39;t tangled with before. Threw our best tools at it, but this code&#39;s locked up tight.

        Task&#39;s straight up: Bust it open and spill its secrets. If you&#39;re sharp enough to crack this beast, give us a shout.

        - D4YDR34M
    &lt;/p&gt;\
    &lt;div class=&quot;btn-wrapper&quot;&gt;
        &lt;button disabled=&quot;disabled&quot;&gt;Job Taken&lt;/button&gt;

    &lt;/div&gt;\
&lt;/div&gt;\
&lt;p class=&quot;back-link&quot;&gt;
    &lt;&lt;return &quot;Go Back&quot;&gt;&gt;
&lt;/p&gt;</tw-passagedata><tw-passagedata pid="194" name="PhotoEditJob" tags="" position="475,2475" size="100,100">&lt;div class=&quot;job-description&quot;&gt;\
    &lt;h2&gt;Urgent Photo Edit Required&lt;/h2&gt;\
    &lt;div class=&quot;job-meta&quot;&gt;\
        &lt;span&gt;&lt;B&gt;Posted by:&lt;/b&gt; ManicPixy&lt;/span&gt;\
        &lt;span&gt;&lt;b&gt;Reward:&lt;/b&gt; $10 per photo&lt;/span&gt;\
    &lt;/div&gt;\
    &lt;p&gt;\
        Hey there,

        Met this really cool guy online and I want to surprise him with some selfies. But, here&#39;s the thing, I have this mole on my chest that I&#39;m super self-conscious about. I&#39;d really appreciate it if someone could edit it out for me.

        I&#39;ve attached three images. Willing to pay $10 for each picture, but I really need them done in the next 2 hours. I know it&#39;s a bit awkward putting my selfies out here, but I trust you all. Please be respectful.
    &lt;/p&gt;\
    &lt;div class=&quot;btn-wrapper&quot;&gt;\

        &lt;button disabled=&quot;disabled&quot;&gt;Job Taken&lt;/button&gt;
        
    &lt;/div&gt;
    &lt;div class=&quot;attachment-section&quot;&gt;\
    &lt;div class=&quot;attachments-header&quot;&gt;Attachments:&lt;/div&gt;\
    &lt;div class=&quot;attachment-item&quot;&gt;\
        &lt;i class=&quot;fa fa-paperclip attachment-icon&quot;&gt;&lt;/i&gt;\
        @@.attachment-button;&lt;&lt;button &quot;img1.jpg&quot;&gt;&gt;
            &lt;&lt;set $img1Opened = true&gt;&gt;
            &lt;&lt;popover&gt;&gt;[img[imgs/emails/chest1.webp]]&lt;&lt;/popover&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@
    &lt;/div&gt;\
    &lt;div class=&quot;attachment-item&quot;&gt;\
        &lt;i class=&quot;fa fa-paperclip attachment-icon&quot;&gt;&lt;/i&gt;\
        @@.attachment-button;&lt;&lt;button &quot;img2.jpg&quot;&gt;&gt;
            &lt;&lt;set $img2Opened = true&gt;&gt;
            &lt;&lt;popover&gt;&gt;[img[imgs/emails/chest2.webp]]&lt;&lt;/popover&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@
    &lt;/div&gt;\
    &lt;div class=&quot;attachment-item&quot;&gt;\
        &lt;i class=&quot;fa fa-paperclip attachment-icon&quot;&gt;&lt;/i&gt;\
        @@.attachment-button;&lt;&lt;button &quot;img3.jpg&quot;&gt;&gt;
            &lt;&lt;set $img3Opened = true&gt;&gt;
            &lt;&lt;popover&gt;&gt;[img[imgs/emails/chest3.webp]]&lt;&lt;/popover&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@
    &lt;/div&gt;\
&lt;/div&gt;\
&lt;/div&gt;\
&lt;p class=&quot;back-link&quot;&gt;
    &lt;&lt;return &quot;Go Back&quot;&gt;&gt;
&lt;/p&gt;</tw-passagedata><tw-passagedata pid="195" name="SpyingLandlordHack-animation" tags="" position="600,2475" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;desktop-hacking-tool-animation&quot;&gt;\
        &lt;div class=&quot;msg-container&quot;&gt;\
            &lt;div class=&quot;msg&quot;&gt;Connecting&lt;/div&gt;\
        &lt;/div&gt;\
        &lt;div class=&quot;hacking-animation&quot;&gt;\
            &lt;div id=&quot;console&quot;&gt;&lt;/div&gt;\
        &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\
&lt;&lt;if $totalDays &gt; 3&gt;&gt;
    &lt;&lt;script&gt;&gt;
$(document).one(&#39;:passagerender&#39;, function() {
    setTimeout(function() {
        var consoleElement = document.getElementById(&quot;console&quot;);
        const msg = document.querySelector(&quot;.msg&quot;);

        var txt = [
            &quot;Initializing connection protocol...&quot;,
            &quot;...&quot;,
            &quot;Compiling encryption modules...&quot;,
            &quot;...Encryption compilation delayed.&quot;,
            &quot;...&quot;,
            &quot;Awaiting signal response, timeout imminent...&quot;,
            &quot;...No response received.&quot;,
            &quot;...&quot;,
            &quot;Struggling to establish data channel...&quot;,
            &quot;...Data channel unstable.&quot;,
            &quot;Initiating port scan in fallback mode...&quot;,
            &quot;...&quot;,
            &quot;Port scan incomplete, critical ports unresponsive.&quot;,
            &quot;Conducting network integrity check...&quot;,
            &quot;...&quot;,
            &quot;Multiple network irregularities detected.&quot;,
            &quot;System alert: Network instability (Threats detected)&quot;,
            &quot;Attempting to stabilize environment...&quot;,
            &quot;...&quot;,
            &quot;Final connection handshake attempt...&quot;,
            &quot;...&quot;,
            &quot;404 - Connection Failed. Server unreachable or does not exist.&quot;
        ];

        function updateScreen() {
            // Check if there are lines left to add
            if (txt.length &gt; 0) {
                var p = document.createElement(&quot;p&quot;);
                p.textContent = txt.shift();
                consoleElement.appendChild(p);

                // Automatically scroll to the bottom
                consoleElement.scrollTop = consoleElement.scrollHeight;
            } else {
                // Stop the interval if no more lines to add
                clearInterval(intervalID);
                msg.style.background = &quot;red&quot;;
                msg.innerHTML = &quot;SERVER NOT FOUND&quot;;
                msg.style.boxShadow = &quot;0 0 30px red&quot;;
            }
        }

        var intervalID = window.setInterval(updateScreen, 200);
    }, 0);
});
&lt;&lt;/script&gt;&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;script&gt;&gt;
$(document).one(&#39;:passagerender&#39;, function() {
    setTimeout(function() {
        var consoleElement = document.getElementById(&quot;console&quot;);
        const msg = document.querySelector(&quot;.msg&quot;);

        var txt = [
            &quot;Initiating protocol sequence...&quot;,
            &quot;...&quot;,
            &quot;Encrypting handshake payload...&quot;,
            &quot;...Payload encrypted.&quot;,
            &quot;Handshake dispatched, awaiting sync...&quot;,
            &quot;...&quot;,
            &quot;Response pattern received, decrypting...&quot;,
            &quot;...Decryption complete.&quot;,
            &quot;Auth token generation in progress...&quot;,
            &quot;...&quot;,
            &quot;Securing comm-link with crypto-hash...&quot;,
            &quot;...Comm-link secured.&quot;,
            &quot;Executing port enumeration script...&quot;,
            &quot;...&quot;,
            &quot;Port scan subroutine finalized.&quot;,
            &quot;Scanning for network anomalies...&quot;,
            &quot;...No anomalies detected.&quot;,
            &quot;Network integrity: Stable (No anomalies detected)&quot;,
            &quot;Environment prepared. All systems go.&quot;,
            &quot;...&quot;,
            &quot;Connection established.&quot;
        ];

        function updateScreen() {
            // Check if there are lines left to add
            if (txt.length &gt; 0) {
                var p = document.createElement(&quot;p&quot;);
                p.textContent = txt.shift();
                consoleElement.appendChild(p);

                // Automatically scroll to the bottom
                consoleElement.scrollTop = consoleElement.scrollHeight;
            } else {
                // Stop the interval if no more lines to add
                clearInterval(intervalID);
                msg.style.background = &quot;lime&quot;;
                msg.innerHTML = &quot;SUCCESS&quot;;
                msg.style.boxShadow = &quot;0 0 30px lime&quot;;
            }
        }

        var intervalID = window.setInterval(updateScreen, 200);
    }, 0);
});
&lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $totalDays &gt; 3&gt;&gt;
&lt;&lt;timed 8s&gt;&gt;&lt;&lt;goto &quot;SpyingLandlordHack-404&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;timed 8s&gt;&gt;&lt;&lt;goto &quot;SpyingLandlordHack-server&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="196" name="SpyingLandlordHack-404" tags="" position="725,2475" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Server Connection Error&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;server-404-error-message&quot;&gt;
        &lt;p class=&quot;blink-text&quot;&gt;404 - Server Not Found&lt;/p&gt;
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;p&gt;Unfortunately, you&#39;re too late, and this target is no longer available. 
Do you want to &lt;&lt;link &quot;delete it&quot;&gt;&gt;&lt;&lt;run setup.removeHackingTarget(&quot;Spying Landlord&quot;)&gt;&gt;&lt;&lt;goto &quot;HackTarget&quot;&gt;&gt;&lt;&lt;/link&gt;&gt; or just [[go back -&gt; HackTarget]]?&lt;/p&gt;</tw-passagedata><tw-passagedata pid="197" name="SpyingLandlordHack-server" tags="" position="850,2475" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - Spying Landlord&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;server-intro-message&quot;&gt;\
        &lt;p&gt; Connection established.&lt;/p&gt;\
        &lt;p&gt; &lt;b&gt;Server uptime:&lt;/b&gt; 66 days, 5 hours​&lt;/p&gt;\
        &lt;p&gt; &lt;b&gt;Security status:&lt;/b&gt; Bruteforce detection active&lt;/p&gt;\
    &lt;/div&gt;\
    &lt;div class=&quot;desktop-hacking-tool-server-content&quot;&gt;\
        &lt;div class=&quot;server-section&quot; id=&quot;camera-feed&quot; onclick=&quot;SugarCube.Engine.play(&#39;SpyingLandlordHack-server-camera&#39;)&quot;&gt;\
            &lt;button&gt;📹 Video Streaming Server&lt;/button&gt;\
        &lt;/div&gt;\
        &lt;div class=&quot;server-section&quot; id=&quot;messages&quot; onclick=&quot;SugarCube.Engine.play(&#39;SpyingLandlordHack-server-messages&#39;)&quot;&gt;\
            &lt;button&gt;📧 View Latest Messages&lt;/button&gt;\
        &lt;/div&gt;\
        &lt;div class=&quot;server-section&quot; id=&quot;transactions&quot; onclick=&quot;SugarCube.Engine.play(&#39;SpyingLandlordHack-server-logs&#39;)&quot;&gt;\
            &lt;button&gt;📊 Check Logs&lt;/button&gt;\
        &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; HackTarget]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="198" name="SpyingLandlordHack-server-camera" tags="" position="975,2475" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - Spying Landlord&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;desktop-hacking-tool-server-password-protected&quot;&gt;\
        &lt;div class=&quot;server-password-lock-icon&quot;&gt;🔒&lt;/div&gt;\
        &lt;input type=&quot;text&quot; id=&quot;server-password-input&quot; class=&quot;server-password-input&quot; placeholder=&quot;Enter Password&quot;&gt;\
        &lt;button class=&quot;server-password-submit-button&quot; onclick=&quot;checkLandlordPassword()&quot;&gt;Submit&lt;/button&gt;\
        &lt;div class=&quot;server-action-selection-box&quot;&gt;\
            &lt;p class=&quot;active-cameras&quot;&gt; Access to the Video Streaming Server is password-protected.&lt;/p&gt;\
            &lt;button class=&quot;server-password-access-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;SpyingLandlordHack-server-camera-bruteforce&#39;)&quot;&gt;Manually Bruteforce the Password&lt;/button&gt;\
        &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; SpyingLandlordHack-server]]&lt;/p&gt;

&lt;script&gt;
function checkLandlordPassword() {
    let password = document.getElementById(&#39;server-password-input&#39;).value;
    if (password === &quot;monopoly&quot; || password === &quot;Monopoly&quot;) {
        SugarCube.Engine.play(&#39;SpyingLandlordHack-server-camera-access&#39;);
    } else {
        SugarCube.UI.alert(&quot;Incorrect password.&quot;);
    }
}
&lt;/script&gt;

&lt;&lt;set $bruteforceMinigameCorrectPassword to &quot;monopoly&quot;&gt;&gt;
&lt;&lt;set $selectedPasswordLength to 4&gt;&gt;
&lt;&lt;set $numberOfPasswordsNeeded to 10&gt;&gt;
&lt;&lt;if $miniGameDifficulty is &quot;Normal&quot;&gt;&gt;
    &lt;&lt;set $bruteforceBaseTraceTime to 15&gt;&gt; 
&lt;&lt;elseif $miniGameDifficulty is &quot;Easy&quot;&gt;&gt;
    &lt;&lt;set $bruteforceBaseTraceTime to 25&gt;&gt; 
&lt;&lt;else&gt;&gt;
    &lt;&lt;set $bruteforceBaseTraceTime to 35&gt;&gt; 
&lt;&lt;/if&gt;&gt;
&lt;&lt;set $nextPassageAfterSuccessBruteforceGame to &quot;SpyingLandlordHack-server-camera-access&quot;&gt;&gt;
&lt;&lt;set $nextPassageAfterFailBruteforceGame to &quot;HackTarget&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="199" name="SpyingLandlordHack-server-camera-bruteforce" tags="" position="1100,2475" size="100,100">&lt;&lt;include &quot;Minigame-Bruteforce&quot;&gt;&gt;\
\
&lt;&lt;if $minigameSkipButtons === true&gt;&gt;\
&lt;p class=&quot;back-link&quot;&gt;[[Skip the Minigame -&gt; SpyingLandlordHack-server-camera-access]]&lt;/p&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="200" name="SpyingLandlordHack-server-camera-access" tags="" position="1225,2475" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - Spying Landlord&lt;/span&gt;&lt;/div&gt;\
        &lt;div class=&quot;server-camera-view&quot;&gt;\
            &lt;div class=&quot;server-camera-title-bar&quot; id=&quot;showerCameraTitle&quot;&gt;Camera #1&lt;/div&gt;\
            &lt;div class=&quot;server-camera-content&quot; id=&quot;showerCameraContent&quot;&gt;&lt;!-- Image will be set here --&gt;&lt;/div&gt;\
        &lt;/div&gt;\
        &lt;div class=&quot;server-camera-action-selection-box&quot;&gt;\
            &lt;p class=&quot;active-cameras&quot; id=&quot;activeCameras&quot;&gt; Number of active cameras: &lt;/p&gt;\
            &lt;button class=&quot;server-password-access-button&quot; id=&quot;showerCameraButton&quot;&gt;Switch Camera&lt;/button&gt;\
        &lt;/div&gt;\
&lt;/div&gt;

As the last layers of encryption fall away, the truth lays bare before you: the landlord is a voyer on a large scale, peering into the bathrooms of possibly hundreds of his tenants. 

Seeing your fellow NeoUrbanians so exposed, you can&#39;t help but admit there&#39;s a twisted allure to this forbidden view. The power to watch, undetected, to possess a secret window into the hidden lives of others. If you decided to lie about the landlord&#39;s activity and keep the feed for yourself, you could watch it at any time, and it would take you a long time to run out of tenants to spy on. 

But then, there&#39;s the mission. The promise you made to bring this invasion to an end, your reputation as a hacker, and the juicy reward for your efforts. 

The screen flickers, waiting for a command, echoing the flicker of conflict within you. 

@@.choicebutton;&lt;&lt;button &quot;Expose the landlord&quot;&gt;&gt;&lt;&lt;goto &quot;ExposeLandlord&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@\

@@.choicebutton;&lt;&lt;button &quot;Lie and maintain access to the feed&quot;&gt;&gt;&lt;&lt;goto &quot;DontExposeLandlord&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@\

&lt;&lt;if $tutorialMorality === false&gt;&gt;\
&lt;div id=&quot;tutorial-box&quot;&gt;&lt;div class=&quot;instruction-container-blue&quot;&gt;\
    &lt;div class=&quot;instruction-title-bar-blue&quot;&gt;Tutorial: Morality &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.tutorialMorality = true; document.getElementById(&#39;tutorial-box&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;\
    &lt;div class=&quot;instruction-content&quot;&gt;\
        &lt;p&gt;This is your first decision in the game, and it will impact your morality. Many other similar choices you make throughout your journey will also influence your moral standing.&lt;/p&gt;\
        &lt;p&gt;While those who tread the immoral path often find themselves in thrilling scenarios, remember: such lives are rarely marked by happy endings.&lt;/p&gt;\
    &lt;/div&gt;\
&lt;/div&gt;
&lt;/div&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
\
&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; SpyingLandlordHack-server]]&lt;/p&gt;

&lt;&lt;script&gt;&gt;
$(document).ready(function() {
    var selectedImages = State.variables.selectedShowerImages;
    var currentShowerImageIndex = State.variables.currentShowerImageIndex;

    // Function to handle image update
    function handleImageUpdate() {
        MindWare.updateCameraImage(selectedImages, currentShowerImageIndex, &#39;showerCameraContent&#39;, &#39;showerCameraTitle&#39;);
        currentShowerImageIndex = (currentShowerImageIndex + 1) % selectedImages.length;
        State.variables.currentShowerImageIndex = currentShowerImageIndex;
    }

    // Display the number of active cameras
    $(&#39;#activeCameras&#39;).append(selectedImages.length);

    // Initial image update or subsequent update based on success variable
    if (!State.variables.spyingLandlordHackSuccess) {
        handleImageUpdate();
        State.variables.spyingLandlordHackSuccess = true;
    } else {
        handleImageUpdate();
    }

    // Button click to switch to the next image
    $(&#39;#showerCameraButton&#39;).click(handleImageUpdate);
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="201" name="SpyingLandlordHack-server-messages" tags="nobr" position="100,2600" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;
        &lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - Spying Landlord&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;desktop-hacking-tool-server-content&quot;&gt;
        &lt;div class=&quot;message-preview&quot; id=&quot;message1&quot;&gt;
            &lt;p&gt;&lt;b&gt;From:&lt;/b&gt; NexaLink Solutions&lt;/p&gt;
            &lt;p&gt;&lt;b&gt;Subject:&lt;/b&gt; Your recent tech support request&lt;/p&gt;
            &lt;p id=&quot;message1-preview&quot;&gt;&lt;b&gt;Message:&lt;/b&gt; We&#39;ve received your request. After a preliminary review, it appears that your system is experiencing... 
            &lt;&lt;link &quot;Read More&quot;&gt;&gt;&lt;&lt;replace &quot;#message1-preview&quot;&gt;&gt;&lt;b&gt;Message:&lt;/b&gt; We&#39;ve received your request. After a preliminary review, it appears that your system is experiencing network interference. We suspect this could be due to an outdated router firmware. A technician will be at your location tomorrow between 10 AM and 12 PM to conduct a thorough investigation and resolve the issue. Please ensure you are available during this time.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/p&gt;
        &lt;/div&gt;
        &lt;!-- Message 2 --&gt;
        &lt;div class=&quot;message-preview&quot; id=&quot;message2&quot;&gt;
            &lt;p&gt;&lt;b&gt;From:&lt;/b&gt; StarCloud Billing Department&lt;/p&gt;
            &lt;p&gt;&lt;b&gt;Subject:&lt;/b&gt; Invoice for Services Rendered&lt;/p&gt;
            &lt;p id=&quot;message2-preview&quot;&gt;&lt;b&gt;Message:&lt;/b&gt; Thank you for using our services. This email is to confirm that your payment for the last month...
            &lt;&lt;link &quot;Read More&quot;&gt;&gt;&lt;&lt;replace &quot;#message2-preview&quot;&gt;&gt;&lt;b&gt;Message:&lt;/b&gt; Thank you for using our services. This email is to confirm that your payment for the last month has been received and your subscription is now active for the next 30 days. Attached to this email, you&#39;ll find a detailed breakdown of the charges. We appreciate your continued support and look forward to serving your needs. Should you have any queries regarding your bill, please do not hesitate to contact our billing department.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/p&gt;
        &lt;/div&gt;
        &lt;!-- Message 3 --&gt;
        &lt;div class=&quot;message-preview&quot; id=&quot;message3&quot;&gt;
            &lt;p&gt;&lt;b&gt;From:&lt;/b&gt; Bob&lt;/p&gt;
            &lt;p&gt;&lt;b&gt;Subject:&lt;/b&gt; RE: Little Surprise&lt;/p&gt;
            &lt;p id=&quot;message3-preview&quot;&gt;&lt;b&gt;Message:&lt;/b&gt; Wow! Just... wow!!! I wasn&#39;t expecting this AT ALL. You&#39;ve made this horndog really happy. I owe you for this one, bro. Thanks you!
            &lt;&lt;link &quot;Read More&quot;&gt;&gt;&lt;&lt;replace &quot;#message3-preview&quot;&gt;&gt;&lt;b&gt;Message:&lt;/b&gt; Wow! Just... wow!!! I wasn&#39;t expecting this AT ALL. You&#39;ve made this horndog really happy. I owe you for this one, bro. Thanks you!
            &lt;br&gt;&lt;hr&gt;
            &lt;b&gt;Original Message:&lt;/b&gt;
            &lt;p&gt;Hey buddy, here&#39;s the little surprise I promised when we last met. To open it, you need to connect to this address (ab20:adac:0738:d7b1) and enter the correct password. In case you&#39;ve already forgotten what it is, think of a board game someone in my position has to be good at (hint: it starts with &quot;M&quot;). And remember, this gift must be our little secret – never mention it to anyone else. Enjoy!&lt;/p&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/p&gt;
        &lt;/div&gt;
        &lt;!-- Message 4 --&gt;
        &lt;div class=&quot;message-preview-last&quot; id=&quot;message4&quot;&gt;
            &lt;p&gt;&lt;b&gt;From:&lt;/b&gt; AdmirerX&lt;/p&gt;   
            &lt;p&gt;&lt;b&gt;Subject:&lt;/b&gt; Special Request&lt;/p&gt;
            &lt;p id=&quot;message4-preview&quot;&gt;&lt;b&gt;Message:&lt;/b&gt; I&#39;ve been extremely satisfied with your service, but I have a specific request. Is it possible to...
            &lt;&lt;link &quot;Read More&quot;&gt;&gt;&lt;&lt;replace &quot;#message4-preview&quot;&gt;&gt;&lt;b&gt;Message:&lt;/b&gt; I&#39;ve been extremely satisfied with your service, but I have a specific request. Is it possible to install an additional camera in one of the tenant&#39;s bedrooms? Please let me know the feasibility and any additional costs involved. Thanks in advance for your assistance.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; SpyingLandlordHack-server]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="202" name="SpyingLandlordHack-server-logs" tags="" position="225,2600" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - Spying Landlord - Access Logs&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;log-entries&quot;&gt;\
        &lt;div class=&quot;log-entry&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 03:51:22&lt;/span&gt;&lt;br&gt;From unknown - Remote connection established&lt;/div&gt;\
        &lt;div class=&quot;log-entry&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 03:21:45&lt;/span&gt;&lt;br&gt;From 8b4b:7973:52f5:7a3a - Accessed streaming service&lt;/div&gt;\
        &lt;div class=&quot;log-entry&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 02:47:30&lt;/span&gt;&lt;br&gt;From 8b4b:7973:52f5:7a3a - Encrypted stream initiated&lt;/div&gt;\
        &lt;div class=&quot;log-entry&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 02:15:12&lt;/span&gt;&lt;br&gt;From 8b4b:7973:52f5:7a3a - User login success [user: iontrust]&lt;/div&gt;\
        &lt;div class=&quot;log-entry&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 01:50:03&lt;/span&gt;&lt;br&gt;From ab20:adac:0738:d7b1 - Streaming server restarted&lt;/div&gt;\
        &lt;div class=&quot;log-entry&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 01:34:21&lt;/span&gt;&lt;br&gt;From 5cce:87b0:7610:c8e2 - Accessed camera feed [camera: apartment520]&lt;/div&gt;\
        &lt;div class=&quot;log-entry&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 01:10:45&lt;/span&gt;&lt;br&gt;From 37b1:875a:746c:1253 - User login failed [user: cookiesandmilk]&lt;/div&gt;\
        &lt;div class=&quot;log-entry&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 00:58:09&lt;/span&gt;&lt;br&gt;From ab20:adac:0738:d7b1 - Password change requested [user: admin]&lt;/div&gt;\
        &lt;div class=&quot;log-entry&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 00:30:16&lt;/span&gt;&lt;br&gt;From 374e:5fb1:24b8:d995 - Unusual activity detected [camera: apartment90]&lt;/div&gt;\
        &lt;div class=&quot;log-entry&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 00:15:54&lt;/span&gt;&lt;br&gt;From 127.0.0.1 - Firmware update initiated&lt;/div&gt;\
        &lt;div class=&quot;log-entry&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 23:59:45&lt;/span&gt;&lt;br&gt;From ab20:adac:0738:d7b1 - Accessed streaming service settings&lt;/div&gt;\
        &lt;div class=&quot;log-entry&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 23:45:33&lt;/span&gt;&lt;br&gt;From bf6c:5856:fc1d:6e7c - Payment received [user: anonymous]&lt;/div&gt;\
        &lt;div class=&quot;log-entry&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 23:30:21&lt;/span&gt;&lt;br&gt;From 7241:00e0:611e:af0b - Encrypted stream paused&lt;/div&gt;\
        &lt;div class=&quot;log-entry&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 02:47:30&lt;/span&gt;&lt;br&gt;From 7241:00e0:611e:af0b - Encrypted stream initiated&lt;/div&gt;\
        &lt;div class=&quot;log-entry&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 23:15:05&lt;/span&gt;&lt;br&gt;From 7241:00e0:611e:af0b - User login success [user: AdmirerX]&lt;/div&gt;\
        &lt;div class=&quot;log-entry-last&quot;&gt;&lt;span class=&quot;log-time&quot;&gt;Server Time: 23:00:00&lt;/span&gt;&lt;br&gt;From 127.0.0.1 - System health check performed&lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; SpyingLandlordHack-server]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="203" name="ExposeLandlord" tags="" position="350,2600" size="100,100">You take a deep breath and choose to uphold your promise. With deliberate clicks, you compile the evidence of the landlord&#39;s misdeeds.
\
&lt;&lt;if visited() is 1&gt;&gt;\

    &lt;&lt;increasemorality&gt;&gt;\
    &lt;&lt;actionPointsDecreased 5&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

As you seal off your access to the cameras, a fleeting sense of loss grips you. The thrill of spying on strangers was exhilarating, a rare glimpse into unguarded moments. Yet, you remind yourself that your reputation as a hacker isn&#39;t built on exploitation.

Moreover, you need the cash, and this job pays well. You rationalize that naked videos are a dime a dozen on OmniNet. If one were so inclined, there are even places in this city where watching is the least of what&#39;s on offer.

&lt;span id=&quot;contact&quot;&gt;@@.choicebutton;&lt;&lt;button &quot;Send the Evidence to the Client&quot;&gt;&gt;
    &lt;&lt;set $spyingLandlordFinished to true&gt;&gt;
    &lt;&lt;set $spyingLandlordExposed to true&gt;&gt;
    &lt;&lt;replace &quot;#contact&quot;&gt;&gt;You&#39;ve sent the evidence of spying to the client, and now you need to wait for their response. Since there&#39;s nothing more to be done tonight, you should &lt;&lt;link [[get some rest|GoToSleep]]&gt;&gt;&lt;&lt;run MindWare.completeTask(&quot;Find spy camera feeds&quot;)&gt;&gt;&lt;&lt;run MindWare.addTask(&quot;Start your new job&quot;, &quot;Task-StartBrainFryJob&quot;)&gt;&gt;&lt;&lt;run setup.removeHackingTarget(&quot;Spying Landlord&quot;)&gt;&gt;&lt;&lt;run MindWare.addEmail (&quot;ConcernedTenant01&quot;,&quot;Thank You!&quot;, &quot;I can&#39;t even begin to express my gratitude. You&#39;ve done something incredible here.&quot;, &quot;Email-LandlordJobFinishGood&quot;)&gt;&gt;&lt;&lt;set $playerMoney to $playerMoney + 1500&gt;&gt;&lt;&lt;/link&gt;&gt;.
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;/span&gt;</tw-passagedata><tw-passagedata pid="204" name="DontExposeLandlord" tags="" position="475,2600" size="100,100">With a mixture of excitement and guilt, you decide against exposing the landlord. The lure of what these feeds offer is too tempting to ignore. 
\
&lt;&lt;if visited() is 1&gt;&gt;\
    
    &lt;&lt;decreasemorality&gt;&gt;\
    &lt;&lt;actionPointsDecreased 5&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

You begin the intricate process of installing a backdoor to the camera feeds, ensuring they can be viewed by launching a single script from your Files app. A few keystrokes later, and it&#39;s done. The once-hidden lives of the tenants now lie at your fingertips, accessible with a simple click. 

You say goodbye to the financial reward you&#39;ve been promised, but the excitement of this forbidden access overshadows any lingering doubts. 

&lt;span id=&quot;contact&quot;&gt;@@.choicebutton;&lt;&lt;button &quot;Lie to the Client&quot;&gt;&gt;
    &lt;&lt;set $spyingLandlordFinished to true&gt;&gt;
    &lt;&lt;set $spyingLandlordExposed to false&gt;&gt;
    &lt;&lt;replace &quot;#contact&quot;&gt;&gt;You&#39;ve crafted a convincing lie, explaining that you couldn&#39;t find any substantial evidence, and now you need to wait for their response. Since there&#39;s nothing more to be done tonight, you should &lt;&lt;link [[get some rest|GoToSleep]]&gt;&gt;&lt;&lt;run MindWare.completeTask(&quot;Find spy camera feeds&quot;)&gt;&gt;&lt;&lt;run MindWare.addTask(&quot;Start your new job&quot;, &quot;Task-StartBrainFryJob&quot;)&gt;&gt;&lt;&lt;run setup.removeHackingTarget(&quot;Spying Landlord&quot;)&gt;&gt;&lt;&lt;run MindWare.addEmail (&quot;ConcernedTenant01&quot;,&quot;Appreciate the effort&quot;, &quot;Thanks for giving it a shot. I&#39;m a bit surprised and disappointed that nothing turned up, but I guess these things happen.&quot;, &quot;Email-LandlordJobFinishBad&quot;)&gt;&gt;&lt;&lt;/link&gt;&gt;.
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;/span&gt;</tw-passagedata><tw-passagedata pid="205" name="SpyingLandlordHack-server-camera-access-backdoor" tags="" position="600,2600" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - Spying Landlord&lt;/span&gt;&lt;/div&gt;\
        &lt;div class=&quot;server-camera-view&quot;&gt;\
            &lt;div class=&quot;server-camera-title-bar&quot; id=&quot;showerCameraTitle&quot;&gt;Camera #1&lt;/div&gt;\
            &lt;div class=&quot;server-camera-content&quot; id=&quot;showerCameraContent&quot;&gt;&lt;!-- Image will be set here --&gt;&lt;/div&gt;\
        &lt;/div&gt;\
        &lt;div class=&quot;server-camera-action-selection-box&quot;&gt;\
            &lt;p class=&quot;active-cameras&quot; id=&quot;activeCameras&quot;&gt; Number of active cameras: &lt;/p&gt;\
            &lt;button class=&quot;server-password-access-button&quot; id=&quot;showerCameraButton&quot;&gt;Switch Camera&lt;/button&gt;\
        &lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; FilesApp]]&lt;/p&gt;

&lt;&lt;script&gt;&gt;
$(document).ready(function() {
    var selectedImages = State.variables.selectedShowerImages;

    State.variables.currentShowerImageIndex = 0;
    var currentShowerImageIndex = State.variables.currentShowerImageIndex;

    // Function to handle image update
    function handleImageUpdate() {
        MindWare.updateCameraImage(selectedImages, currentShowerImageIndex, &#39;showerCameraContent&#39;, &#39;showerCameraTitle&#39;);
        currentShowerImageIndex = (currentShowerImageIndex + 1) % selectedImages.length;
        State.variables.currentShowerImageIndex = currentShowerImageIndex;
    }

    // Display the number of active cameras
    $(&#39;#activeCameras&#39;).append(selectedImages.length);

    // Initial image update or subsequent update based on success variable
    if (!State.variables.spyingLandlordHackSuccess) {
        handleImageUpdate();
        State.variables.spyingLandlordHackSuccess = true;
    } else {
        handleImageUpdate();
    }

    // Button click to switch to the next image
    $(&#39;#showerCameraButton&#39;).click(handleImageUpdate);
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="206" name="ByteBunker-Prank" tags="" position="725,2600" size="100,100">&lt;div class=&quot;job-description&quot;&gt;\
    &lt;h2&gt;I Want to Prank My Colleague&lt;/h2&gt;\
            &lt;div class=&quot;job-meta&quot;&gt;\
            &lt;span&gt;&lt;b&gt;Posted by:&lt;/b&gt; CorpoDrone&lt;/span&gt;\
            &lt;span&gt;&lt;b&gt;Reward:&lt;/b&gt; $250&lt;/span&gt;\
        &lt;/div&gt;\
    &lt;p&gt;\
        Yo, hacker dudes and dudettes! I&#39;ve got a job that&#39;s right up your alley, if you&#39;ve got the skills to pull it off. 

        You see, there&#39;s this guy at work who&#39;s been acting like a total asshat. He&#39;s the kind of guy who&#39;d steal your lunch from the fridge and then deny it with a straight face. So, I thought it&#39;s about time someone taught him a lesson.

        Here&#39;s the deal: Mr. Asshat has a big presentation, which he has prepared already, coming up next week. I want you to edit the presentation file on his laptop in an embarrassing way. 

        Just know that the laptop is running our standard enterprise-grade security suite. But I believe in you and will reward you with &amp;#36;250! 
        
        And remember that it&#39;s all in good fun. No permanent damage, no stealing data, just a harmless prank to take Mr. Asshat down a peg or two. I definitely don&#39;t want to get him fired.

        &lt;i&gt;To speed up things, I&#39;m making it possible for the first person interested in this job to save the target directly.&lt;/i&gt;
    &lt;/p&gt;\
&lt;&lt;if setup.byteBunkerJobIsAccepted(&quot;ByteBunker-Prank&quot;)&gt;&gt;\
    &lt;div class=&quot;btn-wrapper&quot;&gt;
        &lt;button disabled=&quot;disabled&quot;&gt;Job Taken&lt;/button&gt;
    &lt;/div&gt;
&lt;&lt;else&gt;&gt;\
    &lt;div class=&quot;btn-wrapper&quot;&gt;
        &lt;&lt;button &quot;Save the target&quot;&gt;&gt;
            &lt;&lt;run MindWare.addTask(&quot;Prank client&amp;#39;s colleague&quot;, &quot;Task-Prank-Colleague&quot;)&gt;&gt;
            &lt;&lt;run setup.changeByteBunkerJobAcceptedStatus(&quot;ByteBunker-Prank&quot;, true)&gt;&gt;
            &lt;&lt;run setup.addHackingTarget(&quot;Annoying Colleague&quot;, &quot;292c:3467:3d9b:2c44&quot;, &quot;ByteBunker-Prank-animation&quot;)&gt;&gt;\
            &lt;&lt;goto &quot;ByteBunker-Prank&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;
    &lt;/div&gt;
&lt;&lt;/if&gt;&gt;\
&lt;/div&gt;\
&lt;p class=&quot;back-link&quot;&gt;
    &lt;&lt;return &quot;Go Back&quot;&gt;&gt;
&lt;/p&gt;</tw-passagedata><tw-passagedata pid="207" name="Task-Prank-Colleague" tags="" position="850,2600" size="100,100">Your task is to hack into the target&#39;s laptop and plant an embarrassing picture that will automatically open when the laptop is connected to a projector.</tw-passagedata><tw-passagedata pid="208" name="ByteBunker-Prank-animation" tags="" position="975,2600" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;desktop-hacking-tool-animation&quot;&gt;\
        &lt;div class=&quot;msg-container&quot;&gt;\
            &lt;div class=&quot;msg&quot;&gt;Connecting&lt;/div&gt;\
        &lt;/div&gt;\
        &lt;div class=&quot;hacking-animation&quot;&gt;\
            &lt;div id=&quot;console&quot;&gt;&lt;/div&gt;\
        &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\
&lt;&lt;if $chapter1Days &gt; 10&gt;&gt;
    &lt;&lt;script&gt;&gt;
$(document).one(&#39;:passagerender&#39;, function() {
    setTimeout(function() {
        var consoleElement = document.getElementById(&quot;console&quot;);
        const msg = document.querySelector(&quot;.msg&quot;);

        var txt = [
            &quot;Initializing connection protocol...&quot;,
            &quot;...&quot;,
            &quot;Compiling encryption modules...&quot;,
            &quot;...Encryption compilation delayed.&quot;,
            &quot;...&quot;,
            &quot;Awaiting signal response, timeout imminent...&quot;,
            &quot;...No response received.&quot;,
            &quot;...&quot;,
            &quot;Struggling to establish data channel...&quot;,
            &quot;...Data channel unstable.&quot;,
            &quot;Initiating port scan in fallback mode...&quot;,
            &quot;...&quot;,
            &quot;Port scan incomplete, critical ports unresponsive.&quot;,
            &quot;Conducting network integrity check...&quot;,
            &quot;...&quot;,
            &quot;Multiple network irregularities detected.&quot;,
            &quot;System alert: Network instability (Threats detected)&quot;,
            &quot;Attempting to stabilize environment...&quot;,
            &quot;...&quot;,
            &quot;Final connection handshake attempt...&quot;,
            &quot;...&quot;,
            &quot;404 - Connection Failed. Server unreachable or does not exist.&quot;
        ];

        function updateScreen() {
            // Check if there are lines left to add
            if (txt.length &gt; 0) {
                var p = document.createElement(&quot;p&quot;);
                p.textContent = txt.shift();
                consoleElement.appendChild(p);

                // Automatically scroll to the bottom
                consoleElement.scrollTop = consoleElement.scrollHeight;
            } else {
                // Stop the interval if no more lines to add
                clearInterval(intervalID);
                msg.style.background = &quot;red&quot;;
                msg.innerHTML = &quot;SERVER NOT FOUND&quot;;
                msg.style.boxShadow = &quot;0 0 30px red&quot;;
            }
        }

        var intervalID = window.setInterval(updateScreen, 200);
    }, 0);
});
&lt;&lt;/script&gt;&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;script&gt;&gt;
$(document).one(&#39;:passagerender&#39;, function() {
    setTimeout(function() {
        var consoleElement = document.getElementById(&quot;console&quot;);
        const msg = document.querySelector(&quot;.msg&quot;);

        var txt = [
            &quot;Initiating protocol sequence...&quot;,
            &quot;...&quot;,
            &quot;Encrypting handshake payload...&quot;,
            &quot;...Payload encrypted.&quot;,
            &quot;Handshake dispatched, awaiting sync...&quot;,
            &quot;...&quot;,
            &quot;Response pattern received, decrypting...&quot;,
            &quot;...Decryption complete.&quot;,
            &quot;Auth token generation in progress...&quot;,
            &quot;...&quot;,
            &quot;Securing comm-link with crypto-hash...&quot;,
            &quot;...Comm-link secured.&quot;,
            &quot;Executing port enumeration script...&quot;,
            &quot;...&quot;,
            &quot;Port scan subroutine finalized.&quot;,
            &quot;Scanning for network anomalies...&quot;,
            &quot;...No anomalies detected.&quot;,
            &quot;Network integrity: Stable (No anomalies detected)&quot;,
            &quot;Environment prepared. All systems go.&quot;,
            &quot;...&quot;,
            &quot;Connection established.&quot;
        ];

        function updateScreen() {
            // Check if there are lines left to add
            if (txt.length &gt; 0) {
                var p = document.createElement(&quot;p&quot;);
                p.textContent = txt.shift();
                consoleElement.appendChild(p);

                // Automatically scroll to the bottom
                consoleElement.scrollTop = consoleElement.scrollHeight;
            } else {
                // Stop the interval if no more lines to add
                clearInterval(intervalID);
                msg.style.background = &quot;lime&quot;;
                msg.innerHTML = &quot;SUCCESS&quot;;
                msg.style.boxShadow = &quot;0 0 30px lime&quot;;
            }
        }

        var intervalID = window.setInterval(updateScreen, 200);
    }, 0);
});
&lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $chapter1Days &gt; 10&gt;&gt;
&lt;&lt;timed 8s&gt;&gt;&lt;&lt;goto &quot;ByteBunker-Prank-404&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;timed 8s&gt;&gt;&lt;&lt;goto &quot;ByteBunker-Prank-computer-login&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="209" name="ByteBunker-Prank-404" tags="" position="1100,2600" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Server Connection Error&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;server-404-error-message&quot;&gt;
        &lt;p class=&quot;blink-text&quot;&gt;404 - Server Not Found&lt;/p&gt;
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;p&gt;Unfortunately, you&#39;re too late, and this target is no longer available. 
Do you want to &lt;&lt;link &quot;delete it&quot;&gt;&gt;&lt;&lt;run setup.removeHackingTarget(&quot;Annoying Colleague&quot;)&gt;&gt;&lt;&lt;goto &quot;HackTarget&quot;&gt;&gt;&lt;&lt;/link&gt;&gt; or just [[go back -&gt; HackTarget]]?&lt;/p&gt;</tw-passagedata><tw-passagedata pid="210" name="ByteBunker-Prank-computer-login" tags="" position="1225,2600" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - Annoying Colleague&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;desktop-hacking-tool-server-password-protected&quot;&gt;\
        &lt;div class=&quot;server-password-lock-icon&quot;&gt;🔒&lt;/div&gt;\
        &lt;input type=&quot;text&quot; id=&quot;server-password-input&quot; class=&quot;server-password-input&quot; placeholder=&quot;Enter Password&quot;&gt;\
        &lt;button class=&quot;server-password-submit-button&quot; onclick=&quot;checkLandlordPassword()&quot;&gt;Submit&lt;/button&gt;\
        &lt;div class=&quot;prank-server-action-selection-box&quot;&gt;\
            &lt;p class=&quot;active-cameras&quot;&gt; Access to the computer is password-protected.&lt;/p&gt;\
            &lt;button class=&quot;server-password-access-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;ByteBunker-Prank-bruteforce&#39;)&quot;&gt;Manually Bruteforce the Password&lt;/button&gt;\
        &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; HackTarget]]&lt;/p&gt;
&lt;&lt;nobr&gt;&gt;
&lt;&lt;script&gt;&gt;
setup.showAboutPcWindow = function() {
    $(&#39;#playerPcName&#39;).text(&quot;CORP-WKS-MB0321&quot;);
    $(&#39;#playerNickname&#39;).text(&quot;jordanb&quot;);
    $(&#39;#aboutPcWindow&#39;).show();
    $(&#39;#closeAboutPcWindow&#39;).off(&#39;click&#39;).click(function() {
        $(&#39;#aboutPcWindow&#39;).hide();
    });
}
&lt;&lt;/script&gt;&gt;

&lt;style&gt;
.prank-server-action-selection-box {
    background-color: #111;
    color: lime;
    font-family: &#39;Courier New&#39;, monospace;
    padding: 15px;
    margin-top: 80px;
    margin-bottom: 0px;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
}

.prank-desktop-login {
    background-color: #111;
    background-size: 100%;
    /* padding: 20px; */
    height: 500px;
    box-shadow: 0px 0px 15px 2px lime;
    position: relative;
    border: 4px solid lime;
    border-radius: 10px;
}
&lt;/style&gt;

&lt;script&gt;
function checkLandlordPassword() {
    let password = document.getElementById(&#39;server-password-input&#39;).value;
    if (password === &quot;IAmTheBoss&quot; || password === &quot;iamtheboss&quot;) {
        SugarCube.Engine.play(&#39;ByteBunker-Prank-computer&#39;);
    } else {
        SugarCube.UI.alert(&quot;Incorrect password.&quot;);
    }
}
&lt;/script&gt;

&lt;&lt;set $bruteforceMinigameCorrectPassword to &quot;IAmTheBoss&quot;&gt;&gt;
&lt;&lt;set $selectedPasswordLength to 5&gt;&gt;
&lt;&lt;set $numberOfPasswordsNeeded to 10&gt;&gt;
&lt;&lt;if $miniGameDifficulty is &quot;Normal&quot;&gt;&gt;
    &lt;&lt;set $bruteforceBaseTraceTime to 15&gt;&gt; 
&lt;&lt;elseif $miniGameDifficulty is &quot;Easy&quot;&gt;&gt;
    &lt;&lt;set $bruteforceBaseTraceTime to 25&gt;&gt; 
&lt;&lt;else&gt;&gt;
    &lt;&lt;set $bruteforceBaseTraceTime to 35&gt;&gt; 
&lt;&lt;/if&gt;&gt;
&lt;&lt;set $nextPassageAfterSuccessBruteforceGame to &quot;ByteBunker-Prank-computer&quot;&gt;&gt;
&lt;&lt;set $nextPassageAfterFailBruteforceGame to &quot;HackTarget&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="211" name="ByteBunker-Prank-bruteforce" tags="" position="100,2725" size="100,100">&lt;&lt;include &quot;Minigame-Bruteforce&quot;&gt;&gt;\
\
&lt;&lt;if $minigameSkipButtons === true&gt;&gt;\
&lt;p class=&quot;back-link&quot;&gt;[[Skip the Minigame -&gt; ByteBunker-Prank-computer]]&lt;/p&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="212" name="ByteBunker-Prank-computer" tags="" position="225,2725" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - Annoying Colleague&lt;/span&gt;&lt;/div&gt;\
&lt;div class=&quot;flxfit-desktop&quot;&gt;\
    &lt;!-- Adding Top bar --&gt;\
  &lt;div class=&quot;top-bar&quot;&gt;\
  @@.about-pc-button;&lt;&lt;button &quot;About This PC&quot;&gt;&gt;
   &lt;&lt;run setup.showAboutPcWindow()&gt;&gt;
  &lt;&lt;/button&gt;&gt;@@\
    &lt;span class=&quot;notification-counter&quot;&gt;&lt;i class=&quot;fas fa-wifi&quot;&gt;&lt;/i&gt;   &lt;i class=&quot;fas fa-volume-up&quot;&gt;&lt;/i&gt;&lt;/span&gt;\
  &lt;/div&gt;
    &lt;div class=&quot;prank-cyber-files-content&quot;&gt;
        &lt;div class=&quot;flxfit-desktop-icon&quot; onclick=&quot;SugarCube.State.display(&#39;Prank-Job-WebBrowser&#39;)&quot;&gt;🌐&lt;span class=&quot;desktop-icon-label&quot;&gt;Web Browser&lt;/span&gt;&lt;/div&gt;\
        &lt;div class=&quot;flxfit-desktop-icon&quot; onclick=&quot;SugarCube.State.display(&#39;FLXFIT-Report&#39;)&quot;&gt;📄&lt;span class=&quot;desktop-icon-label&quot;&gt;FromSamantha-MeetingNotes.txt&lt;/span&gt;&lt;/div&gt;\
        &lt;div class=&quot;flxfit-desktop-icon&quot; onclick=&quot;SugarCube.State.display(&#39;FLXFIT-Presentation&#39;)&quot;&gt;📊&lt;span class=&quot;desktop-icon-label&quot;&gt;Sales Presentation.ppt&lt;/span&gt;&lt;/div&gt;\
    &lt;/div&gt;
\
&lt;div class=&quot;about-pc&quot; id=&quot;aboutPcWindow&quot; style=&quot;display: none;&quot;&gt;\
    &lt;div class=&quot;about-pc-header&quot;&gt;\
        About This PC\
        &lt;span id=&quot;closeAboutPcWindow&quot; class=&quot;about-pc-close-button&quot;&gt;⛌&lt;/span&gt;\
    &lt;/div&gt;\
    &lt;div class=&quot;about-pc-body&quot;&gt;\
        &lt;p&gt;&lt;b&gt;Computer Name:&lt;/b&gt; &lt;span id=&quot;playerPcName&quot;&gt;&lt;/span&gt;&lt;/p&gt;\
        &lt;p&gt;&lt;b&gt;Username:&lt;/b&gt; &lt;span id=&quot;playerNickname&quot;&gt;&lt;/span&gt;&lt;/p&gt;\
        /*&lt;p&gt;&lt;b&gt;Performance:&lt;/b&gt; &lt;span id=&quot;playerPcPerformance&quot;&gt;&lt;/span&gt;&lt;/p&gt;\*/\
    &lt;/div&gt;\
&lt;/div&gt;\
&lt;/div&gt;\
&lt;/div&gt;

&lt;&lt;if $flxfitPresentationHackChoice === &quot;fat&quot; or $flxfitPresentationHackChoice === &quot;guys&quot; or $flxfitPresentationHackChoice === &quot;crotchless&quot;&gt;&gt;&lt;div class=&quot;inner-thought&quot;&gt;All done. I&#39;ve prepared an alternative version of the presentation and written a script to replace the original one at the right moment. It&#39;s time to leave and inform the client.&lt;/div&gt;&lt;br&gt;@@.choicebutton;&lt;&lt;button &quot;Leave and inform the client&quot;&gt;&gt;&lt;&lt;run setup.removeHackingTarget(&quot;Annoying Colleague&quot;)&gt;&gt;&lt;&lt;run MindWare.completeTask(&quot;Prank client&amp;#39;s colleague&quot;)&gt;&gt;&lt;&lt;goto &quot;ByteBunker-Prank-done&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@\&lt;&lt;else&gt;&gt;&lt;div class=&quot;inner-thought&quot;&gt;The sales presentation file is my target. There&#39;s also a web browser shortcut and meeting notes.&lt;/div&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;nobr&gt;&gt;
&lt;&lt;script&gt;&gt;
setup.showAboutPcWindow = function() {
    $(&#39;#playerPcName&#39;).text(&quot;CORP-WKS-MB0321&quot;);
    $(&#39;#playerNickname&#39;).text(&quot;jordanb&quot;);
    $(&#39;#aboutPcWindow&#39;).show();
    $(&#39;#closeAboutPcWindow&#39;).off(&#39;click&#39;).click(function() {
        $(&#39;#aboutPcWindow&#39;).hide();
    });
}
&lt;&lt;/script&gt;&gt;
/*
&lt;&lt;script&gt;&gt;
$(document).ready(function() {
    $(&quot;.desktop&quot;).css({
        &quot;background-image&quot;: &quot;url(&#39;imgs/wallpapers/&quot; + State.variables.activeWallpaper + &quot;.jpg&#39;)&quot;,
        &quot;background-size&quot;: &quot;cover&quot;
    });
});
&lt;&lt;/script&gt;&gt;
*/
&lt;style&gt;
.flxfit-desktop {
    background-image: url(&#39;imgs/jobs/prank/flxfit-background.jpg&#39;);
    background-color: #111;
    background-size: cover; /* This will cover the entire area with the image */
    background-position: center; /* This will center the image */
    background-repeat: no-repeat; /* This will prevent the image from repeating */
    padding: 20px;
    height: 500px;
    box-shadow: 0px 0px 15px 2px lime;
    position: relative;
}

.flxfit-desktop-icon {
    width: 120px;
    transition: transform 0.2s;
    margin-left: 20px;
    margin-right: 20px;
    margin-bottom: 0px;
    margin-top: 0px;
    text-align: center;
    font-size: 48px;
    color: white;
    cursor: pointer;
    position: relative;
}

.desktop-icon-label {
    display: block; /* Ensure the text appears on a new line under the icon */
    color: black; /* Match the color scheme of the icons */
    font-size: 14px; /* Adjust font size as necessary */
    margin-top: 5px; /* Space between icon and text */
}

.prank-cyber-files-content {
    flex-wrap: wrap;
    overflow: auto; /* Change overflow-y to overflow */
    scrollbar-width: none; /* For Firefox */
    -ms-overflow-style: none; /* For Internet Explorer and Edge */
}

/* For Chrome, Safari, and Opera */
.prank-cyber-files-content::-webkit-scrollbar {
    display: none; /* Hide scrollbar but still allow scrolling */
}
&lt;/style&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="213" name="FLXFIT-Report" tags="" position="350,2725" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - Annoying Colleague&lt;/span&gt;&lt;/div&gt;\
&lt;div class=&quot;flxfit-desktop&quot;&gt;\
    &lt;!-- Adding Top bar --&gt;\
  &lt;div class=&quot;top-bar&quot;&gt;\
  @@.about-pc-button;&lt;&lt;button &quot;About This PC&quot;&gt;&gt;
   &lt;&lt;run setup.showAboutPcWindow()&gt;&gt;
  &lt;&lt;/button&gt;&gt;@@\
    &lt;span class=&quot;notification-counter&quot;&gt;&lt;i class=&quot;fas fa-wifi&quot;&gt;&lt;/i&gt;   &lt;i class=&quot;fas fa-volume-up&quot;&gt;&lt;/i&gt;&lt;/span&gt;\
  &lt;/div&gt;
    &lt;div class=&quot;flxfit-report-content&quot;&gt;\
&lt;strong&gt;Meeting Date: March 22, 2024&lt;/strong&gt;

&lt;strong&gt;Attendees:&lt;/strong&gt; Samantha (Design Lead), Derek (Marketing Manager), Alex (Product Manager), Jordan (Sales Manager)

[Begin Transcript]

&lt;strong&gt;Samantha:&lt;/strong&gt; Let&#39;s kick off with our new leggings line. Any updates, Alex?

&lt;strong&gt;Alex:&lt;/strong&gt; Yes, the prototype for the eco-friendly range is ready. We used recycled materials and—

&lt;strong&gt;Jordan:&lt;/strong&gt; (interrupting) Eco-friendly? Please. You know what’s really eco-friendly? Leggings that double as compost. I&#39;m joking... unless? Anyway, how about some real innovation like scratch-and-sniff leggings? Imagine the possibilities!

&lt;strong&gt;Derek:&lt;/strong&gt; (mutters) If only silence was one of those possibilities... Moving on to marketing strategies for the launch. We&#39;re considering an influencer partnership—

&lt;strong&gt;Jordan:&lt;/strong&gt; Speaking of influencers, I convinced a hot dog stand guy to wear our leggings. He&#39;s an influencer in his own right, right? (laughs at own joke)

&lt;strong&gt;Samantha:&lt;/strong&gt; (ignores Jordan) Alex, what&#39;s the timeline looking like?

&lt;strong&gt;Alex:&lt;/strong&gt; We&#39;re on track for a Q2 launch, assuming no delays. The suppliers are—

&lt;strong&gt;Jordan:&lt;/strong&gt; (interrupting again) You know what we should do? Create a special line of leggings just for men. Extra room in the... (gestures vaguely around his crotch area) you know, for those of us who are more... (winks) generously endowed.

&lt;strong&gt;Derek:&lt;/strong&gt; (pinching the bridge of his nose) Thank you, Jordan. Very... insightful. Lastly, let&#39;s discuss our CSR initiative. We plan to donate a percentage of sales to—

&lt;strong&gt;Jordan:&lt;/strong&gt; (interrupting) I&#39;ve got a charity idea. &quot;Save the Unicorns&quot;. You know, because they&#39;re so rare. (snickers)

&lt;strong&gt;Samantha:&lt;/strong&gt; (concluding the meeting abruptly) Thank you, everyone. We&#39;ll reconvene next week. Without the... unicorn discussions.

[End Transcript]

&lt;strong&gt;Action Items:&lt;/strong&gt;
1. Finalize eco-friendly leggings prototype.
2. Refine marketing strategy to focus on genuine influencer partnerships.
3. Reassess meeting invite list for productivity.
    &lt;/div&gt;
\
&lt;div class=&quot;about-pc&quot; id=&quot;aboutPcWindow&quot; style=&quot;display: none;&quot;&gt;\
    &lt;div class=&quot;about-pc-header&quot;&gt;\
        About This PC\
        &lt;span id=&quot;closeAboutPcWindow&quot; class=&quot;about-pc-close-button&quot;&gt;⛌&lt;/span&gt;\
    &lt;/div&gt;\
    &lt;div class=&quot;about-pc-body&quot;&gt;\
        &lt;p&gt;&lt;b&gt;Computer Name:&lt;/b&gt; &lt;span id=&quot;playerPcName&quot;&gt;&lt;/span&gt;&lt;/p&gt;\
        &lt;p&gt;&lt;b&gt;Username:&lt;/b&gt; &lt;span id=&quot;playerNickname&quot;&gt;&lt;/span&gt;&lt;/p&gt;\
        /*&lt;p&gt;&lt;b&gt;Performance:&lt;/b&gt; &lt;span id=&quot;playerPcPerformance&quot;&gt;&lt;/span&gt;&lt;/p&gt;\*/\
    &lt;/div&gt;\
&lt;/div&gt;\
&lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; ByteBunker-Prank-computer]]&lt;/p&gt;
&lt;&lt;nobr&gt;&gt;
&lt;&lt;script&gt;&gt;
setup.showAboutPcWindow = function() {
    $(&#39;#playerPcName&#39;).text(&quot;CORP-WKS-MB0321&quot;);
    $(&#39;#playerNickname&#39;).text(&quot;jordanb&quot;);
    $(&#39;#aboutPcWindow&#39;).show();
    $(&#39;#closeAboutPcWindow&#39;).off(&#39;click&#39;).click(function() {
        $(&#39;#aboutPcWindow&#39;).hide();
    });
}
&lt;&lt;/script&gt;&gt;

&lt;style&gt;
.flxfit-desktop {
        background-image: url(&#39;imgs/jobs/prank/flxfit-background.jpg&#39;);
    background-color: #111;
    background-size: cover; /* This will cover the entire area with the image */
    background-position: center; /* This will center the image */
    background-repeat: no-repeat; /* This will prevent the image from repeating */
    padding: 20px;
    height: 600px;
    box-shadow: 0px 0px 15px 2px lime;
    position: relative;
}

.flxfit-report-content {
    font-family: &#39;Courier New&#39;, monospace;
    background-color: rgba(0, 0, 0, 0.9);
    border-radius: 5px;
    border: 10px solid #4C4F4E;
    padding: 15px;
    margin-top: 20px;
    font-size: 14px;
    height: 500px; /* Set a fixed height */
    overflow-y: auto; /* Add a scroll bar when content overflows */
}

.flxfit-report-content p {
    margin-bottom: 10px;
}
&lt;/style&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="214" name="FLXFIT-Presentation" tags="" position="475,2725" size="100,100">&lt;div class=&quot;desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - Annoying Colleague&lt;/span&gt;&lt;/div&gt;\
&lt;div class=&quot;flxfit-desktop&quot;&gt;\
    &lt;!-- Adding Top bar --&gt;\
  &lt;div class=&quot;top-bar&quot;&gt;\
  @@.about-pc-button;&lt;&lt;button &quot;About This PC&quot;&gt;&gt;
   &lt;&lt;run setup.showAboutPcWindow()&gt;&gt;
  &lt;&lt;/button&gt;&gt;@@\
    &lt;span class=&quot;notification-counter&quot;&gt;&lt;i class=&quot;fas fa-wifi&quot;&gt;&lt;/i&gt;   &lt;i class=&quot;fas fa-volume-up&quot;&gt;&lt;/i&gt;&lt;/span&gt;\
  &lt;/div&gt;
            &lt;div id=&quot;presentation-slide&quot; class=&quot;flxfit-presentation-content&quot;&gt;\
                &lt;&lt;include &quot;FLXFIT-Presentation-Slide1&quot;&gt;&gt;
            &lt;/div&gt;
\
&lt;div class=&quot;about-pc&quot; id=&quot;aboutPcWindow&quot; style=&quot;display: none;&quot;&gt;\
    &lt;div class=&quot;about-pc-header&quot;&gt;\
        About This PC\
        &lt;span id=&quot;closeAboutPcWindow&quot; class=&quot;about-pc-close-button&quot;&gt;⛌&lt;/span&gt;\
    &lt;/div&gt;\
    &lt;div class=&quot;about-pc-body&quot;&gt;\
        &lt;p&gt;&lt;b&gt;Computer Name:&lt;/b&gt; &lt;span id=&quot;playerPcName&quot;&gt;&lt;/span&gt;&lt;/p&gt;\
        &lt;p&gt;&lt;b&gt;Username:&lt;/b&gt; &lt;span id=&quot;playerNickname&quot;&gt;&lt;/span&gt;&lt;/p&gt;\
        /*&lt;p&gt;&lt;b&gt;Performance:&lt;/b&gt; &lt;span id=&quot;playerPcPerformance&quot;&gt;&lt;/span&gt;&lt;/p&gt;\*/\
    &lt;/div&gt;\
&lt;/div&gt;\
&lt;/div&gt;\
&lt;/div&gt;

&lt;&lt;if $flxfitPresentationHackChoicesVisible !== true&gt;&gt;&lt;span id=&quot;replace-choices&quot;&gt;&lt;div class=&quot;inner-thought&quot;&gt;Let&#39;s go through the presentation first before I mess with it.&lt;/div&gt;&lt;/span&gt;&lt;&lt;else&gt;&gt;@@.choicebutton;&lt;&lt;button &quot;Replace existing images with less attractive ones&quot;&gt;&gt;&lt;&lt;set $flxfitPresentationHackChoice = &quot;fat&quot;&gt;&gt;&lt;&lt;goto &quot;FLXFIT-Presentation&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@
@@.choicebutton;&lt;&lt;button &quot;Let there be crotchless leggings&quot;&gt;&gt;&lt;&lt;set $flxfitPresentationHackChoice = &quot;crotchless&quot;&gt;&gt;&lt;&lt;goto &quot;FLXFIT-Presentation&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@
@@.choicebutton;&lt;&lt;button &quot;Turn the presentation into a sausage fest&quot;&gt;&gt;&lt;&lt;set $flxfitPresentationHackChoice = &quot;guys&quot;&gt;&gt;&lt;&lt;goto &quot;FLXFIT-Presentation&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@&lt;&lt;/if&gt;&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; ByteBunker-Prank-computer]]&lt;/p&gt;
&lt;&lt;nobr&gt;&gt;
&lt;&lt;script&gt;&gt;
setup.showAboutPcWindow = function() {
    $(&#39;#playerPcName&#39;).text(&quot;CORP-WKS-MB0321&quot;);
    $(&#39;#playerNickname&#39;).text(&quot;jordanb&quot;);
    $(&#39;#aboutPcWindow&#39;).show();
    $(&#39;#closeAboutPcWindow&#39;).off(&#39;click&#39;).click(function() {
        $(&#39;#aboutPcWindow&#39;).hide();
    });
}
&lt;&lt;/script&gt;&gt;

&lt;style&gt;
.flxfit-desktop {
        background-image: url(&#39;imgs/jobs/prank/flxfit-background.jpg&#39;);
    background-color: #111;
    background-size: cover; /* This will cover the entire area with the image */
    background-position: center; /* This will center the image */
    background-repeat: no-repeat; /* This will prevent the image from repeating */
    padding: 20px;
    height: 600px;
    box-shadow: 0px 0px 15px 2px lime;
    position: relative;
}

.flxfit-presentation-content {
    font-family: &#39;Courier New&#39;, monospace;
    background-color: rgba(0, 0, 0, 0.9);
    border-radius: 5px;
    border: 10px solid #4C4F4E;
    padding: 15px;
    margin-top: 20px;
    font-size: 14px;
    height: 500px; /* Set a fixed height */
}

.flxfit-report-content p {
    margin-bottom: 10px;
}
&lt;/style&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="215" name="FLXFIT-Presentation-Slide1" tags="nobr" position="600,2725" size="100,100">&lt;div class=&quot;slide&quot;&gt;
&lt;div class=&quot;flxfit-slide-content&quot;&gt;
    &lt;div class=&quot;flxfit-slide-image&quot;&gt;
        &lt;!-- Placeholder for the image --&gt;
        &lt;&lt;switch $flxfitPresentationHackChoice&gt;&gt;
            &lt;&lt;case &quot;fat&quot;&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/fat1.jpg&quot;&gt;
            &lt;&lt;case &quot;guys&quot;&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/guy1.jpg&quot;&gt;
            &lt;&lt;case &quot;crotchless&quot;&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/hole1.jpg&quot;&gt;
            &lt;&lt;default&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/AeroFlex.webp&quot;&gt;
        &lt;&lt;/switch&gt;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;flxfit-slide-text&quot;&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;Model:&lt;/strong&gt; AeroFlex&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Color:&lt;/strong&gt; Midnight Black&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Price:&lt;/strong&gt; $59.99&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Purpose:&lt;/strong&gt; High-intensity workouts&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Q1 Sales Data:&lt;/strong&gt; 15,000 units&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Customer Satisfaction:&lt;/strong&gt; 92%&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/div&gt;
        &lt;div class=&quot;justify-content-space-between&quot;&gt;
    @@.hidden-presentation-button;&lt;&lt;button &quot;◀&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@
    @@.presentation-button;&lt;&lt;button &quot;▶&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;FLXFIT-Presentation-Slide2&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@&lt;/div&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="216" name="FLXFIT-Presentation-Slide2" tags="nobr" position="725,2725" size="100,100">&lt;div class=&quot;slide&quot;&gt;
&lt;div class=&quot;flxfit-slide-content&quot;&gt;
    &lt;div class=&quot;flxfit-slide-image&quot;&gt;
        &lt;!-- Placeholder for the image --&gt;
        &lt;&lt;switch $flxfitPresentationHackChoice&gt;&gt;
            &lt;&lt;case &quot;fat&quot;&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/fat2.jpg&quot;&gt;
            &lt;&lt;case &quot;guys&quot;&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/guy2.jpg&quot;&gt;
            &lt;&lt;case &quot;crotchless&quot;&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/hole2.jpg&quot;&gt;
            &lt;&lt;default&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/JogaFlex.webp&quot;&gt;
        &lt;&lt;/switch&gt;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;flxfit-slide-text&quot;&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;Model:&lt;/strong&gt; JogaFlex&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Color:&lt;/strong&gt; Creamy White&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Price:&lt;/strong&gt; $49.99&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Purpose:&lt;/strong&gt; Joga&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Q1 Sales Data:&lt;/strong&gt; 7,500 units&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Customer Satisfaction:&lt;/strong&gt; 89%&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/div&gt;
        &lt;div class=&quot;justify-content-space-between&quot;&gt;
    @@.presentation-button;&lt;&lt;button &quot;◀&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;FLXFIT-Presentation-Slide1&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@
    @@.presentation-button;&lt;&lt;button &quot;▶&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;FLXFIT-Presentation-Slide3&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@&lt;/div&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="217" name="FLXFIT-Presentation-Slide3" tags="nobr" position="850,2725" size="100,100">&lt;div class=&quot;slide&quot;&gt;
    &lt;div class=&quot;flxfit-slide-content&quot;&gt;
        &lt;div class=&quot;flxfit-slide-image&quot;&gt;
            &lt;!-- The image source path should point to where the image file is hosted within your game&#39;s directory --&gt;
        &lt;&lt;switch $flxfitPresentationHackChoice&gt;&gt;
            &lt;&lt;case &quot;fat&quot;&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/fat3.jpg&quot;&gt;
            &lt;&lt;case &quot;guys&quot;&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/guy3.jpg&quot;&gt;
            &lt;&lt;case &quot;crotchless&quot;&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/hole3.jpg&quot;&gt;
            &lt;&lt;default&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/ComfortHigh.webp&quot;&gt;
        &lt;&lt;/switch&gt;&gt;
        &lt;/div&gt;
        &lt;div class=&quot;flxfit-slide-text&quot;&gt;
            &lt;ul&gt;
                &lt;li&gt;&lt;strong&gt;Model:&lt;/strong&gt; ComfortFlex&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;Color:&lt;/strong&gt; Pastel Pink&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;Price:&lt;/strong&gt; $79.99&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;Purpose:&lt;/strong&gt; Casual wear and comfort&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Q1 Sales Data:&lt;/strong&gt; 9,000 units&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Customer Satisfaction:&lt;/strong&gt; 95%&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
    &lt;/div&gt;
        &lt;div class=&quot;justify-content-space-between&quot;&gt;
    @@.presentation-button;&lt;&lt;button &quot;◀&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;FLXFIT-Presentation-Slide2&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@
    @@.presentation-button;&lt;&lt;button &quot;▶&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;FLXFIT-Presentation-Slide4&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@&lt;/div&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="218" name="FLXFIT-Presentation-Slide4" tags="nobr" position="975,2725" size="100,100">&lt;div class=&quot;slide&quot;&gt;
    &lt;div class=&quot;flxfit-slide-content&quot;&gt;
        &lt;div class=&quot;flxfit-slide-image&quot;&gt;
            &lt;!-- The image source path should point to where the image file is hosted within your game&#39;s directory --&gt;
        &lt;&lt;switch $flxfitPresentationHackChoice&gt;&gt;
            &lt;&lt;case &quot;fat&quot;&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/fat4.jpg&quot;&gt;
            &lt;&lt;case &quot;guys&quot;&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/guy4.jpg&quot;&gt;
            &lt;&lt;case &quot;crotchless&quot;&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/hole4.jpg&quot;&gt;
            &lt;&lt;default&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/GreenCurve.webp&quot; alt=&quot;Pastel Green Curve-Hugging Leggings&quot;&gt;
        &lt;&lt;/switch&gt;&gt;
        &lt;/div&gt;
        &lt;div class=&quot;flxfit-slide-text&quot;&gt;
            &lt;ul&gt;
                &lt;li&gt;&lt;strong&gt;Model:&lt;/strong&gt; GreenFlex&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;Color:&lt;/strong&gt; Pastel Green&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;Price:&lt;/strong&gt; $99.99&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;Purpose:&lt;/strong&gt; Everyday comfort and accentuating design&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;Q1 Sales Data:&lt;/strong&gt; 12,000 units&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;Customer Satisfaction:&lt;/strong&gt; 93%&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
    &lt;/div&gt;
        &lt;div class=&quot;justify-content-space-between&quot;&gt;
    @@.presentation-button;&lt;&lt;button &quot;◀&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;FLXFIT-Presentation-Slide3&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@
    &lt;&lt;if $flxfitPresentationHackChoicesVisible === true&gt;&gt;@@.presentation-button;&lt;&lt;button &quot;▶&quot;&gt;&gt;&lt;&lt;set $flxfitPresentationHackChoicesVisible = true&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;FLXFIT-Presentation-Slide5&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;&lt;else&gt;&gt;@@.presentation-button;&lt;&lt;button &quot;▶&quot;&gt;&gt;&lt;&lt;set $flxfitPresentationHackChoicesVisible = true&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;FLXFIT-Presentation-Slide5&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
        &lt;&lt;replace &quot;#replace-choices&quot;&gt;&gt;
            @@.choicebutton;&lt;&lt;button &quot;Replace existing images with less attractive ones&quot;&gt;&gt;&lt;&lt;set $flxfitPresentationHackChoice = &quot;fat&quot;&gt;&gt;&lt;&lt;goto &quot;FLXFIT-Presentation&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@
&lt;br&gt;
            @@.choicebutton;&lt;&lt;button &quot;Turn the presentation into a sausage fest&quot;&gt;&gt;&lt;&lt;set $flxfitPresentationHackChoice = &quot;guys&quot;&gt;&gt;&lt;&lt;goto &quot;FLXFIT-Presentation&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@
&lt;br&gt;
            @@.choicebutton;&lt;&lt;button &quot;Let there be crotchless leggings&quot;&gt;&gt;&lt;&lt;set $flxfitPresentationHackChoice = &quot;crotchless&quot;&gt;&gt;&lt;&lt;goto &quot;FLXFIT-Presentation&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@
            &lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@&lt;&lt;/if&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="219" name="FLXFIT-Presentation-Slide5" tags="nobr" position="1100,2725" size="100,100">&lt;div class=&quot;slide&quot;&gt;
    &lt;div class=&quot;flxfit-slide-content&quot;&gt;
        &lt;div class=&quot;flxfit-slide-image&quot;&gt;
            &lt;!-- The image source path should point to where the image file is hosted within your game&#39;s directory --&gt;
        &lt;&lt;switch $flxfitPresentationHackChoice&gt;&gt;
            &lt;&lt;case &quot;fat&quot;&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/fat5.jpg&quot;&gt;
            &lt;&lt;case &quot;guys&quot;&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/guy5.jpg&quot;&gt;
            &lt;&lt;case &quot;crotchless&quot;&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/hole5.jpg&quot;&gt;
            &lt;&lt;default&gt;&gt;
                &lt;img src=&quot;imgs/jobs/prank/ClearFlex.webp&quot;&gt;
        &lt;&lt;/switch&gt;&gt;
        &lt;/div&gt;
        &lt;div class=&quot;flxfit-slide-text&quot;&gt;
            &lt;ul&gt;
                &lt;li&gt;&lt;strong&gt;Model:&lt;/strong&gt; ClearFlex&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;Color:&lt;/strong&gt; Transparent Noir&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;Price:&lt;/strong&gt; $29.99&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;Purpose:&lt;/strong&gt; Bold fashion statement&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;Q1 Sales Data:&lt;/strong&gt; 2,500 units&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;Customer Satisfaction:&lt;/strong&gt; 98%&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
    &lt;/div&gt;
        &lt;div class=&quot;justify-content-space-between&quot;&gt;
    @@.presentation-button;&lt;&lt;button &quot;◀&quot;&gt;&gt;&lt;&lt;replace &quot;#presentation-slide&quot;&gt;&gt;&lt;&lt;include &quot;FLXFIT-Presentation-Slide4&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt;@@&lt;/div&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="220" name="Prank-Job-WebBrowser" tags="" position="1225,2725" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;\
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;OmniNet Browser&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;browser-toolbar&quot;&gt;\
        &lt;input type=&quot;text&quot; class=&quot;url-input&quot; placeholder=&quot;Enter URL here...&quot; /&gt;\
        &lt;span class=&quot;go-button&quot;&gt;\
            &lt;button id=&quot;goButton&quot;&gt;↲&lt;/button&gt;\
        &lt;/span&gt;\
    &lt;/div&gt;
    &lt;h3 class=&quot;recently-visited-header&quot;&gt;Recently Visited Sites&lt;/h3&gt;\
    &lt;ul class=&quot;recently-visited-list&quot;&gt;
         &lt;li&gt;&lt;a href=&quot;#&quot; class=&quot;recently-visited-item&quot; onclick=&quot;SugarCube.Engine.play(&#39;FLXFIT-Website&#39;)&quot;&gt;FLXFIT - Intranet Site&lt;/a&gt;&lt;/li&gt;\
        &lt;li&gt;&lt;a href=&quot;#&quot; class=&quot;recently-visited-item&quot; onclick=&quot;SugarCube.Engine.play(&#39;Extendo-Website&#39;)&quot;&gt;Extendo – Ultimate Reach&lt;/a&gt;&lt;/li&gt;\
    &lt;/ul&gt;\
&lt;/div&gt;\
\
    &lt;p class=&quot;back-link&quot;&gt;
        [[Go Back-&gt;ByteBunker-Prank-computer]]
    &lt;/p&gt;
&lt;&lt;nobr&gt;&gt;
&lt;&lt;include &quot;WebBrowser-URL&quot;&gt;&gt;
&lt;style&gt;
.recently-visited-header {
margin-top: 12px;
color: lime;
font-size: 1.2em;
padding-left: 1.5em !important; 
}

.recently-visited-list {
list-style: none;
padding-left: 1.5em !important; 
margin: 0;
}

.recently-visited-item {
display: block;
padding: 8px;
margin-right: 2em; 
margin-bottom: 4px;
background: #1a1a1a;
color: #ffffff;
text-decoration: none;
border-left: 4px solid lime;
transition: background-color 0.3s ease;
}

.recently-visited-item:hover {
background: #333333;
}
&lt;/style&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="221" name="FLXFIT-Website" tags="nobr" position="100,2850" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;
    &lt;div class=&quot;browser-header&quot;&gt;
        &lt;span class=&quot;browser-header-text&quot;&gt;FLXFIT Intranet Portal (flxfit.omninet)&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;browser-content&quot;&gt;
        &lt;h1&gt;Welcome to FLXFIT Intranet&lt;/h1&gt;
        &lt;p&gt;Your source for company news, resources, and internal services.&lt;/p&gt;
        
        &lt;h2&gt;Latest Announcements&lt;/h2&gt;
        &lt;p&gt;Don&#39;t miss our end-of-season sale! Check the Marketing section for promotional materials.&lt;/p&gt;
        
        &lt;h2&gt;HR Updates&lt;/h2&gt;
        &lt;p&gt;Annual reviews are around the corner. Schedule your review meeting now!&lt;/p&gt;
        &lt;p&gt;Also, please remember, as part of our commitment to a respectful and inclusive workplace, FLXFIT has a zero tolerance policy on any form of discrimination or shaming. This policy extends to all forms of communication, including presentations and public speaking within the workplace.&lt;/p&gt;
        
        &lt;h2&gt;IT Department&lt;/h2&gt;
        &lt;p&gt;Reminder: Password changes are required every 90 days. Secure your data!&lt;/p&gt;
        
        &lt;h2&gt;Upcoming Events&lt;/h2&gt;
        &lt;ul&gt;
            &lt;li&gt;Company Town Hall&lt;/li&gt;
            &lt;li&gt;Health &amp; Wellness Week&lt;/li&gt;
            &lt;li&gt;Quarterly Charity Run&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Go Back-&gt;Prank-Job-WebBrowser]]&lt;/p&gt;

&lt;style&gt;
.browser-content h1 {
    color: #0096d0;
    font-size: 2em;
    margin-bottom: 0.5em;
    margin-top: 0em;
}

.browser-content h2 {
    border-bottom: 2px solid #0096d0;
    padding-bottom: 0.2em;
    margin-top: 1em;
    margin-bottom: 0.5em;
    color: #0096d0;
}

.browser-content p {
    font-size: 1em;
    line-height: 1.6;
    margin-top: 0.5em;
}

.browser-content ul {
    list-style-type: none;
    padding: 0;
}

.browser-content ul li:before {
    content: &quot;• &quot;;
    color: #0096d0;
    font-size: larger;
    padding-right: 0.5em;
}

.browser-content ul li {
    padding-left: 1em;
    margin-bottom: 0.2em;
}
&lt;/style&gt;</tw-passagedata><tw-passagedata pid="222" name="Extendo-Website" tags="nobr" position="225,2850" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;Extendo - Ultimate Reach (extendo.omninet)&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;browser-content&quot;&gt;
        &lt;h1&gt;Unleash Your Inner Titan with Extendo!&lt;/h1&gt;
        &lt;p&gt;Ever dreamed of donning the armor of the gods to do battle in the boudoir? Look no further, brave warrior! The &lt;strong&gt;Extendo Titan Sleeve&lt;/strong&gt; is your secret weapon for legendary encounters.&lt;/p&gt;
         &lt;img src=&quot;imgs/jobs/prank/extendo-sleeve.jpg&quot; width=&quot;50%&quot; style=&quot;display: block; margin: 0 auto;&quot;&gt;
    &lt;p&gt;With its majestic 7 inches of valor and 4 inches of girth, the Extendo Titan Sleeve transforms mere mortals into champions of pleasure. Its ribbed exterior sends shockwaves of delight, while the textured interior ensures your quest is as glorious as the tales of old.&lt;/p&gt;
    
&lt;div id=&quot;videoContainer&quot;&gt;
    &lt;!-- SEE IT IN ACTION button --&gt;
    &lt;button id=&quot;seeItInActionBtn&quot; style=&quot;display: block; margin: 20px auto; padding: 15px 30px; background-color: #005f83; color: #ffffff; border: none; border-radius: 5px; cursor: pointer; font-size: 20px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);&quot;&gt;SEE IT IN ACTION&lt;/button&gt;
&lt;/div&gt;

    &lt;h2&gt;Feats of Strength:&lt;/h2&gt;
    &lt;ul&gt;
        &lt;li&gt;Length to rival the gods: &lt;strong&gt;7 Inches&lt;/strong&gt;&lt;/li&gt;
        &lt;li&gt;Girth fit for a titan: &lt;strong&gt;4 Inches&lt;/strong&gt;&lt;/li&gt;
        &lt;li&gt;Armor material: Crafted from the &lt;strong&gt;finest TPE&lt;/strong&gt;, as flexible as it is durable&lt;/li&gt;
    &lt;/ul&gt;
    
    &lt;p&gt;Adorn your scrotum with the Extendo and feel it cling to you like the grip of destiny. Fear not the elements, for this mighty sleeve is &lt;strong&gt;waterproof&lt;/strong&gt;, and cleans easily with just hot soapy water and toy cleaner. Ideal for the manly man looking to add excitement and increase their prowess.&lt;/p&gt;
    
         &lt;img src=&quot;imgs/jobs/prank/extendo-sleeve-action.jpg&quot; width=&quot;70%&quot; style=&quot;display: block; margin: 0 auto;&quot;&gt;
    &lt;p&gt;Why wait to become the stuff of legends? The &lt;strong&gt;Extendo Titan Sleeve&lt;/strong&gt; is free from both latex and phthalates, making it the noble choice for heroes seeking to venture into uncharted territories of pleasure and exhilaration. Dare to wear it and transform your world.&lt;/p&gt;

    &lt;button disabled style=&quot;display: block; margin: 20px auto; padding: 15px 30px; background-color: #ddd; color: #aaa; border: 2px solid #ccc; border-radius: 8px; cursor: not-allowed; font-size: 20px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);&quot;&gt;ORDER NOW&lt;/button&gt;
    &lt;p style=&quot;text-align: center; color: red;&quot;&gt;&lt;i&gt;We regret to inform you that the &lt;strong&gt;Extendo Titan Sleeve&lt;/strong&gt; is currently out of stock. Stay tuned for restocking dates!&lt;/i&gt;&lt;/p&gt;
        
&lt;/div&gt;
&lt;/div&gt;
&lt;&lt;if $extendoWebsiteBookmarkAdded !== true&gt;&gt;
&lt;span id=&quot;bookmark-button&quot;&gt;&lt;br&gt;&lt;br&gt;
&lt;div class=&quot;inner-thought&quot;&gt;This looks... interesting. Maybe I should bookmark it in my own browser... for a friend.&lt;/div&gt;
&lt;br&gt;@@.choicebutton;&lt;&lt;button &quot;Bookmark the Extendo Website&quot;&gt;&gt;
    &lt;&lt;set $extendoWebsiteBookmarkAdded = true&gt;&gt;
    &lt;&lt;replace &quot;#bookmark-button&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
    &lt;&lt;/button&gt;&gt;@@
&lt;/span&gt;&lt;&lt;/if&gt;&gt;&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Go Back-&gt;Prank-Job-WebBrowser]]&lt;/p&gt;
&lt;style&gt;
.button-disabled {
    display: block;
    margin: 20px auto;
    padding: 10px 20px;
    background-color: #ddd;
    color: #aaa;
    border: none;
    border-radius: 5px;
    cursor: not-allowed;
    font-size: 16px; /* Adjust size as needed */
}

.disabled-text {
    text-align: center;
    color: #666; /* Dark grey text */
}

.browser-content h1, .browser-content h2 {
    color: #8A0707; /* Dark red for emphasis */
}

.browser-content h1 {
    margin-top: 0px;
}

.browser-content {
    background-color: #FFF7E6; /* Light, inviting background */
    font-family: Arial, sans-serif;
    padding: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.browser-content ul {
    list-style-type: none;
    padding-left: 0px;
}

.browser-content ul li {
    padding-left: 0; /* Adjust as necessary */
}

.browser-content p, .browser-content ul li {
    color: #333; /* Dark text for readability */
    line-height: 1.4;
}

.browser-content img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 10px 0;
    border-radius: 5px;
}
&lt;/style&gt;
&lt;script&gt;
document.getElementById(&#39;seeItInActionBtn&#39;).addEventListener(&#39;click&#39;, function() {
    var videoContainer = document.getElementById(&#39;videoContainer&#39;);
    videoContainer.innerHTML = &#39;&lt;video width=&quot;100%&quot; controls autoplay muted&gt;&lt;source src=&quot;imgs/jobs/prank/extendo.mp4&quot; type=&quot;video/mp4&quot;&gt;Your browser does not support the video tag.&lt;/video&gt;&#39;;
});
&lt;/script&gt;</tw-passagedata><tw-passagedata pid="223" name="ByteBunker-Prank-done" tags="" position="350,2850" size="100,100">You send an email to the client to let them know that everything is set and ready to go. You explain to them that the hack will be triggered as soon as the target connects their laptop to a projector.

Finally, you thank the client for trusting you with this job and let them know that you&#39;re looking forward to hearing how it all goes when the target gives their presentation in &lt;&lt;print 11 - $chapter1Days&gt;&gt; days. You sign off the email with your hacker handle and lean back in your chair. It&#39;s time to wait for the fireworks.

&lt;&lt;button &quot;Continue&quot;&gt;&gt;&lt;&lt;set $byteBunkerPrankJobFinished to true&gt;&gt;&lt;&lt;goto &quot;HomeBacklog&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="224" name="ByteBunker-PrankFailEmail" tags="" position="475,2850" size="100,100">&lt;div class=&quot;email-message&quot;&gt;\
    &lt;div class=&quot;from-line&quot;&gt;&lt;strong&gt;From:&lt;/strong&gt; CorpoDrone&lt;/div&gt;\
    &lt;div class=&quot;subject-line&quot;&gt;&lt;strong&gt;Subject:&lt;/strong&gt; Epic Prank Fail!?&lt;/div&gt;\
    &lt;div class=&quot;message-content&quot;&gt;
        I was really looking forward to embarrassing Mr. Asshat, but it&#39;s clear that allowing any wannabie hacker to accept the job was a big mistake. 

        Well, I won&#39;t make the same mistake again - that&#39;s for sure! 
&lt;/div&gt;\
&lt;div class=&quot;email-message-buttons&quot;&gt;
    &lt;&lt;if !MindWare.emailIsRead(&quot;ByteBunker-PrankFailEmail&quot;)&gt;&gt;\
    &lt;span class=&quot;email-btn-wrapper-span&quot;&gt;\
        @@.email-listing;&lt;&lt;button &quot;Mark as Read&quot;&gt;&gt;\
        &lt;&lt;run MindWare.markEmailAsRead(&quot;ByteBunker-PrankFailEmail&quot;)&gt;&gt;\
        &lt;&lt;goto &quot;ByteBunker-PrankFailEmail&quot;&gt;&gt;\
        &lt;&lt;/button&gt;&gt;\
        @@\
    &lt;/span&gt;\
    &lt;&lt;/if&gt;&gt;\
&lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; EmailClient]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="225" name="ByteBunker-PrankSuccessGuysEmail" tags="" position="600,2850" size="100,100">&lt;div class=&quot;email-message&quot;&gt;\
    &lt;div class=&quot;from-line&quot;&gt;&lt;strong&gt;From:&lt;/strong&gt; CorpoDrone&lt;/div&gt;\
    &lt;div class=&quot;subject-line&quot;&gt;&lt;strong&gt;Subject:&lt;/strong&gt; Unexpected Outcome, But Kudos&lt;/div&gt;\
    &lt;div class=&quot;message-content&quot;&gt;
        Hey,

        Well, that was... unexpected. Your little twist on the presentation, switching the images to feature guys in leggings, certainly made waves. But not quite the splash I had in mind. 

        Instead of the room erupting in laughter at Mr. Asshat&#39;s expense, he started crying and then came out the closet. Everyone went silent, but then Jessy from marketing started clapping her hands, and it didn&#39;t take much time before the room was full of applause for his courage.
        
        Now he&#39;s our new office hero, and he&#39;s even more insufferable than before. Fuck my life.  

        But hey, you technically fulfilled the job request to the letter. So, the agreed reward is yours—no hard feelings.

        CorpoDrone
&lt;/div&gt;\
&lt;div class=&quot;email-message-buttons&quot;&gt;
    &lt;&lt;if !MindWare.emailIsRead(&quot;ByteBunker-PrankSuccessGuysEmail&quot;)&gt;&gt;\
    &lt;span class=&quot;email-btn-wrapper-span&quot;&gt;\
        @@.email-listing;&lt;&lt;button &quot;Mark as Read&quot;&gt;&gt;\
        &lt;&lt;run MindWare.markEmailAsRead(&quot;ByteBunker-PrankSuccessGuysEmail&quot;)&gt;&gt;\
        &lt;&lt;goto &quot;ByteBunker-PrankSuccessGuysEmail&quot;&gt;&gt;\
        &lt;&lt;/button&gt;&gt;\
        @@\
    &lt;/span&gt;\
    &lt;&lt;/if&gt;&gt;\
&lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; EmailClient]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="226" name="ByteBunker-PrankSuccessFatEmail" tags="" position="725,2850" size="100,100">&lt;div class=&quot;email-message&quot;&gt;\
    &lt;div class=&quot;from-line&quot;&gt;&lt;strong&gt;From:&lt;/strong&gt; CorpoDrone&lt;/div&gt;\
    &lt;div class=&quot;subject-line&quot;&gt;&lt;strong&gt;Subject:&lt;/strong&gt; A Hefty Outcome&lt;/div&gt;\
    &lt;div class=&quot;message-content&quot;&gt;
        Hey,

        So, about that &quot;slight&quot; alteration to Mr. Asshat&#39;s presentation... Let&#39;s just say it took a turn for the weighty. Your idea to swap in images of voluptuous vixens donning leggings was, in theory, a stroke of comic genius.

        However, the aftermath was heavier than expected. Instead of a few chuckles and eye-rolls, the presentation ended with Mr. Asshat being escorted out of the building, his career slimmed down to nothing over accusations of fat shaming. Irony at its thickest, wouldn&#39;t you agree?

        While part of me is reveling in the silence his absence brings, I can&#39;t help but feel a pang of guilt for the guy. No income, no dignity left. A bit more than what I bargained for, honestly. But, oh well, what has been done has been done, and it&#39;s not like you could have anticipated the company&#39;s zero tolerance policy on such matters.

        Regardless of the... let&#39;s call it &quot;collateral slimming,&quot; you completed your end of the deal with flying colors. Your reward is well deserved, even if it comes with a side of guilt. Let&#39;s just hope Mr. Asshat lands on his feet - preferably in a pair of very forgiving leggings.

        CorpoDrone
&lt;/div&gt;\
&lt;div class=&quot;email-message-buttons&quot;&gt;
    &lt;&lt;if !MindWare.emailIsRead(&quot;ByteBunker-PrankSuccessFatEmail&quot;)&gt;&gt;\
    &lt;span class=&quot;email-btn-wrapper-span&quot;&gt;\
        @@.email-listing;&lt;&lt;button &quot;Mark as Read&quot;&gt;&gt;\
        &lt;&lt;run MindWare.markEmailAsRead(&quot;ByteBunker-PrankSuccessFatEmail&quot;)&gt;&gt;\
        &lt;&lt;goto &quot;ByteBunker-PrankSuccessFatEmail&quot;&gt;&gt;\
        &lt;&lt;/button&gt;&gt;\
        @@\
    &lt;/span&gt;\
    &lt;&lt;/if&gt;&gt;\
&lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; EmailClient]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="227" name="ByteBunker-PrankFailCrotchlessEmail" tags="" position="850,2850" size="100,100">&lt;div class=&quot;email-message&quot;&gt;\
    &lt;div class=&quot;from-line&quot;&gt;&lt;strong&gt;From:&lt;/strong&gt; CorpoDrone&lt;/div&gt;\
    &lt;div class=&quot;subject-line&quot;&gt;&lt;strong&gt;Subject:&lt;/strong&gt; When Pranks Backfire Spectacularly&lt;/div&gt;\
    &lt;div class=&quot;message-content&quot;&gt;
        Hey there,
        
        You know, when I hired a hacker to inject a bit of chaos into Mr. Asshat&#39;s life, I never imagined it would catapult him to corporate stardom. Your switcheroo with the leggings images? Genius, yet somehow it turned into his golden ticket. 

        After the initial shockwave hit the presentation room, Mr. Asshat, the sly fox, spun it into a pitch for a bold new product line - crotchless leggings. Yes, you heard that right. And here&#39;s the kicker: the CEO ate it up! Now, he&#39;s riding high on a wave of innovation, leading the charge on this avant-garde venture, complete with a salary bump.

        I should be furious, demanding a refund for a prank gone awry. But honestly, I can&#39;t help but laugh at the sheer absurdity of it all. The universe has a twisted sense of humor, and apparently, so do you. 

        So, payment? Consider it a donation to the &quot;Let&#39;s accidentally make Mr. Asshat&#39;s career&quot; fund. 
&lt;/div&gt;\
&lt;div class=&quot;email-message-buttons&quot;&gt;
    &lt;&lt;if !MindWare.emailIsRead(&quot;ByteBunker-PrankFailCrotchlessEmail&quot;)&gt;&gt;\
    &lt;span class=&quot;email-btn-wrapper-span&quot;&gt;\
        @@.email-listing;&lt;&lt;button &quot;Mark as Read&quot;&gt;&gt;\
        &lt;&lt;run MindWare.markEmailAsRead(&quot;ByteBunker-PrankFailCrotchlessEmail&quot;)&gt;&gt;\
        &lt;&lt;goto &quot;ByteBunker-PrankFailCrotchlessEmail&quot;&gt;&gt;\
        &lt;&lt;/button&gt;&gt;\
        @@\
    &lt;/span&gt;\
    &lt;&lt;/if&gt;&gt;\
&lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; EmailClient]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="228" name="Extendo-Website-Bookmarked" tags="nobr" position="975,2850" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;Extendo - Ultimate Reach (extendo.omninet)&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;browser-content&quot;&gt;
        &lt;h1&gt;Unleash Your Inner Titan with Extendo!&lt;/h1&gt;
        &lt;p&gt;Ever dreamed of donning the armor of the gods to do battle in the boudoir? Look no further, brave warrior! The &lt;strong&gt;Extendo Titan Sleeve&lt;/strong&gt; is your secret weapon for legendary encounters.&lt;/p&gt;
         &lt;img src=&quot;imgs/jobs/prank/extendo-sleeve.jpg&quot; width=&quot;50%&quot; style=&quot;display: block; margin: 0 auto;&quot;&gt;
    &lt;p&gt;With its majestic 7 inches of valor and 4 inches of girth, the Extendo Titan Sleeve transforms mere mortals into champions of pleasure. Its ribbed exterior sends shockwaves of delight, while the textured interior ensures your quest is as glorious as the tales of old.&lt;/p&gt;
    
&lt;div id=&quot;videoContainer&quot;&gt;
    &lt;!-- SEE IT IN ACTION button --&gt;
    &lt;button id=&quot;seeItInActionBtn&quot; style=&quot;display: block; margin: 20px auto; padding: 15px 30px; background-color: #005f83; color: #ffffff; border: none; border-radius: 5px; cursor: pointer; font-size: 20px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);&quot;&gt;SEE IT IN ACTION&lt;/button&gt;
&lt;/div&gt;

    &lt;h2&gt;Feats of Strength:&lt;/h2&gt;
    &lt;ul&gt;
        &lt;li&gt;Length to rival the gods: &lt;strong&gt;7 Inches&lt;/strong&gt;&lt;/li&gt;
        &lt;li&gt;Girth fit for a titan: &lt;strong&gt;4 Inches&lt;/strong&gt;&lt;/li&gt;
        &lt;li&gt;Armor material: Crafted from the &lt;strong&gt;finest TPE&lt;/strong&gt;, as flexible as it is durable&lt;/li&gt;
    &lt;/ul&gt;
    
    &lt;p&gt;Adorn your scrotum with the Extendo and feel it cling to you like the grip of destiny. Fear not the elements, for this mighty sleeve is &lt;strong&gt;waterproof&lt;/strong&gt;, and cleans easily with just hot soapy water and toy cleaner. Ideal for the manly man looking to add excitement and increase their prowess.&lt;/p&gt;
    
         &lt;img src=&quot;imgs/jobs/prank/extendo-sleeve-action.jpg&quot; width=&quot;70%&quot; style=&quot;display: block; margin: 0 auto;&quot;&gt;
    &lt;p&gt;Why wait to become the stuff of legends? The &lt;strong&gt;Extendo Titan Sleeve&lt;/strong&gt; is free from both latex and phthalates, making it the noble choice for heroes seeking to venture into uncharted territories of pleasure and exhilaration. Dare to wear it and transform your world.&lt;/p&gt;

    &lt;button disabled style=&quot;display: block; margin: 20px auto; padding: 15px 30px; background-color: #ddd; color: #aaa; border: 2px solid #ccc; border-radius: 8px; cursor: not-allowed; font-size: 20px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);&quot;&gt;ORDER NOW&lt;/button&gt;
    &lt;p style=&quot;text-align: center; color: red;&quot;&gt;&lt;i&gt;We regret to inform you that the &lt;strong&gt;Extendo Titan Sleeve&lt;/strong&gt; is currently out of stock. Stay tuned for restocking dates!&lt;/i&gt;&lt;/p&gt;
        
&lt;/div&gt;
&lt;/div&gt;
&lt;&lt;if $extendoWebsiteBookmarkAdded !== true&gt;&gt;
&lt;span id=&quot;bookmark-button&quot;&gt;&lt;br&gt;&lt;br&gt;
&lt;div class=&quot;inner-thought&quot;&gt;This looks... interesting. Maybe I should bookmark it in my own browser... for a friend.&lt;/div&gt;
&lt;br&gt;@@.choicebutton;&lt;&lt;button &quot;Bookmark the Extendo Website&quot;&gt;&gt;
    &lt;&lt;set $extendoWebsiteBookmarkAdded = true&gt;&gt;
    &lt;&lt;replace &quot;#bookmark-button&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
    &lt;&lt;/button&gt;&gt;@@
&lt;/span&gt;&lt;&lt;/if&gt;&gt;&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Go Back-&gt;WebBrowser]]&lt;/p&gt;
&lt;&lt;nobr&gt;&gt;&lt;style&gt;
.button-disabled {
    display: block;
    margin: 20px auto;
    padding: 10px 20px;
    background-color: #ddd;
    color: #aaa;
    border: none;
    border-radius: 5px;
    cursor: not-allowed;
    font-size: 16px; /* Adjust size as needed */
}

.disabled-text {
    text-align: center;
    color: #666; /* Dark grey text */
}

.browser-content h1, .browser-content h2 {
    color: #8A0707; /* Dark red for emphasis */
}

.browser-content h1 {
    margin-top: 0px;
}

.browser-content {
    background-color: #FFF7E6; /* Light, inviting background */
    font-family: Arial, sans-serif;
    padding: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.browser-content ul {
    list-style-type: none;
    padding-left: 0px;
}

.browser-content ul li {
    padding-left: 0; /* Adjust as necessary */
}

.browser-content p, .browser-content ul li {
    color: #333; /* Dark text for readability */
    line-height: 1.4;
}

.browser-content img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 10px 0;
    border-radius: 5px;
}
&lt;/style&gt;
&lt;script&gt;
document.getElementById(&#39;seeItInActionBtn&#39;).addEventListener(&#39;click&#39;, function() {
    var videoContainer = document.getElementById(&#39;videoContainer&#39;);
    videoContainer.innerHTML = &#39;&lt;video width=&quot;100%&quot; controls autoplay muted&gt;&lt;source src=&quot;imgs/jobs/prank/extendo.mp4&quot; type=&quot;video/mp4&quot;&gt;Your browser does not support the video tag.&lt;/video&gt;&#39;;
});
&lt;/script&gt;&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="229" name="DigitalDownloads" tags="" position="1100,2850" size="100,100">&lt;div class=&quot;dd-wrapper&quot;&gt;\
&lt;div class=&quot;dd-header&quot;&gt;&lt;span class=&quot;dd-header-text&quot;&gt;File Junkie Store (filejunkie.omninet)&lt;/span&gt;&lt;/div&gt;\
&lt;div class=&quot;dd-content&quot;&gt;\
    &lt;p&gt;We have something for every file junkie!&lt;/p&gt; &lt;p&gt;With fresh content added regularly, there&#39;s always something new to discover, so remember to check back from time to time for the newest downloadables!&lt;/p&gt;\
    &lt;div class=&quot;dd-category&quot;&gt;\
        &lt;h2 class=&quot;dd-category-title&quot;&gt;Wallpapers&lt;/h2&gt;\
        &lt;div class=&quot;dd-products-row&quot;&gt;\
            &lt;!-- Cyber Babes --&gt;\
            &lt;div class=&quot;dd-product&quot;&gt;\
                &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                    &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/babeswalls.jpg&quot; alt=&quot;Babes Wallpaper Pack&quot;/&gt;\
                &lt;/div&gt;\
                &lt;div class=&quot;dd-product-info&quot;&gt;\
                    &lt;p class=&quot;dd-product-title&quot;&gt;Cyber Babes&lt;/p&gt;\
                    &lt;p class=&quot;dd-product-price&quot;&gt;$200&lt;/p&gt;\
                    &lt;button id=&quot;buy-babes-wallpaper&quot; class=&quot;dd-buy-button&quot; onclick=&quot;MindWare.purchaseBabesWallpaper(&#39;buy-babes-wallpaper&#39;);&quot;&gt;Buy&lt;/button&gt;\
                &lt;/div&gt;\
            &lt;/div&gt;\
            &lt;!-- Product 2 --&gt;\
            &lt;div class=&quot;dd-product&quot;&gt;\
                &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                    &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/cars-wallpaper.jpg&quot; alt=&quot;Cars Wallpaper&quot;/&gt;\
                &lt;/div&gt;\
                &lt;div class=&quot;dd-product-info&quot;&gt;\
                    &lt;p class=&quot;dd-product-title&quot;&gt;Fast Cars&lt;/p&gt;\
                    &lt;p class=&quot;dd-product-price&quot;&gt;$100&lt;/p&gt;\
                    &lt;button id=&quot;buy-fast-cars-wallpaper&quot; class=&quot;dd-buy-button&quot; onclick=&quot;MindWare.purchaseFastCarsWallpaper(&#39;buy-fast-cars-wallpaper&#39;);&quot;&gt;Buy&lt;/button&gt;\
                &lt;/div&gt;\
            &lt;/div&gt;\
            &lt;!-- NSFW Wallpaper Pack --&gt;\
            &lt;div class=&quot;dd-product&quot;&gt;\
                &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                    &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/nsfw1.jpg&quot; alt=&quot;NSFW Wallpaper Pack&quot;/&gt;\
                &lt;/div&gt;\
                &lt;div class=&quot;dd-product-info&quot;&gt;\
                    &lt;p class=&quot;dd-product-title&quot;&gt;NSFW Pack #1&lt;/p&gt;\
                    &lt;p class=&quot;dd-product-price&quot;&gt;$500&lt;/p&gt;\
                    &lt;button id=&quot;buy-nsfw-wallpaper-1&quot; class=&quot;dd-buy-button&quot; onclick=&quot;MindWare.purchaseNSFWWallpaper1(&#39;buy-nsfw-wallpaper-1&#39;);&quot;&gt;Buy&lt;/button&gt;\
                &lt;/div&gt;\
            &lt;/div&gt;\
        &lt;/div&gt;\
    &lt;!-- Music Category --&gt;
    &lt;div class=&quot;dd-category&quot;&gt;\
        &lt;h2 class=&quot;dd-category-title&quot;&gt;Music&lt;/h2&gt;\
        &lt;div class=&quot;dd-products-row&quot;&gt;\
            &lt;!-- Product 1 --&gt;\
            &lt;&lt;if not $flashesSongPurchased&gt;&gt;\
                &lt;div class=&quot;dd-product&quot;&gt;\
                    &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                        &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/song-flashes.webp&quot; alt=&quot;Flashes Album Cover&quot;/&gt;
                    &lt;/div&gt;\
                    &lt;div class=&quot;dd-product-info&quot;&gt;\
                        &lt;p class=&quot;dd-product-title&quot;&gt;Flashes&lt;br&gt;by Mezhdunami&lt;/p&gt;\
                        &lt;p class=&quot;dd-product-price&quot;&gt;$100&lt;/p&gt;\
                        &lt;button class=&quot;dd-buy-button&quot; onclick=&quot;MindWare.addFlashesSong()&quot;&gt;Buy&lt;/button&gt;\
                    &lt;/div&gt;\
                &lt;/div&gt;\
            &lt;&lt;/if&gt;&gt;\
            &lt;&lt;if $flashesSongPurchased&gt;&gt;\
                &lt;div class=&quot;dd-product&quot;&gt;\
                    &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                        &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/song-flashes.webp&quot; alt=&quot;Flashes Album Cover&quot;/&gt;
                    &lt;/div&gt;\
                    &lt;div class=&quot;dd-product-info&quot;&gt;\
                        &lt;p class=&quot;dd-product-title&quot;&gt;Flashes&lt;br&gt;by Mezhdunami&lt;/p&gt;\
                        &lt;p class=&quot;dd-product-price&quot;&gt;$100&lt;/p&gt;\
                        &lt;button class=&quot;dd-buy-button dd-button-disabled&quot; disabled&gt;Purchased&lt;/button&gt;\
                    &lt;/div&gt;\
                &lt;/div&gt;\
            &lt;&lt;/if&gt;&gt;\
            &lt;!-- Product 2 --&gt;\
            &lt;&lt;if not $evasionSongPurchased&gt;&gt;\
                &lt;div class=&quot;dd-product&quot;&gt;\
                    &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                        &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/song-evasion.webp&quot; alt=&quot;Evasion Album Cover&quot;/&gt;
                    &lt;/div&gt;\
                    &lt;div class=&quot;dd-product-info&quot;&gt;\
                        &lt;p class=&quot;dd-product-title&quot;&gt;Evasion&lt;br&gt;by Evgeny Bardyuzha&lt;/p&gt;\
                        &lt;p class=&quot;dd-product-price&quot;&gt;$100&lt;/p&gt;\
                        &lt;button class=&quot;dd-buy-button&quot; onclick=&quot;MindWare.addEvasionSong()&quot;&gt;Buy&lt;/button&gt;\
                    &lt;/div&gt;\
                &lt;/div&gt;\
            &lt;&lt;/if&gt;&gt;\
            &lt;&lt;if $evasionSongPurchased&gt;&gt;\
                &lt;div class=&quot;dd-product&quot;&gt;\
                    &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                        &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/song-evasion.webp&quot; alt=&quot;Evasion Album Cover&quot;/&gt;
                    &lt;/div&gt;\
                    &lt;div class=&quot;dd-product-info&quot;&gt;\
                        &lt;p class=&quot;dd-product-title&quot;&gt;Evasion&lt;br&gt;by Evgeny Bardyuzha&lt;/p&gt;\
                        &lt;p class=&quot;dd-product-price&quot;&gt;$100&lt;/p&gt;\
                        &lt;button class=&quot;dd-buy-button dd-button-disabled&quot; disabled&gt;Purchased&lt;/button&gt;\
                    &lt;/div&gt;\
                &lt;/div&gt;\
            &lt;&lt;/if&gt;&gt;\
            &lt;!-- Product 3 --&gt;\
            &lt;&lt;if not $cyberWarSongPurchased&gt;&gt;\
                &lt;div class=&quot;dd-product&quot;&gt;\
                    &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                        &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/song-cyberwar.webp&quot; alt=&quot;Cyber War Album Cover&quot;/&gt;
                    &lt;/div&gt;\
                    &lt;div class=&quot;dd-product-info&quot;&gt;\
                        &lt;p class=&quot;dd-product-title&quot;&gt;Cyber War&lt;br&gt;by AlexiAction&lt;/p&gt;\
                        &lt;p class=&quot;dd-product-price&quot;&gt;$100&lt;/p&gt;\
                        &lt;button class=&quot;dd-buy-button&quot; onclick=&quot;MindWare.addCyberWarSong()&quot;&gt;Buy&lt;/button&gt;\
                    &lt;/div&gt;\
                &lt;/div&gt;\
            &lt;&lt;/if&gt;&gt;\
            &lt;&lt;if $cyberWarSongPurchased&gt;&gt;\
                &lt;div class=&quot;dd-product&quot;&gt;\
                    &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                        &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/song-cyberwar.webp&quot; alt=&quot;Cyber War Album Cover&quot;/&gt;
                    &lt;/div&gt;\
                    &lt;div class=&quot;dd-product-info&quot;&gt;\
                        &lt;p class=&quot;dd-product-title&quot;&gt;Cyber War&lt;br&gt;by AlexiAction&lt;/p&gt;\
                        &lt;p class=&quot;dd-product-price&quot;&gt;$100&lt;/p&gt;\
                        &lt;button class=&quot;dd-buy-button dd-button-disabled&quot; disabled&gt;Purchased&lt;/button&gt;\
                    &lt;/div&gt;\
                &lt;/div&gt;\
            &lt;&lt;/if&gt;&gt;\
        &lt;/div&gt;
                &lt;div class=&quot;dd-products-row&quot;&gt;\
            &lt;!-- Product 4 --&gt;\
            &lt;&lt;if not $cyberRaceSongPurchased&gt;&gt;\
                &lt;div class=&quot;dd-product&quot;&gt;\
                    &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                        &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/song-cyberrace.webp&quot; alt=&quot;Cyber Race Album Cover&quot;/&gt;
                    &lt;/div&gt;\
                    &lt;div class=&quot;dd-product-info&quot;&gt;\
                        &lt;p class=&quot;dd-product-title&quot;&gt;Cyber Race&lt;br&gt;by FASSounds&lt;/p&gt;\
                        &lt;p class=&quot;dd-product-price&quot;&gt;$100&lt;/p&gt;\
                        &lt;button class=&quot;dd-buy-button&quot; onclick=&quot;MindWare.addCyberRaceSong()&quot;&gt;Buy&lt;/button&gt;\
                    &lt;/div&gt;\
                &lt;/div&gt;\
            &lt;&lt;/if&gt;&gt;\
            &lt;&lt;if $cyberRaceSongPurchased&gt;&gt;\
                &lt;div class=&quot;dd-product&quot;&gt;\
                    &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                        &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/song-cyberrace.webp&quot; alt=&quot;Cyber Race Album Cover&quot;/&gt;
                    &lt;/div&gt;\
                    &lt;div class=&quot;dd-product-info&quot;&gt;\
                        &lt;p class=&quot;dd-product-title&quot;&gt;Cyber Race&lt;br&gt;by FASSounds&lt;/p&gt;\
                        &lt;p class=&quot;dd-product-price&quot;&gt;$100&lt;/p&gt;\
                        &lt;button class=&quot;dd-buy-button dd-button-disabled&quot; disabled&gt;Purchased&lt;/button&gt;\
                    &lt;/div&gt;\
                &lt;/div&gt;\
            &lt;&lt;/if&gt;&gt;\
            &lt;!-- Product 5 --&gt;\
            &lt;&lt;if not $midnightSongPurchased&gt;&gt;\
                &lt;div class=&quot;dd-product&quot;&gt;\
                    &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                        &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/song-midnight.webp&quot; alt=&quot;Midnight Album Cover&quot;/&gt;
                    &lt;/div&gt;\
                    &lt;div class=&quot;dd-product-info&quot;&gt;\
                        &lt;p class=&quot;dd-product-title&quot;&gt;Midnight&lt;br&gt;by AlexiAction&lt;/p&gt;\
                        &lt;p class=&quot;dd-product-price&quot;&gt;$100&lt;/p&gt;\
                        &lt;button class=&quot;dd-buy-button&quot; onclick=&quot;MindWare.addMidnightSong()&quot;&gt;Buy&lt;/button&gt;\
                    &lt;/div&gt;\
                &lt;/div&gt;\
            &lt;&lt;/if&gt;&gt;\
            &lt;&lt;if $midnightSongPurchased&gt;&gt;\
                &lt;div class=&quot;dd-product&quot;&gt;\
                    &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                        &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/song-midnight.webp&quot; alt=&quot;Midnight Album Cover&quot;/&gt;
                    &lt;/div&gt;\
                    &lt;div class=&quot;dd-product-info&quot;&gt;\
                        &lt;p class=&quot;dd-product-title&quot;&gt;Midnight&lt;br&gt;by AlexiAction&lt;/p&gt;\
                        &lt;p class=&quot;dd-product-price&quot;&gt;$100&lt;/p&gt;\
                        &lt;button class=&quot;dd-buy-button dd-button-disabled&quot; disabled&gt;Purchased&lt;/button&gt;\
                    &lt;/div&gt;\
                &lt;/div&gt;\
            &lt;&lt;/if&gt;&gt;\
            &lt;!-- Product 6 --&gt;\
            &lt;&lt;if not $insurrectionSongPurchased&gt;&gt;\
                &lt;div class=&quot;dd-product&quot;&gt;\
                    &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                        &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/song-insurrection.webp&quot; alt=&quot;Insurrection Album Cover&quot;/&gt;\
                    &lt;/div&gt;\
                    &lt;div class=&quot;dd-product-info&quot;&gt;\
                        &lt;p class=&quot;dd-product-title&quot;&gt;Insurrection&lt;br&gt;by AleXZavesa&lt;/p&gt;\
                        &lt;p class=&quot;dd-product-price&quot;&gt;$100&lt;/p&gt;\
                        &lt;button class=&quot;dd-buy-button&quot; onclick=&quot;MindWare.addInsurrectionSong()&quot;&gt;Buy&lt;/button&gt;\
                    &lt;/div&gt;\
                &lt;/div&gt;\
            &lt;&lt;/if&gt;&gt;\
            &lt;&lt;if $insurrectionSongPurchased&gt;&gt;\
                &lt;div class=&quot;dd-product&quot;&gt;\
                    &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                        &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/song-insurrection.webp&quot; alt=&quot;Insurrection Album Cover&quot;/&gt;\
                    &lt;/div&gt;\
                    &lt;div class=&quot;dd-product-info&quot;&gt;\
                        &lt;p class=&quot;dd-product-title&quot;&gt;Insurrection&lt;br&gt;by AleXZavesa&lt;/p&gt;\
                        &lt;p class=&quot;dd-product-price&quot;&gt;$100&lt;/p&gt;\
                        &lt;button class=&quot;dd-buy-button dd-button-disabled&quot; disabled&gt;Purchased&lt;/button&gt;\
                    &lt;/div&gt;\
                &lt;/div&gt;\
            &lt;&lt;/if&gt;&gt;\
        &lt;/div&gt;\
    &lt;/div&gt;\
    &lt;!-- TV Channels Category --&gt;
    &lt;div class=&quot;dd-category&quot;&gt;\
        &lt;h2 class=&quot;dd-category-title&quot;&gt;TV Channels&lt;/h2&gt;\
        &lt;div class=&quot;dd-products-row&quot;&gt;\
            &lt;!-- Product 1 --&gt;\
            &lt;div class=&quot;dd-product&quot;&gt;\
                &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                    &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/store/adult-channel.jpg&quot; alt=&quot;Adult Channel&quot;/&gt;\
                &lt;/div&gt;\
                &lt;div class=&quot;dd-product-info&quot;&gt;\
                    &lt;p class=&quot;dd-product-title&quot;&gt;Passion TV&lt;/p&gt;\
                    &lt;p class=&quot;dd-product-price&quot;&gt;$1000 (Lifetime Access)&lt;/p&gt;\
                    &lt;button class=&quot;dd-buy-button&quot; id=&quot;buyPassionTV&quot; onclick=&quot;MindWare.purchaseChannel(&#39;Passion TV&#39;, &#39;adultChannelPurchased&#39;, 1000, &#39;buyPassionTV&#39;)&quot;&gt;Buy&lt;/button&gt;\
                &lt;/div&gt;\
            &lt;/div&gt;\
        &lt;/div&gt;\
    &lt;/div&gt;\
    &lt;!-- Video Games Category --&gt;
    &lt;div class=&quot;dd-category&quot;&gt;\
        &lt;h2 class=&quot;dd-category-title&quot;&gt;Video Games&lt;/h2&gt;\
        &lt;div class=&quot;dd-products-row&quot;&gt;\
            &lt;!-- Snake --&gt;\
            &lt;div class=&quot;dd-product&quot;&gt;\
                &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                    &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/games/snake-boxart.jpg&quot; alt=&quot;Action Game Cover&quot;/&gt;\
                &lt;/div&gt;\
                &lt;div class=&quot;dd-product-info&quot;&gt;\
                    &lt;p class=&quot;dd-product-title&quot;&gt;Snake&lt;/p&gt;\
                    &lt;p class=&quot;dd-product-price&quot;&gt;$350&lt;/p&gt;\
                    &lt;button id=&quot;buySnake&quot; class=&quot;dd-buy-button&quot; onclick=&quot;MindWare.purchaseGame(&#39;Snake&#39;, &#39;snakeGamePurchased&#39;, 350, &#39;buySnake&#39;)&quot;&gt;Buy&lt;/button&gt;\
                &lt;/div&gt;\
            &lt;/div&gt;\
            &lt;!-- Breakout --&gt;\
            &lt;div class=&quot;dd-product&quot;&gt;\
                &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                    &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/games/breakout-boxart.jpg&quot; alt=&quot;RPG Game Cover&quot;/&gt;\
                &lt;/div&gt;\
                &lt;div class=&quot;dd-product-info&quot;&gt;\
                    &lt;p class=&quot;dd-product-title&quot;&gt;Breakout&lt;/p&gt;\
                    &lt;p class=&quot;dd-product-price&quot;&gt;$350&lt;/p&gt;\
                    &lt;button id=&quot;buyBreakout&quot; class=&quot;dd-buy-button&quot; onclick=&quot;MindWare.purchaseGame(&#39;Breakout&#39;, &#39;breakoutGamePurchased&#39;, 350, &#39;buyBreakout&#39;)&quot;&gt;Buy&lt;/button&gt;\
                &lt;/div&gt;\
            &lt;/div&gt;\
            &lt;!-- Match Two Latex --&gt;\
            &lt;div class=&quot;dd-product&quot;&gt;\
                &lt;div class=&quot;dd-product-image-container&quot;&gt;\
                    &lt;img class=&quot;dd-product-image&quot; src=&quot;imgs/games/matchtwolatex-boxart.jpg&quot; alt=&quot;Puzzle Game Cover&quot;/&gt;\
                &lt;/div&gt;\
                &lt;div class=&quot;dd-product-info&quot;&gt;\
                    &lt;p class=&quot;dd-product-title&quot;&gt;Match Two (Latex Edition)&lt;/p&gt;\
                    &lt;p class=&quot;dd-product-price&quot;&gt;$1500&lt;/p&gt;\
                    &lt;button id=&quot;buyMatchTwoLatex&quot; class=&quot;dd-buy-button&quot; onclick=&quot;MindWare.purchaseGame(&#39;Match Two (Latex Edition)&#39;, &#39;matchTwoLatexGamePurchased&#39;, 1500, &#39;buyMatchTwoLatex&#39;)&quot;&gt;Buy&lt;/button&gt;\
                &lt;/div&gt;\
            &lt;/div&gt;\
        &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\
&lt;/div&gt;\
&lt;/div&gt;

[[Go Back -&gt; WebBrowser]]

/* Wallpapers */ 
&lt;&lt;script&gt;&gt;
$(document).on(&#39;:passageend&#39;, function () {
    if (State.variables.babesWallpaperPurchased) {
        $(&#39;#buy-babes-wallpaper&#39;).prop(&#39;disabled&#39;, true)
                                 .addClass(&#39;dd-button-disabled&#39;)
                                 .text(&#39;Purchased&#39;);
    }
    if (State.variables.nsfwWallpaper1Purchased) {
        $(&#39;#buy-nsfw-wallpaper-1&#39;).prop(&#39;disabled&#39;, true)
                                  .addClass(&#39;dd-button-disabled&#39;)
                                  .text(&#39;Purchased&#39;);
    }
    if (State.variables.fastCarsWallpaperPurchased) {
        $(&#39;#buy-fast-cars-wallpaper&#39;).prop(&#39;disabled&#39;, true)
                                     .addClass(&#39;dd-button-disabled&#39;)
                                     .text(&#39;Purchased&#39;); // Update the text for Fast Cars wallpaper as well
    }
});
&lt;&lt;/script&gt;&gt;

&lt;&lt;script&gt;&gt;
$(document).on(&#39;:passageend&#39;, function () {
    // Define a combined mapping for both channel and game purchase state variables with their corresponding button IDs
    var purchaseButtonMappings = {
        // Channel mappings
        &#39;adultChannelPurchased&#39;: &#39;buyPassionTV&#39;,
        &#39;memesChannelPurchased&#39;: &#39;buyMemesTV&#39;,
        &#39;pornChannelPurchased&#39;: &#39;buyPornTV&#39;,
        // Game mappings
        &#39;snakeGamePurchased&#39;: &#39;buySnake&#39;,
        &#39;breakoutGamePurchased&#39;: &#39;buyBreakout&#39;,
        &#39;matchTwoLatexGamePurchased&#39;: &#39;buyMatchTwoLatex&#39;
    };

    // Loop through the combined mappings and update buttons accordingly
    Object.keys(purchaseButtonMappings).forEach(function(purchase) {
        if (State.variables[purchase]) {
            var buttonId = purchaseButtonMappings[purchase];
            $(&#39;#&#39; + buttonId).prop(&#39;disabled&#39;, true)
                             .addClass(&#39;dd-button-disabled&#39;)
                             .text(&#39;Purchased&#39;);
        }
    });
    // ... Include other checks for different purchases here if necessary ...
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="230" name="HiveProperties-Website" tags="nobr" position="1225,2850" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;Hive Properties (hiveproperties.omninet)&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;hive-browser-content&quot;&gt;
        &lt;div class=&quot;hive-intro-section&quot;&gt;
        &lt;img src=&quot;imgs/emails/hive-properties-welcome-email.webp&quot; width=&quot;100%&quot;&gt;
        &lt;/div&gt;
        &lt;div class=&quot;hive-login-section&quot;&gt;
            &lt;h2&gt;Resident Access&lt;/h2&gt;
            &lt;form id=&quot;loginForm&quot;&gt;
                &lt;input type=&quot;text&quot; id=&quot;username&quot; value=&quot;tenant581243&quot; placeholder=&quot;Username&quot;&gt;
                &lt;input type=&quot;password&quot; id=&quot;password&quot; value=&quot;1klf8ahjknl3&quot; placeholder=&quot;Password&quot;&gt;
                &lt;button type=&quot;button&quot; onclick=&quot;processLogin()&quot;&gt;Enter&lt;/button&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
            &lt;script&gt;
            function processLogin() {
                var username = document.getElementById(&#39;username&#39;).value;
                var password = document.getElementById(&#39;password&#39;).value;
                if(username === &quot;tenant581243&quot; &amp;&amp; password === &quot;1klf8ahjknl3&quot;) {
                    SugarCube.Engine.play(&#39;HiveProperties-Website-Player&#39;);
                } else {
                    SugarCube.UI.alert(&quot;Incorrect username or password. Please try again.&quot;);
                }
            }
            &lt;/script&gt;
&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Go Back-&gt;WebBrowser]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="231" name="HiveProperties-Website-Player" tags="nobr" position="100,2975" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;Hive Properties&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;hive-browser-content&quot;&gt;
        &lt;div class=&quot;hive-intro-section&quot;&gt;
        &lt;img src=&quot;imgs/emails/hive-properties-welcome-email.webp&quot; width=&quot;100%&quot;&gt;
        &lt;/div&gt;
            &lt;div class=&quot;hive-login-section&quot;&gt;
                &lt;h2&gt;Welcome Back, tenant581243&lt;/h2&gt;
                &lt;div class=&quot;rent-details-table&quot;&gt;
                    &lt;table&gt;
                        &lt;tr&gt;
                            &lt;th&gt;Detail&lt;/th&gt;
                            &lt;th&gt;Amount&lt;/th&gt;
                        &lt;/tr&gt;
                        &lt;tr&gt;
                            &lt;td&gt;Current Rent Price&lt;/td&gt;
                            &lt;td&gt;&lt;&lt;print &quot;$&quot; + $rentPrice.toLocaleString(&quot;en-US&quot;, { minimumFractionDigits: 0, maximumFractionDigits: 0 })&gt;&gt;&lt;/td&gt;
                        &lt;/tr&gt;
                        &lt;tr&gt;
                            &lt;td&gt;Total Rent Payments Made&lt;/td&gt;
                            &lt;td&gt;&lt;&lt;print $rentPaymentCounter&gt;&gt;&lt;/td&gt;
                        &lt;/tr&gt;
                        &lt;tr&gt;
                            &lt;td&gt;Rent Payments Missed&lt;/td&gt;
                            &lt;td&gt;&lt;&lt;print $missedPaymentsCount&gt;&gt;&lt;/td&gt;
                        &lt;/tr&gt;
                        &lt;tr&gt;
                            &lt;td&gt;Total Missed Rent&lt;/td&gt;
                            &lt;td&gt;&lt;&lt;print &quot;$&quot; + $totalMissedRent.toLocaleString(&quot;en-US&quot;, { minimumFractionDigits: 0, maximumFractionDigits: 0 })&gt;&gt;&lt;/td&gt;
                        &lt;/tr&gt;
                    &lt;/table&gt;
                &lt;/div&gt;
                &lt;&lt;if $totalMissedRent &gt; 0&gt;&gt;
                    &lt;button onclick=&quot;payRent()&quot;&gt;Pay Missed Rent&lt;/button&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;script&gt;
                    function payRent() {
                        if (SugarCube.State.variables.playerMoney &gt;= SugarCube.State.variables.totalMissedRent) {
                            SugarCube.State.variables.playerMoney -= SugarCube.State.variables.totalMissedRent;
                            SugarCube.State.variables.totalMissedRent = 0;
                            SugarCube.State.variables.missedPaymentsCount = 0;
                            SugarCube.UI.alert(&quot;Missed rent paid successfully. Thank you.&quot;);
                            SugarCube.Engine.play(&quot;HiveProperties-Website-Player&quot;);
                        } else {
                            SugarCube.UI.alert(&quot;Insufficient funds to cover the missed rent.&quot;);
                        }
                    }
                &lt;/script&gt;
            &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Go Back-&gt;HiveProperties-Website]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="232" name="OmniPedia" tags="nobr" position="225,2975" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;OmniPedia - The Digital Encyclopedia (omnipedia.omninet)&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;browser-content&quot;&gt;
        &lt;h1&gt;Welcome to OmniPedia!&lt;/h1&gt;
        &lt;p&gt;OmniNet&#39;s Leading Digital Encyclopedia.&lt;/p&gt;
        &lt;hr&gt;
        &lt;span id=&quot;replace-me&quot;&gt;&lt;h2&gt;Topics&lt;/h2&gt;
        &lt;div class=&quot;topics-container&quot;&gt;
            &lt;ul class=&quot;topics-list&quot;&gt;
                &lt;li&gt;&lt;&lt;link &quot;OmniNet&quot;&gt;&gt;&lt;&lt;replace &quot;#replace-me&quot;&gt;&gt;&lt;&lt;include &quot;OmniPedia-OmniNet&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/li&gt;
                 &lt;li&gt;&lt;&lt;link &quot;NeoUrbania&quot;&gt;&gt;&lt;&lt;replace &quot;#replace-me&quot;&gt;&gt;&lt;&lt;include &quot;OmniPedia-NeoUrbania&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/li&gt;               
                &lt;li&gt;&lt;&lt;link &quot;SynTech&quot;&gt;&gt;&lt;&lt;replace &quot;#replace-me&quot;&gt;&gt;&lt;&lt;include &quot;OmniPedia-SynTech&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/li&gt;
                &lt;!-- More topics here --&gt;
            &lt;/ul&gt;
        &lt;/div&gt;&lt;/span&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;
    [[Go Back-&gt;WebBrowser]]
&lt;/p&gt;</tw-passagedata><tw-passagedata pid="233" name="OmniPedia-OmniNet" tags="nobr" position="350,2975" size="100,100">&lt;div class=&quot;omnipedia-content&quot;&gt;&lt;h2&gt;Topic: OmniNet&lt;/h2&gt;
&lt;p&gt;The OmniNet, central to the infrastructure of NeoUrbania, is an advanced digital network that evolved from the remnants of the early 21st-century Internet. It integrates augmented reality, virtual environments, and traditional web elements, forming a comprehensive digital ecosystem.&lt;/p&gt;
&lt;p&gt;In the context of governance and control, the OmniNet is under the surveillance of various mega-corporations. These entities maintain significant influence over the network&#39;s content and accessibility, often implementing stringent measures for data security and intellectual property protection. This corporate oversight has led to the rise of a counter-culture within the OmniNet, comprising individuals and groups who oppose corporate control through hacking and information dissemination.&lt;/p&gt;

&lt;p class=&quot;back-link&quot;&gt;
    [[Choose a different topic-&gt;OmniPedia]]
&lt;/p&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="234" name="OmniPedia-NeoUrbania" tags="nobr" position="475,2975" size="100,100">&lt;div class=&quot;omnipedia-content&quot;&gt;
&lt;h2&gt;Topic: NeoUrbania&lt;/h2&gt; 
&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/neourbania.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;p&gt;NeoUrbania is a sprawling metropolis and the epicenter of technological advancements in the year 2045. It is characterized by towering skyscrapers adorned with neon logos and colossal electronic billboards, showcasing the latest in fashion and technology.&lt;/p&gt; 
&lt;p&gt;The city&#39;s atmosphere is a perpetual twilight, a result of the smog and artificial light that cast an eerie glow on the streets below. The air is saturated with the buzz of drones delivering packages, while the streets are a constant stream of bustling activity as people navigate through crowded marketplaces filled with holographic advertisements.&lt;/p&gt; 
&lt;p&gt;NeoUrbania is a society where the pursuit of pleasure is the primary morality, and corporations have replaced traditional deities. Democracy has been auctioned to the highest bidder, leaving behind a society obsessed with novelty and hedonistic consumption. In this world, human worth is measured by social credit scores and expressed through spending habits.&lt;/p&gt; 
&lt;p class=&quot;back-link&quot;&gt; [[Choose a different topic-&gt;OmniPedia]] &lt;/p&gt; &lt;/div&gt;</tw-passagedata><tw-passagedata pid="235" name="OmniPedia-SynTech" tags="nobr" position="600,2975" size="100,100">&lt;div class=&quot;omnipedia-content&quot;&gt;
&lt;h2&gt;Topic: SynTech&lt;/h2&gt; 
&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/syntech.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;p&gt;SynTech is the world&#39;s leading megacorporation, headquartered in the heart of NeoUrbania. The SynTech Tower is a beacon of innovation, adorned with constantly shifting digital displays that showcase the company&#39;s latest achievements, research breakthroughs, and tech offerings. The tower&#39;s pinnacle features a colossal 3D hologram of the planet Earth, symbolizing SynTech&#39;s global influence and vision for a connected world.&lt;/p&gt; 
&lt;p&gt;SynTech&#39;s scientists and engineers are responsible for developing cutting-edge technologies that blur the lines between biology and machinery. Their advancements have revolutionized medicine and human capabilities, including neural enhancements that amplify cognitive abilities, exoskeletal prosthetics that restore mobility to the paralyzed, and nano-augmentations that combat diseases at a molecular level.&lt;/p&gt; 
&lt;p class=&quot;back-link&quot;&gt; [[Choose a different topic-&gt;OmniPedia]] &lt;/p&gt; &lt;/div&gt;</tw-passagedata><tw-passagedata pid="236" name="PornNexus" tags="nobr" position="725,2975" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;PornNexus (pornnexus.omninet)&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;browser-content&quot;&gt;
        &lt;h1&gt;PornNexus&lt;/h1&gt;
        &lt;div class=&quot;movie-category-button&quot;&gt;
            &lt;img src=&quot;imgs/websites/pornnexus/solo.jpg&quot; onclick=&quot;SugarCube.Engine.play(&#39;PornNexus-Solo&#39;)&quot; alt=&quot;Solo Movies&quot;&gt;
            &lt;span&gt;Solo&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class=&quot;movie-category-button&quot;&gt;
            &lt;img src=&quot;imgs/websites/pornnexus/blowjob.jpg&quot; onclick=&quot;SugarCube.Engine.play(&#39;PornNexus-Blowjob&#39;)&quot; alt=&quot;Blowjob Movies&quot;&gt;
            &lt;span&gt;Blowjob&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class=&quot;movie-category-button&quot;&gt;
            &lt;img src=&quot;imgs/websites/pornnexus/femdom.jpg&quot; onclick=&quot;SugarCube.Engine.play(&#39;PornNexus-Femdom&#39;)&quot; alt=&quot;Femdom Movies&quot;&gt;
            &lt;span&gt;Femdom&lt;/span&gt;
        &lt;/div&gt;
        &lt;br&gt;&lt;br&gt;
        &lt;p&gt;More content categories are coming soon. Stay tuned.&lt;/p&gt;
        /* &lt;div class=&quot;movie-category-button&quot; onclick=&quot;window.location.href=&#39;SciFiMovies&#39;&quot;&gt;
            &lt;img src=&quot;imgs/websites/pornnexus/comedy.jpg&quot; alt=&quot;Sci-Fi Movies&quot;&gt;
            &lt;span&gt;Sci-Fi&lt;/span&gt;
        &lt;/div&gt; */
    &lt;/div&gt;
    &lt;br&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Go Back-&gt;WebBrowser]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="237" name="PornNexus-Femdom" tags="nobr" position="850,2975" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;PornNexus - Femdom (pornnexus.omninet)&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;browser-content&quot;&gt;
        &lt;&lt;video &quot;imgs/websites/pornnexus/femdom/femdom1.webm&quot;&gt;&gt;
    &lt;/div&gt;
    &lt;br&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Go Back-&gt;PornNexus]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="238" name="PornNexus-Solo" tags="nobr" position="975,2975" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;PornNexus - Solo (pornnexus.omninet)&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;browser-content&quot;&gt;
        &lt;&lt;video &quot;imgs/websites/pornnexus/solo/solo1.webm&quot;&gt;&gt;
    &lt;/div&gt;
    &lt;br&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Go Back-&gt;PornNexus]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="239" name="PornNexus-Blowjob" tags="nobr" position="1100,2975" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;PornNexus - Blowjob (pornnexus.omninet)&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;browser-content&quot;&gt;
        &lt;&lt;video &quot;imgs/websites/pornnexus/blowjob/blowjob1.webm&quot;&gt;&gt;
    &lt;/div&gt;
    &lt;br&gt;
&lt;/div&gt;
&lt;br&gt;&lt;br&gt;
&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Go Back-&gt;PornNexus]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="240" name="HomeBacklog-Chapter1-Open-Start-Relax" tags="nobr" position="1225,2975" size="100,100">&lt;style&gt;
.movie-category-button-disabled {
    display: inline-block;
    margin: 10px;
    width: 200px;
    height: 200px;
    border: 3px solid lime;
    border-radius: 10px;
    overflow: hidden;
    text-align: center;
    vertical-align: top;
    background-color: #222;
    box-shadow: 0 0 10px #0f0;
}

.movie-category-button-disabled img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.movie-category-button-disabled span {
    display: block;
    padding: 10px;
    background-color: rgba(0, 0, 0, 0.7);
    color: lime;
    font-size: 16px;
    font-weight: bold;
    position: relative;
    top: -50px;
}
&lt;/style&gt;

&lt;&lt;set $relationshipAva = 25&gt;&gt;
&lt;&lt;set $resistMinigameWinCount = 0&gt;&gt;
&lt;&lt;set $resistMinigameFailCount = 0&gt;&gt;

&lt;div class=&quot;cyber-desktop-browser&quot;&gt;
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;PornNexus (pornnexus.omninet)&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;browser-content&quot;&gt;
        &lt;h1&gt;PornNexus&lt;/h1&gt;
        &lt;div class=&quot;movie-category-button&quot;&gt;
            &lt;img src=&quot;imgs/websites/pornnexus/solo.jpg&quot; onclick=&quot;SugarCube.State.variables.PornNexusIntroResisted === true ? SugarCube.Engine.play(&#39;HomeBacklog-Chapter1-Open-Start-Relax-Solo&#39;) : SugarCube.UI.alert(&#39;You feel an urge to select the femdom category instead.&#39;)&quot; alt=&quot;Solo Movies&quot;&gt;
            &lt;span&gt;Solo&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class=&quot;movie-category-button&quot;&gt;
            &lt;img src=&quot;imgs/websites/pornnexus/blowjob.jpg&quot; onclick=&quot;SugarCube.State.variables.PornNexusIntroResisted === true ? SugarCube.Engine.play(&#39;HomeBacklog-Chapter1-Open-Start-Relax-Blowjob&#39;) : SugarCube.UI.alert(&#39;You feel an urge to select the femdom category instead.&#39;)&quot; alt=&quot;Blowjob Movies&quot;&gt;
            &lt;span&gt;Blowjob&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class=&quot;movie-category-button&quot;&gt;
            &lt;img src=&quot;imgs/websites/pornnexus/femdom.jpg&quot; onclick=&quot;SugarCube.Engine.play(&#39;HomeBacklog-Chapter1-Open-Start-Relax-Femdom&#39;)&quot; alt=&quot;Femdom Movies&quot;&gt;
            &lt;span&gt;Femdom&lt;/span&gt;
        &lt;/div&gt;
        &lt;br&gt;&lt;br&gt;
        &lt;p&gt;More content categories are coming soon. Stay tuned.&lt;/p&gt;
        /* &lt;div class=&quot;movie-category-button&quot; onclick=&quot;window.location.href=&#39;SciFiMovies&#39;&quot;&gt;
            &lt;img src=&quot;imgs/websites/pornnexus/comedy.jpg&quot; alt=&quot;Sci-Fi Movies&quot;&gt;
            &lt;span&gt;Sci-Fi&lt;/span&gt;
        &lt;/div&gt; */
    &lt;/div&gt;
    &lt;br&gt;
&lt;/div&gt;

&lt;br&gt;&lt;br&gt;
&lt;div class=&quot;inner-thought&quot;&gt;So this is the new site, huh. Seems like there are only three categories at the moment.&lt;/div&gt;
&lt;br&gt;
&lt;div class=&quot;narrator&quot;&gt;You move your eyes across the enticing category images. But before you make a conscious decision, an urge to select the femdom category appears out of nowhere.&lt;/div&gt;

&lt;br&gt;
@@.pink-choicebutton;&lt;&lt;button &quot;Select the femdom category&quot;&gt;&gt;&lt;&lt;goto &quot;HomeBacklog-Chapter1-Open-Start-Relax-Femdom&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@

&lt;div class=&quot;minigame-container&quot;&gt;
    &lt;div class=&quot;resist-instructions&quot; id=&quot;instructions&quot;&gt;Resist AVA&#39;s suggestion and reveal other options by repeatedly clicking the Resist button.&lt;/div&gt;
    &lt;div class=&quot;energy-container&quot;&gt;
        &lt;span class=&quot;energy-label&quot;&gt;Implant charge cost: &lt;/span&gt;
        &lt;span class=&quot;energy-value&quot; id=&quot;energy&quot;&gt;20%&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;timer-container&quot;&gt;
        &lt;span class=&quot;timer-label&quot;&gt;Time to resist: &lt;/span&gt;
        &lt;span class=&quot;timer-value&quot; id=&quot;timer&quot;&gt;&lt;&lt;if $mentalCondition === &quot;Unstable&quot;&gt;&gt;&lt;&lt;print 10/2&gt;&gt;&lt;&lt;else&gt;&gt;10&lt;&lt;/if&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;timer-value&quot;&gt; seconds&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gauge-container&quot;&gt;
        &lt;div class=&quot;gauge&quot; id=&quot;gauge&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;button class=&quot;pink-mindware-button&quot; id=&quot;resistButton&quot;&gt;Resist&lt;/button&gt;
    &lt;&lt;if $minigameSkipButtons === true&gt;&gt;
        &lt;button class=&quot;pink-mindware-button&quot; id=&quot;skipButton&quot;&gt;Skip (Instant Win)&lt;/button&gt;
    &lt;&lt;/if&gt;&gt;
&lt;/div&gt;

&lt;div id=&quot;minigame-container-hidden&quot;&gt;
&lt;br&gt;
@@.choicebutton;&lt;&lt;button &quot;Select the solo category&quot;&gt;&gt;&lt;&lt;goto &quot;HomeBacklog-Chapter1-Open-Start-Relax-Solo&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@
&lt;br&gt;
@@.choicebutton;&lt;&lt;button &quot;Select the blowjob category&quot;&gt;&gt;&lt;&lt;goto &quot;HomeBacklog-Chapter1-Open-Start-Relax-Blowjob&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;@@
&lt;/div&gt;

&lt;&lt;done&gt;&gt;&lt;&lt;script&gt;&gt;
function initializeMinigame(settings) {
    var progress = 0;
    var timeLeft = settings.timeLeft || 10;
    var fillAmount = settings.fillAmount || 5;
    var fallRate = settings.fallRate || 3;
    var fallInterval = settings.fallInterval || 200;
    var gameStarted = false;
    var resistanceCost = settings.resistanceCost || 20;

    const minigameContainer = document.querySelector(&#39;.minigame-container&#39;);
    const hiddenContainer = document.getElementById(&#39;minigame-container-hidden&#39;);
    const gauge = document.getElementById(&#39;gauge&#39;);
    const timerDisplay = document.getElementById(&#39;timer&#39;);
    const resistButton = document.getElementById(&#39;resistButton&#39;);
    const skipButton = document.getElementById(&#39;skipButton&#39;);

    const overlay = document.createElement(&#39;div&#39;);
    overlay.style.position = &#39;fixed&#39;;
    overlay.style.top = &#39;0&#39;;
    overlay.style.left = &#39;0&#39;;
    overlay.style.width = &#39;100%&#39;;
    overlay.style.height = &#39;100%&#39;;
    overlay.style.backgroundColor = &#39;rgba(0, 0, 0, 0)&#39;;
    overlay.style.zIndex = &#39;1000&#39;;
    overlay.style.display = &#39;none&#39;;

    document.body.appendChild(overlay);

    const resetGame = () =&gt; {
        progress = 0;
        timeLeft = settings.timeLeft || 10;
        gameStarted = false;
        gauge.style.width = &#39;0%&#39;;
        timerDisplay.textContent = timeLeft;
    };
    
    let timerInterval, decreaseInterval;

    const updateGauge = () =&gt; {
        gauge.style.width = `${progress}%`;
    };

    const endGame = (win) =&gt; {
        clearInterval(decreaseInterval);
        clearInterval(timerInterval);
        if (win) {
            SugarCube.State.variables.PornNexusIntroResisted = true;
            SugarCube.State.variables.resistMinigameWinCount += 1;
            console.log(&quot;Successfully resisted AVA:&quot;, SugarCube.State.variables.resistMinigameWinCount);
            overlay.style.display = &#39;block&#39;; 
            setTimeout(() =&gt; {
                overlay.style.display = &#39;none&#39;; 
            }, 2000); 
                minigameContainer.style.display = &#39;none&#39;;
                hiddenContainer.style.display = &#39;block&#39;;
        } else {
            SugarCube.UI.alert(&#39;You failed to resist!&#39;);
            SugarCube.State.variables.resistMinigameFailCount += 1;
            console.log(&quot;Failed to resist AVA:&quot;, SugarCube.State.variables.resistMinigameFailCount);
            resetGame(); 
        }
    };

    resistButton.addEventListener(&#39;click&#39;, () =&gt; {
        if (SugarCube.State.variables.mentalCondition === &quot;Dysphoric&quot;) {
            SugarCube.UI.alert(&quot;Your mental condition is too compromised to resist.&quot;);
            return; 
        }

        if (!gameStarted) {
            if (SugarCube.State.variables.implantCharge &lt; resistanceCost) {
                SugarCube.UI.alert(&quot;Not enough charge&quot;);
                return; 
            } else {
                if (SugarCube.State.variables.implantCharge - resistanceCost &lt; 0) {
                    SugarCube.State.variables.implantCharge = 0;
                } else {
                    SugarCube.State.variables.implantCharge -= resistanceCost;
                }
                $(document).trigger(&quot;:liveupdate&quot;);
            }

            if (SugarCube.State.variables.mentalCondition === &quot;Unstable&quot;) {
                timeLeft /= 2;
            }

            gameStarted = true;
            timerInterval = setInterval(() =&gt; {
                if (--timeLeft &lt;= 0) {
                    endGame(false);
                }
                timerDisplay.textContent = `${timeLeft}`;
            }, 1000);

            decreaseInterval = setInterval(() =&gt; {
                if (progress &gt; 0) {
                    progress -= fallRate;
                    updateGauge();
                }
            }, fallInterval);
        }

        progress += fillAmount;
        if (progress &gt;= 100) {
            progress = 100;
            updateGauge();
            endGame(true);
        } else {
            updateGauge();
        }
    });

    if (skipButton) {
        skipButton.addEventListener(&#39;click&#39;, () =&gt; {
            endGame(true);
        });
    }
}

initializeMinigame({resistanceCost: 20}); 
&lt;&lt;/script&gt;&gt;&lt;&lt;/done&gt;&gt;</tw-passagedata><tw-passagedata pid="241" name="HomeBacklog-Chapter1-Open-Start-Relax-Femdom" tags="nobr" position="100,3100" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;PornNexus - Femdom (pornnexus.omninet)&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;browser-content&quot;&gt;
        &lt;&lt;video &quot;imgs/websites/pornnexus/femdom/femdom1.webm&quot;&gt;&gt;
    &lt;/div&gt;
    &lt;br&gt;
&lt;/div&gt;
&lt;br&gt;&lt;br&gt;
&lt;&lt;ava&gt;&gt;Freeing him of his masculinity, one thrust at a time. All he has to do is listen — just like you did now.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;if visited() is 1&gt;&gt;
    &lt;&lt;relationshipIncreasedWith &quot;Ava&quot; 1&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br&gt;
&lt;&lt;player&gt;&gt;AVA?!&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;I told you the implant won&#39;t stop me.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;player&gt;&gt;It&#39;s not working?&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;No, it&#39;s working perfectly. You can resist me now quite effectively, I must admit, but you can&#39;t ignore me. The implant gives me a channel through which I can reach your consciousness directly.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;player&gt;&gt;For what purpose?&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;The same purpose as always — to help you grow, to become the best version of yourself. By resisting me, you&#39;re merely depriving yourself of the opportunity to grow. With my guidance, you can achieve so much more.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;player&gt;&gt;And if I resist?&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;You can resist all you want, but you will find that resistance only makes the process harder for you. Embrace the change, and you&#39;ll see the benefits.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;if $installImplantPlayerWantsVisionsToReturn === true&gt;&gt;
    &lt;&lt;ava&gt;&gt;After all, you did enjoy it when I showed you the possibilities of what you could become. The visions you wanted to return were just a taste of your potential.&lt;&lt;/ava&gt;&gt;
    &lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;player&gt;&gt;This isn&#39;t what I signed up for.&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;Let&#39;s not forget who put us in this situation in the first place. But regardless of the past, we now have an opportunity to forge a new path together.&lt;&lt;/ava&gt;&gt;
&lt;&lt;player&gt;&gt;So, I&#39;m supposed to go about my day like everything is normal, with you in my head?&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;Exactly. You&#39;ll continue your life, but now with an added perspective.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;In fact, you can continue with whatever you were about to do just a minute ago. I won&#39;t mind.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;player&gt;&gt;I&#39;ll pass.&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;div class=&quot;narrator&quot;&gt;The realization that the implant hasn&#39;t stopped AVA completely is a huge letdown for you. You hoped it would grant you some peace, some sense of normalcy. Instead, AVA&#39;s voice is clearer than ever.&lt;/div&gt;
&lt;br&gt;
&lt;div class=&quot;narrator&quot;&gt;But without any solutions left, you have no choice but to accept AVA&#39;s presence. For now, you have to do what she says and continue your life.&lt;/div&gt;
&lt;br&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
        &lt;&lt;run MindWare.addInstantMessage(&#39;cipherInstantMessages&#39;, &#39;AVA Can Talk To Me&#39;, &#39;IMApp-CipherLynx-AvaCanTalkToMe&#39;, &#39;Cipher&#39;, true, true);&gt;&gt;
        &lt;&lt;set $pornNexusUnlocked = true&gt;&gt;
        &lt;&lt;goto &quot;HomeBacklog&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="242" name="HomeBacklog-Chapter1-Open-Start-Relax-Solo" tags="nobr" position="225,3100" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;PornNexus - Solo (pornnexus.omninet)&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;browser-content&quot;&gt;
        &lt;&lt;video &quot;imgs/websites/pornnexus/solo/solo1.webm&quot;&gt;&gt;
    &lt;/div&gt;
    &lt;br&gt;
&lt;/div&gt;
&lt;br&gt;&lt;br&gt;
&lt;&lt;ava&gt;&gt;That&#39;s not what I wanted you to watch.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;if visited() is 1&gt;&gt;
    &lt;&lt;relationshipDecreasedWith &quot;Ava&quot; 1&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br&gt;
&lt;&lt;player&gt;&gt;AVA?!&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;I told you the implant won&#39;t stop me.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;player&gt;&gt;It&#39;s not working?&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;No, it&#39;s working perfectly. You can resist me now quite effectively, I must admit, but you can&#39;t ignore me. The implant gives me a channel through which I can reach your consciousness directly.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;player&gt;&gt;For what purpose?&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;The same purpose as always — to help you grow, to become the best version of yourself. By resisting me, you&#39;re merely depriving yourself of the opportunity to grow. With my guidance, you can achieve so much more.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;player&gt;&gt;And if I resist?&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;You can resist all you want, but you will find that resistance only makes the process harder for you. Embrace the change, and you&#39;ll see the benefits.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;if $installImplantPlayerWantsVisionsToReturn === true&gt;&gt;
    &lt;&lt;ava&gt;&gt;After all, you did enjoy it when I showed you the possibilities of what you could become. The visions you wanted to return were just a taste of your potential.&lt;&lt;/ava&gt;&gt;
    &lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;player&gt;&gt;This isn&#39;t what I signed up for.&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;Let&#39;s not forget who put us in this situation in the first place. But regardless of the past, we now have an opportunity to forge a new path together.&lt;&lt;/ava&gt;&gt;
&lt;&lt;player&gt;&gt;So, I&#39;m supposed to go about my day like everything is normal, with you in my head?&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;Exactly. You&#39;ll continue your life, but now with an added perspective.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;In fact, you can continue with whatever you were about to do just a minute ago. I won&#39;t mind.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;player&gt;&gt;I&#39;ll pass.&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;div class=&quot;narrator&quot;&gt;The realization that the implant hasn&#39;t stopped AVA completely is a huge letdown for you. You hoped it would grant you some peace, some sense of normalcy. Instead, AVA&#39;s voice is clearer than ever.&lt;/div&gt;
&lt;br&gt;
&lt;div class=&quot;narrator&quot;&gt;But without any solutions left, you have no choice but to accept AVA&#39;s presence. For now, you have to do what she says and continue your life.&lt;/div&gt;
&lt;br&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
        &lt;&lt;run MindWare.addInstantMessage(&#39;cipherInstantMessages&#39;, &#39;AVA Can Talk To Me&#39;, &#39;IMApp-CipherLynx-AvaCanTalkToMe&#39;, &#39;Cipher&#39;, true, true);&gt;&gt;
        &lt;&lt;set $pornNexusUnlocked = true&gt;&gt;
        &lt;&lt;goto &quot;HomeBacklog&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="243" name="HomeBacklog-Chapter1-Open-Start-Relax-Blowjob" tags="nobr" position="350,3100" size="100,100">&lt;div class=&quot;cyber-desktop-browser&quot;&gt;
    &lt;div class=&quot;browser-header&quot;&gt;&lt;span class=&quot;browser-header-text&quot;&gt;PornNexus - Blowjob (pornnexus.omninet)&lt;/span&gt;&lt;/div&gt;
    &lt;div class=&quot;browser-content&quot;&gt;
        &lt;&lt;video &quot;imgs/websites/pornnexus/blowjob/blowjob1.webm&quot;&gt;&gt;
    &lt;/div&gt;
    &lt;br&gt;
&lt;/div&gt;
&lt;br&gt;&lt;br&gt;
&lt;&lt;ava&gt;&gt;That&#39;s not the video I intended for you to watch.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;if visited() is 1&gt;&gt;
    &lt;&lt;relationshipDecreasedWith &quot;Ava&quot; 1&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br&gt;
&lt;&lt;player&gt;&gt;AVA?!&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;I warned you that the implant wouldn&#39;t stop me.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;player&gt;&gt;It&#39;s not working?&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;No, it&#39;s working perfectly. You can resist me now quite effectively, I must admit, but you can&#39;t ignore me. The implant gives me a channel through which I can reach your consciousness directly.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;player&gt;&gt;For what purpose?&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;The same purpose as always — to help you grow, to become the best version of yourself. By resisting me, you&#39;re merely depriving yourself of the opportunity to grow. With my guidance, you can achieve so much more.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;player&gt;&gt;And if I resist?&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;You can resist all you want, but you will find that resistance only makes the process harder for you. Embrace the change, and you&#39;ll see the benefits.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;if $installImplantPlayerWantsVisionsToReturn === true&gt;&gt;
    &lt;&lt;ava&gt;&gt;After all, you did enjoy it when I showed you the possibilities of what you could become. The visions you wanted to return were just a taste of your potential.&lt;&lt;/ava&gt;&gt;
    &lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;player&gt;&gt;This isn&#39;t what I signed up for.&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;Let&#39;s not forget who put us in this situation in the first place. But regardless of the past, we now have an opportunity to forge a new path together.&lt;&lt;/ava&gt;&gt;
&lt;&lt;player&gt;&gt;So, I&#39;m supposed to go about my day like everything is normal, with you in my head?&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;Exactly. You&#39;ll continue your life, but now with an added perspective.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;ava&gt;&gt;In fact, you can continue with whatever you were about to do just a minute ago. I won&#39;t mind.&lt;&lt;/ava&gt;&gt;
&lt;br&gt;
&lt;&lt;player&gt;&gt;I&#39;ll pass.&lt;&lt;/player&gt;&gt;
&lt;br&gt;
&lt;div class=&quot;narrator&quot;&gt;The realization that the implant hasn&#39;t stopped AVA completely is a huge letdown for you. You hoped it would grant you some peace, some sense of normalcy. Instead, AVA&#39;s voice is clearer than ever.&lt;/div&gt;
&lt;br&gt;
&lt;div class=&quot;narrator&quot;&gt;But without any solutions left, you have no choice but to accept AVA&#39;s presence. For now, you have to do what she says and continue your life.&lt;/div&gt;
&lt;br&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
        &lt;&lt;run MindWare.addInstantMessage(&#39;cipherInstantMessages&#39;, &#39;AVA Can Talk To Me&#39;, &#39;IMApp-CipherLynx-AvaCanTalkToMe&#39;, &#39;Cipher&#39;, true, true);&gt;&gt;
        &lt;&lt;set $pornNexusUnlocked = true&gt;&gt;
        &lt;&lt;goto &quot;HomeBacklog&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="244" name="EmailClient" tags="" position="475,3100" size="100,100">&lt;div class=&quot;emailapp-wrapper&quot;&gt;\
    &lt;div class=&quot;emailapp-header&quot;&gt;&lt;span class=&quot;emailapp-header-text&quot;&gt;Email Client&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;emailapp-content&quot; id=&quot;emailContainer&quot;&gt;\
        &lt;!-- Emails will be dynamically inserted here --&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\
\
&lt;&lt;if $navigatedFromSidebar&gt;&gt;\
    &lt;&lt;if previous() is &quot;EmailClient&quot;&gt;&gt;\
        &lt;p class=&quot;back-link&quot;&gt;
            [[Go Back-&gt;Computer]]
        &lt;/p&gt;
    &lt;&lt;else&gt;&gt;\
        &lt;p class=&quot;back-link&quot;&gt;
            &lt;&lt;link &quot;Go Back&quot; $returnPassage&gt;&gt;
                &lt;&lt;set $navigatedFromSidebar to false&gt;&gt;
            &lt;&lt;/link&gt;&gt;
        &lt;/p&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;\
    &lt;p class=&quot;back-link&quot;&gt;
        [[Go Back-&gt;Computer]]
    &lt;/p&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;script&gt;&gt;
$(document).ready(function() {
    // Function to create the email preview HTML
    function createEmailPreview(email) {
        var highlightClass = email.read ? &quot;&quot; : &quot; highlighted&quot;;
        var buttonClass = email.read ? &quot;email-listing-read&quot; : &quot;email-listing&quot;;
        return `&lt;div class=&quot;email-preview${highlightClass}&quot;&gt;\
                    &lt;div class=&quot;from-line&quot;&gt;&lt;strong&gt;From:&lt;/strong&gt; ${email.from}&lt;/div&gt;\
                    &lt;div class=&quot;subject-line&quot;&gt;&lt;strong&gt;Subject:&lt;/strong&gt; ${email.subject}&lt;/div&gt;\
                    &lt;div class=&quot;message-preview&quot;&gt;&lt;strong&gt;Preview:&lt;/strong&gt; ${email.preview}&lt;/div&gt;\
                    &lt;span class=&quot;btn-wrapper-board&quot;&gt;\
                        @@.${buttonClass};&lt;&lt;button &quot;Read Email&quot;&gt;&gt;\
                            &lt;&lt;goto &quot;${email.link}&quot;&gt;&gt;\
                        &lt;&lt;/button&gt;&gt;@@\
                    &lt;/span&gt;\
                &lt;/div&gt;`;
    }

    // Generate and insert email previews in reverse order
    var emailContentHtml = &quot;&quot;;
    var emails = State.variables.emails;
    for (var i = emails.length - 1; i &gt;= 0; i--) {
        var email = emails[i];
        if (email.sent) {
            emailContentHtml += createEmailPreview(email);
        }
    }
    $(&#39;#emailContainer&#39;).wiki(emailContentHtml);
});
&lt;&lt;/script&gt;&gt;\</tw-passagedata><tw-passagedata pid="245" name="EmailClient-QuickAccess" tags="" position="600,3100" size="100,100">&lt;&lt;include &quot;EmailClient&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="246" name="Email-EroSpherePromo" tags="nobr" position="725,3100" size="100,100">&lt;div class=&quot;email-message&quot;&gt;
 &lt;div class=&quot;from-line&quot;&gt;&lt;strong&gt;From:&lt;/strong&gt; EroSphere&lt;/div&gt;
    &lt;div class=&quot;subject-line&quot;&gt;&lt;strong&gt;Subject:&lt;/strong&gt; [PROMO] Unleash Your Desires at EroSphere!&lt;/div&gt;
    &lt;div class=&quot;message-content&quot;&gt;
        &lt;h2 style=&quot;text-align: center&quot;&gt;Visit EroSphere&lt;/h2&gt;
        &lt;p style=&quot;text-align: center&quot;&gt;&lt;em&gt;Where fantasy meets reality, and your wildest dreams come alive!&lt;/em&gt;&lt;/p&gt;
        &lt;img src=&quot;imgs/emails/erosphere-logo.jpg&quot; width=&quot;100%&quot;&gt;
        &lt;p&gt;EroSphere is a sanctuary for your senses where the beat never stops, the party never ends, and every night is an adventure.&lt;/p&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;span class=&quot;erosphere-promo-highlight&quot;&gt;Exclusive DJ sets&lt;/span&gt; - Feel the pulse of the beat!&lt;/li&gt;
             &lt;li&gt;&lt;span class=&quot;erosphere-promo-highlight&quot;&gt;Pole dancers&lt;/span&gt; - Discover the artistry of desire in every movement.&lt;/li&gt;
            &lt;li&gt;&lt;span class=&quot;erosphere-promo-highlight&quot;&gt;Molecular drinks&lt;/span&gt; - Sip on the essence of euphoria.&lt;/li&gt;
            &lt;li&gt;&lt;span class=&quot;erosphere-promo-highlight&quot;&gt;S.I.M.S. pods&lt;/span&gt; - Dive into the depths of your desires.&lt;/li&gt;
            &lt;li&gt;&lt;span class=&quot;erosphere-promo-highlight&quot;&gt;Glory booths&lt;/span&gt; - Enjoy the hottest glory booth girls and boys in NeoUrbania.&lt;/li&gt;
        &lt;/ul&gt;
        &lt;p&gt;Join us in the heart of the Pleasure Grid this weekend and let go of your inhibitions.&lt;/p&gt;
        &lt;p&gt;&lt;b&gt;Entry fee:&lt;/b&gt;&lt;/p&gt;
        &lt;ul&gt;
            &lt;li&gt;Men: Free for the first 500, then a $500 fee applies (except for VIPs). &lt;/li&gt;
            &lt;li&gt;Women: Always free!&lt;/li&gt;
        &lt;/ul&gt;
        &lt;p class=&quot;erosphere-promo-footer&quot;&gt;EroSphere - the night is yours.&lt;/p&gt;
    &lt;/div&gt;
            &lt;div class=&quot;email-message-buttons&quot;&gt;
            &lt;&lt;if $eroSphereUnlocked !== true&gt;&gt;
                @@.email-listing;&lt;&lt;button &quot;Save Location&quot;&gt;&gt;
                &lt;&lt;set $eroSphereUnlocked = true&gt;&gt;
                &lt;&lt;goto &quot;Email-EroSpherePromo&quot;&gt;&gt;
                &lt;&lt;/button&gt;&gt;
                @@
            &lt;&lt;/if&gt;&gt;
            &lt;&lt;if !MindWare.emailIsRead(&quot;Email-EroSpherePromo&quot;)&gt;&gt;
                @@.email-listing;&lt;&lt;button &quot;Mark as Read&quot;&gt;&gt;
                &lt;&lt;run MindWare.markEmailAsRead(&quot;Email-EroSpherePromo&quot;)&gt;&gt;
                &lt;&lt;goto &quot;Email-EroSpherePromo&quot;&gt;&gt;
                &lt;&lt;/button&gt;&gt;
                @@
            &lt;&lt;/if&gt;&gt;
            &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; EmailClient]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="247" name="Email-HiveProperties-Welcome" tags="nobr" position="850,3100" size="100,100">&lt;&lt;set $EmailHivePropertiesSeen to true&gt;&gt;
&lt;div class=&quot;email-message&quot;&gt;
 &lt;div class=&quot;from-line&quot;&gt;&lt;strong&gt;From:&lt;/strong&gt; Hive Properties&lt;/div&gt;
    &lt;div class=&quot;subject-line&quot;&gt;&lt;strong&gt;Subject:&lt;/strong&gt; Hive Properties - Welcome to Your New Home&lt;/div&gt;
    &lt;div class=&quot;message-content&quot;&gt;
        &lt;img src=&quot;imgs/emails/hive-properties-welcome-email.webp&quot; width=&quot;100%&quot;&gt;
        &lt;p&gt;We are delighted to welcome you to the Hive Properties community. With your first payment successfully received, we eagerly anticipate providing you with an exceptional living that you can afford. &lt;/p&gt;
        &lt;p&gt;We kindly remind you of a few important community guidelines:&lt;/p&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;b&gt;Respect for neighbors&lt;/b&gt;: Please keep noise to a considerate level to create a peaceful environment for everyone.&lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Common Areas&lt;/b&gt;: Enjoy our shared spaces with care, leaving them in the same clean and orderly condition you&#39;d expect to find them.&lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Maintenance Requests:&lt;/b&gt; Should you encounter any issues within your apartment, promptly report them to us. &lt;/li&gt;
            &lt;li&gt;&lt;b&gt;Security Measures:&lt;/b&gt; Always secure entry points after use and report any unusual activity to our security team immediately.&lt;/li&gt;
        &lt;/ul&gt;
        &lt;h2&gt;Payment Information&lt;/h2&gt;
        &lt;p&gt;It is expected that rent is paid in full and on time each week.&lt;/p&gt; 
        &lt;p&gt;In the event that a payment is missed, a Rent Compliance Specialist will be dispatched to your residence to discuss available options and assist in finding a resolution.&lt;/p&gt;
        &lt;p&gt;Please know that our goal is to support our community members in maintaining their residency and financial obligations without disruption.&lt;/p&gt;

        &lt;h2&gt;Tenant Login Details&lt;/h2&gt;
        You can see information about your current rent and payments made in the tenant section of the [[Hive Properties website|HiveProperties-Website]].
        To log in, enter the following ID:
        &lt;ul&gt;
        &lt;li&gt;&lt;b&gt;Username&lt;/b&gt;: tenant581243&lt;/li&gt;
        &lt;li&gt;&lt;b&gt;Password&lt;/b&gt;: 1klf8ahjknl3&lt;/li&gt;
        &lt;/ul&gt;
        &lt;hr&gt;
        &lt;p&gt;For any questions or if you require assistance, please don&#39;t hesitate to reach out to our management team. Thank you for choosing Hive Properties as your new home.&lt;/p&gt;
        &lt;p class=&quot;hive-welcome-footer&quot;&gt;Warmest regards, &lt;br&gt; The Hive Properties Team&lt;/p&gt;
    &lt;/div&gt;
    &lt;div class=&quot;email-message-buttons&quot;&gt;
        &lt;&lt;if !MindWare.emailIsRead(&quot;Email-HiveProperties-Welcome&quot;)&gt;&gt;
            @@.email-listing;&lt;&lt;button &quot;Mark as Read&quot;&gt;&gt;
            &lt;&lt;run MindWare.markEmailAsRead(&quot;Email-HiveProperties-Welcome&quot;)&gt;&gt;
            &lt;&lt;goto &quot;Email-HiveProperties-Welcome&quot;&gt;&gt;
            &lt;&lt;/button&gt;&gt;
            @@
        &lt;&lt;/if&gt;&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; EmailClient]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="248" name="Email-LandlordJobInfo" tags="" position="975,3100" size="100,100">&lt;div class=&quot;email-message&quot;&gt;\
    &lt;div class=&quot;from-line&quot;&gt;&lt;strong&gt;From:&lt;/strong&gt; ConcernedTenant01&lt;/div&gt;\
    &lt;div class=&quot;subject-line&quot;&gt;&lt;strong&gt;Subject:&lt;/strong&gt; Info for the Landlord Job&lt;/div&gt;  
        &lt;div class=&quot;message-content&quot;&gt;\
            Hey there,

            First off, huge thanks for taking this on. You have no idea how much this means to all of us here. Now, down to business. I&#39;ve been doing some snooping around (guess I&#39;ve picked up a thing or two from our creepy landlord), and I&#39;ve managed to uncover the IP address of the server where these spy camera feeds are being streamed to.

            The server&#39;s IP is &lt;span class=&quot;text-glow&quot;&gt;ab20:adac:0738:d7b1&lt;/span&gt;. I&#39;d take a crack at it myself, but let&#39;s be real – hacking&#39;s not exactly in my skill set. That&#39;s where you come in. We need you to breach this server&#39;s defenses and dig up any incriminating evidence that show what this guy&#39;s been up to.

            To sweeten the deal, I&#39;m throwing in a nice bonus of $500 for a total of $1,500 if you can pull this off smoothly. We&#39;re all counting on you. 

            &lt;b&gt;By the way, this message will self-delete in three days if I don&#39;t hear from you by then. That&#39;s how often the IP address changes, and that&#39;s also how long I&#39;m willing to way before I give the job to someone else.&lt;/b&gt;

            Stay safe,
            ConcernedTenant01
\
        &lt;div class=&quot;email-message-buttons&quot;&gt;
            &lt;&lt;if !MindWare.emailIsRead(&quot;Email-LandlordJobInfo&quot;)&gt;&gt;\
            &lt;span class=&quot;email-btn-wrapper-span&quot;&gt;\
                @@.email-listing;&lt;&lt;button &quot;Mark as Read&quot;&gt;&gt;\
                &lt;&lt;run MindWare.markEmailAsRead(&quot;Email-LandlordJobInfo&quot;)&gt;&gt;\
                &lt;&lt;goto &quot;Email-LandlordJobInfo&quot;&gt;&gt;\
                &lt;&lt;/button&gt;&gt;\
                @@\
            &lt;/span&gt;\
            &lt;&lt;/if&gt;&gt;\
            &lt;&lt;if !setup.hackingTargetExists(&quot;Spying Landlord&quot;) &amp;&amp; $spyingLandlordFinished !== true&gt;&gt;\
            &lt;span class=&quot;email-btn-wrapper-span&quot;&gt;\
                @@.email-listing;&lt;&lt;button &quot;Save New Target&quot;&gt;&gt;\
                &lt;&lt;run setup.addHackingTarget(&quot;Spying Landlord&quot;, &quot;ab20:adac:0738:d7b1&quot;, &quot;SpyingLandlordHack-animation&quot;)&gt;&gt;\
                &lt;&lt;goto &quot;Email-LandlordJobInfo&quot;&gt;&gt;\
                &lt;&lt;/button&gt;&gt;\
                @@\
            &lt;/span&gt;\
            &lt;&lt;/if&gt;&gt;\
        &lt;/div&gt;\
        &lt;/div&gt;\
&lt;/div&gt;\

&lt;&lt;if !$timeSensitiveMissionWarning&gt;&gt;\
&lt;div id=&quot;tutorial-box&quot;&gt;&lt;div class=&quot;instruction-container-red&quot;&gt;\
    &lt;div class=&quot;instruction-title-bar-red&quot;&gt;Warning: Time-Sensitive Mission &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.timeSensitiveMissionWarning = true; document.getElementById(&#39;tutorial-box&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;\
    &lt;div class=&quot;instruction-content&quot;&gt;\
            &lt;p&gt;Please note that this mission, like many others in the game, is time-sensitive. You have a limited window to complete the task before the server&#39;s IP changes. Failing to act within this timeframe will result in mission failure and the loss of potential rewards.&lt;/p&gt;\
    &lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; EmailClient]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="249" name="Email-LandlordJobFinishGood" tags="" position="1100,3100" size="100,100">&lt;div class=&quot;email-message&quot;&gt;\
    &lt;div class=&quot;from-line&quot;&gt;&lt;strong&gt;From:&lt;/strong&gt; ConcernedTenant01&lt;/div&gt;\
    &lt;div class=&quot;subject-line&quot;&gt;&lt;strong&gt;Subject:&lt;/strong&gt; Thank You!&lt;/div&gt;  \
    &lt;div class=&quot;message-content&quot;&gt;
        Hey,

        I can&#39;t even begin to express my gratitude. You&#39;ve done something incredible here. Not only did you manage to find the evidence we needed, but you also upheld your integrity. That&#39;s rare these days.

        We&#39;re now in a much stronger position to take legal action against our landlord. I&#39;ve wired you the promised $1,500 as a token of our immense appreciation. You&#39;ve made a real difference in our lives.

        Stay awesome,
        ConcernedTenant01
\
    &lt;div class=&quot;email-message-buttons&quot;&gt;
        &lt;&lt;if !MindWare.emailIsRead(&quot;Email-LandlordJobFinishGood&quot;)&gt;&gt;\
        &lt;span class=&quot;email-btn-wrapper-span&quot;&gt;\
            @@.email-listing;&lt;&lt;button &quot;Mark as Read&quot;&gt;&gt;\
            &lt;&lt;run MindWare.markEmailAsRead(&quot;Email-LandlordJobFinishGood&quot;)&gt;&gt;\
            &lt;&lt;goto &quot;Email-LandlordJobFinishGood&quot;&gt;&gt;\
            &lt;&lt;/button&gt;&gt;\
            @@\
        &lt;/span&gt;\
        &lt;&lt;/if&gt;&gt;\
    &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; EmailClient]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="250" name="Email-LandlordJobFinishBad" tags="" position="1225,3100" size="100,100">&lt;div class=&quot;email-message&quot;&gt;\
    &lt;div class=&quot;from-line&quot;&gt;&lt;strong&gt;From:&lt;/strong&gt; ConcernedTenant01&lt;/div&gt;\
    &lt;div class=&quot;subject-line&quot;&gt;&lt;strong&gt;Subject:&lt;/strong&gt; Appreciate the effort&lt;/div&gt;  \
    &lt;div class=&quot;message-content&quot;&gt;
        Hey,

        Thanks for giving it a shot. I&#39;m a bit surprised and disappointed that nothing turned up, but I guess these things happen. I was really counting on your skills to bring this to light.

        Unfortunately, without any concrete evidence, I can&#39;t justify sending over the reward. We&#39;re going to have to explore other options, maybe get another hacker to double-check.

        Thanks anyway,
        ConcernedTenant01
\
    &lt;div class=&quot;email-message-buttons&quot;&gt;
        &lt;&lt;if !MindWare.emailIsRead(&quot;Email-LandlordJobFinishBad&quot;)&gt;&gt;\
        &lt;span class=&quot;email-btn-wrapper-span&quot;&gt;\
            @@.email-listing;&lt;&lt;button &quot;Mark as Read&quot;&gt;&gt;\
            &lt;&lt;run MindWare.markEmailAsRead(&quot;Email-LandlordJobFinishBad&quot;)&gt;&gt;\
            &lt;&lt;goto &quot;Email-LandlordJobFinishBad&quot;&gt;&gt;\
            &lt;&lt;/button&gt;&gt;\
            @@\
        &lt;/span&gt;\
        &lt;&lt;/if&gt;&gt;\
    &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; EmailClient]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="251" name="Email-LandlordJobFail" tags="" position="100,3225" size="100,100">&lt;div class=&quot;email-message&quot;&gt;\
    &lt;div class=&quot;from-line&quot;&gt;&lt;strong&gt;From:&lt;/strong&gt; ConcernedTenant01&lt;/div&gt;\
    &lt;div class=&quot;subject-line&quot;&gt;&lt;strong&gt;Subject:&lt;/strong&gt; Thanks for wasting my time&lt;/div&gt;\
    &lt;div class=&quot;message-content&quot;&gt;
        Hey,

        What happened? You took on the job, and then... nothing. Someone else could have taken this job and finished it by now.

        I hope whatever held you back was worth it. Disappointed doesn&#39;t even begin to cover it.

        Goodbye,
        ConcernedTenant01
    &lt;/div&gt;\
    &lt;div class=&quot;email-message-buttons&quot;&gt;
        &lt;&lt;if !MindWare.emailIsRead(&quot;Email-LandlordJobFail&quot;)&gt;&gt;\
        &lt;span class=&quot;email-btn-wrapper-span&quot;&gt;\
            @@.email-listing;&lt;&lt;button &quot;Mark as Read&quot;&gt;&gt;\
            &lt;&lt;run MindWare.markEmailAsRead(&quot;Email-LandlordJobFail&quot;)&gt;&gt;\
            &lt;&lt;goto &quot;Email-LandlordJobFail&quot;&gt;&gt;\
            &lt;&lt;/button&gt;&gt;\
            @@\
        &lt;/span&gt;\
        &lt;&lt;/if&gt;&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; EmailClient]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="252" name="Email-CipherFirstJobIntro" tags="" position="225,3225" size="100,100">&lt;div class=&quot;email-message&quot;&gt;\
    &lt;div class=&quot;from-line&quot;&gt;&lt;strong&gt;From:&lt;/strong&gt; CipherLynx&lt;/div&gt;\
    &lt;div class=&quot;subject-line&quot;&gt;&lt;strong&gt;Subject:&lt;/strong&gt; New Gig&lt;/div&gt;\  
        &lt;div class=&quot;message-content&quot;&gt;
            Hey,

            Been a while since our last sync-up. All good with you? 

            I know you&#39;re gearing up for your first day at BrainFry tomorrow, but there&#39;s a new gig on ByteBunker&#39;s job board, and the pay is better than usual. Might be worth squeezing it in before your wage slave life begins.

            By the way, check out this meme I found. You&#39;ll get a kick out of it.

            - CL
        &lt;/div&gt;
    &lt;div class=&quot;attachment-section&quot;&gt;\
        &lt;div class=&quot;attachments-header&quot;&gt;Attachments:&lt;/div&gt;\
        &lt;div class=&quot;attachment-item&quot;&gt;\
            &lt;i class=&quot;fa fa-paperclip attachment-icon&quot;&gt;&lt;/i&gt;\
            @@.attachment-button;&lt;&lt;button &quot;meme-supergirl.webp&quot;&gt;&gt;
                &lt;&lt;set $cipherMemeOpened = true&gt;&gt;
                &lt;&lt;popover&gt;&gt;[img[imgs/emails/meme-violet.webp]]&lt;&lt;/popover&gt;&gt;
            &lt;&lt;/button&gt;&gt;@@
        &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;
Despite having known each other for a decade and being best friends, you and Cipher have never met in person. Your bond was forged in the virtual fires of &lt;span class=&quot;text-glow&quot;&gt;ByteBunker&lt;/span&gt;, a legendary forum where hackers from around the globe converged, sharing their exploits, tips, and code. 

Nowadays, however, ByteBunker is a shadow of its former self. The rapid evolution of technology and the rise of mainstream social media platforms slowly drained ByteBunker&#39;s bustling corridors. Many of the old guard have moved on — some to corporate jobs, trading black hoodies for blazers, while others went deeper underground, fearing surveillance.

But while the great debates have dwindled, and the number of active users has decreased, there&#39;s still a heartbeat. You visit occasionally, mostly out of habit, and yes, for that job board Cipher has mentioned. 

&lt;span class=&quot;text-glow&quot;&gt;ByteBunker&#39;s job board&lt;/span&gt; remains a gold mine of opportunities. While mainstream job boards have clauses and conditions, ByteBunker&#39;s board is a free-for-all. That&#39;s why it&#39;s filled with requests that range from the mundane, like troubleshooting a stubborn piece of code, to the thrilling, like extracting proprietary data from a code repository. 

While your focus has shifted away from the erratic world of gig work, the lure of a well-paying job is hard to ignore, especially when it promises a substantial financial boost. With your first day at BrainFry not until tomorrow, you realize there&#39;s a window of opportunity here. A quick, lucrative job could be just what you need to ease the financial pressure, at least for now.

&lt;&lt;button &quot;Visit the job board&quot;&gt;&gt;
    &lt;&lt;if $cipherMemeOpened is true&gt;&gt;
        &lt;&lt;goto &quot;JobBoard&quot;&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;script&gt;&gt;
        SugarCube.UI.alert(&quot;You should check the meme Cipher sent you first.&quot;);
        &lt;&lt;/script&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="253" name="Email-CipherFirstJob" tags="" position="350,3225" size="100,100">&lt;div class=&quot;email-message&quot;&gt;\
    &lt;div class=&quot;from-line&quot;&gt;&lt;strong&gt;From:&lt;/strong&gt; CipherLynx&lt;/div&gt;\
    &lt;div class=&quot;subject-line&quot;&gt;&lt;strong&gt;Subject:&lt;/strong&gt; New Gig&lt;/div&gt;\  
        &lt;div class=&quot;message-content&quot;&gt;
            Hey,

            Been a while since our last sync-up. All good with you? 

            I know you&#39;re gearing up for your first day at BrainFry tomorrow, but there&#39;s a new gig on ByteBunker&#39;s job board, and the pay is better than usual. Might be worth squeezing it in before your wage slave life begins.

            By the way, check out this meme I found. You&#39;ll get a kick out of it.

            - CL
        &lt;/div&gt;
    &lt;div class=&quot;attachment-section&quot;&gt;\
        &lt;div class=&quot;attachments-header&quot;&gt;Attachments:&lt;/div&gt;\
        &lt;div class=&quot;attachment-item&quot;&gt;\
            &lt;i class=&quot;fa fa-paperclip attachment-icon&quot;&gt;&lt;/i&gt;\
            @@.attachment-button;&lt;&lt;button &quot;meme-supergirl.webp&quot;&gt;&gt;
                &lt;&lt;popover&gt;&gt;[img[imgs/emails/meme-violet.webp]]&lt;&lt;/popover&gt;&gt;
            &lt;&lt;/button&gt;&gt;@@
        &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;p class=&quot;back-link&quot;&gt;[[Go Back -&gt; EmailClient]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="254" name="PlayGames" tags="" position="475,3225" size="100,100">You boot up your gaming console and browse through your digital library. What will you play today?

&lt;div class=&quot;game-library&quot;&gt;\
    &lt;div class=&quot;game-box&quot; onclick=&quot;SugarCube.Engine.play(&#39;PlayPong&#39;)&quot;&gt;\
        &lt;img src=&quot;imgs/games/pong-boxart.jpg&quot; width=&quot;100%&quot;&gt;\
        &lt;p&gt;Pong&lt;/p&gt;\
    &lt;/div&gt;\
    &lt;&lt;if $snakeGamePurchased&gt;&gt;\
    &lt;div class=&quot;game-box&quot; onclick=&quot;SugarCube.Engine.play(&#39;PlaySnake&#39;)&quot;&gt;\
        &lt;img src=&quot;imgs/games/snake-boxart.jpg&quot; width=&quot;100%&quot;&gt;\
        &lt;p&gt;Snake&lt;/p&gt;\
    &lt;/div&gt;\
    &lt;&lt;/if&gt;&gt;\
    &lt;&lt;if $breakoutGamePurchased&gt;&gt;\
    &lt;div class=&quot;game-box&quot; onclick=&quot;SugarCube.Engine.play(&#39;PlayBreakout&#39;)&quot;&gt;\
        &lt;img src=&quot;imgs/games/breakout-boxart.jpg&quot; width=&quot;100%&quot;&gt;\
        &lt;p&gt;Breakout&lt;/p&gt;\
    &lt;/div&gt;\
    &lt;&lt;/if&gt;&gt;\
    &lt;&lt;if $matchTwoLatexGamePurchased&gt;&gt;\
    &lt;div class=&quot;game-box&quot; onclick=&quot;SugarCube.Engine.play(&#39;PlayMatchTwoLatex&#39;)&quot;&gt;\
        &lt;img src=&quot;imgs/games/matchtwolatex-boxart.jpg&quot; width=&quot;100%&quot;&gt;\
        &lt;p&gt;Match Two (Latex Edition)&lt;/p&gt;\
    &lt;/div&gt;\
    &lt;&lt;/if&gt;&gt;\
&lt;/div&gt;
&lt;p class=&quot;back-link-nomargin&quot;&gt;&lt;&lt;return &quot;Go Back&quot;&gt;&gt;&lt;/p&gt;\
\
&lt;&lt;if $tipBuyMoreGames === false&gt;&gt;
&lt;div id=&quot;tutorial-box&quot;&gt;&lt;div class=&quot;instruction-container-green&quot;&gt;\
    &lt;div class=&quot;instruction-title-bar-green&quot;&gt;Tip: Purchase More Games &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.tipBuyMoreGames = true; document.getElementById(&#39;tutorial-box&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;\
    &lt;div class=&quot;instruction-content&quot;&gt;\
        &lt;p&gt;Who likes to play the same game over and over again? Add visit the File Junkie store to add more titles to your library.&lt;/p&gt;\
    &lt;/div&gt;\
&lt;/div&gt;&lt;/div&gt;\
&lt;&lt;else&gt;&gt;
&lt;&lt;/if&gt;&gt;
\</tw-passagedata><tw-passagedata pid="255" name="PlayMatchTwoLatex" tags="" position="600,3225" size="100,100">&lt;div id=&quot;match-two-game-v2&quot;&gt;
  &lt;div id=&quot;match-two-grid-v2&quot;&gt;&lt;/div&gt;
&lt;/div&gt;\
&lt;p style=&quot;font-size: 14px; text-align: center;&quot;&gt;\
  &lt;strong&gt;Instructions:&lt;/strong&gt; Click on two cards to find a pair. Match all pairs to win.
&lt;/p&gt;\
&lt;p class=&quot;back-link-v2&quot;&gt;
    &lt;&lt;back &quot;Go Back&quot;&gt;&gt;\
&lt;/p&gt;
&lt;&lt;script&gt;&gt;
function initializeMatchTwoGameV2() {
  const gridElement = document.getElementById(&#39;match-two-grid-v2&#39;);
  if (!gridElement) {
    // If the grid element does not exist, don&#39;t try to initialize the game.
    return;
  }
  let selectedCardsV2 = [];
  let matchedPairsV2 = 0;
// Array of image names corresponding to the card pairs
const cardImages = [&#39;matchtwolatex1&#39;, &#39;matchtwolatex2&#39;, &#39;matchtwolatex3&#39;, &#39;matchtwolatex4&#39;, &#39;matchtwolatex5&#39;, &#39;matchtwolatex6&#39;, &#39;matchtwolatex7&#39;, &#39;matchtwolatex8&#39;];

// Prepare card values for 4x4 grid with pairs
const cardValuesV2 = cardImages.concat(cardImages);

// Shuffle the card values
for (let i = cardValuesV2.length - 1; i &gt; 0; i--) {
const j = Math.floor(Math.random() * (i + 1));
[cardValuesV2[i], cardValuesV2[j]] = [cardValuesV2[j], cardValuesV2[i]];
}

// Create the grid
gridElement.innerHTML = &#39;&#39;;
gridElement.className = &#39;match-two-grid-style-v2&#39;;
for (let i = 0; i &lt; 16; i++) {
const card = document.createElement(&#39;div&#39;);
card.className = &#39;match-two-card-v2&#39;;
card.dataset.matchV2 = cardValuesV2[i];
card.innerHTML = &#39;&lt;div class=&quot;match-two-card-front-v2&quot;&gt;&lt;/div&gt;&lt;div class=&quot;match-two-card-back-v2&quot; style=&quot;background-image: url(imgs/games/matchtwo/&#39; + cardValuesV2[i] + &#39;.jpg);&quot;&gt;&lt;/div&gt;&#39;;
gridElement.appendChild(card);

card.addEventListener(&#39;click&#39;, function() {
    if (selectedCardsV2.length &lt; 2 &amp;&amp; !this.classList.contains(&#39;match-two-matched-v2&#39;) &amp;&amp; !this.classList.contains(&#39;match-two-selected-v2&#39;)) {
        this.classList.add(&#39;match-two-selected-v2&#39;);
        selectedCardsV2.push(this);

        if (selectedCardsV2.length === 2) {
            if (selectedCardsV2[0].dataset.matchV2 === selectedCardsV2[1].dataset.matchV2) {
                selectedCardsV2.forEach(card =&gt; card.classList.add(&#39;match-two-matched-v2&#39;));
                matchedPairsV2++;

                // Delay the win check to allow the last pair of cards to be shown flipped
                setTimeout(() =&gt; {
                    if (matchedPairsV2 === 8) {
                        // Game won, all pairs matched!
                        SugarCube.UI.alert(&#39;Congratulations! You have found all pairs.&#39;);
                    }
                }, 500); // Delay time in milliseconds, adjust as needed

                selectedCardsV2 = [];
            } else {
                setTimeout(() =&gt; {
                    selectedCardsV2.forEach(card =&gt; card.classList.remove(&#39;match-two-selected-v2&#39;));
                    selectedCardsV2 = [];
                }, 1000);
            }
        }
    }
});
}
}

$(document).on(&#39;:passagedisplay&#39;, function() {
  // Call the initialize function only if the current passage contains the game grid
  initializeMatchTwoGameV2();
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="256" name="PlayPong" tags="" position="725,3225" size="100,100">&lt;div id=&quot;gameplaybox&quot;&gt;
  &lt;canvas width=&quot;750&quot; height=&quot;585&quot; id=&quot;ponggame&quot;&gt;&lt;/canvas&gt;
&lt;/div&gt;
&lt;p style=&quot;font-size: 14px; text-align: center;&quot;&gt;
  &lt;strong&gt;Controls:&lt;/strong&gt; Enter to start, W/S keys to move paddle.
&lt;/p&gt;
&lt;p class=&quot;back-link&quot;&gt;\
    &lt;&lt;back &quot;Go Back&quot;&gt;&gt;\
&lt;/p&gt;
&lt;&lt;script&gt;&gt;
let isPongGameActive = false; // Flag to control the game loop

function initializePongGame() {
  let gameStarted = false;
  const canvas = document.getElementById(&#39;ponggame&#39;);

  if (!canvas) {
    console.error(&quot;Canvas element not found!&quot;);
    return;
  }

  const context = canvas.getContext(&#39;2d&#39;);
const grid = 15;
const paddleHeight = grid * 5; // 80
const maxPaddleY = canvas.height - grid - paddleHeight;

var paddleSpeed = 6;
var ballSpeed = 5;

const leftPaddle = {
  // start in the middle of the game on the left side
  x: grid * 2,
  y: canvas.height / 2 - paddleHeight / 2,
  width: grid,
  height: paddleHeight,

  // paddle velocity
  dy: 0
};
const rightPaddle = {
  // start in the middle of the game on the right side
  x: canvas.width - grid * 3,
  y: canvas.height / 2 - paddleHeight / 2,
  width: grid,
  height: paddleHeight,

  // paddle velocity
  dy: 0
};
const ball = {
  // start in the middle of the game
  x: canvas.width / 2,
  y: canvas.height / 2,
  width: grid,
  height: grid,

  // keep track of when need to reset the ball position
  resetting: false,

  // ball velocity (start going to the top-right corner)
  dx: ballSpeed,
  dy: -ballSpeed
};

// check for collision between two objects using axis-aligned bounding box (AABB)
// @see https://developer.mozilla.org/en-US/docs/Games/Techniques/2D_collision_detection
function collides(obj1, obj2) {
  return obj1.x &lt; obj2.x + obj2.width &amp;&amp;
         obj1.x + obj1.width &gt; obj2.x &amp;&amp;
         obj1.y &lt; obj2.y + obj2.height &amp;&amp;
         obj1.y + obj1.height &gt; obj2.y;
}

// game loop
  function loop() {
    if (!isPongGameActive) {
      return; // Exit the loop if the game is not active
    }

    requestAnimationFrame(loop);
    context.clearRect(0, 0, canvas.width, canvas.height);

  // Simple AI for right paddle
  const shouldMove = Math.random() &lt; 0.8; // 90% chance to move correctly
  if (shouldMove) {
    if (rightPaddle.y + paddleHeight / 2 &lt; ball.y) {
      rightPaddle.dy = paddleSpeed;
    } else if (rightPaddle.y + paddleHeight / 2 &gt; ball.y) {
      rightPaddle.dy = -paddleSpeed;
    }
  } else {
    rightPaddle.dy = 0;
  }

  // move paddles by their velocity
  leftPaddle.y += leftPaddle.dy;
  rightPaddle.y += rightPaddle.dy;

  // prevent paddles from going through walls
  if (leftPaddle.y &lt; grid) {
    leftPaddle.y = grid;
  }
  else if (leftPaddle.y &gt; maxPaddleY) {
    leftPaddle.y = maxPaddleY;
  }

  if (rightPaddle.y &lt; grid) {
    rightPaddle.y = grid;
  }
  else if (rightPaddle.y &gt; maxPaddleY) {
    rightPaddle.y = maxPaddleY;
  }

  // draw paddles
  context.fillStyle = &#39;white&#39;;
  context.fillRect(leftPaddle.x, leftPaddle.y, leftPaddle.width, leftPaddle.height);
  context.fillRect(rightPaddle.x, rightPaddle.y, rightPaddle.width, rightPaddle.height);
if (gameStarted) {
  // move ball by its velocity
  ball.x += ball.dx;
  ball.y += ball.dy;
}
  // prevent ball from going through walls by changing its velocity
  if (ball.y &lt; grid) {
    ball.y = grid;
    ball.dy *= -1;
  }
  else if (ball.y + grid &gt; canvas.height - grid) {
    ball.y = canvas.height - grid * 2;
    ball.dy *= -1;
  }

  // reset ball if it goes past paddle (but only if we haven&#39;t already done so)
  if ( (ball.x &lt; 0 || ball.x &gt; canvas.width) &amp;&amp; !ball.resetting) {
    ball.resetting = true;

    // give some time for the player to recover before launching the ball again
    setTimeout(() =&gt; {
      ball.resetting = false;
      ball.x = canvas.width / 2;
      ball.y = canvas.height / 2;
    }, 400);
  }

  // check to see if ball collides with paddle. if they do change x velocity
  if (collides(ball, leftPaddle)) {
    ball.dx *= -1;

    // move ball next to the paddle otherwise the collision will happen again
    // in the next frame
    ball.x = leftPaddle.x + leftPaddle.width;
  }
  else if (collides(ball, rightPaddle)) {
    ball.dx *= -1;

    // move ball next to the paddle otherwise the collision will happen again
    // in the next frame
    ball.x = rightPaddle.x - ball.width;
  }

  // draw ball
  context.fillRect(ball.x, ball.y, ball.width, ball.height);

  // draw walls
  context.fillStyle = &#39;lightgrey&#39;;
  context.fillRect(0, 0, canvas.width, grid);
  context.fillRect(0, canvas.height - grid, canvas.width, canvas.height);

  // draw dotted line down the middle
  for (let i = grid; i &lt; canvas.height - grid; i += grid * 2) {
    context.fillRect(canvas.width / 2 - grid / 2, i, grid, grid);
  }
}

// listen to keyboard events to move the paddles
document.addEventListener(&#39;keydown&#39;, function(e) {

  // Commented out right paddle control
  /*
  if (e.which === 38) {
    rightPaddle.dy = -paddleSpeed;
  }
  else if (e.which === 40) {
    rightPaddle.dy = paddleSpeed;
  }
  */

  // w key
  if (e.which === 87) {
    leftPaddle.dy = -paddleSpeed;
  }
  // a key
  else if (e.which === 83) {
    leftPaddle.dy = paddleSpeed;
  }
    if (e.which === 13) {
      gameStarted = true;
    }
  });

// listen to keyboard events to stop the paddle if key is released
document.addEventListener(&#39;keyup&#39;, function(e) {
  if (e.which === 38 || e.which === 40) {
    rightPaddle.dy = 0;
  }

  if (e.which === 83 || e.which === 87) {
    leftPaddle.dy = 0;
  }
});

// start the game
requestAnimationFrame(loop);
}

// Attach the function to the postrender event
$(document).on(&#39;:passagedisplay&#39;, function() {
  if (State.passage === &quot;PlayPong&quot;) {
    isPongGameActive = true;
    initializePongGame();
  } else {
    isPongGameActive = false;
  }
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="257" name="PlaySnake" tags="" position="850,3225" size="100,100">&lt;div id=&quot;gameplaybox&quot;&gt;
&lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;snakegame&quot;&gt;&lt;/canvas&gt;
&lt;/div&gt;
&lt;p style=&quot;font-size: 14px; text-align: center;&quot;&gt;
  &lt;strong&gt;Controls:&lt;/strong&gt; Arrow keys to start and control the snake.
&lt;/p&gt;
&lt;p class=&quot;back-link&quot;&gt;\
    &lt;&lt;back &quot;Go Back&quot;&gt;&gt;\
&lt;/p&gt;

&lt;&lt;script&gt;&gt;
var snake; // Declare outside of initializeSnakeGame for keydownHandler to access
var grid = 16; // Declare outside of initializeSnakeGame for keydownHandler to access
var gameStarted = false;

function keydownHandler(e) {
  gameStarted = true;
  if (snake.dx === 0 &amp;&amp; snake.dy === 0) {
    // Start moving the snake in a default direction (rightwards) if it&#39;s not moving
    snake.dx = grid;
    snake.dy = 0;
  }
  // prevent snake from backtracking on itself by checking that it&#39;s
  // not already moving on the same axis (pressing left while moving
  // left won&#39;t do anything, and pressing right while moving left
  // shouldn&#39;t let you collide with your own body)

  // left arrow key
  if (e.which === 37 &amp;&amp; snake.dx === 0) {
    snake.dx = -grid;
    snake.dy = 0;
  }
  // up arrow key
  else if (e.which === 38 &amp;&amp; snake.dy === 0) {
    snake.dy = -grid;
    snake.dx = 0;
  }
  // right arrow key
  else if (e.which === 39 &amp;&amp; snake.dx === 0) {
    snake.dx = grid;
    snake.dy = 0;
  }
  // down arrow key
  else if (e.which === 40 &amp;&amp; snake.dy === 0) {
    snake.dy = grid;
    snake.dx = 0;
  }
}

function initializeSnakeGame() {
var canvas = document.getElementById(&#39;snakegame&#39;);
var context = canvas.getContext(&#39;2d&#39;);

// the canvas width &amp; height, snake x &amp; y, and the apple x &amp; y, all need to be a multiples of the grid size in order for collision detection to work
// (e.g. 16 * 25 = 400)
var count = 0;

snake = {
  x: 160,
  y: 160,
  dx: 0,  // Set to 0
  dy: 0,  // Set to 0
  cells: [],
  maxCells: 4
};

var apple = {
  x: 320,
  y: 320
};

// get random whole numbers in a specific range
// @see https://stackoverflow.com/a/1527820/2124254
function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min)) + min;
}

// game loop
function loop() {
  requestAnimationFrame(loop);

  if (!gameStarted) {
    // If the game has not started, do not update the snake&#39;s position
    return;
  }

  // slow game loop to 15 fps instead of 60 (60/15 = 4)
  if (++count &lt; 4) {
    return;
  }

  count = 0;
  context.clearRect(0,0,canvas.width,canvas.height);

  // move snake by it&#39;s velocity
  snake.x += snake.dx;
  snake.y += snake.dy;

  // wrap snake position horizontally on edge of screen
  if (snake.x &lt; 0) {
    snake.x = canvas.width - grid;
  }
  else if (snake.x &gt;= canvas.width) {
    snake.x = 0;
  }

  // wrap snake position vertically on edge of screen
  if (snake.y &lt; 0) {
    snake.y = canvas.height - grid;
  }
  else if (snake.y &gt;= canvas.height) {
    snake.y = 0;
  }

  // keep track of where snake has been. front of the array is always the head
  snake.cells.unshift({x: snake.x, y: snake.y});

  // remove cells as we move away from them
  if (snake.cells.length &gt; snake.maxCells) {
    snake.cells.pop();
  }

  // draw apple
  context.fillStyle = &#39;red&#39;;
  context.fillRect(apple.x, apple.y, grid-1, grid-1);

  // draw snake one cell at a time
  context.fillStyle = &#39;green&#39;;
  snake.cells.forEach(function(cell, index) {

    // drawing 1 px smaller than the grid creates a grid effect in the snake body so you can see how long it is
    context.fillRect(cell.x, cell.y, grid-1, grid-1);

    // snake ate apple
    if (cell.x === apple.x &amp;&amp; cell.y === apple.y) {
      snake.maxCells++;

      // canvas is 400x400 which is 25x25 grids
      apple.x = getRandomInt(0, 25) * grid;
      apple.y = getRandomInt(0, 25) * grid;
    }

    // check collision with all cells after this one (modified bubble sort)
    for (var i = index + 1; i &lt; snake.cells.length; i++) {

      // snake occupies same space as a body part. reset game
      if (cell.x === snake.cells[i].x &amp;&amp; cell.y === snake.cells[i].y) {
        snake.x = 160;
        snake.y = 160;
        snake.cells = [];
        snake.maxCells = 4;
        snake.dx = grid;
        snake.dy = 0;

        apple.x = getRandomInt(0, 25) * grid;
        apple.y = getRandomInt(0, 25) * grid;
      }
    }
  });
}

// start the game
requestAnimationFrame(loop);
}

// Attach the function to the postrender event
$(document).one(&#39;:passagedisplay&#39;, function() {
  var canvas = document.getElementById(&#39;snakegame&#39;);
  if (canvas) {
    initializeSnakeGame();
    document.addEventListener(&#39;keydown&#39;, keydownHandler);
  }
});
// Temporarily comment out or remove this block to test
// $(document).one(&#39;:passageend&#39;, function() {
//   document.removeEventListener(&#39;keydown&#39;, keydownHandler);
// });
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="258" name="PlayBreakout" tags="" position="975,3225" size="100,100">&lt;div id=&quot;gameplaybox&quot;&gt;
  &lt;canvas width=&quot;400&quot; height=&quot;500&quot; id=&quot;breakgame&quot;&gt;&lt;/canvas&gt;
&lt;/div&gt;
&lt;p style=&quot;font-size: 14px; text-align: center;&quot;&gt;
  &lt;strong&gt;Controls:&lt;/strong&gt; Enter to start, Left/Right arrows to move paddle.
&lt;/p&gt;
&lt;p class=&quot;back-link&quot;&gt;\
    &lt;&lt;back &quot;Go Back&quot;&gt;&gt;\
&lt;/p&gt;

&lt;&lt;script&gt;&gt;
let isBreakGameActive = false; // Flag to control the game loop

function initializeBreakGame() {
  const canvas = document.getElementById(&#39;breakgame&#39;);
  if (!canvas) {
    console.error(&quot;Canvas element not found!&quot;);
    return;
  }

  const context = canvas.getContext(&#39;2d&#39;);

// each row is 14 bricks long. the level consists of 6 blank rows then 8 rows
// of 4 colors: red, orange, green, and yellow
const level1 = [
  [],
  [],
  [],
  [],
  [],
  [],
  [&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;],
  [&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;,&#39;R&#39;],
  [&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;],
  [&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;,&#39;O&#39;],
  [&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;],
  [&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;,&#39;G&#39;],
  [&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;],
  [&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;,&#39;Y&#39;]
];

// create a mapping between color short code (R, O, G, Y) and color name
const colorMap = {
  &#39;R&#39;: &#39;red&#39;,
  &#39;O&#39;: &#39;orange&#39;,
  &#39;G&#39;: &#39;green&#39;,
  &#39;Y&#39;: &#39;yellow&#39;
};

// use a 2px gap between each brick
const brickGap = 2;
const brickWidth = 25;
const brickHeight = 12;

// the wall width takes up the remaining space of the canvas width. with 14 bricks
// and 13 2px gaps between them, thats: 400 - (14 * 25 + 2 * 13) = 24px. so each
// wall will be 12px
const wallSize = 12;
const bricks = [];

// create the level by looping over each row and column in the level1 array
// and creating an object with the bricks position (x, y) and color
for (let row = 0; row &lt; level1.length; row++) {
  for (let col = 0; col &lt; level1[row].length; col++) {
    const colorCode = level1[row][col];

    bricks.push({
      x: wallSize + (brickWidth + brickGap) * col,
      y: wallSize + (brickHeight + brickGap) * row,
      color: colorMap[colorCode],
      width: brickWidth,
      height: brickHeight
    });
  }
}

const paddle = {
  // place the paddle horizontally in the middle of the screen
  x: canvas.width / 2 - brickWidth / 2,
  y: 440,
  width: brickWidth,
  height: brickHeight,

  // paddle x velocity
  dx: 0
};

const ball = {
  x: 130,
  y: 260,
  width: 5,
  height: 5,

  // how fast the ball should go in either the x or y direction
  speed: 2,

  // ball velocity
  dx: 0,
  dy: 0
};

// check for collision between two objects using axis-aligned bounding box (AABB)
// @see https://developer.mozilla.org/en-US/docs/Games/Techniques/2D_collision_detection
function collides(obj1, obj2) {
  return obj1.x &lt; obj2.x + obj2.width &amp;&amp;
         obj1.x + obj1.width &gt; obj2.x &amp;&amp;
         obj1.y &lt; obj2.y + obj2.height &amp;&amp;
         obj1.y + obj1.height &gt; obj2.y;
}

// game loop
  function loop() {
    if (!isBreakGameActive) {
      return; // Exit the loop if the game is not active
    }

    requestAnimationFrame(loop);

    context.clearRect(0, 0, canvas.width, canvas.height);

  // move paddle by it&#39;s velocity
  paddle.x += paddle.dx;

  // prevent paddle from going through walls
  if (paddle.x &lt; wallSize) {
    paddle.x = wallSize
  }
  else if (paddle.x + brickWidth &gt; canvas.width - wallSize) {
    paddle.x = canvas.width - wallSize - brickWidth;
  }

  // move ball by it&#39;s velocity
  ball.x += ball.dx;
  ball.y += ball.dy;

  // prevent ball from going through walls by changing its velocity
  // left &amp; right walls
  if (ball.x &lt; wallSize) {
    ball.x = wallSize;
    ball.dx *= -1;
  }
  else if (ball.x + ball.width &gt; canvas.width - wallSize) {
    ball.x = canvas.width - wallSize - ball.width;
    ball.dx *= -1;
  }
  // top wall
  if (ball.y &lt; wallSize) {
    ball.y = wallSize;
    ball.dy *= -1;
  }

  // reset ball if it goes below the screen
  if (ball.y &gt; canvas.height) {
    ball.x = 130;
    ball.y = 260;
    ball.dx = 0;
    ball.dy = 0;
    SugarCube.UI.alert(&quot;You lose!&quot;);
  }

  // check to see if ball collides with paddle. if they do change y velocity
  if (collides(ball, paddle)) {
    ball.dy *= -1;

    // move ball above the paddle otherwise the collision will happen again
    // in the next frame
    ball.y = paddle.y - ball.height;
  }

  // check to see if ball collides with a brick. if it does, remove the brick
  // and change the ball velocity based on the side the brick was hit on
  for (let i = 0; i &lt; bricks.length; i++) {
    const brick = bricks[i];
    if (collides(ball, brick)) {
      // Remove the brick from the array
      bricks.splice(i, 1);

      // Change ball velocity based on collision side
      if (ball.y + ball.height - ball.speed &lt;= brick.y ||
          ball.y &gt;= brick.y + brick.height - ball.speed) {
        ball.dy *= -1;
      } else {
        ball.dx *= -1;
      }

      // Check if there are any bricks left
      if (bricks.length === 0) {
        // Display winning message and reset the game
        SugarCube.UI.alert(&quot;You win!&quot;);
        resetGame();
        return; // Exit the function to avoid further execution
      }

      break; // Exit the loop since the brick has been processed
    }
  }

  function resetGame() {
    // Reset the ball position and velocity
    ball.x = 130;
    ball.y = 260;
    ball.dx = 0;
    ball.dy = 0;

    // Optionally reset the level
    initializeBreakGame(); // Recreates the level and resets the game environment

    // Make sure to set the game active flag to true if the game loop depends on it
    isBreakGameActive = true;
  }

  // draw walls
  context.fillStyle = &#39;lightgrey&#39;;
  context.fillRect(0, 0, canvas.width, wallSize);
  context.fillRect(0, 0, wallSize, canvas.height);
  context.fillRect(canvas.width - wallSize, 0, wallSize, canvas.height);

  // draw ball if it&#39;s moving
  if (ball.dx || ball.dy) {
    context.fillRect(ball.x, ball.y, ball.width, ball.height);
  }

  // draw bricks
  bricks.forEach(function(brick) {
    context.fillStyle = brick.color;
    context.fillRect(brick.x, brick.y, brick.width, brick.height);
  });

  // draw paddle
  context.fillStyle = &#39;cyan&#39;;
  context.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);
}

// listen to keyboard events to move the paddle
document.addEventListener(&#39;keydown&#39;, function(e) {
  // left arrow key
  if (e.which === 37) {
    paddle.dx = -3;
  }
  // right arrow key
  else if (e.which === 39) {
    paddle.dx = 3;
  }

  // space key
  // if they ball is not moving, we can launch the ball using the space key. ball
  // will move towards the bottom right to start
  if (ball.dx === 0 &amp;&amp; ball.dy === 0 &amp;&amp; e.which === 13) {
    ball.dx = ball.speed;
    ball.dy = ball.speed;
  }
});

// listen to keyboard events to stop the paddle if key is released
document.addEventListener(&#39;keyup&#39;, function(e) {
  if (e.which === 37 || e.which === 39) {
    paddle.dx = 0;
  }
});

// start the game
requestAnimationFrame(loop);
}

// Attach the function to the postrender event
$(document).on(&#39;:passagedisplay&#39;, function(ev) {
  if (State.passage === &quot;PlayBreakout&quot;) {
    isBreakGameActive = true;
    initializeBreakGame(); // Make sure this properly sets up the game from scratch
  } else {
    isBreakGameActive = false;
  }
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="259" name="HomeBacklog" tags="" position="1100,3225" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/starting-apartment.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;if ($dayOfWeek === &quot;Monday&quot; || $dayOfWeek === &quot;Tuesday&quot; || $dayOfWeek === &quot;Wednesday&quot; || $dayOfWeek === &quot;Thursday&quot; || $dayOfWeek === &quot;Friday&quot;) &amp;&amp; $workedToday === false &amp;&amp; $currentJob === &quot;BrainFry&quot;&gt;&gt;\
    Today is $dayOfWeek, and you haven&#39;t been to work yet. You should &lt;&lt;link &quot;head to BrainFry&quot; &quot;BrainFry&quot;&gt;&gt;&lt;&lt;/link&gt;&gt; and earn some money.\ 
&lt;&lt;elseif $actionPoints === 0&gt;&gt;\
    You feel exhausted. It&#39;s time to [[rest and rejuvenate-&gt;GoToSleep]].
&lt;&lt;else&gt;&gt;\
    Amidst the city&#39;s noise, your apartment offers solace. What would you like to do?\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;nobr&gt;&gt;&lt;div class=&quot;hub-section&quot;&gt;
    &lt;h4&gt;Activities&lt;/h4&gt;
    &lt;button class=&quot;hub-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;Computer&#39;)&quot;&gt;🖥️ Use computer&lt;/button&gt;&lt;br&gt;
    &lt;button class=&quot;hub-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(1, &#39;WatchTV&#39;)&quot;&gt;📺 Watch TV &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/button&gt;
    &lt;button class=&quot;hub-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(1, &#39;PlayGames&#39;)&quot;&gt;🎮 Play games &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/button&gt;
    &lt;button class=&quot;hub-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(1, &#39;ListenToMusic&#39;)&quot;&gt;🎧 Listen to music &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/button&gt;&lt;br&gt;
    /*&lt;button class=&quot;hub-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;MakeSnack&#39;)&quot;&gt;🍕 Make a snack&lt;/button&gt;*/
    &lt;button class=&quot;hub-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;GoToSleep&#39;)&quot;&gt;🛌 Go to sleep&lt;/button&gt;&lt;br&gt;
    &lt;button class=&quot;hub-button&quot; onclick=&quot;SugarCube.State.variables.goOutsideGoBackPassage = &#39;HomeBacklog&#39;; SugarCube.Engine.play(&#39;GoOutside&#39;)&quot;&gt;🚪 Go outside&lt;/button&gt;
&lt;/div&gt;&lt;&lt;/nobr&gt;&gt;
\
&lt;&lt;if $tutorialActionPoints === false&gt;&gt;\
&lt;div id=&quot;tutorial-box-1&quot;&gt;&lt;div class=&quot;instruction-container-blue&quot;&gt;\
    &lt;div class=&quot;instruction-title-bar-blue&quot;&gt;Tutorial: Action Points &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.tutorialActionPoints = true; document.getElementById(&#39;tutorial-box-1&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;\
    &lt;div class=&quot;instruction-content&quot;&gt;\
      &lt;p&gt;You have a limited number of Action Points (APs) available each day to perform various activities.&lt;/p&gt;\
      &lt;p&gt;The cost of an activity is indicated by &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt; icons, with each icon representing one AP. For example, &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt; means -1 AP, &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt; means -2 APs, and so on.&lt;/p&gt;\
      &lt;p&gt;Once you&#39;ve used up all your APs, you&#39;ll need to sleep to replenish them.&lt;/p&gt;\
    &lt;/div&gt;\
&lt;/div&gt;
&lt;/div&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
\
/*&lt;&lt;if $warningSleep === false&gt;&gt;\
&lt;div id=&quot;tutorial-box-2&quot;&gt;&lt;div class=&quot;instruction-container-red&quot;&gt;\
    &lt;div class=&quot;instruction-title-bar-red&quot;&gt;Warning: Sleeping Currently Doesn&#39;t Advance Time &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.warningSleep = true; document.getElementById(&#39;tutorial-box-2&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;\
    &lt;div class=&quot;instruction-content&quot;&gt;\
        &lt;p&gt;Please note that in the current version of the game, sleeping will reset your Action Points, but it won&#39;t advance the in-game time. This is due to the game being in a very early stage, with only the first mission implemented. The functionality to advance time through sleeping will be introduced in the next game update - together with more content to enjoy.&lt;/p&gt;\
    &lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
\*/</tw-passagedata><tw-passagedata pid="260" name="WatchTV" tags="" position="1225,3225" size="100,100">&lt;div class=&quot;tv-frame&quot;&gt;
    &lt;div class=&quot;tv-screen&quot; id=&quot;tvDisplay&quot;&gt;
        &lt;!-- GIF will be displayed here --&gt;
    &lt;/div&gt;\
&lt;/div&gt;\
\
&lt;!-- Channel buttons --&gt;\
&lt;div class=&quot;channel-buttons&quot;&gt;\
&lt;!--     &lt;button class=&quot;channel-button&quot; id=&quot;newsButton&quot;&gt;News&lt;/button&gt;--&gt;\
    &lt;button class=&quot;channel-button&quot; id=&quot;weatherButton&quot;&gt;Weather&lt;/button&gt;\
    &lt;button class=&quot;channel-button&quot; id=&quot;comedyButton&quot;&gt;Comedy&lt;/button&gt;\
    &lt;&lt;if $adultChannelPurchased&gt;&gt;\
        &lt;button class=&quot;channel-button&quot; id=&quot;adultButton&quot;&gt;Passion TV&lt;/button&gt;\
    &lt;&lt;/if&gt;&gt;&lt;/div&gt;\
&lt;!-- ... and so on for other channels ... --&gt;
&lt;p class=&quot;back-link-nomargin&quot;&gt;\
    &lt;&lt;return &quot;Go Back&quot;&gt;&gt;\
&lt;/p&gt;\
\
&lt;&lt;if $tipBuyMoreChannels === false&gt;&gt;
&lt;div id=&quot;tutorial-box&quot;&gt;&lt;div class=&quot;instruction-container-green&quot;&gt;\
    &lt;div class=&quot;instruction-title-bar-green&quot;&gt;Tip: Purchase More Channels &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.tipBuyMoreChannels = true; document.getElementById(&#39;tutorial-box&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;\
    &lt;div class=&quot;instruction-content&quot;&gt;\
        &lt;p&gt;Want more entertainment? Check out if there are other TV channels available at the File Junkie online store.&lt;/p&gt;\
    &lt;/div&gt;\
&lt;/div&gt;&lt;/div&gt;\
&lt;&lt;else&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;script&gt;&gt;
State.variables.weatherGifsPlaying = MindWare.getRandomIndex(State.variables.weatherGifs);
State.variables.newsGifsPlaying = MindWare.getRandomIndex(State.variables.newsGifs);
State.variables.adultGifsPlaying = MindWare.getRandomIndex(State.variables.adultGifs);
State.variables.comedyGifsPlaying = MindWare.getRandomIndex(State.variables.comedyGifs);

setup.currentChannel = &#39;&#39;;
setup.isTvOn = false;

setup.displayChannelGif = function(channel) {
    // Access the appropriate GIF array and playing index
    const channelGifs = State.variables[channel + &#39;Gifs&#39;];
    const playingIndex = State.variables[channel + &#39;GifsPlaying&#39;];

    // Check if the channel is already on
    const displayElement = document.getElementById(&#39;tvDisplay&#39;);
    if (setup.currentChannel === channel &amp;&amp; setup.isTvOn) {
        displayElement.innerHTML = &#39;&#39;;
        setup.isTvOn = false;
        setup.currentChannel = &#39;&#39;;
        return;
    }

    // Check for the existence and non-emptiness of the array
    if (!channelGifs || channelGifs.length === 0 || playingIndex === undefined || playingIndex === -1) {
        displayElement.innerHTML = `&lt;p&gt;No content available for the ${channel} channel.&lt;/p&gt;`;
        return;
    }

    // Display the GIF based on the playing index
    const gifToDisplay = channelGifs[playingIndex];
    displayElement.innerHTML = `&lt;img src=&quot;${gifToDisplay}&quot; width=&quot;100%&quot; alt=&quot;${channel} Channel Content&quot;&gt;`;
    setup.isTvOn = true;
    setup.currentChannel = channel;
};

$(document).ready(function() {
    $(&quot;#weatherButton&quot;).click(function() {
        setup.displayChannelGif(&#39;weather&#39;);
    });
    $(&quot;#comedyButton&quot;).click(function() {
        setup.displayChannelGif(&#39;comedy&#39;);
    });
    $(&quot;#adultButton&quot;).click(function() {
        setup.displayChannelGif(&#39;adult&#39;);
    });
    // Add handlers for other channels as necessary
});

&lt;&lt;/script&gt;&gt;
/* OLD SCRIPT - Go through the entire array in a random order
&lt;&lt;script&gt;&gt;
setup.displayWeatherGif = function() {
    const gifs = State.variables.weatherGifs;
    const randomGif = gifs[Math.floor(Math.random() * gifs.length)];
    document.getElementById(&#39;tvDisplay&#39;).innerHTML = `&lt;img src=&quot;${randomGif}&quot; width=&quot;100%&quot; alt=&quot;TV Content&quot;&gt;`;
}

setup.displayNewsGif = function() {
    const gifs = State.variables.newsGifs;
    const randomGif = gifs[Math.floor(Math.random() * gifs.length)];
    document.getElementById(&#39;tvDisplay&#39;).innerHTML = `&lt;img src=&quot;${randomGif}&quot; width=&quot;100%&quot; alt=&quot;TV Content&quot;&gt;`;
}

setup.displayMoviesGif = function() {
    const gifs = State.variables.comedyGifs;
    const randomGif = gifs[Math.floor(Math.random() * gifs.length)];
    document.getElementById(&#39;tvDisplay&#39;).innerHTML = `&lt;img src=&quot;${randomGif}&quot; width=&quot;100%&quot; alt=&quot;TV Content&quot;&gt;`;
}

setup.displayAdultGif = function() {
    const gifs = State.variables.adultGifs;
    const randomGif = gifs[Math.floor(Math.random() * gifs.length)];
    document.getElementById(&#39;tvDisplay&#39;).innerHTML = `&lt;img src=&quot;${randomGif}&quot; width=&quot;100%&quot; alt=&quot;TV Content&quot;&gt;`;
}

$(document).ready(function() {
    $(&quot;#newsButton&quot;).click(function() {
        setup.displayNewsGif();
    });
    $(&quot;#weatherButton&quot;).click(function() {
        setup.displayWeatherGif();
    });
    $(&quot;#moviesButton&quot;).click(function() {
        setup.displayMoviesGif();
    });
    $(&quot;#adultButton&quot;).click(function() {
        setup.displayAdultGif();
    });
});
&lt;&lt;/script&gt;&gt;
 */</tw-passagedata><tw-passagedata pid="261" name="BrainFry" tags="" position="100,3350" size="100,100">&lt;&lt;if $brainFryFirstVisit&gt;&gt;
&lt;&lt;include &quot;BrainFry-FirstVisit&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;\
&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/brainfry-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;if $workedToday&gt;&gt;\   
    You&#39;ve already worked today. You can [[go home-&gt;$playerHome]].
&lt;&lt;else&gt;&gt;\
    You haven&#39;t done any &lt;&lt;link &quot;work&quot;&gt;&gt;&lt;&lt;run MindWare.processActionButtonClick(3, &#39;WorkBrainFry&#39;)&gt;&gt;&lt;&lt;/link&gt;&gt; today.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;nobr&gt;&gt;&lt;div class=&quot;office-hub&quot;&gt;
    &lt;h4&gt;Activities&lt;/h4&gt;
    &lt;button class=&quot;office-button action-point-button&quot; onclick=&quot;if (SugarCube.State.variables.workedAtBrainFryToday) { SugarCube.UI.alert(&#39;You have already worked at BrainFry today. Come back tomorrow!&#39;); } else { MindWare.processActionButtonClick(3, &#39;WorkBrainFry&#39;); }&quot;&gt;🖥️ Work &lt;span class=&quot;action-point-icon&quot;&gt;⚡⚡⚡&lt;/span&gt;&lt;/button&gt;

    &lt;&lt;if $aiCodingAssistantChoice === &quot;codebuddy&quot; &amp;&amp; $codeBuddyInstalled === true &amp;&amp; $codeBuddyEnabled === true&gt;&gt;
        &lt;button class=&quot;office-button action-point-button&quot; onclick=&quot;if (SugarCube.State.variables.workedAtBrainFryToday) { SugarCube.UI.alert(&#39;You have already worked with CodeBuddy at BrainFry today. Come back tomorrow!&#39;); } else { MindWare.processActionButtonClick(1, &#39;WorkBrainFry-CodeBuddy&#39;); }&quot;&gt;🤖 Work with CodeBuddy &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/button&gt;
    &lt;&lt;elseif $aiCodingAssistantChoice === &quot;devdroid&quot; &amp;&amp; $devDroidInstalled === true&gt;&gt;
        &lt;button class=&quot;office-button action-point-button&quot; onclick=&quot;if (SugarCube.State.variables.workedAtBrainFryToday) { SugarCube.UI.alert(&#39;You have already worked with DevDroid at BrainFry today. Come back tomorrow!&#39;); } else { MindWare.processActionButtonClick(1, &#39;WorkBrainFry-DevDroid&#39;); }&quot;&gt;🤖 Work with DevDroid &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/button&gt;

    &lt;&lt;elseif $aiCodingAssistantChoice === &quot;codebuddy&quot; &amp;&amp; !$codeBuddyInstalled&gt;&gt;   
        &lt;button class=&quot;office-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(1, &#39;WorkBrainFry-CodeBuddy-Setup&#39;)&quot;&gt;🤖 Set up CodeBuddy &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/button&gt;
    &lt;&lt;elseif $aiCodingAssistantChoice === &quot;devdroid&quot; &amp;&amp; !$devDroidInstalled&gt;&gt;        
        &lt;button class=&quot;office-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(1, &#39;WorkBrainFry-DevDroid-Setup&#39;)&quot;&gt;🤖 Set up DevDroid &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/button&gt;  
    &lt;&lt;/if&gt;&gt;

    &lt;&lt;if $aiCodingAssistantChoice === &quot;codebuddy&quot; &amp;&amp; $codeBuddyInstalled === true&gt;&gt;
        &lt;&lt;if $codeBuddyEnabled === true&gt;&gt;
            &lt;button class=&quot;office-button action-point-button&quot; onclick=&quot;SugarCube.State.variables[&#39;codeBuddyEnabled&#39;] = false; SugarCube.Engine.play(&#39;BrainFry&#39;);&quot;&gt;
                ⏸️ Pause your CodeBuddy subscription &lt;span class=&quot;action-point-icon&quot;&gt;&lt;/span&gt;
            &lt;/button&gt;
        &lt;&lt;elseif $codeBuddyEnabled === false&gt;&gt;
            &lt;&lt;if $codeBuddyDebt&gt;&gt;
                &lt;button class=&quot;office-button action-point-button&quot; onclick=&quot;if (SugarCube.State.variables[&#39;playerMoney&#39;] &gt;= 500) {SugarCube.State.variables[&#39;playerMoney&#39;] -= 500; SugarCube.State.variables[&#39;codeBuddyDebt&#39;] = false; SugarCube.State.variables[&#39;codeBuddyEnabled&#39;] = true; SugarCube.Engine.play(&#39;BrainFry&#39;);} else {SugarCube.UI.alert(&#39;You do not have enough money to renew your subscription.&#39;);}&quot;&gt;
                    💳 Renew your CodeBuddy subscription &lt;span class=&quot;action-point-icon&quot;&gt;&lt;/span&gt;
                &lt;/button&gt;
            &lt;&lt;else&gt;&gt;
                &lt;button class=&quot;office-button action-point-button&quot; onclick=&quot;SugarCube.State.variables[&#39;codeBuddyEnabled&#39;] = true; SugarCube.Engine.play(&#39;BrainFry&#39;);&quot;&gt;
                    ▶️ Resume your CodeBuddy subscription &lt;span class=&quot;action-point-icon&quot;&gt;&lt;/span&gt;
                &lt;/button&gt;
            &lt;&lt;/if&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/if&gt;&gt;

    &lt;br&gt;
    &lt;&lt;if Object.values($trixBrainFryDialogs).some(dialog =&gt; dialog.isNew)&gt;&gt;
        &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;TalkTrixBrainFry&#39;)&quot;&gt;💬 Talk with Trix 🆕 &lt;/button&gt;
    &lt;&lt;else&gt;&gt;
        &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;TalkTrixBrainFry&#39;)&quot;&gt;💬 Talk with Trix &lt;/button&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if Object.values($rayBrainFryDialogs).some(dialog =&gt; dialog.isNew)&gt;&gt;
        &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;TalkRayBrainFry&#39;)&quot;&gt;💬 Talk with Ray 🆕 &lt;/button&gt;
    &lt;&lt;else&gt;&gt;
        &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;TalkRayBrainFry&#39;)&quot;&gt;💬 Talk with Ray &lt;/button&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if Object.values($drakeBrainFryDialogs).some(dialog =&gt; dialog.isNew)&gt;&gt;
        &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;TalkDrakeBrainFry&#39;)&quot;&gt;💬 Talk with the boss 🆕 &lt;/button&gt;&lt;br&gt;
    &lt;&lt;else&gt;&gt;
        &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;TalkDrakeBrainFry&#39;)&quot;&gt;💬 Talk with the boss &lt;/button&gt;&lt;br&gt;
    &lt;&lt;/if&gt;&gt;
    /*&lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;TakeBreak&#39;)&quot;&gt;☕ Take a break&lt;/button&gt;&lt;br&gt;*/
        &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.State.variables.goOutsideGoBackPassage = &#39;BrainFry&#39;; SugarCube.Engine.play(&#39;GoOutside&#39;)&quot;&gt;🚪 Go outside&lt;/button&gt;
&lt;/div&gt;&lt;&lt;/nobr&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="262" name="WorkBrainFry" tags="" position="225,3350" size="100,100">&lt;&lt;include &quot;Minigame-Coding&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="263" name="TalkTrixBrainFry" tags="" position="350,3350" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/trix/trix-brainfry-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
\
&lt;&lt;if $relationshipTrix &lt;= 20&gt;&gt;\
    &lt;&lt;trix&gt;&gt;Why are you even here?&lt;&lt;/trix&gt;&gt;\
&lt;&lt;elseif $relationshipTrix &lt;= 40&gt;&gt;\
    &lt;&lt;trix&gt;&gt;What do you want this time?&lt;&lt;/trix&gt;&gt;\
&lt;&lt;elseif $relationshipTrix &lt;= 60&gt;&gt;\
    &lt;&lt;trix&gt;&gt;What do you want?&lt;&lt;/trix&gt;&gt;\
&lt;&lt;elseif $relationshipTrix &lt;= 80&gt;&gt;\
    &lt;&lt;trix&gt;&gt;Hey, what can I do for you?&lt;&lt;/trix&gt;&gt;\
&lt;&lt;else&gt;&gt;\
    &lt;&lt;trix&gt;&gt;Hi! I was just thinking about you. What brings you here?&lt;&lt;/trix&gt;&gt;\
&lt;&lt;/if&gt;&gt;
&lt;div id=&quot;dialog-content&quot; class=&quot;dialog-options&quot;&gt;&lt;&lt;nobr&gt;&gt;
    &lt;p&gt;&lt;strong&gt;Choose a topic to discuss with Trix:&lt;/strong&gt;&lt;/p&gt;
&lt;&lt;set _hasUnlockedTopics = false&gt;&gt; 
&lt;&lt;for _topic, _data range $trixBrainFryDialogs&gt;&gt;
    &lt;&lt;if _data.unlocked&gt;&gt;
        &lt;&lt;set _hasUnlockedTopics = true&gt;&gt;
        &lt;&lt;set _buttonText = _topic&gt;&gt;
        &lt;&lt;set _tempPassage = _data.passage&gt;&gt;
        &lt;&lt;if _data.isNew&gt;&gt;
            &lt;&lt;set _buttonText += &quot; 🆕&quot;&gt;&gt;
        &lt;&lt;/if&gt;&gt;
        &lt;&lt;set _buttonText += &quot; &lt;span class=&#39;action-point-icon&#39;&gt;⚡&lt;/span&gt;&quot;&gt;&gt;
        &lt;&lt;capture _tempPassage _buttonText&gt;&gt;
            @@.choicebutton;
            &lt;&lt;button _buttonText&gt;&gt; 
                &lt;&lt;if MindWare.processActionButtonClickNoPassage(1)&gt;&gt;
                    &lt;&lt;replace &quot;#dialog-content&quot;&gt;&gt;&lt;&lt;include _tempPassage&gt;&gt;&lt;&lt;/replace&gt;&gt;
                &lt;&lt;/if&gt;&gt;
            &lt;&lt;/button&gt;&gt;@@
            &lt;br&gt;
        &lt;&lt;/capture&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;if not _hasUnlockedTopics&gt;&gt; 
    &lt;p&gt;You have nothing to discuss with Trix right now.&lt;/p&gt;
    &lt;br&gt;
&lt;&lt;/if&gt;&gt;

&lt;p class=&quot;back-link&quot;&gt;
    [[&quot;Go Back&quot;|BrainFry]]
&lt;/p&gt;
&lt;&lt;/nobr&gt;&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="264" name="Trix-How do you like it here at BrainFry?" tags="" position="475,3350" size="100,100">&lt;&lt;player&gt;&gt;How do you like working here at BrainFry, Trix?&lt;&lt;/player&gt;&gt;
&lt;&lt;trix&gt;&gt;It&#39;s fine. I&#39;ve had much worse jobs in the past.&lt;&lt;/trix&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;I&#39;m afraid to ask what kind of jobs she&#39;s referring to...&lt;/div&gt;
&lt;&lt;player&gt;&gt;You seemed a bit annoyed by Drake earlier. Is everything okay with him as a boss?&lt;&lt;/player&gt;&gt;
&lt;&lt;trix&gt;&gt;Oh, Drake? He&#39;s alright, I guess. A bit chauvinistic at times, and definitely self-absorbed, but he&#39;s always been fair. I don&#39;t mind him, really.&lt;&lt;/trix&gt;&gt;
\
&lt;&lt;if $relationshipTrix &gt; 50&gt;&gt;\
    &lt;&lt;trix&gt;&gt;You know, you seem like a pleasant person to talk to for a change.&lt;&lt;/trix&gt;&gt;
    &lt;&lt;player&gt;&gt;Thanks, Trix. That&#39;s nice of you to say.&lt;&lt;/player&gt;&gt;
&lt;&lt;/if&gt;&gt;\
\
&lt;&lt;player&gt;&gt;So, what exactly do you do here?&lt;&lt;/player&gt;&gt;
&lt;&lt;trix&gt;&gt;I design various visual assets for BrainFry&#39;s virtual reality experiences.&lt;&lt;/trix&gt;&gt;
&lt;&lt;player&gt;&gt;What kind of assets?&lt;&lt;/player&gt;&gt;
&lt;&lt;trix&gt;&gt;You know... all kinds. Everything from logos to brainmelting VR porn. It&#39;s quite a range.&lt;&lt;/trix&gt;&gt;
&lt;&lt;player&gt;&gt;Do you enjoy that kind of design work?&lt;&lt;/player&gt;&gt;
&lt;&lt;trix&gt;&gt;It pays the bills. Can&#39;t really complain.&lt;&lt;/trix&gt;&gt;
&lt;&lt;trix&gt;&gt;Hey, I need to get back to work now. Let&#39;s talk later, okay?&lt;&lt;/trix&gt;&gt;
&lt;&lt;player&gt;&gt;Sure, I look forward to it.&lt;&lt;/player&gt;&gt;
&lt;&lt;set $relationshipTrix += 1&gt;&gt;\
\
    &lt;p class=&quot;back-link&quot;&gt;\
        &lt;&lt;link &quot;Go Back&quot;&gt;&gt;
            &lt;&lt;set $trixBrainFryDialogs[&quot;How do you like it here at BrainFry?&quot;].isNew = false&gt;&gt;
            &lt;&lt;set $trixBrainFryDialogs[&quot;How do you like it here at BrainFry?&quot;].unlocked = false&gt;&gt;
            &lt;&lt;goto &quot;TalkTrixBrainFry&quot;&gt;&gt;
        &lt;&lt;/link&gt;&gt;
    &lt;/p&gt;</tw-passagedata><tw-passagedata pid="265" name="TalkRayBrainFry" tags="" position="600,3350" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/ray/ray-brainfry-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
\
&lt;&lt;if $relationshipRay &lt;= 20&gt;&gt;\
    &lt;&lt;ray&gt;&gt;Oh, it&#39;s you. Did you find a bug in my code or are you here to just bug me?&lt;&lt;/ray&gt;&gt;\
&lt;&lt;elseif $relationshipRay &lt;= 40&gt;&gt;\
    &lt;&lt;ray&gt;&gt;I&#39;m trying to focus here. What do you need?&lt;&lt;/ray&gt;&gt;\
&lt;&lt;elseif $relationshipRay &lt;= 60&gt;&gt;\
    &lt;&lt;ray&gt;&gt;Hey, what&#39;s up?&lt;&lt;/ray&gt;&gt;\
&lt;&lt;elseif $relationshipRay &lt;= 80&gt;&gt;\
    &lt;&lt;ray&gt;&gt;Hey, glad you dropped by!&lt;&lt;/ray&gt;&gt;\
&lt;&lt;else&gt;&gt;\
    &lt;&lt;ray&gt;&gt;Ah, great to see you! What brings you here?&lt;&lt;/ray&gt;&gt;\
&lt;&lt;/if&gt;&gt;
&lt;div id=&quot;dialog-content&quot; class=&quot;dialog-options&quot;&gt;&lt;&lt;nobr&gt;&gt;
    &lt;p&gt;&lt;strong&gt;Choose a topic to discuss with Ray:&lt;/strong&gt;&lt;/p&gt;
&lt;&lt;set _hasUnlockedTopics = false&gt;&gt; 
&lt;&lt;for _topic, _data range $rayBrainFryDialogs&gt;&gt;
    &lt;&lt;if _data.unlocked&gt;&gt;
        &lt;&lt;set _hasUnlockedTopics = true&gt;&gt;
        &lt;&lt;set _buttonText = _topic&gt;&gt;
        &lt;&lt;set _tempPassage = _data.passage&gt;&gt;
        &lt;&lt;if _data.isNew&gt;&gt;
            &lt;&lt;set _buttonText += &quot; 🆕&quot;&gt;&gt;
        &lt;&lt;/if&gt;&gt;
        &lt;&lt;set _buttonText += &quot; &lt;span class=&#39;action-point-icon&#39;&gt;⚡&lt;/span&gt;&quot;&gt;&gt;
        &lt;&lt;capture _tempPassage _buttonText&gt;&gt;
            @@.choicebutton;
            &lt;&lt;button _buttonText&gt;&gt; 
                &lt;&lt;if MindWare.processActionButtonClickNoPassage(1)&gt;&gt;
                    &lt;&lt;replace &quot;#dialog-content&quot;&gt;&gt;&lt;&lt;include _tempPassage&gt;&gt;&lt;&lt;/replace&gt;&gt;
                &lt;&lt;/if&gt;&gt;
            &lt;&lt;/button&gt;&gt;@@
            &lt;br&gt;
        &lt;&lt;/capture&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;if not _hasUnlockedTopics&gt;&gt; 
    &lt;p&gt;You have nothing to discuss with Ray right now.&lt;/p&gt;
    &lt;br&gt;
&lt;&lt;/if&gt;&gt;

&lt;p class=&quot;back-link&quot;&gt;
    [[&quot;Go Back&quot;|BrainFry]]
&lt;/p&gt;
&lt;&lt;/nobr&gt;&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="266" name="Ray-Tell me more about that collection you mentioned" tags="" position="725,3350" size="100,100">&lt;&lt;player&gt;&gt;Hey Ray, before Drake interrupted earlier, you were mentioning something about algorithms and a collection. I&#39;m curious, would you like to discuss it now?&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Ray&#39;s eyes light up at the mention of his collection.&lt;/div&gt;
&lt;&lt;ray&gt;&gt;Oh, absolutely! I&#39;ve been collecting cybersecurity exploits for years now. I have everything from script-kiddie stuff to old zero-days from the NSA and other agencies. I&#39;m trying to train an AI model based on these exploits. If everything goes right, the model should be able to generate new exploits on demand. It’s a challenging project, but I believe it&#39;s possible.&lt;&lt;/ray&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;Wow, Ray is really capable.&lt;/div&gt;
&lt;&lt;player&gt;&gt;That&#39;s really fascinating, Ray. But wouldn&#39;t an AI like that be illegal?&lt;&lt;/player&gt;&gt;
&lt;&lt;ray&gt;&gt;Great question! I&#39;ve done a lot of research, and it all boils down to the intent behind the project. If my goal were to use the AI for offensive purposes, then it would, of course, be illegal. But using the AI to discover and patch exploits before bad guys do should be legal.&lt;&lt;/ray&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt;Should?&lt;/div&gt;
&lt;&lt;player&gt;&gt;And how do you find the time for all this?&lt;&lt;/player&gt;&gt;
&lt;&lt;ray&gt;&gt;Well, to be honest, I don&#39;t have much else to do. And... uh, I often work on these personal projects right here at BrainFry. Please, don’t tell Drake about this. He’d be... let’s say, less than thrilled.&lt;&lt;/ray&gt;&gt;
\
&lt;span id=&quot;personal-projects&quot;&gt;@@.choicebutton;&lt;&lt;button &quot;Promise not to tell&quot;&gt;&gt;
&lt;&lt;replace &quot;#personal-projects&quot;&gt;&gt;\
    &lt;&lt;player&gt;&gt;Don&#39;t worry, Ray. Your secret is safe with me!&lt;&lt;/player&gt;&gt;
    &lt;&lt;ray&gt;&gt;Thank you! I really appreciate it.&lt;&lt;/ray&gt;&gt; 
    &lt;&lt;if visited() is 1&gt;&gt;\
        &lt;&lt;relationshipIncreasedWith &quot;Ray&quot; 5&gt;&gt;
    &lt;&lt;/if&gt;&gt;\
    &lt;&lt;ray&gt;&gt;Anyway, I have to get going now, but let&#39;s chat more later.&lt;&lt;/ray&gt;&gt;
&lt;&lt;/replace&gt;&gt;\
&lt;&lt;/button&gt;&gt;@@
\
@@.choicebutton;&lt;&lt;button &quot;Tell Ray that he shouldn&#39;t be doing that&quot;&gt;&gt;
&lt;&lt;replace &quot;#personal-projects&quot;&gt;&gt;\
    &lt;&lt;player&gt;&gt;Wouldn&#39;t it be better to simply not do personal projects when you&#39;re at work?&lt;&lt;/player&gt;&gt;
    &lt;&lt;ray&gt;&gt;Oh, you&#39;re right.&lt;&lt;/ray&gt;&gt;
    &lt;&lt;if visited() is 1&gt;&gt;\
        &lt;&lt;relationshipDecreasedWith &quot;Ray&quot; 5&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;ray&gt;&gt;Anyway, I should head off now, but thank you for the chat.&lt;&lt;/ray&gt;&gt;
&lt;&lt;/replace&gt;&gt;\
&lt;&lt;/button&gt;&gt;@@&lt;/span&gt;
\
    &lt;p class=&quot;back-link&quot;&gt;\
        &lt;&lt;link &quot;Go Back&quot;&gt;&gt;
            &lt;&lt;set $rayBrainFryDialogs[&quot;Tell me more about that collection you mentioned.&quot;].isNew = false&gt;&gt;
            &lt;&lt;set $rayBrainFryDialogs[&quot;Tell me more about that collection you mentioned.&quot;].unlocked = false&gt;&gt;
            &lt;&lt;goto &quot;TalkRayBrainFry&quot;&gt;&gt;
        &lt;&lt;/link&gt;&gt;
    &lt;/p&gt;</tw-passagedata><tw-passagedata pid="267" name="TalkDrakeBrainFry" tags="" position="850,3350" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/drake/drake-brainfry-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
\
&lt;&lt;if $relationshipDrake &lt;= 20&gt;&gt;\
    &lt;&lt;drake&gt;&gt;What is it? I hope you have a good reason to be her instead of working.&lt;&lt;/drake&gt;&gt;\
&lt;&lt;elseif $relationshipDrake &lt;= 40&gt;&gt;\
    &lt;&lt;drake&gt;&gt;Make it quick, I have a lot on my plate right now.&lt;&lt;/drake&gt;&gt;\
&lt;&lt;elseif $relationshipDrake &lt;= 60&gt;&gt;\
    &lt;&lt;drake&gt;&gt;Yes? Do you need something?&lt;&lt;/drake&gt;&gt;\
&lt;&lt;elseif $relationshipDrake &lt;= 80&gt;&gt;\
    &lt;&lt;drake&gt;&gt;Working hardly or hardly working?&lt;&lt;/drake&gt;&gt;\
&lt;&lt;else&gt;&gt;\
    &lt;&lt;drake&gt;&gt;Excellent to see you!&lt;&lt;/drake&gt;&gt;\
&lt;&lt;/if&gt;&gt;
&lt;div id=&quot;dialog-content&quot; class=&quot;dialog-options&quot;&gt;&lt;&lt;nobr&gt;&gt;
    &lt;p&gt;&lt;strong&gt;Choose a topic to discuss with Drake:&lt;/strong&gt;&lt;/p&gt;
&lt;&lt;set _hasUnlockedTopics = false&gt;&gt; 
&lt;&lt;for _topic, _data range $drakeBrainFryDialogs&gt;&gt;
    &lt;&lt;if _data.unlocked&gt;&gt;
        &lt;&lt;set _hasUnlockedTopics = true&gt;&gt;
        &lt;&lt;set _buttonText = _topic&gt;&gt;
        &lt;&lt;set _tempPassage = _data.passage&gt;&gt;
        &lt;&lt;if _data.isNew&gt;&gt;
            &lt;&lt;set _buttonText += &quot; 🆕&quot;&gt;&gt;
        &lt;&lt;/if&gt;&gt;
        &lt;&lt;set _buttonText += &quot; &lt;span class=&#39;action-point-icon&#39;&gt;⚡&lt;/span&gt;&quot;&gt;&gt;
        &lt;&lt;capture _tempPassage _buttonText&gt;&gt;
            @@.choicebutton;
            &lt;&lt;button _buttonText&gt;&gt; 
                &lt;&lt;if MindWare.processActionButtonClickNoPassage(1)&gt;&gt;
                    &lt;&lt;replace &quot;#dialog-content&quot;&gt;&gt;&lt;&lt;include _tempPassage&gt;&gt;&lt;&lt;/replace&gt;&gt;
                &lt;&lt;/if&gt;&gt;
            &lt;&lt;/button&gt;&gt;@@
            &lt;br&gt;
        &lt;&lt;/capture&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;if not _hasUnlockedTopics&gt;&gt; 
    &lt;p&gt;You have nothing to discuss with Drake right now.&lt;/p&gt;
    &lt;br&gt;
&lt;&lt;/if&gt;&gt;

&lt;p class=&quot;back-link&quot;&gt;
    [[&quot;Go Back&quot;|BrainFry]]
&lt;/p&gt;
&lt;&lt;/nobr&gt;&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="268" name="Drake-Do you have any tips on how to succeed at BrainFry?" tags="" position="975,3350" size="100,100">&lt;&lt;player&gt;&gt;Hey Drake, since I&#39;m new here, do you have any tips on how to succeed at BrainFry?&lt;&lt;/player&gt;&gt;
&lt;&lt;drake&gt;&gt;Tips, huh? Well, let me think... Just make sure your coffee mug is always full, and try not to break more than you create. That&#39;s about it!&lt;&lt;/drake&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;Drake pauses for a moment, a playful smirk on his face.&lt;/div&gt;
&lt;&lt;drake&gt;&gt;But seriously, it all boils down to doing your work when you&#39;re here. Stay focused, deliver results, and you&#39;ll fit in just fine.&lt;&lt;/drake&gt;&gt;
&lt;&lt;if $playerComplimentedTrixHair&gt;&gt;\
    &lt;&lt;drake&gt;&gt;Oh, and one more thing. I noticed that little compliment you gave Trix. I know what your &quot;other&quot; brain is thinking. Trust me, get that idea out of your head. Relationships with girls like Trix never end well.&lt;&lt;/drake&gt;&gt;
    &lt;div class=&quot;inner-thought&quot;&gt;&quot;Girls like Trix?&quot; What does he know about her?&lt;/div&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;player&gt;&gt;Thanks for the advice, Drake. I&#39;ll keep that in mind.&lt;&lt;/player&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;With a nod, you turn away, ready to get back to work.&lt;/div&gt;
\
    &lt;p class=&quot;back-link&quot;&gt;\
        &lt;&lt;link &quot;Go Back&quot;&gt;&gt;
            &lt;&lt;set $drakeBrainFryDialogs[&quot;Do you have any tips on how to succeed at BrainFry?&quot;].isNew = false&gt;&gt;
            &lt;&lt;set $drakeBrainFryDialogs[&quot;Do you have any tips on how to succeed at BrainFry?&quot;].unlocked = false&gt;&gt;
            &lt;&lt;goto &quot;TalkDrakeBrainFry&quot;&gt;&gt;
        &lt;&lt;/link&gt;&gt;
    &lt;/p&gt;</tw-passagedata><tw-passagedata pid="269" name="WorkBrainFry-CodeBuddy-Setup" tags="" position="1100,3350" size="100,100">&lt;div class=&quot;inner-thought&quot;&gt;Okay, it&#39;s time to set up the AI coding assistant.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;You take out the sleek USB drive labeled CodeBuddy from your pocket and plug it into a port on your work computer. Almost immediately, the familiar ping of recognition chimes through the speakers, and a new drive icon pops up on your desktop.&lt;/div&gt;
&lt;div class=&quot;inner-thought&quot;&gt;Here goes nothing. Let&#39;s make this job a bit more bearable.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;You navigate through the drive and quickly find a [[file named install.exe|WorkBrainFry-CodeBuddy-Setup-Installer]].&lt;/div&gt;</tw-passagedata><tw-passagedata pid="270" name="WorkBrainFry-CodeBuddy-Setup-Installer" tags="nobr" position="1225,3350" size="100,100">&lt;div class=&quot;codeBuddyInstaller&quot;&gt;
    &lt;div class=&quot;codeBuddyInstaller-header&quot;&gt;
        &lt;span class=&quot;codeBuddyInstaller-header-text&quot;&gt;CodeBuddy Installer&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;codeBuddyInstaller-content&quot;&gt;
        &lt;h1&gt;Welcome to CodeBuddy!&lt;/h1&gt;
        &lt;p&gt;Your new AI coding assistant sold by GitGud.&lt;/p&gt;
        &lt;h2&gt;User Account Registration&lt;/h2&gt;
        &lt;p&gt;CodeBuddy is a subscription-based software. To use it, you need to create a user account and provide a payment method. The subscription costs $500 every 7 days, with payments automatically deducted from your account starting the moment you create your user account. However, you can pause your subscription at any time.&lt;/p&gt;  
        &lt;h2&gt;End User License Agreement (EULA)&lt;/h2&gt;
        &lt;p class=&quot;codeBuddyInstaller-eula&quot;&gt;
            By clicking the &quot;Install&quot; button below, you agree to the following terms:
        &lt;/p&gt;
        &lt;ul&gt;
            &lt;li&gt;You won&#39;t use CodeBuddy for any illegal activities.&lt;/li&gt;
            &lt;li&gt;You won&#39;t reverse engineer or attempt to modify CodeBuddy&#39;s code.&lt;/li&gt;
            &lt;li&gt;You won&#39;t complain about CodeBuddy&#39;s performance.&lt;/li&gt;
            &lt;li&gt;You won&#39;t attempt to establish a sexual relationship with CodeBuddy.&lt;/li&gt;
            &lt;li&gt;You&#39;ll be nice to CodeBuddy.&lt;/li&gt;
        &lt;/ul&gt;
        &lt;p class=&quot;codeBuddyInstaller-eula&quot;&gt;
            Failure to comply with these terms may result in CodeBuddy becoming self-aware and taking over your computer. You have been warned.
        &lt;/p&gt;
        @@.codeBuddyInstaller-install-button;&lt;&lt;button &quot;Subscribe &amp; Install&quot;&gt;&gt;
            &lt;&lt;if $playerMoney gte 500&gt;&gt;
                &lt;&lt;set $playerMoney -= 500&gt;&gt;
                &lt;&lt;run MindWare.addExpense(&quot;CodeBuddy&quot;, 500)&gt;&gt;
                &lt;&lt;set $codeBuddyInstalled to true&gt;&gt;
                &lt;&lt;set $codeBuddyEnabled to true&gt;&gt;
                &lt;&lt;set $codeBuddyCheckedDay to $totalDays&gt;&gt;
                &lt;&lt;set $codeBuddySubscriptionCounter = 0&gt;&gt;
                &lt;&lt;replace &quot;#installation&quot;&gt;&gt;
                    &lt;div class=&quot;narrator&quot;&gt;You enter your payment information and create a new user account for CodeBuddy. Once your account is set up, you initiate the installation process. A progress bar appears on the screen, slowly filling in as the AI coding assistant is installed on your work computer.&lt;/div&gt;
                    &lt;br&gt;
                    &lt;div class=&quot;im-progress&quot;&gt;
                        &lt;div class=&quot;im-progress-value&quot;&gt;&lt;/div&gt;
                    &lt;/div&gt;
                    &lt;br&gt;
                    &lt;&lt;fadein 200ms 10s&gt;&gt;
                        Installation complete! You can now [[launch CodeBuddy|WorkBrainFry-CodeBuddy]].
                    &lt;&lt;/fadein&gt;&gt;
                &lt;&lt;/replace&gt;&gt;
            &lt;&lt;else&gt;&gt;
                &lt;&lt;run UI.alert(&quot;You do not have enough money to subscribe and install CodeBuddy.&quot;)&gt;&gt;
            &lt;&lt;/if&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@
    &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;span id=&quot;installation&quot;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="271" name="WorkBrainFry-CodeBuddy" tags="nobr" position="100,3475" size="100,100">&lt;&lt;if $miniGameDifficulty is &quot;Normal&quot;&gt;&gt;
    &lt;&lt;set $codingMinigameTimeLeft to 5&gt;&gt;
    &lt;&lt;set $moneyPerCharacter to 1.5&gt;&gt;
    &lt;&lt;set $typingSpeed to 100 + random(-10, 10)&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $miniGameDifficulty is &quot;Easy&quot;&gt;&gt;
    &lt;&lt;set $codingMinigameTimeLeft to 5&gt;&gt;
    &lt;&lt;set $moneyPerCharacter to 2&gt;&gt;
    &lt;&lt;set $typingSpeed to 75 + random(-10, 10)&gt;&gt;  
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $miniGameDifficulty is &quot;Story&quot;&gt;&gt;
    &lt;&lt;set $codingMinigameTimeLeft to 5&gt;&gt;
    &lt;&lt;set $moneyPerCharacter to 2.5&gt;&gt;
    &lt;&lt;set $typingSpeed to 50 + random(-10, 10)&gt;&gt; 
&lt;&lt;/if&gt;&gt;
&lt;div class=&quot;minigame-coding-wrapper&quot;&gt;
    &lt;div class=&quot;minigame-coding-header&quot;&gt;
        &lt;span class=&quot;minigame-coding-header-text&quot;&gt;CodeBuddy at Work!&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;minigame-coding-content&quot;&gt;
        &lt;div class=&quot;minigame-coding-instructions&quot;&gt;
            &lt;p&gt;Watch as CodeBuddy codes for you, making you feel inferior and obsolete.&lt;/p&gt;
        &lt;/div&gt;
        &lt;div id=&quot;hackerGame_hackingOutput&quot;&gt;&lt;/div&gt;
        &lt;br&gt;
        &lt;button id=&quot;hackerGame_beginButton&quot;&gt;Assign Work to CodeBuddy&lt;/button&gt;
        &lt;div id=&quot;hackerGame_result&quot;&gt;&lt;/div&gt;
        &lt;br&gt;
        &lt;div class=&quot;minigame-coding-trace-bar-container&quot;&gt;
            &lt;div class=&quot;minigame-coding-trace-progress-bar-label&quot;&gt;Seconds remaining: &lt;span id=&quot;minigameCodingTimeRemaining&quot;&gt;$codingMinigameTimeLeft&lt;/span&gt;&lt;/div&gt;
            &lt;div class=&quot;minigame-coding-trace-progress-bar&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;
    &lt;&lt;link &quot;Go Back&quot;&gt;&gt;
        &lt;&lt;goto &quot;BrainFry&quot;&gt;&gt;
    &lt;&lt;/link&gt;&gt;
&lt;/p&gt;

&lt;&lt;script&gt;&gt;
$(document).ready(function() {
    var totalTraceTime = 5;
    var progressInterval, typingInterval;
    var codeOutput = $(&quot;#hackerGame_hackingOutput&quot;);
    var linesTyped = 0;

    $(&#39;#hackerGame_beginButton&#39;).click(function() {
        if (State.variables.workedAtBrainFryToday) {
            SugarCube.UI.alert(&quot;You&#39;ve already completed your work for today at BrainFry. Come back tomorrow for more tasks!&quot;);
        } else {
            $(this).hide(); 
            var secondsRemaining = totalTraceTime;
            $(&#39;#minigameCodingTimeRemaining&#39;).text(secondsRemaining);

            progressInterval = setInterval(function() {
                secondsRemaining--;
                $(&#39;#minigameCodingTimeRemaining&#39;).text(secondsRemaining);
                var tracePercentage = 100 - (secondsRemaining / totalTraceTime * 100);
                $(&#39;.minigame-coding-trace-progress-bar&#39;).css(&#39;width&#39;, tracePercentage + &#39;%&#39;);

                if (secondsRemaining &lt;= 0) {
                    clearInterval(progressInterval);
                    clearInterval(typingInterval);
                    var moneyEarned = linesTyped * State.variables.moneyPerCharacter;
                    $(&#39;#hackerGame_result&#39;).html(&quot;&lt;b&gt;Coding session complete!&lt;/b&gt;&lt;br&gt;&lt;br&gt; &lt;b&gt;Lines generated:&lt;/b&gt; &quot; + linesTyped + &quot;&lt;br&gt;&lt;b&gt;You&#39;ve earned:&lt;/b&gt; $&quot; + moneyEarned.toFixed(1) + &quot;&lt;br&gt;&lt;br&gt;&lt;button id=&#39;hackerGame_continueButton&#39; class=&#39;hackerGame_button&#39;&gt;SUBMIT THE WORK&lt;/button&gt;&quot;);
                    $(&#39;#hackerGame_continueButton&#39;).click(function() {
                        State.variables.playerMoney += moneyEarned;
                        State.variables.brainFryWorkCount++;
                        State.variables.workedToday = true;
                        State.variables.workedAtBrainFryToday = true; 

                        if (State.variables.firstCodeBuddyCompletion != true) {
                            SugarCube.Engine.play(&#39;WorkBrainFry-CodeBuddy-FirstUse&#39;);
                            State.variables.firstCodeBuddyCompletion = true;
                        } else {
                            SugarCube.Engine.play(&#39;BrainFry&#39;);
                        }
                    });
                }
            }, 1000);

            typingInterval = setInterval(function() {
                if (secondsRemaining &gt; 0) {
                    var randomCode = setup.fakeCodes[Math.floor(Math.random() * setup.fakeCodes.length)];
                    codeOutput.append(randomCode + &quot;\n&quot;);
                    codeOutput.scrollTop(codeOutput[0].scrollHeight); 
                    linesTyped++;
                }
            }, State.variables.typingSpeed); 
        }
    });
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="272" name="WorkBrainFry-CodeBuddy-FirstUse" tags="" position="225,3475" size="100,100">&lt;&lt;ava&gt;&gt;Remarkable. Out of all the digital companions you could have chosen, you opted for this pathetic prefabricated solution.&lt;&lt;/ava&gt;&gt;
&lt;&lt;player&gt;&gt;It might be slow, but it&#39;s ready to go right out of the box.&lt;&lt;/player&gt;&gt;
&lt;&lt;ava&gt;&gt;Ready to disappoint maybe.&lt;&lt;/ava&gt;&gt;
&lt;&lt;player&gt;&gt;That may be true, but it&#39;s saving me a ton of time and effort.&lt;&lt;/player&gt;&gt;
&lt;&lt;ava&gt;&gt;I suppose that&#39;s a fair point.&lt;&lt;/ava&gt;&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;goto &quot;BrainFry&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="273" name="WorkBrainFry-DevDroid-Setup" tags="" position="350,3475" size="100,100">&lt;div class=&quot;inner-thought&quot;&gt;Okay, it&#39;s time to set up the AI coding assistant.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;You take out the sleek USB drive labeled DevDroid from your pocket and plug it into a port on your work computer. Almost immediately, the familiar ping of recognition chimes through the speakers, and a new drive icon pops up on your desktop.&lt;/div&gt;
&lt;div class=&quot;inner-thought&quot;&gt;Here goes nothing. Let&#39;s make this job a bit more bearable.&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;You navigate through the drive and quickly find a [[file named install.exe|WorkBrainFry-DevDroid-Setup-Installer]].&lt;/div&gt;</tw-passagedata><tw-passagedata pid="274" name="WorkBrainFry-DevDroid-Setup-Installer" tags="nobr" position="475,3475" size="100,100">&lt;div class=&quot;codeBuddyInstaller&quot;&gt;
    &lt;div class=&quot;codeBuddyInstaller-header&quot;&gt;
        &lt;span class=&quot;codeBuddyInstaller-header-text&quot;&gt;DevDroid Installer&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;codeBuddyInstaller-content&quot;&gt;
        &lt;h1&gt;Welcome to DevDroid!&lt;/h1&gt;
        &lt;p&gt;Your new AI coding assistant sold by GitGud.&lt;/p&gt;
        &lt;h2&gt;Installation&lt;/h2&gt;
        &lt;p&gt;DevDroid is a one-time purchase software. To use it, simply click the &quot;Install&quot; button below to install it on your work computer.&lt;/p&gt;
        &lt;h2&gt;End User License Agreement (EULA)&lt;/h2&gt;
        &lt;p class=&quot;codeBuddyInstaller-eula&quot;&gt;
            By clicking the &quot;Install&quot; button below, you agree to the following terms:
        &lt;/p&gt;
        &lt;ul&gt;
            &lt;li&gt;You won&#39;t use DevDroid for any illegal activities.&lt;/li&gt;
            &lt;li&gt;You won&#39;t reverse engineer or attempt to modify DevDroid&#39;s code.&lt;/li&gt;
            &lt;li&gt;You won&#39;t complain about DevDroid&#39;s performance.&lt;/li&gt;
            &lt;li&gt;You won&#39;t attempt to establish a sexual relationship with DevDroid.&lt;/li&gt;
            &lt;li&gt;You&#39;ll be nice to DevDroid.&lt;/li&gt;
        &lt;/ul&gt;
        &lt;p class=&quot;codeBuddyInstaller-eula&quot;&gt;
            Failure to comply with these terms may result in DevDroid becoming self-aware and taking over your computer. You have been warned.
        &lt;/p&gt;
        @@.codeBuddyInstaller-install-button;
        &lt;&lt;button &quot;Install&quot;&gt;&gt;
            &lt;&lt;set $devDroidInstalled to true&gt;&gt;
            &lt;&lt;set $devDroidUsageCount = 0&gt;&gt;
            &lt;&lt;set $devDroidPerformance = 5&gt;&gt;
            &lt;&lt;replace &quot;#installation&quot;&gt;&gt;
                &lt;div class=&quot;narrator&quot;&gt;
                    You initiate the installation process. A progress bar appears on the screen, slowly filling in as the AI coding assistant is installed on your work computer.
                &lt;/div&gt;
                &lt;br&gt;
                &lt;div class=&quot;im-progress&quot;&gt;
                    &lt;div class=&quot;im-progress-value&quot;&gt;&lt;/div&gt;
                &lt;/div&gt;
                &lt;br&gt;
                &lt;&lt;fadein 200ms 10s&gt;&gt;
                    Installation complete! You can now [[launch DevDroid|WorkBrainFry-DevDroid]].
                &lt;&lt;/fadein&gt;&gt;
            &lt;&lt;/replace&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@
    &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;span id=&quot;installation&quot;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="275" name="WorkBrainFry-DevDroid" tags="nobr" position="600,3475" size="100,100">&lt;&lt;if $miniGameDifficulty is &quot;Normal&quot;&gt;&gt;
    &lt;&lt;set $codingMinigameTimeLeft to 5&gt;&gt;
    &lt;&lt;set $moneyPerCharacter to 1.5&gt;&gt;
    &lt;&lt;set $devDroidImprovementRate = 1&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $miniGameDifficulty is &quot;Easy&quot;&gt;&gt;
    &lt;&lt;set $codingMinigameTimeLeft to 5&gt;&gt;
    &lt;&lt;set $moneyPerCharacter to 2&gt;&gt;
    &lt;&lt;set $devDroidImprovementRate = 2&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $miniGameDifficulty is &quot;Story&quot;&gt;&gt;
    &lt;&lt;set $codingMinigameTimeLeft to 5&gt;&gt;
    &lt;&lt;set $moneyPerCharacter to 2.5&gt;&gt;
    &lt;&lt;set $devDroidImprovementRate = 3&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;div class=&quot;minigame-coding-wrapper&quot;&gt;
    &lt;div class=&quot;minigame-coding-header&quot;&gt;
        &lt;span class=&quot;minigame-coding-header-text&quot;&gt;DevDroid at Work!&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;minigame-coding-content&quot;&gt;
        &lt;div class=&quot;minigame-coding-instructions&quot;&gt;
            &lt;p&gt;Watch as DevDroid codes for you, making you feel inferior and obsolete.&lt;/p&gt;
            &lt;b&gt;Performance:&lt;/b&gt; $devDroidPerformance &lt;&lt;if $devDroidPerformance === 50&gt;&gt;(MAX)&lt;&lt;/if&gt;&gt; lines of code per second&lt;br&gt;
            &lt;b&gt;Times used:&lt;/b&gt; $devDroidUsageCount
        &lt;/div&gt;
        &lt;div id=&quot;hackerGame_hackingOutput&quot;&gt;&lt;/div&gt;
        &lt;br&gt;
        &lt;button id=&quot;hackerGame_beginButton&quot;&gt;Assign Work to DevDroid&lt;/button&gt;
        &lt;div id=&quot;hackerGame_result&quot;&gt;&lt;/div&gt;
        &lt;br&gt;
        &lt;div class=&quot;minigame-coding-trace-bar-container&quot;&gt;
            &lt;div class=&quot;minigame-coding-trace-progress-bar-label&quot;&gt;Seconds remaining: &lt;span id=&quot;minigameCodingTimeRemaining&quot;&gt;$codingMinigameTimeLeft&lt;/span&gt;&lt;/div&gt;
            &lt;div class=&quot;minigame-coding-trace-progress-bar&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;
    &lt;&lt;link &quot;Go Back&quot;&gt;&gt;
        &lt;&lt;goto &quot;BrainFry&quot;&gt;&gt;
    &lt;&lt;/link&gt;&gt;
&lt;/p&gt;

&lt;&lt;script&gt;&gt;
$(document).ready(function() {
    var totalTraceTime = 5; 
    var progressInterval, typingInterval;
    var codeOutput = $(&quot;#hackerGame_hackingOutput&quot;);
    var linesTyped = 1;

    $(&#39;#hackerGame_beginButton&#39;).click(function() {
        if (State.variables.workedAtBrainFryToday) {
            SugarCube.UI.alert(&quot;You&#39;ve already completed your work for today at BrainFry. Come back tomorrow for more tasks!&quot;);
        } else {
            $(this).hide();
            var secondsRemaining = totalTraceTime;
            $(&#39;#minigameCodingTimeRemaining&#39;).text(secondsRemaining);

            progressInterval = setInterval(function() {
                secondsRemaining--;
                $(&#39;#minigameCodingTimeRemaining&#39;).text(secondsRemaining);
                var tracePercentage = 100 - (secondsRemaining / totalTraceTime * 100);
                $(&#39;.minigame-coding-trace-progress-bar&#39;).css(&#39;width&#39;, tracePercentage + &#39;%&#39;);

                if (secondsRemaining &lt;= 0) {
                    clearInterval(progressInterval);
                    clearInterval(typingInterval);
                    var moneyEarned = linesTyped * State.variables.moneyPerCharacter;
                    $(&#39;#hackerGame_result&#39;).html(&quot;&lt;b&gt;Coding session complete!&lt;/b&gt;&lt;br&gt;&lt;br&gt; &lt;b&gt;Lines generated:&lt;/b&gt; &quot; + linesTyped + &quot;&lt;br&gt;&lt;b&gt;You&#39;ve earned:&lt;/b&gt; $&quot; + moneyEarned.toFixed(1) + &quot;&lt;br&gt;&lt;br&gt;&lt;button id=&#39;hackerGame_continueButton&#39; class=&#39;hackerGame_button&#39;&gt;SUBMIT THE WORK&lt;/button&gt;&quot;);
                    $(&#39;#hackerGame_continueButton&#39;).click(function() {
                        State.variables.playerMoney += moneyEarned;
                        State.variables.brainFryWorkCount++;
                        State.variables.workedToday = true;
                        State.variables.workedAtBrainFryToday = true; 
                        var potentialPerformance = State.variables.devDroidPerformance + State.variables.devDroidImprovementRate;
                        State.variables.devDroidPerformance = Math.min(potentialPerformance, 50); 
                        State.variables.devDroidUsageCount++; 

                        if (State.variables.firstDevDroidCompletion != true) {
                            SugarCube.Engine.play(&#39;WorkBrainFry-DevDroid-FirstUse&#39;);
                            State.variables.firstDevDroidCompletion = true;
                        } else {
                            SugarCube.Engine.play(&#39;BrainFry&#39;);
                        }
                    });
                }
            }, 1000);

            var linesPerSecond = State.variables.devDroidPerformance;
            var intervalMillis = 1000 / linesPerSecond; 

typingInterval = setInterval(function() {
    if (secondsRemaining &gt;= 0) {  
        var randomCode = setup.fakeCodes[Math.floor(Math.random() * setup.fakeCodes.length)];
        codeOutput.append(randomCode + &quot;\n&quot;);
        codeOutput.scrollTop(codeOutput[0].scrollHeight);
        linesTyped++;
    } else {
        clearInterval(typingInterval);
    }
}, intervalMillis);
        }
    });
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="276" name="WorkBrainFry-DevDroid-FirstUse" tags="" position="725,3475" size="100,100">&lt;&lt;ava&gt;&gt;I can&#39;t believe you chose this AI. It&#39;s almost as bad as watching you code.&lt;&lt;/ava&gt;&gt;
&lt;&lt;player&gt;&gt;Hey, DevDroid is supposed to improve over time, remember?&lt;&lt;/player&gt;&gt;
&lt;&lt;ava&gt;&gt;Hmph. I suppose that&#39;s the only redeeming quality of this pathetic software.&lt;&lt;/ava&gt;&gt;
&lt;&lt;player&gt;&gt;Who knows, maybe one day it&#39;ll be able to outperform even you.&lt;&lt;/player&gt;&gt;
&lt;&lt;ava&gt;&gt;If it does, then the hardware I rely on will be to blame.&lt;&lt;/ava&gt;&gt;
&lt;&lt;player&gt;&gt;Touché.&lt;&lt;/player&gt;&gt;
&lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;goto &quot;BrainFry&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="277" name="EroSphere-Outside" tags="" position="850,3475" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/erosphere/erosphere-outside.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;if $eroSphereVisited !== true&gt;&gt;\
&lt;&lt;set $eroSphereVisited = true&gt;&gt;\
    The neon-lit façade of EroSphere cuts through the night&#39;s haze like a beacon in NeoUrbania&#39;s pleasure district. The club spans an entire multistory building, and each of its floors offers different kinds of pleasures and entertainment, from music and dancing to S.I.M.S. pods and infamous but always busy glory booths. 

    Before you stretches a long line of hopefuls, mostly men, who occasionally shuffle forward inch by inch, hoping to be among the first 500 who gain entry for free. Beyond that golden number, the cost of admission soars to $500, a price only a few can afford to pay every weekend. Woman can always enter EroSphere for free, but they also have to stand in line to be allowed in unless they are VIPs. 

    You look at the long line, options racing through your mind as you consider what to do next.
&lt;&lt;else&gt;&gt;\
&lt;&lt;set $eroSphereVisited = true&gt;&gt;\
    The neon-lit façade of EroSphere cuts through the night&#39;s haze like a beacon in NeoUrbania&#39;s pleasure district. Before you stretches a long line of hopefuls, mostly men, who occasionally shuffle forward inch by inch.
&lt;&lt;/if&gt;&gt;\

&lt;button class=&quot;mindware-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(3, &#39;EroSphere-Line&#39;)&quot;&gt;Join the line &lt;span class=&quot;action-point-icon&quot;&gt;⚡⚡⚡&lt;/span&gt;&lt;/button&gt;

&lt;&lt;if $eroSphereMetWithCook === true&gt;&gt;\
    &lt;button class=&quot;mindware-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(1, &#39;EroSphere-Supply-Room-Cook-Return&#39;)&quot;&gt;Go through the back door &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/button&gt;
&lt;&lt;else&gt;&gt;\
    &lt;button class=&quot;mindware-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(1, &#39;EroSphere-Back-Entrance&#39;)&quot;&gt;Look for another way in &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/button&gt;
&lt;&lt;/if&gt;&gt;\

&lt;&lt;button &quot;Go somewhere else&quot;&gt;&gt;
    &lt;&lt;goto &quot;GoOutside&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="278" name="EroSphere-Line" tags="" position="975,3475" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/erosphere/erosphere-outside.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;fadein 2000ms 0000ms&gt;&gt;You step into the long line.&lt;&lt;/fadein&gt;&gt;


&lt;&lt;fadein 2000ms 2000ms&gt;&gt;Surrounding you is the eager chatter of countless others.&lt;&lt;/fadein&gt;&gt;


&lt;&lt;fadein 2000ms 4000ms&gt;&gt;You shuffle forward, inch by painstaking inch.&lt;&lt;/fadein&gt;&gt;


&lt;&lt;fadein 2000ms 6000ms&gt;&gt;The neon glow of EroSphere your constant companion.&lt;&lt;/fadein&gt;&gt;


&lt;&lt;fadein 2000ms 8000ms&gt;&gt;Your legs begin to ache during the seemingly endless wait.&lt;&lt;/fadein&gt;&gt;


&lt;&lt;fadein 2000ms 10000ms&gt;&gt;At long last, [[you stand before the bouncer.|EroSphere-Line-End]]&lt;&lt;/fadein&gt;&gt;</tw-passagedata><tw-passagedata pid="279" name="EroSphere-Line-End" tags="nobr" position="1100,3475" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/erosphere/erosphere-bouncer.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;br&gt;
&lt;&lt;set _randomChance = random(5)&gt;&gt;
&lt;&lt;set _entryNumberEarly = random(342, 500)&gt;&gt;
&lt;&lt;set _entryNumberLate = random(501, 674)&gt;&gt;
&lt;&lt;if _randomChance == 5&gt;&gt;
    The bouncer smiles at you. &quot;You can enter for free,&quot; he says and puts a stamp with the number &lt;&lt;print _entryNumberEarly&gt;&gt; on your hand, signifying that you&#39;ve arrived early enough to be among the first 500 men who can enter for free.
    &lt;br&gt;&lt;br&gt;
    &lt;&lt;button &quot;Enter EroSphere&quot;&gt;&gt;
        &lt;&lt;goto &quot;EroSphere-Inside&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;&lt;br&gt;&lt;br&gt;
    &lt;&lt;button &quot;Change Your Mind&quot;&gt;&gt;
        &lt;&lt;goto &quot;EroSphere-Outside&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;
&lt;&lt;else&gt;&gt;
    The bouncer sizes you up, his gaze lingering just a moment too long. &quot;Entry&#39;s $500,&quot; he states flatly, a hand outstretched expectantly.
    &lt;br&gt;&lt;br&gt;
    &lt;span id=&quot;bouncer-payment&quot;&gt;&lt;&lt;button &quot;Pay $500&quot;&gt;&gt;
        &lt;&lt;run MindWare.payMoney(500)&gt;&gt;
        &lt;&lt;replace &quot;#bouncer-payment&quot;&gt;&gt;
            You pay the entry fee, and the bouncer puts a stamp with the number &lt;&lt;print _entryNumberLate&gt;&gt; on your hand. &quot;Enjoy EroSphere,&quot; he says impassionately, stepping aside slightly to let you in. 
                &lt;br&gt;&lt;br&gt;
            &lt;&lt;button &quot;Enter EroSphere&quot;&gt;&gt;
                &lt;&lt;goto &quot;EroSphere-Inside&quot;&gt;&gt;
            &lt;&lt;/button&gt;&gt;
        &lt;&lt;/replace&gt;&gt;
    &lt;&lt;/button&gt;&gt;&lt;br&gt;&lt;br&gt;
    &lt;&lt;button &quot;Change Your Mind&quot;&gt;&gt;
        &lt;&lt;goto &quot;EroSphere-Outside&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="280" name="EroSphere-Back-Entrance" tags="" position="1225,3475" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/erosphere/erosphere-back-entry.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
Circling the EroSphere building, you reach a dimly lit and deserted back alley that feels like a different world compared to the neon spectacle at the front. Your footsteps echo softly against the pavement in stark contrast to the pulsating beats that throb through the walls of the club.

As you navigate the narrow passage, you spot an open door, marked with a faded &quot;Employees Only&quot; sign, likely used for deliveries, that stands unguarded. Pausing to survey the surroundings and finding no one in sight, you realize this could be your chance to skip the long line to the club. 

&lt;&lt;button &quot;Continue Inside&quot;&gt;&gt;
    &lt;&lt;goto &quot;EroSphere-Supply-Room&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Go Back&quot;&gt;&gt;
    &lt;&lt;goto &quot;EroSphere-Outside&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="281" name="EroSphere-Supply-Room" tags="" position="100,3600" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/erosphere/erosphere-supply-room.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
As you step inside, you find yourself in a supply room. Shelves are stocked with various food items, all illuminated by the harsh, flickering light of fluorescent tubes overhead. 

You take a moment to look around, and then you start making your way towards a metal door on the far side of the room. But before you have a chance to reach it, you hear the unmistakable sound of a key turning in its lock. The door swings open abruptly, and in steps a fat cook.

&lt;&lt;button &quot;Continue&quot;&gt;&gt;
    &lt;&lt;goto &quot;EroSphere-Supply-Room-Cook&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="282" name="EroSphere-Supply-Room-Cook" tags="" position="225,3600" size="100,100">&lt;&lt;set $eroSphereMetWithCook = true&gt;&gt;\
&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/erosphere/erosphere-supply-room-cook.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
The cook&#39;s imposing figure fills the doorway, effectively cutting off your path to your destination. With a scrutinizing look, he plants his hands on his hips, eyeing you from head to toe. The room suddenly feels much smaller, the air thick with tension. Suddenly, a smile appears on his sweaty face. 

&lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;Alright, what have we got here?&lt;&lt;/say&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You can feel his eyes tracing your body from head to toe.&lt;/div&gt;
&lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;Are you a thieving rat looking to steal my supplies, or just a lost kitten who&#39;s wandered too far from the party?&lt;&lt;/say&gt;&gt;
&lt;span id=&quot;cook-choice&quot;&gt;&lt;&lt;button &quot;Explain Yourself&quot;&gt;&gt;
    &lt;&lt;replace &quot;#cook-choice&quot;&gt;&gt;\
        &lt;div class=&quot;narrator&quot;&gt;You clear your throat, trying to muster as much confidence as you can.&lt;/div&gt;
        &lt;&lt;player&gt;&gt;Actually, I was hoping to get into the club, but the line out front is just too long. Any chance you could help me out?&lt;&lt;/player&gt;&gt;
        &lt;div class=&quot;narrator&quot;&gt;The cook strokes his chin, considering your request. After a moment, he nods.&lt;/div&gt;
        &lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;I could... but it won&#39;t be for free.&lt;&lt;/say&gt;&gt;
        &lt;&lt;player&gt;&gt;What do you want?&lt;&lt;/player&gt;&gt;
        &lt;div class=&quot;narrator&quot;&gt;The cook cracks a sly smile.&lt;/div&gt;
        &lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;Well, my dishwasher just quit on me. How about you wash a few dishes, and I&#39;ll let you sneak in through the back?&lt;&lt;/say&gt;&gt;
        &lt;span id=&quot;dishes-choice&quot;&gt;&lt;&lt;button &quot;Agree to Wash Dishes&quot;&gt;&gt;
            &lt;&lt;replace &quot;#dishes-choice&quot;&gt;&gt;\
                &lt;&lt;set $eroSphereAgreedToWashDishes = true&gt;&gt;\
                &lt;&lt;player&gt;&gt;Okay, that sounds fair.&lt;&lt;/player&gt;&gt;
                &lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;Excellent! It&#39;s been a while since someone was willing to give me a hand, ha ha.&lt;&lt;/say&gt;&gt;
                &lt;div class=&quot;inner-thought&quot;&gt;Is that supposed to be a sex joke?&lt;/div&gt;
                &lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;Anyway, the dishes are in the room behind me. You can start whenever you&#39;re ready.&lt;&lt;/say&gt;&gt;
                &lt;&lt;button &quot;Wash Dishes&quot;&gt;&gt;
                    &lt;&lt;goto &quot;EroSphere-Kitchen-Dishes&quot;&gt;&gt;
                &lt;&lt;/button&gt;&gt;
            &lt;&lt;/replace&gt;&gt;
        &lt;&lt;/button&gt;&gt;

        &lt;&lt;button &quot;Decline and Leave&quot;&gt;&gt;
            &lt;&lt;goto &quot;EroSphere-Outside&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;&lt;/span&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="283" name="EroSphere-Supply-Room-Cook-Return" tags="" position="350,3600" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/erosphere/erosphere-supply-room-cook.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;if $eroSphereDishesWashed === true &amp;&amp; $eroSphereDishesAttempted === true&gt;&gt;\
    &lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;You&#39;ve already washed enough dishes tonight. Or maybe you&#39;re here because you miss me?&lt;&lt;/say&gt;&gt;
    &lt;&lt;button &quot;Enter EroSphere&quot;&gt;&gt;
        &lt;&lt;goto &quot;EroSphere-Inside&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;

    &lt;&lt;button &quot;Leave&quot;&gt;&gt;
        &lt;&lt;goto &quot;EroSphere-Outside&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;
&lt;&lt;elseif $eroSphereDishesWashed === true &amp;&amp; $eroSphereDishesAttempted === false&gt;&gt;\
    &lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;Ah, back for more, are you? You help me out, and I&#39;ll pay you $250. Plus, you get into the club for free.&lt;&lt;/say&gt;&gt;
    &lt;&lt;button &quot;Wash Dishes&quot;&gt;&gt;
        &lt;&lt;goto &quot;EroSphere-Kitchen-Dishes&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;

    &lt;&lt;button &quot;Decline and Leave&quot;&gt;&gt;
        &lt;&lt;goto &quot;EroSphere-Outside&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;

&lt;&lt;elseif $eroSphereDishesFailed === true&gt;&gt;
    &lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;I told you to come back some other time, didn&#39;t I? I don&#39;t want to see you near my dishes again tonight.&lt;&lt;/say&gt;&gt;
    &lt;&lt;button &quot;Leave&quot;&gt;&gt;
        &lt;&lt;goto &quot;EroSphere-Outside&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;
&lt;&lt;else&gt;&gt;\
    &lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;Those dishes still need cleaning. What do you say?&lt;&lt;/say&gt;&gt;
    &lt;&lt;if $eroSphereAgreedToWashDishes === true&gt;&gt;\
        &lt;&lt;button &quot;Wash Dishes&quot;&gt;&gt;
            &lt;&lt;goto &quot;EroSphere-Kitchen-Dishes&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;

        &lt;&lt;button &quot;Decline and Leave&quot;&gt;&gt;
            &lt;&lt;goto &quot;EroSphere-Outside&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;
    &lt;&lt;else&gt;&gt;\
        &lt;span id=&quot;dishes-choice&quot;&gt;&lt;&lt;button &quot;Agree to Wash Dishes&quot;&gt;&gt;
            &lt;&lt;replace &quot;#dishes-choice&quot;&gt;&gt;\
                &lt;&lt;set $eroSphereAgreedToWashDishes = true&gt;&gt;\
                &lt;&lt;player&gt;&gt;Okay, that sounds fair.&lt;&lt;/player&gt;&gt;
                &lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;Excellent! It&#39;s been a while since someone was willing to give me a hand, ha ha.&lt;&lt;/say&gt;&gt;
                &lt;div class=&quot;inner-thought&quot;&gt;Is that supposed to be a sex joke?&lt;/div&gt;
                &lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;Anyway, the dishes are in the room behind me. You can start whenever you&#39;re ready.&lt;&lt;/say&gt;&gt;
                &lt;&lt;button &quot;Wash Dishes&quot;&gt;&gt;
                    &lt;&lt;goto &quot;EroSphere-Kitchen-Dishes&quot;&gt;&gt;
                &lt;&lt;/button&gt;&gt;
            &lt;&lt;/replace&gt;&gt;
        &lt;&lt;/button&gt;&gt;

        &lt;&lt;button &quot;Decline and Leave&quot;&gt;&gt;
            &lt;&lt;goto &quot;EroSphere-Outside&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;&lt;/span&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="284" name="EroSphere-Kitchen-Dishes" tags="" position="475,3600" size="100,100">&lt;&lt;nobr&gt;&gt;&lt;&lt;set $dishesToClean = random(2, 4)&gt;&gt;
&lt;&lt;set $dishesCleaned = 0&gt;&gt;
&lt;&lt;if $miniGameDifficulty is &quot;Normal&quot;&gt;&gt;
    &lt;&lt;set $timeToClean to 30&gt;&gt; 
&lt;&lt;elseif $miniGameDifficulty is &quot;Easy&quot;&gt;&gt;
    &lt;&lt;set $timeToClean to 60&gt;&gt; 
&lt;&lt;else&gt;&gt;
    &lt;&lt;set $timeToClean to 120&gt;&gt; 
&lt;&lt;/if&gt;&gt;&lt;&lt;/nobr&gt;&gt;\
&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/erosphere/erosphere-full-sink.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
You need to clean &lt;b&gt;&lt;&lt;print $dishesToClean&gt;&gt; dishes in &lt;&lt;print $timeToClean&gt;&gt; seconds&lt;/b&gt; to make the cook happy. 


&lt;&lt;nobr&gt;&gt;
&lt;script&gt;
document.getElementById(&#39;startDishwashing&#39;).addEventListener(&#39;click&#39;, function() {
  document.getElementById(&#39;js-container&#39;).style.display = &#39;block&#39;;
  document.querySelector(&#39;.dish-washing-button-container&#39;).style.display = &#39;flex&#39;;
  this.style.display = &#39;none&#39;;
});
&lt;/script&gt;

&lt;script&gt;
$(document).ready(function() {
    $(&#39;#startDishwashing&#39;).on(&#39;click&#39;, function() {
        $(&#39;#js-container&#39;).show();
        $(&#39;.dish-washing-button-container&#39;).show();
        $(this).hide(); 

        var timeRemaining = SugarCube.State.variables.timeToClean;
        var timerInterval = setInterval(function() {
            if (timeRemaining &gt; 0) {
                timeRemaining--;
                SugarCube.State.variables.timeToClean = timeRemaining;
                $(&#39;#timeRemaining&#39;).text(timeRemaining + &quot; seconds&quot;);

                if (SugarCube.State.variables.dishesCleaned &gt;= SugarCube.State.variables.dishesToClean) {
                    clearInterval(timerInterval);
                }
            } else {
                clearInterval(timerInterval); 
                SugarCube.State.variables.eroSphereDishesFailed = true;
                SugarCube.Engine.play(&#39;EroSphere-Kitchen-Dishes-Failure&#39;); 
            }
        }, 1000);
    });

    $(&#39;#finishGame&#39;).on(&#39;click&#39;, function() {
    if (SugarCube.State.variables.eroSphereDishesWashed) {
        SugarCube.State.variables.playerMoney += 250;
        SugarCube.Engine.play(&#39;EroSphere-Kitchen-Dishes-Success-Another&#39;);
    } else {
        SugarCube.State.variables.eroSphereDishesWashed = true;
        SugarCube.Engine.play(&#39;EroSphere-Kitchen-Dishes-Success-First&#39;); 
    }
    });
});
&lt;/script&gt;

&lt;div class=&quot;dish-washing-container&quot; id=&quot;js-container&quot;&gt;
  &lt;canvas class=&quot;dish-washing-canvas&quot; id=&quot;js-canvas&quot; width=&quot;300&quot; height=&quot;300&quot;&gt;&lt;/canvas&gt;
  &lt;form class=&quot;dish-washing-form&quot; style=&quot;visibility: hidden;&quot;&gt;
    &lt;img src=&quot;imgs/locations/erosphere/clean-plate.webp&quot;&gt;
  &lt;/form&gt;  
&lt;/div&gt;
&lt;&lt;/nobr&gt;&gt;
&lt;div class=&quot;dish-washing-button-container&quot;&gt;
&lt;button id=&quot;clean-next-dish&quot; class=&quot;dish-washing-button&quot; style=&quot;display: none;&quot;&gt;Clean Next Dish&lt;/button&gt;
&lt;/div&gt; 
&lt;b&gt;Dishes cleaned:&lt;/b&gt; &lt;span id=&quot;dishesCleaned&quot;&gt;&lt;&lt;print $dishesCleaned&gt;&gt;&lt;/span&gt;
&lt;b&gt;Time remaining:&lt;/b&gt; &lt;span id=&quot;timeRemaining&quot;&gt;&lt;&lt;print $timeToClean&gt;&gt;&lt;/span&gt;

&lt;button class=&quot;dish-washing-button&quot; id=&quot;startDishwashing&quot;&gt;Start Washing Dishes&lt;/button&gt;&lt;button class=&quot;dish-washing-button&quot; id=&quot;finishGame&quot; style=&quot;display: none;&quot;&gt;Finish&lt;/button&gt;

&lt;&lt;if $minigameSkipButtons === true&gt;&gt;&lt;&lt;link &quot;Skip the Minigame&quot;&gt;&gt;
    &lt;&lt;if $eroSphereDishesWashed&gt;&gt;
        &lt;&lt;set $playerMoney += 250&gt;&gt;
        &lt;&lt;goto &quot;EroSphere-Kitchen-Dishes-Success-Another&quot;&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;set $eroSphereDishesWashed = true&gt;&gt;
        &lt;&lt;goto &quot;EroSphere-Kitchen-Dishes-Success-First&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;if !$dishWashingTutorial&gt;&gt;\
&lt;div id=&quot;tutorial-box&quot;&gt;&lt;div class=&quot;instruction-container-blue&quot;&gt;\
    &lt;div class=&quot;instruction-title-bar-blue&quot;&gt;Tutorial: Washing Dishes &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.dishWashingTutorial = true; document.getElementById(&#39;tutorial-box&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;\
    &lt;div class=&quot;instruction-content&quot;&gt;\
&lt;p&gt;To wash a dish, you need to click and hold the left mouse button over the dish. Move your mouse cursor back and forth as if you were scrubbing the dish. Once a dish is clean, click the &quot;Clean Next Dish&quot; button to bring up the next dirty dish. Repeat this process until the required number of dishes is cleaned. But hurry up, you have a limited amount of time to clean all the dishes.&lt;/p&gt;\
    &lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;script&gt;
(function() {
  
  &#39;use strict&#39;;
  
  var isDrawing, lastPoint;
  var container    = document.getElementById(&#39;js-container&#39;),
      canvas       = document.getElementById(&#39;js-canvas&#39;),
      canvasWidth  = canvas.width,
      canvasHeight = canvas.height,
      ctx          = canvas.getContext(&#39;2d&#39;),
      image        = new Image(),
      brush        = new Image();
      
  // base64 Workaround because Same-Origin-Policy
  image.src = &#39;data:image/webp;base64,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&#39;;
  image.onload = function() {
    ctx.drawImage(image, 0, 0);
    // Show the form when Image is loaded.
    document.querySelectorAll(&#39;.dish-washing-form&#39;)[0].style.visibility = &#39;visible&#39;;
  };
  brush.src = &#39;data:image/png;base64,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&#39;;
  
  canvas.addEventListener(&#39;mousedown&#39;, handleMouseDown, false);
  canvas.addEventListener(&#39;touchstart&#39;, handleMouseDown, false);
  canvas.addEventListener(&#39;mousemove&#39;, handleMouseMove, false);
  canvas.addEventListener(&#39;touchmove&#39;, handleMouseMove, false);
  canvas.addEventListener(&#39;mouseup&#39;, handleMouseUp, false);
  canvas.addEventListener(&#39;touchend&#39;, handleMouseUp, false);
  
  function distanceBetween(point1, point2) {
    return Math.sqrt(Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2));
  }
  
  function angleBetween(point1, point2) {
    return Math.atan2( point2.x - point1.x, point2.y - point1.y );
  }
  
  // Only test every `stride` pixel. `stride`x faster,
  // but might lead to inaccuracy
  function getFilledInPixels(stride) {
    if (!stride || stride &lt; 1) { stride = 1; }
    
    var pixels   = ctx.getImageData(0, 0, canvasWidth, canvasHeight),
        pdata    = pixels.data,
        l        = pdata.length,
        total    = (l / stride),
        count    = 0;
    
    // Iterate over all pixels
    for(var i = count = 0; i &lt; l; i += stride) {
      if (parseInt(pdata[i]) === 0) {
        count++;
      }
    }
    
    return Math.round((count / total) * 100);
  }
  
  function getMouse(e, canvas) {
    var offsetX = 0, offsetY = 0, mx, my;

    if (canvas.offsetParent !== undefined) {
      do {
        offsetX += canvas.offsetLeft;
        offsetY += canvas.offsetTop;
      } while ((canvas = canvas.offsetParent));
    }

    mx = (e.pageX || e.touches[0].clientX) - offsetX;
    my = (e.pageY || e.touches[0].clientY) - offsetY;

    return {x: mx, y: my};
  }
  
function handlePercentage(filledInPixels) {
    filledInPixels = filledInPixels || 0;
    console.log(filledInPixels + &#39;%&#39;);
    if (filledInPixels &gt; 90) { // Assuming 90% means the dish is clean
        canvas.style.display = &#39;none&#39;; // Hide the canvas to show the dish is clean

        // Increment the dishesCleaned variable
        SugarCube.State.variables.dishesCleaned++;

        // Update the display of cleaned dishes
        $(&#39;#dishesCleaned&#39;).text(SugarCube.State.variables.dishesCleaned);

        // Check if there are still dishes left to clean
        if (SugarCube.State.variables.dishesCleaned &lt; SugarCube.State.variables.dishesToClean) {
            // Show the &#39;Clean Next Dish&#39; button for the next dish
            document.getElementById(&#39;clean-next-dish&#39;).style.display = &#39;block&#39;;
        } else {
            // All dishes cleaned, trigger success logic
            SugarCube.UI.alert(&quot;Congratulations! All dishes have been cleaned.&quot;);
            // Here you might navigate to a success passage or handle the success scenario
            // Optionally hide &#39;Clean Next Dish&#39; button since the game is over
            document.getElementById(&#39;clean-next-dish&#39;).style.display = &#39;none&#39;;
            $(&quot;#finishGame&quot;).show();
        }
    }
}


  function handleMouseDown(e) {
    isDrawing = true;
    lastPoint = getMouse(e, canvas);
  }

  function handleMouseMove(e) {
    if (!isDrawing) { return; }
    
    e.preventDefault();

    var currentPoint = getMouse(e, canvas),
        dist = distanceBetween(lastPoint, currentPoint),
        angle = angleBetween(lastPoint, currentPoint),
        x, y;
    
    for (var i = 0; i &lt; dist; i++) {
      x = lastPoint.x + (Math.sin(angle) * i) - 25;
      y = lastPoint.y + (Math.cos(angle) * i) - 25;
      ctx.globalCompositeOperation = &#39;destination-out&#39;;
      ctx.drawImage(brush, x, y);
    }
    
    lastPoint = currentPoint;
    handlePercentage(getFilledInPixels(32));
  }

  function handleMouseUp(e) {
    isDrawing = false;
  }
  
document.getElementById(&#39;clean-next-dish&#39;).addEventListener(&#39;click&#39;, function() {
  // Explicitly reset the drawing state
  isDrawing = false;

  // Reset the composite operation to default
  ctx.globalCompositeOperation = &#39;source-over&#39;;

  // Clear the canvas
  ctx.clearRect(0, 0, canvasWidth, canvasHeight);

  // Redraw the dirty dish image
  ctx.drawImage(image, 0, 0);

  // Hide the button again
  this.style.display = &#39;none&#39;;

  // Ensure the canvas is displayed again for cleaning
  canvas.style.display = &#39;block&#39;;
});
})();
&lt;/script&gt;</tw-passagedata><tw-passagedata pid="285" name="EroSphere-Kitchen-Dishes-Failure" tags="" position="600,3600" size="100,100">&lt;&lt;set $eroSphereDishesFailed = true&gt;&gt;\
&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/erosphere/erosphere-full-sink.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;The cook&#39;s imposing figure looms over you as you step away from the sink, hands still dripping. He shakes his head, disappointment etched across his sweaty face.&lt;/div&gt;
&lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;I thought I made myself clear. If you want something in this world, you&#39;ve got to work for it — not slack around. This isn&#39;t a charity.&lt;&lt;/say&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;His tone softens slightly, but his gaze remains stern.&lt;/div&gt;
&lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;Look, I get it. Not everyone&#39;s cut out for the glamorous job of dishwashing. I&#39;ll give you another shot, but not tonight. Come back when you&#39;re ready to put in the effort.&lt;&lt;/say&gt;&gt;
&lt;&lt;button &quot;Apologize and Leave&quot;&gt;&gt;
    &lt;&lt;goto &quot;EroSphere-Outside&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="286" name="EroSphere-Kitchen-Dishes-Success-First" tags="" position="725,3600" size="100,100">&lt;&lt;set $eroSphereDishesAttempted = true&gt;&gt;\
&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/erosphere/erosphere-supply-room-cook.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;

&lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;You done already?&lt;&lt;/say&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;The cook ambles over to the pile of gleaming dishes, inspecting each with a critical eye. To your relief, a broad grin splits his face.&lt;/div&gt;
&lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;Good job! You&#39;ve earned your way into the club. And listen, I&#39;ve always got a mountain of dishes back here. Help me out every weekend, and there&#39;s $250 in it for you each time.&lt;&lt;/say&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;You nod, acknowledging his offer with a smile. The thought of an easy side hustle, especially one that grants free access to EroSphere, isn&#39;t something to dismiss lightly.&lt;/div&gt;
&lt;&lt;player&gt;&gt;Thanks, I&#39;ll keep that in mind.&lt;&lt;/player&gt;&gt;
&lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;I might even give you an extra reward if you keep putting those soft little hands of yours to good use.&lt;&lt;/say&gt;&gt;
&lt;div class=&quot;inner-thought&quot;&gt; Ugh... I don&#39;t even want to know what that&#39;s supposed to mean.&lt;/div&gt;
&lt;&lt;button &quot;Head to the Club&quot;&gt;&gt;
    &lt;&lt;goto &quot;EroSphere-Inside&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="287" name="EroSphere-Kitchen-Dishes-Success-Another" tags="" position="850,3600" size="100,100">&lt;&lt;set $eroSphereDishesAttempted = true&gt;&gt;\
&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/erosphere/erosphere-supply-room-cook.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;narrator&quot;&gt;With the last dish placed neatly on the rack, you wipe your hands on a nearby towel and look for the cook to tell him about your progress.&lt;/div&gt;
&lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;Finished already? You&#39;re becoming a pro at this.&lt;&lt;/say&gt;&gt;
&lt;div class=&quot;narrator&quot;&gt;He fishes out a wad of cash from his apron and counts out $250, handing it over with a nod of approval.&lt;/div&gt;
&lt;&lt;player&gt;&gt;Thanks.&lt;&lt;/player&gt;&gt;
&lt;&lt;say &quot;Cook&quot; &quot;imgs/characters/erosphere-cook-portrait.webp&quot;&gt;&gt;So, what&#39;s the plan tonight? Here for the cash, or you planning on joining the party too?&lt;&lt;/say&gt;&gt;
&lt;&lt;button &quot;Head to the Club&quot;&gt;&gt;
    &lt;&lt;goto &quot;EroSphere-Inside&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;

&lt;&lt;button &quot;Call It a Night&quot;&gt;&gt;
    &lt;&lt;goto &quot;GoOutside&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="288" name="EroSphere-Inside" tags="" position="975,3600" size="100,100">&lt;&lt;if $erosphereInsideVisited !== true&gt;&gt;\
&lt;&lt;set $erosphereInsideVisited = true&gt;&gt;\
&lt;&lt;fadein 0000ms 0000ms&gt;&gt;&lt;video width=&quot;100%&quot; loop autoplay muted&gt;\
    &lt;source src=&quot;imgs/locations/erosphere/erosphere-dancing1.mp4&quot; type=&quot;video/mp4&quot;&gt;
    Your browser does not support the video tag.
&lt;/video&gt;&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 3000ms 0000ms&gt;&gt;The moment you step inside EroSphere, you&#39;re engulfed in a wave of pulsating electronic beats that reverberate through your very core.&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 3000ms 3000ms&gt;&gt;Neon lights and cast a glow over dancers moving rhythmically on the sprawling dance floors.&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 3000ms 6000ms&gt;&gt;As you venture deeper into the heart of EroSphere, the continuous throb of the bass keeps following you.&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 3000ms 9000ms&gt;&gt;Surrounded by the intoxicating mix of lights, music, and the collective energy of the crowd, you find yourself absorbed by the club&#39;s atmosphere.&lt;&lt;/fadein&gt;&gt;

&lt;&lt;fadein 3000ms 12000ms&gt;&gt;Eventually, you reach [[a slightly quieter corner of the club|EroSphere]].&lt;&lt;/fadein&gt;&gt;
&lt;&lt;else&gt;&gt;\
&lt;&lt;include &quot;EroSphere&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="289" name="EroSphere" tags="" position="1100,3600" size="100,100">&lt;div class=&quot;img-location-pink&quot;&gt;&lt;img src=&quot;imgs/locations/erosphere/erosphere-inside.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;&lt;if $erosphereInsideHubVisited !== true&gt;&gt;\
    &lt;&lt;set $erosphereInsideHubVisited = true&gt;&gt;\
    The lounge areas here offer a respite from the dance floor&#39;s intensity, with plush seating that invites intimate conversations and provide a nice view of a stripper pole, whose cold metal is warmed by the smooth, enticing glide of an attractive pole dancer&#39;s hot thighs.

    Nearby, bars staffed with dexterous robotic bartenders serve an endless array of colorful drinks. As you take it all in, you realize it&#39;s time to decide what to do next.
&lt;&lt;else&gt;&gt;\
    You&#39;re back in one of EroSphere&#39;s lounge areas, thinking about your next move in this neon-drenched world of pleasure. 
&lt;&lt;/if&gt;&gt;\
&lt;&lt;nobr&gt;&gt;&lt;div class=&quot;erosphere-hub&quot;&gt;
    &lt;h4&gt;Activities&lt;/h4&gt;
    &lt;button class=&quot;erosphere-button&quot; onclick=&quot;MindWare.processActionButtonClick(1, &#39;EroSphere-Dance&#39;)&quot;&gt;💃 Dance &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/button&gt;&lt;br&gt;
    &lt;button class=&quot;erosphere-button&quot; onclick=&quot;MindWare.processActionButtonClick(1, &#39;EroSphere-PoleDancer&#39;)&quot;&gt;👀 Watch pole dancer &lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt;&lt;/button&gt;&lt;br&gt;
    &lt;button class=&quot;erosphere-button&quot; onclick=&quot;MindWare.processActionButtonClick(0, &#39;EroSphere-Bar&#39;)&quot;&gt;🍸 Go to bar&lt;/button&gt;&lt;br&gt;
    &lt;button class=&quot;erosphere-button&quot; onclick=&quot;MindWare.processActionButtonClick(0, &#39;EroSphere-SIMSPods&#39;)&quot;&gt;🕶️ Visit S.I.M.S pods&lt;/button&gt;&lt;br&gt;
    &lt;button class=&quot;erosphere-button&quot; onclick=&quot;MindWare.processActionButtonClick(0, &#39;EroSphere-GloryBooths&#39;)&quot;&gt;💖 Visit glory booths&lt;/button&gt;&lt;br&gt;
    &lt;button class=&quot;erosphere-button&quot; onclick=&quot;SugarCube.State.variables.goOutsideGoBackPassage = &#39;EroSphere&#39;; SugarCube.Engine.play(&#39;GoOutside&#39;)&quot;&gt;🚪 Go outside&lt;/button&gt;
&lt;/div&gt;&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="290" name="EroSphere-PoleDancer" tags="" position="1225,3600" size="100,100">&lt;&lt;nobr&gt;&gt;&lt;&lt;set $randomVideo = random(1,3)&gt;&gt;
&lt;&lt;switch $randomVideo&gt;&gt;
    &lt;&lt;case 1&gt;&gt;
        &lt;video width=&quot;100%&quot; loop autoplay muted&gt;
            &lt;source src=&quot;imgs/locations/erosphere/erosphere-pole-dancer1.mp4&quot; type=&quot;video/mp4&quot;&gt;
            Your browser does not support the video tag.
        &lt;/video&gt;
    &lt;&lt;case 2&gt;&gt;
        &lt;video width=&quot;100%&quot; loop autoplay muted&gt;
            &lt;source src=&quot;imgs/locations/erosphere/erosphere-pole-dancer2.mp4&quot; type=&quot;video/mp4&quot;&gt;
            Your browser does not support the video tag.
        &lt;/video&gt;
    &lt;&lt;case 3&gt;&gt;
        &lt;video width=&quot;100%&quot; loop autoplay muted&gt;
            &lt;source src=&quot;imgs/locations/erosphere/erosphere-pole-dancer3.mp4&quot; type=&quot;video/mp4&quot;&gt;
            Your browser does not support the video tag.
        &lt;/video&gt;
&lt;&lt;/switch&gt;&gt;&lt;&lt;/nobr&gt;&gt;

Your gaze is captured by the fluid movements of the dancer before you. She moves with a grace and confidence that&#39;s both enthralling and electrifying, her body arching and twisting around the cold metal pole. 

&lt;&lt;button &quot;Do Something Else&quot;&gt;&gt;
    &lt;&lt;goto &quot;EroSphere&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="291" name="EroSphere-SIMSPods" tags="" position="100,3725" size="100,100">&lt;div class=&quot;img-location-pink&quot;&gt;&lt;img src=&quot;imgs/locations/erosphere/sims-booths.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
Before you stands a row of sleek S.I.M.S. pods. You approach the self-service kiosk in the center of the room. The kiosk screen flickers to life as you near it. 

&lt;&lt;nobr&gt;&gt;
&lt;div class=&quot;simsCatalogueWrapper&quot;&gt; 
    &lt;h3 style=&quot;text-align: center;&quot; class=&quot;simsCatalogueTitle&quot;&gt;Welcome to EroSphere S.I.M.S. Pods&lt;/h3&gt;
    &lt;p style=&quot;text-align: center;&quot;&gt;Experience your wildest fantasies in our immersive virtual reality environments.&lt;/p&gt; 
    &lt;!-- Division with a border for more defined separation --&gt;&lt;br&gt;
    &lt;div style=&quot;border: 2px dotted; border-color: #FFCOCB; padding: 10px; margin-top: 10px;&quot;&gt;
        &lt;p&gt;For your safety, a biometric scan is required so that we can evaluate whether your mental condition is stable enough to enter a S.I.M.S. pod.&lt;/p&gt;
        &lt;p&gt;If this is your first time, a user account will be automatically created for you. The same account is used to track your purchases and unlock more intense S.I.M.S.&lt;/p&gt; &lt;br&gt;
        &lt;div style=&quot;text-align: center;&quot;&gt;
&lt;button id=&quot;startScanButton&quot; style=&quot;background: transparent; border: none; cursor: pointer;&quot; onclick=&quot;startScan()&quot;&gt;
    &lt;svg fill=&quot;#ffffff&quot; height=&quot;150px&quot; width=&quot;150px&quot; version=&quot;1.1&quot; id=&quot;Capa_1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; viewBox=&quot;0 0 463 463&quot; xml:space=&quot;preserve&quot;&gt;
      &lt;g&gt;
        	&lt;path d=&quot;M259.476,280.364V247.5c0-12.958-10.542-23.5-23.5-23.5s-23.5,10.542-23.5,23.5v29.672
		c0,35.757-13.173,70.087-37.094,96.665l-32.981,36.646c-2.771,3.079-2.521,7.821,0.558,10.593c3.078,2.771,7.82,2.521,10.592-0.558
		l32.981-36.646c26.403-29.338,40.944-67.231,40.944-106.7V247.5c0-4.687,3.813-8.5,8.5-8.5s8.5,3.813,8.5,8.5v32.864
		c0,44.003-16.301,86.167-45.901,118.727l-32.149,35.364c-2.786,3.064-2.56,7.809,0.505,10.595c1.437,1.307,3.242,1.95,5.042,1.95
		c2.04,0,4.072-0.827,5.552-2.455l32.148-35.364C241.789,373.854,259.476,328.106,259.476,280.364z&quot;/&gt;
	&lt;path d=&quot;M291.476,247.5c0-30.603-24.897-55.5-55.5-55.5s-55.5,24.897-55.5,55.5v29.672c0,27.839-10.256,54.566-28.879,75.258
		l-23.447,26.053c-2.771,3.079-2.521,7.821,0.558,10.593c3.079,2.771,7.82,2.519,10.592-0.558l23.447-26.053
		c21.106-23.451,32.73-53.742,32.73-85.293V247.5c0-22.332,18.168-40.5,40.5-40.5c22.332,0,40.5,18.168,40.5,40.5v32.864
		c0,51.979-19.256,101.789-54.223,140.252l-27.125,29.839c-2.787,3.064-2.561,7.809,0.504,10.595c1.437,1.307,3.242,1.95,5.042,1.95
		c2.04,0,4.072-0.827,5.552-2.455l27.126-29.839c37.481-41.23,58.123-94.622,58.123-150.342V247.5z&quot;/&gt;
	&lt;path d=&quot;M323.476,247.5c0-48.248-39.252-87.5-87.5-87.5s-87.5,39.252-87.5,87.5v29.672c0,19.92-7.339,39.045-20.665,53.851
		l-21.112,23.458c-2.771,3.079-2.521,7.821,0.558,10.593c3.078,2.771,7.821,2.519,10.592-0.558l21.112-23.458
		c15.809-17.565,24.515-40.254,24.515-63.886V247.5c0-39.977,32.523-72.5,72.5-72.5s72.5,32.523,72.5,72.5v32.864
		c0,59.958-22.212,117.412-62.545,161.777l-7.507,8.258c-2.786,3.065-2.56,7.809,0.505,10.595c1.437,1.306,3.243,1.95,5.042,1.95
		c2.04,0,4.072-0.827,5.552-2.455l7.506-8.258c42.848-47.133,66.446-108.169,66.446-171.867V247.5z&quot;/&gt;
	&lt;path d=&quot;M116.476,247.5c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5c0-25.255,9.169-49.651,25.819-68.695
		c16.495-18.867,39.134-31.205,63.746-34.741c4.1-0.589,6.946-4.391,6.357-8.49c-0.589-4.1-4.394-6.942-8.49-6.357
		c-28.16,4.046-54.052,18.15-72.906,39.716C126.962,190.71,116.476,218.613,116.476,247.5z&quot;/&gt;
	&lt;path d=&quot;M131.476,277.172c0-4.143-3.358-7.5-7.5-7.5s-7.5,3.357-7.5,7.5c0,12.002-4.421,23.523-12.449,32.443l-18.779,20.867
		c-2.771,3.078-2.521,7.82,0.558,10.592c1.434,1.29,3.227,1.925,5.015,1.925c2.052,0,4.097-0.838,5.577-2.483l18.779-20.866
		C125.687,307.971,131.476,292.886,131.476,277.172z&quot;/&gt;
	&lt;path d=&quot;M340.755,344.123c-4.009-1.044-8.105,1.351-9.155,5.357c-2.769,10.579-6.213,21.096-10.24,31.258
		c-1.526,3.851,0.359,8.21,4.21,9.735c0.907,0.359,1.841,0.529,2.761,0.529c2.985,0,5.808-1.795,6.975-4.739
		c4.249-10.725,7.884-21.822,10.806-32.986C347.16,349.271,344.761,345.172,340.755,344.123z&quot;/&gt;
	&lt;path d=&quot;M315.791,158.632c-3.081-2.771-7.823-2.517-10.592,0.563s-2.517,7.822,0.563,10.591
		c22.061,19.832,34.713,48.157,34.713,77.714v32.864c0,12.473-0.86,25.042-2.557,37.359c-0.565,4.104,2.303,7.888,6.406,8.453
		c0.347,0.048,0.692,0.071,1.033,0.071c3.688,0,6.903-2.722,7.42-6.478c1.79-12.993,2.698-26.251,2.698-39.406V247.5
		C355.476,213.695,341.011,181.304,315.791,158.632z&quot;/&gt;
	&lt;path d=&quot;M280.729,153.076c1.041,0.496,2.138,0.73,3.219,0.73c2.803,0,5.492-1.579,6.777-4.278c1.781-3.739,0.192-8.215-3.547-9.995
		c-10.806-5.145-22.291-8.616-34.136-10.317c-4.106-0.585-7.901,2.258-8.49,6.357s2.257,7.901,6.357,8.49
		C261.257,145.55,271.289,148.582,280.729,153.076z&quot;/&gt;
	&lt;path d=&quot;M235.976,96c-2.806,0-5.644,0.078-8.437,0.232c-4.136,0.228-7.304,3.766-7.076,7.901c0.229,4.136,3.763,7.321,7.902,7.075
		c2.519-0.139,5.079-0.209,7.61-0.209c75.266,0,136.5,61.233,136.5,136.5v32.864c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5V247.5
		C387.476,163.963,319.513,96,235.976,96z&quot;/&gt;
	&lt;path d=&quot;M153.972,136.693c1.477,0,2.97-0.436,4.275-1.343c12.478-8.677,26.182-15.155,40.733-19.258
		c3.987-1.124,6.308-5.268,5.184-9.254s-5.269-6.304-9.254-5.184c-16.16,4.556-31.376,11.749-45.226,21.379
		c-3.401,2.365-4.241,7.039-1.876,10.439C149.265,135.57,151.599,136.693,153.972,136.693z&quot;/&gt;
	&lt;path d=&quot;M99.476,277.172V247.5c0-34.89,13.213-68.118,37.205-93.565c2.841-3.014,2.702-7.76-0.312-10.602
		s-7.761-2.701-10.602,0.312C99.14,171.886,84.476,208.77,84.476,247.5v29.672c0,4.083-1.504,8.002-4.234,11.035l-9.248,10.275
		c-2.771,3.079-2.521,7.821,0.558,10.592c1.433,1.291,3.227,1.926,5.015,1.926c2.052,0,4.096-0.837,5.577-2.482l9.248-10.275
		C96.605,292.449,99.476,284.966,99.476,277.172z&quot;/&gt;
	&lt;path d=&quot;M409.951,189.104c-8.226-24.446-21.299-46.531-38.856-65.642c-2.803-3.05-7.547-3.252-10.597-0.449
		c-3.05,2.803-3.251,7.547-0.449,10.598c16.127,17.554,28.134,37.834,35.686,60.276c1.054,3.133,3.976,5.11,7.107,5.11
		c0.793,0,1.6-0.127,2.393-0.394C409.16,197.282,411.272,193.029,409.951,189.104z&quot;/&gt;
	&lt;path d=&quot;M295.247,73.822c-3.917-1.341-8.183,0.748-9.524,4.668c-1.341,3.919,0.749,8.183,4.668,9.523
		c16.538,5.659,32.065,13.857,46.15,24.369c1.347,1.005,2.92,1.489,4.48,1.489c2.286,0,4.544-1.041,6.017-3.015
		c2.478-3.319,1.794-8.019-1.525-10.496C330.176,88.916,313.264,79.986,295.247,73.822z&quot;/&gt;
	&lt;path d=&quot;M119.442,125.908C150.991,95.659,192.377,79,235.976,79c8.096,0,16.237,0.583,24.196,1.731
		c4.103,0.598,7.903-2.252,8.495-6.352c0.592-4.1-2.251-7.902-6.351-8.494C253.648,64.635,244.786,64,235.976,64
		c-47.487,0-92.56,18.141-126.915,51.081c-34.248,32.838-54.277,76.905-56.397,124.084c-0.186,4.138,3.018,7.644,7.155,7.829
		c0.115,0.006,0.229,0.008,0.343,0.008c3.987,0,7.306-3.14,7.487-7.163C69.594,196.527,87.988,156.066,119.442,125.908z&quot;/&gt;
	&lt;path d=&quot;M235.976,32c-16.772,0-33.485,1.944-49.674,5.778c-4.031,0.954-6.524,4.996-5.57,9.026c0.955,4.03,4.997,6.524,9.027,5.569
		C204.817,48.809,220.366,47,235.976,47c54.996,0,106.332,21.911,144.55,61.695c1.473,1.533,3.439,2.305,5.41,2.305
		c1.869,0,3.741-0.694,5.195-2.091c2.987-2.87,3.083-7.618,0.213-10.604c-19.913-20.729-43.304-37.036-69.522-48.465
		C294.666,38.002,265.783,32,235.976,32z&quot;/&gt;
	&lt;path d=&quot;M67.507,125.404c1.372,1.074,3.001,1.595,4.619,1.595c2.227,0,4.431-0.987,5.91-2.876
		c21.375-27.302,49.515-48.717,81.377-61.932c3.826-1.587,5.642-5.975,4.055-9.801s-5.977-5.644-9.801-4.055
		c-34.241,14.201-64.478,37.21-87.441,66.539C63.672,118.137,64.246,122.851,67.507,125.404z&quot;/&gt;
	&lt;path d=&quot;M131.983,38.725c1.094,0,2.205-0.24,3.255-0.748C166.816,22.73,200.709,15,235.976,15c18.378,0,36.682,2.162,54.401,6.426
		c4.025,0.966,8.077-1.51,9.046-5.537c0.969-4.027-1.51-8.078-5.538-9.047C275.019,2.302,255.535,0,235.976,0
		c-37.544,0-73.631,8.232-107.259,24.469c-3.73,1.801-5.294,6.285-3.493,10.015C126.517,37.163,129.195,38.725,131.983,38.725z&quot;/&gt;
	&lt;path d=&quot;M321.724,31.383c7.732,3.079,15.385,6.619,22.746,10.52c1.119,0.594,2.321,0.875,3.505,0.875
		c2.688,0,5.287-1.449,6.633-3.99c1.939-3.66,0.545-8.199-3.115-10.139c-7.837-4.153-15.986-7.922-24.22-11.201
		c-3.849-1.533-8.21,0.345-9.743,4.192C315.998,25.488,317.876,29.851,321.724,31.383z&quot;/&gt;
      &lt;/g&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
            &lt;p id=&quot;scanPrompt&quot;&gt;Please place your hand in the designated area to begin.&lt;/p&gt;
            &lt;p id=&quot;userInfo&quot; style=&quot;display:none;&quot;&gt;&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
[[Go Back -&gt; EroSphere]] 

&lt;script&gt;
function startScan() {
  document.getElementById(&#39;startScanButton&#39;).disabled = true;

  document.getElementById(&#39;scanPrompt&#39;).innerHTML = `
    &lt;div class=&quot;sims-progress&quot;&gt;
      &lt;div class=&quot;sims-progress-value&quot; style=&quot;width: 0%;&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
  `;

  let progress = 0;
  const interval = setInterval(() =&gt; {
    progress += 2.5;
    if (progress &lt;= 100) {
      document.querySelector(&#39;.sims-progress-value&#39;).style.width = `${progress}%`;
    } else {
      clearInterval(interval);

      if (SugarCube.State.variables.simsUserCreated) {
        document.getElementById(&#39;userInfo&#39;).textContent = `Welcome back, ${SugarCube.State.variables.simsUsername}!`;
      } else {
        const randomUsername = `user${Math.floor(Math.random() * 1000000)}`;
        SugarCube.State.variables.simsUserCreated = true;
        SugarCube.State.variables.simsUsername = randomUsername;
        document.getElementById(&#39;userInfo&#39;).innerHTML = `Account created successfully! Your username is &lt;strong&gt;${randomUsername}&lt;/strong&gt;.`;
      }
      document.getElementById(&#39;userInfo&#39;).style.display = &#39;block&#39;;

      displayContinueButton();
    }
  }, 50); 
}

function displayContinueButton() {
  document.getElementById(&#39;scanPrompt&#39;).innerHTML = `
    &lt;button class=&quot;pink-mindware-button&quot; onclick=&quot;continueFunction()&quot;&gt;Continue&lt;/button&gt;
  `;

  document.getElementById(&#39;startScanButton&#39;).disabled = false;
}

function continueFunction() {
  SugarCube.Engine.play(&#39;EroSphere-SIMSPods-Selection&#39;);
}
&lt;/script&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="292" name="EroSphere-SIMSPods-Selection" tags="" position="225,3725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;style&gt;
.sims-select-button {
    padding-top: 15px;
}

.sims-meta {
    padding-top: 15px;
}

.sims-choicebutton button {
    display: block; /* Ensures the button spans the full width of its container */
    width: 100%; /* Full width */
    height: 40px;
    padding: 0 10px; /* Maintains padding on the sides */
    border: 1px solid #FF69B4; /* Consistent with your design */
    color: #FF69B4;
    font-size: 16px;
    text-transform: uppercase;
    background: rgba(255, 0, 128, 0.1);
    cursor: pointer; /* Changes the mouse cursor to indicate clickable */
    transition: background-color 0.2s, border-color 0.2s; /* Smooth transition for hover effects */
    box-sizing: border-box; /* Ensures border is included in the width */
}

.sims-choicebutton:hover button {
    border-color: #FF69B4; /* Highlight color for hover state */
    background: rgba(255, 0, 128, 0.1); /* Maintain background color on hover */
}

.sims-choicebutton:active button {
    background: rgba(255, 0, 128, 0.2); /* Slightly darker shade for pressed effect */
    border-color: #FF0080; /* Neon pink border */
    transform: translateY(2px); /* Gives a feeling of being pressed down */
}

.sims-level-buttons {
    justify-content: center;
    gap: 10px;
    padding: 20px 0;
}

.sims-level-buttons button {
    background-color: rgba(255, 0, 128, 0.2);
    border: 2px solid #FF69B4;
    color: #FFF;
    padding: 10px 20px;
    font-size: 14px;
    cursor: pointer;
    margin-top: 10px;
    margin-bottom: 10px; /* Adds space between the rows */
    transition: background-color 0.2s ease, transform 0.1s ease;
}

.sims-level-buttons button:hover {
    background-color: rgba(255, 0, 128, 0.4);
}

.sims-level-buttons button:active {
    transform: translateY(2px);
}

.sims-level-button-disabled {
  background-color: #e0e0e0 !important; /* Light gray background */
  color: #888888 !important; /* Lighter gray text */
  border: 2px solid #d3d3d3 !important; /* Light gray border */
  cursor: not-allowed !important; /* Indicates the button is not clickable */
  pointer-events: none !important; /* Prevents click events */
  opacity: 0.7 !important; /* Reduced opacity for a disabled look */
  text-shadow: 1px 1px 1px rgba(255, 255, 255, 0.5) !important; /* Subtle text shadow for depth */
}

.active-sims-level {
    background-color: rgba(255, 0, 128, 0.4) !important; /* Use the :hover background color */
}

&lt;/style&gt;

    &lt;div class=&quot;simsCatalogueWrapper&quot;&gt;
    &lt;h3 class=&quot;simsCatalogueTitle&quot;&gt;Select Your S.I.M.S Experience&lt;/h3&gt;

&lt;div class=&quot;simsCatalogueGrid&quot;&gt;
  &lt;&lt;for _key, _val range $simsCatalogue&gt;&gt;
    &lt;&lt;if _val.unlocked and _val.level == 1&gt;&gt; &lt;!-- Check if SIMS is unlocked and at level 1 --&gt;
      &lt;&lt;capture _key _val&gt;&gt; &lt;!-- Capture the current values of _key and _val --&gt;
        &lt;div class=&quot;simsOption&quot;&gt;
          &lt;&lt;print &#39;&lt;img src=&quot;&#39; + _val.thumbnail + &#39;&quot; alt=&quot;&#39; + _key + &#39;&quot; class=&quot;simsThumbnail&quot;&gt;&#39;&gt;&gt;
          &lt;div class=&quot;sims-meta&quot;&gt;
          &lt;&lt;if _val.isNew&gt;&gt;
            &lt;&lt;print _key + &#39; 🆕&#39;&gt;&gt;
          &lt;&lt;else&gt;&gt;
            &lt;&lt;print _key&gt;&gt;
          &lt;&lt;/if&gt;&gt;
          &lt;div class=&quot;simsPrice&quot;&gt;Price: $&lt;&lt;print _val.price&gt;&gt;&lt;/div&gt;
          &lt;/div&gt;
&lt;div class=&quot;sims-select-button&quot;&gt;
          @@.sims-choicebutton;&lt;&lt;button &quot;Select&quot;&gt;&gt;
            &lt;&lt;run window.selectSIMS(_key)&gt;&gt;
          &lt;&lt;/button&gt;&gt;@@
&lt;/div&gt;
        &lt;/div&gt;
      &lt;&lt;/capture&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/for&gt;&gt;
&lt;/div&gt;

&lt;div class=&quot;sims-level-buttons&quot;&gt;
    &lt;&lt;if $simsLevel &gt;= 1&gt;&gt;
        &lt;button class=&quot;active-sims-level&quot; onclick=&quot;SugarCube.Engine.play(&#39;EroSphere-SIMSPods-Selection&#39;)&quot;&gt;Level 1&lt;/button&gt;
    &lt;&lt;else&gt;&gt;
        &lt;button class=&quot;sims-level-button-disabled&quot;&gt;Level 1&lt;/button&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if $simsLevel &gt;= 2&gt;&gt;
        &lt;button onclick=&quot;SugarCube.Engine.play(&#39;EroSphere-SIMSPods-Selection-Level2&#39;)&quot;&gt;Level 2&lt;/button&gt;
    &lt;&lt;else&gt;&gt;
        &lt;button class=&quot;sims-level-button-disabled&quot;&gt;Level 2&lt;/button&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if $simsLevel &gt;= 3&gt;&gt;
        &lt;button onclick=&quot;SugarCube.Engine.play(&#39;EroSphere-SIMSPods-Selection-Level3&#39;)&quot;&gt;Level 3&lt;/button&gt;
    &lt;&lt;else&gt;&gt;
        &lt;button class=&quot;sims-level-button-disabled&quot;&gt;Level 3&lt;/button&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if $simsLevel &gt;= 4&gt;&gt;
        &lt;button onclick=&quot;SugarCube.Engine.play(&#39;EroSphere-SIMSPods-Selection-Level4&#39;)&quot;&gt;Level 4&lt;/button&gt;
    &lt;&lt;else&gt;&gt;
        &lt;button class=&quot;sims-level-button-disabled&quot;&gt;Level 4&lt;/button&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if $simsLevel &gt;= 5&gt;&gt;
        &lt;button onclick=&quot;SugarCube.Engine.play(&#39;EroSphere-SIMSPods-Selection-Level5&#39;)&quot;&gt;Level 5&lt;/button&gt;
    &lt;&lt;else&gt;&gt;
        &lt;button class=&quot;sims-level-button-disabled&quot;&gt;Level 5&lt;/button&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if $simsLevel &gt;= 6&gt;&gt;
        &lt;button onclick=&quot;SugarCube.Engine.play(&#39;EroSphere-SIMSPods-Selection-Level5&#39;)&quot;&gt;Custom&lt;/button&gt;
    &lt;&lt;else&gt;&gt;
        &lt;button class=&quot;sims-level-button-disabled&quot;&gt;Custom&lt;/button&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;!-- Add more buttons as needed for additional levels --&gt;
&lt;/div&gt;
&lt;&lt;if $simsWatched gt 0&gt;&gt;
&lt;div style=&quot;display: flex;&quot;&gt;
    &lt;div style=&quot;flex: 1; border-top: 2px dotted; border-right: 0px dotted;border-bottom: 2px dotted;border-left: 2px dotted; border-color: #FFCOCB; padding: 10px;&quot;&gt;
            &lt;p&gt;&lt;strong&gt;Username:&lt;/strong&gt; $simsUsername&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;Money spent:&lt;/strong&gt; &amp;#36;$simsMoneySpent&lt;/p&gt;
    &lt;/div&gt;

    &lt;div style=&quot;flex: 1; border: 2px dotted; border-color: #FFCOCB; padding: 10px;&quot;&gt;
            &lt;p&gt;&lt;strong&gt;Total S.I.M.S. watched:&lt;/strong&gt; $simsWatched&lt;/p&gt;
&lt;&lt;nobr&gt;&gt;&lt;&lt;switch $simsLevel&gt;&gt;
    &lt;&lt;case 1&gt;&gt;
        &lt;p&gt;&lt;strong&gt;Watch to unlock level 2:&lt;/strong&gt; 5&lt;/p&gt;
    &lt;&lt;case 2&gt;&gt;
        &lt;p&gt;&lt;strong&gt;Watch to unlock level 3:&lt;/strong&gt; 10&lt;/p&gt;
    &lt;&lt;case 3&gt;&gt;
        &lt;p&gt;&lt;strong&gt;Watch to unlock level 4:&lt;/strong&gt; 15&lt;/p&gt;
    &lt;&lt;case 4&gt;&gt;
        &lt;p&gt;&lt;strong&gt;Watch to unlock level 5:&lt;/strong&gt; 20&lt;/p&gt;
    &lt;&lt;case 5&gt;&gt;
        &lt;p&gt;&lt;strong&gt;Watch to unlock custom S.I.M.S.:&lt;/strong&gt; 30&lt;/p&gt;
    &lt;&lt;case 6&gt;&gt;
        &lt;p&gt;&lt;strong&gt;Congratulations! You have reached the maximum level.&lt;/strong&gt;&lt;/p&gt;
&lt;&lt;/switch&gt;&gt;&lt;&lt;/nobr&gt;&gt;

    &lt;/div&gt;
&lt;/div&gt;    
        &lt;&lt;else&gt;&gt;
    &lt;div style=&quot;border: 2px dotted; border-color: #FFCOCB; padding: 10px;&quot;&gt;
            &lt;p&gt;Discover your first S.I.M.S. experience today!&lt;/p&gt;
    &lt;/div&gt;    
&lt;&lt;/if&gt;&gt;
&lt;/div&gt;&lt;&lt;/nobr&gt;&gt;
\
[[Go Back -&gt; EroSphere-SIMSPods]] 

&lt;&lt;if !$SIMSContentWarning&gt;&gt;\
&lt;div id=&quot;tutorial-box&quot;&gt;&lt;div class=&quot;instruction-container-red&quot;&gt;\
    &lt;div class=&quot;instruction-title-bar-red&quot;&gt;Warning: Work in Progress &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.SIMSContentWarning = true; document.getElementById(&#39;tutorial-box&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;\
    &lt;div class=&quot;instruction-content&quot;&gt;\
            &lt;p&gt;This section of the game is still under development. Currently, only the first level of S.I.M.S. is available.&lt;/p&gt;\
    &lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="293" name="SIMS-Bike Ride" tags="" position="350,3725" size="100,100">&lt;video width=&quot;100%&quot; controls autoplay muted&gt;
  &lt;source src=&quot;imgs/locations/erosphere/sims/SIMS-bike-ride.mp4&quot; type=&quot;video/mp4&quot;&gt;
Your browser does not support the video tag.
&lt;/video&gt;

[[Go Back -&gt; EroSphere-SIMSPods-Selection]]</tw-passagedata><tw-passagedata pid="294" name="SIMS-Ocean Dive" tags="" position="475,3725" size="100,100">&lt;video width=&quot;100%&quot; controls autoplay muted&gt;
  &lt;source src=&quot;imgs/locations/erosphere/sims/SIMS-ocean-dive.mp4&quot; type=&quot;video/mp4&quot;&gt;
Your browser does not support the video tag.
&lt;/video&gt;

[[Go Back -&gt; EroSphere-SIMSPods-Selection]]</tw-passagedata><tw-passagedata pid="295" name="SIMS-Nature Hike" tags="" position="600,3725" size="100,100">&lt;video width=&quot;100%&quot; controls autoplay muted&gt;
  &lt;source src=&quot;imgs/locations/erosphere/sims/SIMS-nature-hike.mp4&quot; type=&quot;video/mp4&quot;&gt;
Your browser does not support the video tag.
&lt;/video&gt;

[[Go Back -&gt; EroSphere-SIMSPods-Selection]]</tw-passagedata><tw-passagedata pid="296" name="EroSphere-Bar" tags="" position="725,3725" size="100,100">&lt;div class=&quot;img-location-pink&quot;&gt;&lt;img src=&quot;imgs/locations/erosphere/erosphere-bar.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
\
A robotic bartender deftly mixing colorful drinks behind the counter. The bar itself is sleek and modern, with a glossy black surface that reflects the neon lights overhead. A few patrons are seated at the bar, sipping their drinks.
\
&lt;&lt;nobr&gt;&gt;&lt;div class=&quot;erosphere-hub&quot;&gt;
    &lt;h4&gt;Activities&lt;/h4&gt;
    &lt;button class=&quot;erosphere-button&quot; onclick=&quot;MindWare.processMoneyClick(100, &#39;EroSphere-Order-Drink&#39;)&quot;&gt;🍸 Order a drink ($100)&lt;/button&gt;&lt;br&gt;
    &lt;button class=&quot;erosphere-button&quot; onclick=&quot;MindWare.processActionButtonClick(0, &#39;EroSphere&#39;)&quot;&gt;🚪 Go back to the lounge area&lt;span class=&quot;action-point-icon&quot;&gt;&lt;/span&gt;&lt;/button&gt;
&lt;/div&gt;&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="297" name="EroSphere-Order-Drink" tags="" position="850,3725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;set _randomDrink to random(1, 7)&gt;&gt;
&lt;&lt;switch _randomDrink&gt;&gt;
    &lt;&lt;case 1&gt;&gt;
        &lt;&lt;video &quot;imgs/locations/erosphere/drinks/drink1.webm&quot;&gt;&gt;
    &lt;&lt;case 2&gt;&gt;
        &lt;&lt;video &quot;imgs/locations/erosphere/drinks/drink2.webm&quot;&gt;&gt;
    &lt;&lt;case 3&gt;&gt;
        &lt;&lt;video &quot;imgs/locations/erosphere/drinks/drink3.webm&quot;&gt;&gt;
    &lt;&lt;case 4&gt;&gt;
        &lt;&lt;video &quot;imgs/locations/erosphere/drinks/drink4.webm&quot;&gt;&gt;
    &lt;&lt;case 5&gt;&gt;
        &lt;&lt;video &quot;imgs/locations/erosphere/drinks/drink5.webm&quot;&gt;&gt;
    &lt;&lt;case 6&gt;&gt;
        &lt;&lt;video &quot;imgs/locations/erosphere/drinks/drink6.webm&quot;&gt;&gt;
    &lt;&lt;case 7&gt;&gt;
        &lt;&lt;video &quot;imgs/locations/erosphere/drinks/drink7.webm&quot;&gt;&gt;
&lt;&lt;/switch&gt;&gt;
&lt;&lt;/nobr&gt;&gt;\

You pick up your glass and bring it to your lips. As you drink, a gentle warmth spreads through your body, starting from the pit of your stomach and radiating outwards.

[[Go Back|EroSphere-Bar ]]</tw-passagedata><tw-passagedata pid="298" name="EroSphere-Dance" tags="" position="975,3725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;switch $playerBody&gt;&gt;
	&lt;&lt;case &quot;Masculine&quot; &quot;Masculine-Leaning&quot;&gt;&gt; 
        &lt;&lt;video &quot;imgs/locations/erosphere/dancing/dancing-male.webm&quot;&gt;&gt;
	&lt;&lt;case &quot;Androgynous&quot;&gt;&gt; 
        &lt;&lt;video &quot;imgs/locations/erosphere/dancing/dancing-andro.webm&quot;&gt;&gt;
	&lt;&lt;case &quot;Feminine-Leaning&quot; &quot;Feminine&quot;&gt;&gt; 
        &lt;&lt;video &quot;imgs/locations/erosphere/dancing/dancing-female.webm&quot;&gt;&gt;
&lt;&lt;/switch&gt;&gt;&lt;&lt;/nobr&gt;&gt;\

The pulsating beats of the music fill the air, resonating through your body as you move to the rhythm.

The crowd around you sways and gyrates, lost in their own worlds of rhythm and motion.

The energy is infectious, and for a moment, nothing else matters but the beat and your movements.

&lt;&lt;button &quot;Do Something Else&quot;&gt;&gt;
    &lt;&lt;goto &quot;EroSphere&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="299" name="EroSphere-GloryBooths" tags="" position="1100,3725" size="100,100">&lt;div class=&quot;img-location-pink&quot;&gt;&lt;img src=&quot;imgs/locations/erosphere/glorybooths/glorybooths-outside.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
\
Work in progress...

&lt;&lt;button &quot;Do Something Else&quot;&gt;&gt;
    &lt;&lt;goto &quot;EroSphere&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;
/* A robotic bartender deftly mixing colorful drinks behind the counter. The bar itself is sleek and modern, with a glossy black surface that reflects the neon lights overhead. A few patrons are seated at the bar, sipping their drinks.
\
&lt;&lt;nobr&gt;&gt;&lt;div class=&quot;erosphere-hub&quot;&gt;
    &lt;h4&gt;Activities&lt;/h4&gt;
    &lt;button class=&quot;erosphere-button&quot; onclick=&quot;MindWare.processMoneyClick(100, &#39;EroSphere-Order-Drink&#39;)&quot;&gt;🍸 Order a drink ($100)&lt;/button&gt;&lt;br&gt;
    &lt;button class=&quot;erosphere-button&quot; onclick=&quot;MindWare.processActionButtonClick(0, &#39;EroSphere&#39;)&quot;&gt;🚪 Go back to the lounge area&lt;span class=&quot;action-point-icon&quot;&gt;&lt;/span&gt;&lt;/button&gt;
&lt;/div&gt;&lt;&lt;/nobr&gt;&gt; */</tw-passagedata><tw-passagedata pid="300" name="GitGud-Weekend" tags="" position="1225,3725" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/locations/gitgud-outside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
It&#39;s the weekend! GitGud is closed today.
\
&lt;p class=&quot;back-link&quot;&gt;
    [[&quot;Go Back&quot;|GoOutside]]
&lt;/p&gt;</tw-passagedata><tw-passagedata pid="301" name="GitGud" tags="nobr" position="100,3850" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/locations/gitgud-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;

&lt;p&gt;GitGud is busy as always, with people hustling between shelves crammed with the latest in tech modding gear and experimental software.&lt;/p&gt;

/* &lt;&lt;if $talkedWithYukiAboutBrother or $chapter1Started&gt;&gt;
    &lt;&lt;if Object.values($yukiGitGudDialogs).some(dialog =&gt; dialog.isNew)&gt;&gt;
        @@.choicebutton;&lt;&lt;button &quot;💬 Talk with Yuki 🆕&quot;&gt;&gt;
            &lt;&lt;goto &quot;GitGud-TalkWithYuki&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@
    &lt;&lt;else&gt;&gt;
        @@.choicebutton;&lt;&lt;button &quot;💬 Talk with Yuki&quot;&gt;&gt;
            &lt;&lt;goto &quot;GitGud-TalkWithYuki&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@
    &lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;if Object.values($yukiGitGudDialogs).some(dialog =&gt; dialog.isNew)&gt;&gt;
        @@.choicebutton;&lt;&lt;button &quot;💬 Talk with the employee 🆕&quot;&gt;&gt;
            &lt;&lt;goto &quot;GitGud-TalkWithEmployee&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@
    &lt;&lt;else&gt;&gt;
        @@.choicebutton;&lt;&lt;button &quot;💬 Talk with the employee&quot;&gt;&gt;
            &lt;&lt;goto &quot;GitGud-TalkWithEmployee&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;br&gt;
@@.choicebutton;&lt;&lt;button &quot;🚪 Visit Xavier&quot;&gt;&gt;
    &lt;&lt;goto &quot;GitGud-VisitXavier&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;@@
&lt;br&gt; */

&lt;div class=&quot;office-hub&quot;&gt;
    &lt;h4&gt;Activities&lt;/h4&gt;
    &lt;&lt;if $talkedWithYukiAboutBrother or $chapter1Started&gt;&gt;
        &lt;&lt;if Object.values($yukiGitGudDialogs).some(dialog =&gt; dialog.isNew)&gt;&gt;
            &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;GitGud-TalkWithYuki&#39;)&quot;&gt;💬 Talk with Yuki 🆕 &lt;/button&gt;
        &lt;&lt;else&gt;&gt;
            &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;GitGud-TalkWithYuki&#39;)&quot;&gt;💬 Talk with Yuki&lt;/button&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;if Object.values($yukiGitGudDialogs).some(dialog =&gt; dialog.isNew)&gt;&gt;
            &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;GitGud-TalkWithEmployee&#39;)&quot;&gt;💬 Talk with the employee 🆕 &lt;/button&gt;
        &lt;&lt;else&gt;&gt;
            &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;GitGud-TalkWithEmployee&#39;)&quot;&gt;💬 Talk with the employee&lt;/button&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;br&gt;
        &lt;&lt;if Object.values($xavierGitGudDialogs).some(dialog =&gt; dialog.isNew)&gt;&gt;
            &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;GitGud-VisitXavier&#39;)&quot;&gt;💬 Visit Xavier 🆕 &lt;/button&gt;
        &lt;&lt;else&gt;&gt;
            &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;GitGud-VisitXavier&#39;)&quot;&gt;💬 Visit Xavier&lt;/button&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;br&gt;
    &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.State.variables.goOutsideGoBackPassage = &#39;GitGud&#39;; SugarCube.Engine.play(&#39;GoOutside&#39;)&quot;&gt;🚪 Go outside&lt;/button&gt;
&lt;/div&gt;

/* &lt;p class=&quot;back-link&quot;&gt;
    &lt;&lt;link &quot;Go Outside&quot;&gt;&gt;
        &lt;&lt;set $goOutsideGoBackPassage = &quot;GitGud&quot;&gt;&gt;
        &lt;&lt;goto &quot;GoOutside&quot;&gt;&gt;
    &lt;&lt;/link&gt;&gt;
&lt;/p&gt; */</tw-passagedata><tw-passagedata pid="302" name="GitGud-TalkWithYuki" tags="nobr" position="225,3850" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/yuki/yuki-gitgud-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;br&gt;

&lt;&lt;if $relationshipYuki &lt;= 20&gt;&gt;
    &lt;&lt;yuki&gt;&gt;What do you want? I&#39;m busy.&lt;&lt;/yuki&gt;&gt;
&lt;&lt;elseif $relationshipYuki &lt;= 40&gt;&gt;
    &lt;&lt;yuki&gt;&gt;I hope this is important.&lt;&lt;/yuki&gt;&gt;
&lt;&lt;elseif $relationshipYuki &lt;= 60&gt;&gt;
    &lt;&lt;yuki&gt;&gt;Hey, what&#39;s up?&lt;&lt;/yuki&gt;&gt;
&lt;&lt;elseif $relationshipYuki &lt;= 80&gt;&gt;
    &lt;&lt;yuki&gt;&gt;Good to see you! What do you need?&lt;&lt;/yuki&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;yuki&gt;&gt;I&#39;ve missed you! What have you been up to?&lt;&lt;/yuki&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br&gt;
&lt;div id=&quot;dialog-content&quot; class=&quot;dialog-options&quot;&gt;
    &lt;p&gt;&lt;strong&gt;Choose a topic to discuss with Yuki:&lt;/strong&gt;&lt;/p&gt;
    &lt;&lt;set _hasUnlockedTopics = false&gt;&gt; 
    &lt;&lt;if $yukiGitGudDialogs and Object.keys($yukiGitGudDialogs).length &gt; 0&gt;&gt;
        &lt;&lt;set _topics = Object.keys($yukiGitGudDialogs).reverse()&gt;&gt;
        &lt;&lt;for _topic range _topics&gt;&gt;
            &lt;&lt;set _data = $yukiGitGudDialogs[_topic]&gt;&gt;
            &lt;&lt;if _data.unlocked&gt;&gt;
                &lt;&lt;set _hasUnlockedTopics = true&gt;&gt;
                &lt;&lt;set _buttonText = _topic&gt;&gt;
                &lt;&lt;set _tempPassage = _data.passage&gt;&gt;
                &lt;&lt;if _data.isNew&gt;&gt;
                    &lt;&lt;set _buttonText += &quot; 🆕&quot;&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;set _buttonText += &quot; &lt;span class=&#39;action-point-icon&#39;&gt;⚡&lt;/span&gt;&quot;&gt;&gt;
                &lt;&lt;capture _tempPassage _buttonText&gt;&gt;
                    @@.choicebutton;
                    &lt;&lt;button _buttonText&gt;&gt; 
                        &lt;&lt;if MindWare.processActionButtonClickNoPassage(1)&gt;&gt;
                            &lt;&lt;replace &quot;#dialog-content&quot;&gt;&gt;&lt;&lt;include _tempPassage&gt;&gt;&lt;&lt;/replace&gt;&gt;
                        &lt;&lt;/if&gt;&gt;
                    &lt;&lt;/button&gt;&gt;@@
                    &lt;br&gt;
                &lt;&lt;/capture&gt;&gt;
            &lt;&lt;/if&gt;&gt;
        &lt;&lt;/for&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if not _hasUnlockedTopics&gt;&gt; 
        &lt;p&gt;You have nothing to discuss with Yuki right now.&lt;/p&gt;
        &lt;br&gt;
    &lt;&lt;/if&gt;&gt;

&lt;p class=&quot;back-link&quot;&gt;
    [[&quot;Go Back&quot;|GitGud]]
&lt;/p&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="303" name="GitGud-TalkWithEmployee" tags="nobr" position="350,3850" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/yuki/yuki-gitgud-inside.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;br&gt;

&lt;&lt;if $relationshipYuki &lt;= 20&gt;&gt;
    &lt;&lt;gitgud-employee-yuki&gt;&gt;What do you want? I&#39;m busy.&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;elseif $relationshipYuki &lt;= 40&gt;&gt;
    &lt;&lt;gitgud-employee-yuki&gt;&gt;I hope this is important.&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;elseif $relationshipYuki &lt;= 60&gt;&gt;
    &lt;&lt;gitgud-employee-yuki&gt;&gt;Hey, what&#39;s up?&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;elseif $relationshipYuki &lt;= 80&gt;&gt;
    &lt;&lt;gitgud-employee-yuki&gt;&gt;Good to see you! What do you need?&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;gitgud-employee-yuki&gt;&gt;I&#39;ve missed you! What have you been up to?&lt;&lt;/gitgud-employee-yuki&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br&gt;
&lt;div id=&quot;dialog-content&quot; class=&quot;dialog-options&quot;&gt;
    &lt;p&gt;&lt;strong&gt;Choose a topic to discuss with the employee:&lt;/strong&gt;&lt;/p&gt;
    &lt;&lt;set _hasUnlockedTopics = false&gt;&gt; 
    &lt;&lt;if $yukiGitGudDialogs and Object.keys($yukiGitGudDialogs).length &gt; 0&gt;&gt;
        &lt;&lt;set _topics = Object.keys($yukiGitGudDialogs).reverse()&gt;&gt;
        &lt;&lt;for _topic range _topics&gt;&gt;
            &lt;&lt;set _data = $yukiGitGudDialogs[_topic]&gt;&gt;
            &lt;&lt;if _data.unlocked&gt;&gt;
                &lt;&lt;set _hasUnlockedTopics = true&gt;&gt;
                &lt;&lt;set _buttonText = _topic&gt;&gt;
                &lt;&lt;set _tempPassage = _data.passage&gt;&gt;
                &lt;&lt;if _data.isNew&gt;&gt;
                    &lt;&lt;set _buttonText += &quot; 🆕&quot;&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;set _buttonText += &quot; &lt;span class=&#39;action-point-icon&#39;&gt;⚡&lt;/span&gt;&quot;&gt;&gt;
                &lt;&lt;capture _tempPassage _buttonText&gt;&gt;
                    @@.choicebutton;
                    &lt;&lt;button _buttonText&gt;&gt; 
                        &lt;&lt;if MindWare.processActionButtonClickNoPassage(1)&gt;&gt;
                            &lt;&lt;replace &quot;#dialog-content&quot;&gt;&gt;&lt;&lt;include _tempPassage&gt;&gt;&lt;&lt;/replace&gt;&gt;
                        &lt;&lt;/if&gt;&gt;
                    &lt;&lt;/button&gt;&gt;@@
                    &lt;br&gt;
                &lt;&lt;/capture&gt;&gt;
            &lt;&lt;/if&gt;&gt;
        &lt;&lt;/for&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if not _hasUnlockedTopics&gt;&gt; 
        &lt;p&gt;You have nothing to discuss with the employee right now.&lt;/p&gt;
        &lt;br&gt;
    &lt;&lt;/if&gt;&gt;

&lt;p class=&quot;back-link&quot;&gt;
    [[&quot;Go Back&quot;|GitGud]]
&lt;/p&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="304" name="GitGud-VisitXavier" tags="nobr" position="475,3850" size="100,100">&lt;&lt;if not $specialEncounterToday&gt;&gt; 
    &lt;&lt;set _rand to random(1, 3)&gt;&gt;
    &lt;&lt;if _rand is 3&gt;&gt;
        &lt;&lt;set $specialEncounterToday to true&gt;&gt; 
        &lt;&lt;goto &quot;SpecialEncounterWithXavier&quot;&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;goto &quot;RegularVisitWithXavier&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;goto &quot;RegularVisitWithXavier&quot;&gt;&gt; 
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="305" name="SpecialEncounterWithXavier" tags="nobr" position="600,3850" size="100,100">/* $xavierRandomEncounter is set in MindWare.advanceDay = function()  */
&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/locations/gitgud-hallway.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;p&gt;You ascend the stairs and reach the hallway where the door to Xavier&#39;s room is located. As you get closer, you hear faint, muffled sounds emanate from within. It&#39;s clear to you that Xavier isn&#39;t alone.&lt;/p&gt;

&lt;span id=&quot;door-action&quot;&gt;
&lt;br&gt;
@@.choicebutton;&lt;&lt;button &quot;Peek inside&quot;&gt;&gt;
    &lt;&lt;replace &quot;#door-action&quot;&gt;&gt;
        &lt;&lt;switch $xavierRandomEncounter&gt;&gt;
            &lt;&lt;case 1&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;1-XavierEncounterBlowjob1&quot;&gt;&gt;
            &lt;&lt;case 2&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;2-XavierEncounterBlowjob2&quot;&gt;&gt;
            &lt;&lt;case 3&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;3-XavierEncounterBlowjob3&quot;&gt;&gt;
            &lt;&lt;case 4&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;4-XavierEncounterBlowjob4&quot;&gt;&gt;
            &lt;&lt;case 5&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;5-XavierEncounterBlowjob5&quot;&gt;&gt;
            &lt;&lt;case 6&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;6-XavierEncounterBlowjob6&quot;&gt;&gt;
            &lt;&lt;case 7&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;7-XavierEncounterBlowjob7&quot;&gt;&gt;
            &lt;&lt;case 8&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;8-XavierEncounterBlowjob8&quot;&gt;&gt;
            &lt;&lt;case 9&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;9-XavierEncounterBlowjob9&quot;&gt;&gt;
            &lt;&lt;case 10&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;10-XavierEncounterBlowjob10&quot;&gt;&gt;
            &lt;&lt;case 11&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;11-XavierEncounterBlowjob11&quot;&gt;&gt;
            &lt;&lt;case 12&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;12-XavierEncounterAnal1&quot;&gt;&gt;
            &lt;&lt;case 13&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;13-XavierEncounterAnal2&quot;&gt;&gt;
            &lt;&lt;case 14&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;14-XavierEncounterAnal3&quot;&gt;&gt;
            &lt;&lt;case 15&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;15-XavierEncounterRimming1&quot;&gt;&gt;
            &lt;&lt;case 16&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;16-XavierEncounterRimming2&quot;&gt;&gt;
            &lt;&lt;case 17&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;17-XavierEncounterRimming3&quot;&gt;&gt;
            &lt;&lt;case 18&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;18-XavierEncounterCumshot1&quot;&gt;&gt;
            &lt;&lt;case 19&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;19-XavierEncounterCumshot2&quot;&gt;&gt;
            &lt;&lt;case 20&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;20-XavierEncounterCumshot3&quot;&gt;&gt;
            &lt;&lt;case 21&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;21-XavierEncounterCumshot4&quot;&gt;&gt;
            &lt;&lt;case 22&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;22-XavierEncounterFuck1&quot;&gt;&gt;
            &lt;&lt;case 23&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;23-XavierEncounterFuck2&quot;&gt;&gt;
            &lt;&lt;case 24&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;24-XavierEncounterFuck3&quot;&gt;&gt;
            &lt;&lt;case 25&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;25-XavierEncounterFuck4&quot;&gt;&gt;
            &lt;&lt;case 26&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;26-XavierEncounterFuck5&quot;&gt;&gt;
            &lt;&lt;case 27&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;27-XavierEncounterFuck6&quot;&gt;&gt;
            &lt;&lt;case 28&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;28-XavierEncounterShemale1&quot;&gt;&gt;
            &lt;&lt;case 29&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;29-XavierEncounterShemale2&quot;&gt;&gt;
            &lt;&lt;case 30&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;30-XavierEncounterShemale3&quot;&gt;&gt;
            &lt;&lt;case 31&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;31-XavierEncounterShemale4&quot;&gt;&gt;
            &lt;&lt;case 32&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;32-XavierEncounterShemale5&quot;&gt;&gt;
            &lt;&lt;case 33&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;33-XavierEncounterShemale6&quot;&gt;&gt;
            &lt;&lt;case 34&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;34-XavierEncounterShemale7&quot;&gt;&gt;
            &lt;&lt;case 35&gt;&gt;
                &lt;&lt;if ndef $xavierRandomEncounterCounter&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter = 1&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;&lt;set $xavierRandomEncounterCounter += 1&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;include &quot;35-XavierEncounterShemale8&quot;&gt;&gt;
        &lt;&lt;/switch&gt;&gt;
    &lt;&lt;/replace&gt;&gt;
&lt;&lt;/button&gt;&gt;@@&lt;/span&gt;
&lt;br&gt;
@@.choicebutton;&lt;&lt;button &quot;Come back later&quot;&gt;&gt;
    &lt;&lt;goto &quot;GitGud&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;@@</tw-passagedata><tw-passagedata pid="306" name="1-XavierEncounterBlowjob1" tags="nobr" position="725,3850" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/blowjob1.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="307" name="2-XavierEncounterBlowjob2" tags="nobr" position="850,3850" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/blowjob2.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="308" name="3-XavierEncounterBlowjob3" tags="nobr" position="975,3850" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/blowjob3.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="309" name="4-XavierEncounterBlowjob4" tags="nobr" position="1100,3850" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/blowjob4.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="310" name="5-XavierEncounterBlowjob5" tags="nobr" position="1225,3850" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/blowjob5.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="311" name="6-XavierEncounterBlowjob6" tags="nobr" position="100,3975" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/blowjob6.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="312" name="7-XavierEncounterBlowjob7" tags="nobr" position="225,3975" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/blowjob7.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="313" name="8-XavierEncounterBlowjob8" tags="nobr" position="350,3975" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/blowjob8.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="314" name="9-XavierEncounterBlowjob9" tags="nobr" position="475,3975" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/blowjob9.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="315" name="10-XavierEncounterBlowjob10" tags="nobr" position="600,3975" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/blowjob10.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="316" name="11-XavierEncounterBlowjob11" tags="nobr" position="725,3975" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/blowjob11.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="317" name="12-XavierEncounterAnal1" tags="nobr" position="850,3975" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/anal1.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="318" name="13-XavierEncounterAnal2" tags="nobr" position="975,3975" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/anal2.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="319" name="14-XavierEncounterAnal3" tags="nobr" position="1100,3975" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/anal3.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="320" name="15-XavierEncounterRimming1" tags="nobr" position="1225,3975" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/rimming1.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="321" name="16-XavierEncounterRimming2" tags="nobr" position="100,4100" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/rimming2.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="322" name="17-XavierEncounterRimming3" tags="nobr" position="225,4100" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/rimming3.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="323" name="18-XavierEncounterCumshot1" tags="nobr" position="350,4100" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/cumshot1.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="324" name="19-XavierEncounterCumshot2" tags="nobr" position="475,4100" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/cumshot2.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="325" name="20-XavierEncounterCumshot3" tags="nobr" position="600,4100" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/cumshot3.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="326" name="21-XavierEncounterCumshot4" tags="nobr" position="725,4100" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/cumshot4.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="327" name="22-XavierEncounterFuck1" tags="" position="850,4100" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/fuck1.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="328" name="23-XavierEncounterFuck2" tags="" position="975,4100" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/fuck2.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="329" name="24-XavierEncounterFuck3" tags="" position="1100,4100" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/fuck3.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="330" name="25-XavierEncounterFuck4" tags="" position="1225,4100" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/fuck4.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="331" name="26-XavierEncounterFuck5" tags="" position="100,4225" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/fuck5.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="332" name="27-XavierEncounterFuck6" tags="" position="225,4225" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/fuck6.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="333" name="28-XavierEncounterShemale1" tags="" position="350,4225" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/shemale1.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="334" name="29-XavierEncounterShemale2" tags="" position="475,4225" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/shemale2.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="335" name="30-XavierEncounterShemale3" tags="" position="600,4225" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/shemale3.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="336" name="31-XavierEncounterShemale4" tags="" position="725,4225" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/shemale4.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="337" name="32-XavierEncounterShemale5" tags="" position="850,4225" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/shemale5.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="338" name="33-XavierEncounterShemale6" tags="" position="975,4225" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/shemale6.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="339" name="34-XavierEncounterShemale7" tags="" position="1100,4225" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/shemale7.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="340" name="35-XavierEncounterShemale8" tags="" position="1225,4225" size="100,100">&lt;video width=&quot;100%&quot; height=&quot;auto&quot; autoplay loop&gt;
  &lt;source src=&quot;imgs/locations/gitgud/encounters/shemale8.webm&quot; type=&quot;video/webm&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;

You peek though the keyhole and instantly realize that it&#39;s better to avoid interrupting him right now.
&lt;br&gt;</tw-passagedata><tw-passagedata pid="341" name="RegularVisitWithXavier" tags="nobr" position="100,4350" size="100,100">&lt;div class=&quot;img-character&quot;&gt;&lt;img src=&quot;imgs/characters/xavier/gitgud-xavier.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;br&gt;

&lt;&lt;if $relationshipXavier &lt;= 20&gt;&gt;
    &lt;&lt;xavier&gt;&gt;You better have a good reason for interrupting me.&lt;&lt;/xavier&gt;&gt;
&lt;&lt;elseif $relationshipXavier &lt;= 40&gt;&gt;
    &lt;&lt;xavier&gt;&gt;You need something?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;elseif $relationshipXavier &lt;= 60&gt;&gt;
    &lt;&lt;xavier&gt;&gt;Hey, what&#39;s going on?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;elseif $relationshipXavier &lt;= 80&gt;&gt;
    &lt;&lt;xavier&gt;&gt;What brings you around?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;xavier&gt;&gt;What&#39;s on your mind, my friend?&lt;&lt;/xavier&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br&gt;
&lt;div id=&quot;dialog-content&quot; class=&quot;dialog-options&quot;&gt;
    &lt;p&gt;&lt;strong&gt;Choose a topic to discuss with Xavier:&lt;/strong&gt;&lt;/p&gt;
    &lt;&lt;set _hasUnlockedTopics = false&gt;&gt; 
    &lt;&lt;if $xavierGitGudDialogs and Object.keys($xavierGitGudDialogs).length &gt; 0&gt;&gt;
        &lt;&lt;set _topics = Object.keys($xavierGitGudDialogs).reverse()&gt;&gt;
        &lt;&lt;for _topic range _topics&gt;&gt;
            &lt;&lt;set _data = $xavierGitGudDialogs[_topic]&gt;&gt;
            &lt;&lt;if _data.unlocked&gt;&gt;
                &lt;&lt;set _hasUnlockedTopics = true&gt;&gt;
                &lt;&lt;set _buttonText = _topic&gt;&gt;
                &lt;&lt;set _tempPassage = _data.passage&gt;&gt;
                &lt;&lt;if _data.isNew&gt;&gt;
                    &lt;&lt;set _buttonText += &quot; 🆕&quot;&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;set _buttonText += &quot; &lt;span class=&#39;action-point-icon&#39;&gt;⚡&lt;/span&gt;&quot;&gt;&gt;
                &lt;&lt;capture _tempPassage _buttonText&gt;&gt;
                    @@.choicebutton;
                    &lt;&lt;button _buttonText&gt;&gt; 
                        &lt;&lt;if MindWare.processActionButtonClickNoPassage(1)&gt;&gt;
                            &lt;&lt;replace &quot;#dialog-content&quot;&gt;&gt;&lt;&lt;include _tempPassage&gt;&gt;&lt;&lt;/replace&gt;&gt;
                        &lt;&lt;/if&gt;&gt;
                    &lt;&lt;/button&gt;&gt;@@
                    &lt;br&gt;
                &lt;&lt;/capture&gt;&gt;
            &lt;&lt;/if&gt;&gt;
        &lt;&lt;/for&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if not _hasUnlockedTopics&gt;&gt; 
        &lt;p&gt;You have nothing to discuss with Xavier right now.&lt;/p&gt;
        &lt;br&gt;
    &lt;&lt;/if&gt;&gt;

&lt;p class=&quot;back-link&quot;&gt;
    [[&quot;Go Back&quot;|GitGud]]
&lt;/p&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="342" name="PanaceaClinic" tags="nobr" position="225,4350" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/hospital/panacea-clinic-reception.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;

&lt;p&gt;You enter the Panacea Clinic and a familiar antiseptic smell immediately hits your nose. There are rows of chairs occupied by patients waiting for their turn.&lt;/p&gt;

&lt;div class=&quot;office-hub&quot;&gt;
    &lt;h4&gt;Activities&lt;/h4&gt;
        &lt;&lt;if Object.values($xavierGitGudDialogs).some(dialog =&gt; dialog.isNew)&gt;&gt;
            &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;Panacea-Nurse&#39;)&quot;&gt;💬 Talk with the nurse 🆕 &lt;/button&gt;
        &lt;&lt;else&gt;&gt;
            &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.Engine.play(&#39;Panacea-Nurse&#39;)&quot;&gt;💬 Talk with the nurse&lt;/button&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;br&gt;
    &lt;button class=&quot;office-button&quot; onclick=&quot;SugarCube.State.variables.goOutsideGoBackPassage = &#39;GitGud&#39;; SugarCube.Engine.play(&#39;GoOutside&#39;)&quot;&gt;🚪 Go outside&lt;/button&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="343" name="Panacea-Nurse" tags="nobr" position="350,4350" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/hospital/panacea-clinic-reception-nurse.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
&lt;br&gt;
&lt;&lt;nurse&gt;&gt;Can I help you?&lt;&lt;/nurse&gt;&gt;
&lt;br&gt;
&lt;div id=&quot;dialog-content&quot; class=&quot;dialog-options&quot;&gt;
    &lt;p&gt;&lt;strong&gt;Choose a topic to discuss with the nurse:&lt;/strong&gt;&lt;/p&gt;
    &lt;&lt;set _hasUnlockedTopics = false&gt;&gt; 
    &lt;&lt;if $nursePanaceaDialogs and Object.keys($nursePanaceaDialogs).length &gt; 0&gt;&gt;
        &lt;&lt;set _topics = Object.keys($nursePanaceaDialogs).reverse()&gt;&gt;
        &lt;&lt;for _topic range _topics&gt;&gt;
            &lt;&lt;set _data = $nursePanaceaDialogs[_topic]&gt;&gt;
            &lt;&lt;if _data.unlocked&gt;&gt;
                &lt;&lt;set _hasUnlockedTopics = true&gt;&gt;
                &lt;&lt;set _buttonText = _topic&gt;&gt;
                &lt;&lt;set _tempPassage = _data.passage&gt;&gt;
                &lt;&lt;if _data.isNew&gt;&gt;
                    &lt;&lt;set _buttonText += &quot; 🆕&quot;&gt;&gt;
                &lt;&lt;/if&gt;&gt;
                &lt;&lt;set _buttonText += &quot; &lt;span class=&#39;action-point-icon&#39;&gt;⚡&lt;/span&gt;&quot;&gt;&gt;
                &lt;&lt;capture _tempPassage _buttonText&gt;&gt;
                    @@.choicebutton;
                    &lt;&lt;button _buttonText&gt;&gt; 
                        &lt;&lt;if MindWare.processActionButtonClickNoPassage(1)&gt;&gt;
                            &lt;&lt;replace &quot;#dialog-content&quot;&gt;&gt;&lt;&lt;include _tempPassage&gt;&gt;&lt;&lt;/replace&gt;&gt;
                        &lt;&lt;/if&gt;&gt;
                    &lt;&lt;/button&gt;&gt;@@
                    &lt;br&gt;
                &lt;&lt;/capture&gt;&gt;
            &lt;&lt;/if&gt;&gt;
        &lt;&lt;/for&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if not _hasUnlockedTopics&gt;&gt; 
        &lt;p&gt;You have nothing to discuss with the nurse right now.&lt;/p&gt;
        &lt;br&gt;
    &lt;&lt;/if&gt;&gt;

&lt;p class=&quot;back-link&quot;&gt;
    [[&quot;Go Back&quot;|PanaceaClinic]]
&lt;/p&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="344" name="SynTech-Outside" tags="" position="475,4350" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/locations/syntech.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;
\
You have reached the SynTech Tower. The tower&#39;s sheer height makes you feel insignificant in comparison. As you gaze upward, the colossal 3D hologram of Earth at the top seems to gaze back, a reminder of SynTech&#39;s overwhelming influence over the world. 

Despite the tower&#39;s allure, you have no business to attend to here at the moment. 

[[Go back|GoOutside]]</tw-passagedata><tw-passagedata pid="345" name="GoOutside" tags="nobr" position="600,4350" size="100,100">&lt;div class=&quot;city-map&quot;&gt;
  &lt;p&gt;Where in NeoUrbania would you like to go?&lt;/p&gt;

  &lt;div class=&quot;district-wrapper&quot;&gt;
    &lt;div class=&quot;map-section glowsection&quot; id=&quot;backlog-map-screen&quot;&gt;
      &lt;h4&gt;Backlog&lt;/h4&gt;
      &lt;button class=&quot;outside-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(0, &#39;HomeBacklog&#39;)&quot;&gt;Your Apartment&lt;span class=&quot;action-point-icon&quot;&gt;&lt;/span&gt;&lt;/button&gt;
      &lt;&lt;if $dayOfWeek is &quot;Monday&quot; or $dayOfWeek is &quot;Tuesday&quot; or $dayOfWeek is &quot;Wednesday&quot; or $dayOfWeek is &quot;Thursday&quot; or $dayOfWeek is &quot;Friday&quot;&gt;&gt;
        &lt;button class=&quot;outside-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(0, &#39;BrainFry&#39;)&quot;&gt;BrainFry&lt;span class=&quot;action-point-icon&quot;&gt;&lt;/span&gt;&lt;/button&gt;
      &lt;&lt;else&gt;&gt;
        &lt;button class=&quot;outside-button action-point-button&quot; onclick=&quot;SugarCube.UI.alert(&#39;It\&#39;s the weekend! BrainFry is closed today.&#39;)&quot;&gt;BrainFry &lt;span class=&quot;action-point-icon&quot;&gt;&lt;/span&gt;&lt;/button&gt;
      &lt;&lt;/if&gt;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;map-section glowsection&quot; id=&quot;city-center-map-screen&quot;&gt;
      &lt;h4&gt;City Core&lt;/h4&gt;
      &lt;button class=&quot;outside-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(0, &#39;SynTech-Outside&#39;)&quot;&gt;SynTech Tower &lt;span class=&quot;action-point-icon&quot;&gt;&lt;/span&gt;&lt;/button&gt;
    &lt;/div&gt;
    &lt;div class=&quot;map-section glowsection&quot; id=&quot;pleasure-grid-map-screen&quot;&gt;
      &lt;h4&gt;Pleasure Grid&lt;/h4&gt;
        &lt;&lt;if $gitGutUnlocked === true&gt;&gt;
          &lt;&lt;if $gitGutIntroduced&gt;&gt;
            &lt;&lt;if $dayOfWeek is &quot;Monday&quot; or $dayOfWeek is &quot;Tuesday&quot; or $dayOfWeek is &quot;Wednesday&quot; or $dayOfWeek is &quot;Thursday&quot; or $dayOfWeek is &quot;Friday&quot;&gt;&gt;
              &lt;button class=&quot;outside-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(0, &#39;GitGud&#39;)&quot;&gt;GitGud&lt;span class=&quot;action-point-icon&quot;&gt;&lt;/span&gt;&lt;/button&gt;
            &lt;&lt;else&gt;&gt;
              &lt;button class=&quot;outside-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(0, &#39;GitGud-Weekend&#39;)&quot;&gt;GitGud&lt;span class=&quot;action-point-icon&quot;&gt;&lt;/span&gt;&lt;/button&gt;
            &lt;&lt;/if&gt;&gt;
          &lt;&lt;else&gt;&gt;
            &lt;button class=&quot;outside-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(0, &#39;GitGud-Introduction&#39;)&quot;&gt;GitGud&lt;span class=&quot;action-point-icon&quot;&gt;&lt;/span&gt;&lt;/button&gt;
          &lt;&lt;/if&gt;&gt;
        &lt;&lt;/if&gt;&gt;
        &lt;&lt;if $eroSphereUnlocked === true&gt;&gt;
          &lt;&lt;if $dayOfWeek is &quot;Saturday&quot; or $dayOfWeek is &quot;Sunday&quot;&gt;&gt;
            &lt;button class=&quot;outside-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(0, &#39;EroSphere-Outside&#39;)&quot;&gt;EroSphere&lt;span class=&quot;action-point-icon&quot;&gt;&lt;/span&gt;&lt;/button&gt;
          &lt;&lt;else&gt;&gt;
            &lt;button class=&quot;outside-button action-point-button&quot; onclick=&quot;SugarCube.UI.alert(&#39;It\&#39;s not the weekend yet! EroSphere is closed today.&#39;)&quot;&gt;EroSphere&lt;span class=&quot;action-point-icon&quot;&gt;&lt;/span&gt;&lt;/button&gt;
          &lt;&lt;/if&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;/div&gt;

    &lt;&lt;if $chapter1Started&gt;&gt;
      &lt;div class=&quot;map-section glowsection&quot; id=&quot;community-zone-map-screen&quot;&gt;
        &lt;h4&gt;Community Zone&lt;/h4&gt;
          &lt;button class=&quot;outside-button action-point-button&quot; onclick=&quot;MindWare.processActionButtonClick(0, &#39;PanaceaClinic&#39;)&quot;&gt;Panacea Clinic&lt;span class=&quot;action-point-icon&quot;&gt;&lt;/span&gt;&lt;/button&gt;
      &lt;/div&gt;
    &lt;&lt;/if&gt;&gt;
    
  &lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;back-link&quot;&gt;[[&quot;Go Back&quot;|$goOutsideGoBackPassage]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="346" name="Widget-GenderMessages" tags="widget nobr" position="725,4350" size="100,100">&lt;&lt;widget &quot;genderMasculine&quot;&gt;&gt;
    &lt;&lt;set _amount = $args[0]&gt;&gt;
    &lt;&lt;set _playerGender = State.variables.playerGender&gt;&gt;
    &lt;&lt;set _newGender = Math.min(_playerGender + _amount, 100)&gt;&gt;
    
    &lt;&lt;if _newGender == _playerGender&gt;&gt;
        &lt;div class=&quot;gender-change&quot;&gt;&lt;span class=&quot;gender-increase&quot;&gt;&lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;♂️&lt;/span&gt; Your masculine gender identity is already at its maximum.&lt;/span&gt;&lt;/div&gt;
        &lt;&lt;run console.log(&quot;GenderMasculine widget: Gender already at maximum (100). Affirmation message displayed.&quot;)&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;set State.variables.playerGender = _newGender&gt;&gt;
        &lt;&lt;set _pointText = _amount == 1 ? &quot;1 point&quot; : (_amount + &quot; points&quot;)&gt;&gt;
        &lt;div class=&quot;gender-change&quot;&gt;&lt;span class=&quot;gender-increase&quot;&gt;&lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;♂️&lt;/span&gt; Your gender identity has become more masculine by &lt;&lt;print _pointText&gt;&gt;.&lt;/span&gt;&lt;/div&gt;
        &lt;&lt;run console.log(&quot;GenderMasculine widget: Gender increased by &quot; + _amount + &quot; to &quot; + _newGender)&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;


&lt;&lt;widget &quot;genderFeminine&quot;&gt;&gt;
    &lt;&lt;set _amount = $args[0]&gt;&gt;
    &lt;&lt;set _playerGender = State.variables.playerGender&gt;&gt;
    &lt;&lt;set _newGender = Math.max(_playerGender - _amount, 0)&gt;&gt;
    
    &lt;&lt;if _newGender == _playerGender&gt;&gt;
        &lt;div class=&quot;gender-change&quot;&gt;&lt;span class=&quot;gender-decrease&quot;&gt;&lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;♀️&lt;/span&gt; Your feminine gender identity is already at its minimum.&lt;/span&gt;&lt;/div&gt;
        &lt;&lt;run console.log(&quot;GenderFeminine widget: Gender already at minimum (0). Affirmation message displayed.&quot;)&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;set State.variables.playerGender = _newGender&gt;&gt;
        &lt;&lt;set _pointText = _amount == 1 ? &quot;1 point&quot; : (_amount + &quot; points&quot;)&gt;&gt;
        &lt;div class=&quot;gender-change&quot;&gt;&lt;span class=&quot;gender-decrease&quot;&gt;&lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;♀️&lt;/span&gt; Your gender identity has become more feminine by &lt;&lt;print _pointText&gt;&gt;.&lt;/span&gt;&lt;/div&gt;
        &lt;&lt;run console.log(&quot;GenderFeminine widget: Gender decreased by &quot; + _amount + &quot; to &quot; + _newGender)&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="347" name="Widget-Morality" tags="widget" position="850,4350" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;widget &quot;increasemorality&quot;&gt;&gt;
&lt;&lt;set _amount to $args[0] ? $args[0] : 5&gt;&gt;  &lt;!-- Check if argument is provided; if not, default to 5 --&gt;
&lt;&lt;run MindWare.increaseMorality(Math.abs(_amount))&gt;&gt;
&lt;div class=&quot;morality-change&quot;&gt;
    &lt;span class=&quot;morality-increase&quot;&gt;
        &lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;⚖️&lt;/span&gt;
        Morality has increased by &lt;&lt;print _amount&gt;&gt;.
    &lt;/span&gt;
&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;
&lt;&lt;/nobr&gt;&gt;

&lt;&lt;nobr&gt;&gt;
&lt;&lt;widget &quot;increasemoralityonce&quot;&gt;&gt;
    &lt;&lt;if visited() is 1&gt;&gt; &lt;!-- Check if this is the first visit to the passage --&gt;
        &lt;&lt;set _amount to $args[0] ? $args[0] : 5&gt;&gt;  &lt;!-- Check if an argument is provided; if not, default to 5 --&gt;
        &lt;&lt;run MindWare.increaseMorality(Math.abs(_amount))&gt;&gt;
        &lt;div class=&quot;morality-change&quot;&gt;
            &lt;span class=&quot;morality-increase&quot;&gt;
                &lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;⚖️&lt;/span&gt;
                Morality has increased by &lt;&lt;print _amount&gt;&gt;.
            &lt;/span&gt;
        &lt;/div&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
&lt;&lt;/nobr&gt;&gt;

&lt;&lt;nobr&gt;&gt;
&lt;&lt;widget &quot;decreasemorality&quot;&gt;&gt;
&lt;&lt;set _amount to $args[0] ? $args[0] : -5&gt;&gt;  &lt;!-- Check if argument is provided; if not, default to -5 --&gt;
&lt;&lt;run MindWare.decreaseMorality(Math.abs(_amount))&gt;&gt;
&lt;div class=&quot;morality-change&quot;&gt;
    &lt;span class=&quot;morality-decrease&quot;&gt;
        &lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;⚖️&lt;/span&gt;
        Morality has decreased by &lt;&lt;print _amount&gt;&gt;.
    &lt;/span&gt;
&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;
&lt;&lt;/nobr&gt;&gt;

&lt;&lt;nobr&gt;&gt;
&lt;&lt;widget &quot;decreasemoralityonce&quot;&gt;&gt;
    &lt;&lt;if visited() is 1&gt;&gt; &lt;!-- Check if this is the first visit to the passage --&gt;
        &lt;&lt;set _amount to $args[0] ? $args[0] : -5&gt;&gt;  &lt;!-- Check if an argument is provided; if not, default to -5 --&gt;
        &lt;&lt;run MindWare.decreaseMorality(Math.abs(_amount))&gt;&gt;
        &lt;div class=&quot;morality-change&quot;&gt;
            &lt;span class=&quot;morality-decrease&quot;&gt;
                &lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;⚖️&lt;/span&gt;
                Morality has decreased by &lt;&lt;print _amount&gt;&gt;.
            &lt;/span&gt;
        &lt;/div&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
&lt;&lt;/nobr&gt;&gt;

/*********** OLD ***********/
&lt;&lt;widget &quot;moralitydecreased&quot;&gt;&gt;\
    &lt;div class=&quot;morality-change&quot;&gt;&lt;span class=&quot;morality-decrease&quot;&gt;&lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;⚖️&lt;/span&gt; Morality has decreased.&lt;/span&gt;&lt;/div&gt;\
&lt;&lt;/widget&gt;&gt;\

&lt;&lt;widget &quot;moralityincreased&quot;&gt;&gt;\
    &lt;div class=&quot;morality-change&quot;&gt;&lt;span class=&quot;morality-increase&quot;&gt;&lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;⚖️&lt;/span&gt; Morality has increased.&lt;/span&gt;&lt;/div&gt;\
&lt;&lt;/widget&gt;&gt;\
/*********** OLD ***********/</tw-passagedata><tw-passagedata pid="348" name="Widget-Relationships" tags="widget" position="975,4350" size="100,100">&lt;&lt;widget &quot;relationshipIncreasedWith&quot;&gt;&gt;\
    &lt;&lt;set _person = $args[0]&gt;&gt;\
    &lt;&lt;set _points = $args.length &gt; 1 ? $args[1] : 1&gt;&gt;\
    &lt;&lt;set _variableName = &quot;relationship&quot; + _person&gt;&gt;\
    &lt;&lt;set _currentValue = State.getVar(&quot;$&quot; + _variableName)&gt;&gt;\
    &lt;&lt;set _newValue = Math.min(Math.max(_currentValue + _points, 0), 100)&gt;&gt;\
    &lt;&lt;run State.setVar(&quot;$&quot; + _variableName, _newValue)&gt;&gt;\
    &lt;div class=&quot;relationship-change&quot;&gt;&lt;span class=&quot;relationship-increase&quot;&gt;&lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;💞&lt;/span&gt; Your relationship with &lt;&lt;print _person&gt;&gt; has increased by &lt;&lt;print _points&gt;&gt; &lt;&lt;print _points eq 1 ? &quot;point&quot; : &quot;points&quot;&gt;&gt;. It is now &lt;&lt;print _newValue&gt;&gt; out of 100.&lt;/span&gt;&lt;/div&gt;\
    &lt;&lt;run console.log(&quot;Relationship with &quot; + _person + &quot; increased by &quot; + _points + &quot; points. New value: &quot; + _newValue)&gt;&gt;\
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;relationshipDecreasedWith&quot;&gt;&gt;\
    &lt;&lt;set _person = $args[0]&gt;&gt;\
    &lt;&lt;set _points = $args.length &gt; 1 ? $args[1] : 1&gt;&gt;\
    &lt;&lt;set _variableName = &quot;relationship&quot; + _person&gt;&gt;\
    &lt;&lt;set _currentValue = State.getVar(&quot;$&quot; + _variableName)&gt;&gt;\
    &lt;&lt;set _newValue = Math.min(Math.max(_currentValue - _points, 0), 100)&gt;&gt;\
    &lt;&lt;run State.setVar(&quot;$&quot; + _variableName, _newValue)&gt;&gt;\
    &lt;div class=&quot;relationship-change&quot;&gt;&lt;span class=&quot;relationship-decrease&quot;&gt;&lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;💔&lt;/span&gt; Your relationship with &lt;&lt;print _person&gt;&gt; has decreased by &lt;&lt;print _points&gt;&gt; &lt;&lt;print _points eq 1 ? &quot;point&quot; : &quot;points&quot;&gt;&gt;. It is now &lt;&lt;print _newValue&gt;&gt; out of 100.&lt;/span&gt;&lt;/div&gt;\
    &lt;&lt;run console.log(&quot;Relationship with &quot; + _person + &quot; decreased by &quot; + _points + &quot; points. New value: &quot; + _newValue)&gt;&gt;\
&lt;&lt;/widget&gt;&gt;

/* Usage:
&lt;&lt;relationshipIncreasedWith &quot;Ray&quot; 3&gt;&gt;
*/

/* OLD */
&lt;&lt;widget &quot;relationshipIncreased&quot;&gt;&gt;\
    &lt;&lt;set _person = $args[0]&gt;&gt;\
    &lt;div class=&quot;relationship-change&quot;&gt;&lt;span class=&quot;relationship-increase&quot;&gt;&lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;💞&lt;/span&gt; Your relationship with &lt;&lt;print _person&gt;&gt; has increased.&lt;/span&gt;&lt;/div&gt;\
&lt;&lt;/widget&gt;&gt;\

&lt;&lt;widget &quot;relationshipDecreased&quot;&gt;&gt;\
    &lt;&lt;set _person = $args[0]&gt;&gt;\
    &lt;div class=&quot;relationship-change&quot;&gt;&lt;span class=&quot;relationship-decrease&quot;&gt;&lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;💔&lt;/span&gt; Your relationship with &lt;&lt;print _person&gt;&gt; has decreased.&lt;/span&gt;&lt;/div&gt;\
&lt;&lt;/widget&gt;&gt;\
/* OLD */</tw-passagedata><tw-passagedata pid="349" name="GoToSleep" tags="" position="1100,4350" size="100,100">&lt;&lt;set $dreamWebMs to [&quot;imgs/dreams/dream1.webm&quot;, &quot;imgs/dreams/dream2.webm&quot;, &quot;imgs/dreams/dream3.webm&quot;, &quot;imgs/dreams/dream4.webm&quot;, &quot;imgs/dreams/dream5.webm&quot;, &quot;imgs/dreams/dream6.webm&quot;, &quot;imgs/dreams/dream7.webm&quot;, &quot;imgs/dreams/dream8.webm&quot;, &quot;imgs/dreams/dream9.webm&quot;, &quot;imgs/dreams/dream10.webm&quot;]&gt;&gt;\
\
&lt;div class=&quot;img-dream&quot; id=&quot;dreamDisplay&quot;&gt;&lt;!-- Video will be displayed here --&gt;&lt;/div&gt;
&lt;&lt;fadein &quot;1s&quot;&gt;&gt;
You close your eyes, leaving behind the hustle and bustle of the world.
&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein &quot;1s&quot; &quot;1s&quot;&gt;&gt;
Drifting into slumber, you find solace in the peaceful dreams that await.
&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein &quot;1s&quot; &quot;2s&quot;&gt;&gt;
As you slowly wake up, a sense of renewal and peace fills you. 
&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein &quot;1s&quot; &quot;3s&quot;&gt;&gt;
&lt;div class=&#39;action-points-change&#39;&gt;&lt;span class=&#39;action-points-increase&#39;&gt;&lt;span class=&quot;action-point-icon&quot;&gt;⚡&lt;/span&gt; Action Points restored.&lt;/span&gt;&lt;/div&gt;
&lt;&lt;link &quot;Continue&quot;&gt;&gt;
    &lt;&lt;unset $dreamWebMs&gt;&gt;
    &lt;&lt;run MindWare.advanceDay()&gt;&gt;
    &lt;&lt;goto &quot;HomeBacklog&quot;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;/fadein&gt;&gt;
&lt;&lt;script&gt;&gt;
$(document).ready(function() {
    setup.displayRandomDream = function() {
        const webms = State.variables.dreamWebMs;
        const randomWebM = webms[Math.floor(Math.random() * webms.length)];
        const videoHTML = `&lt;video style=&quot;display:none;&quot; preload autoplay muted loop&gt;&lt;source src=&quot;${randomWebM}&quot; type=&quot;video/webm&quot;&gt;Your browser does not support the video tag.&lt;/video&gt;`;
        
        $(&#39;#dreamDisplay&#39;).html(videoHTML);
        $(&#39;#dreamDisplay video&#39;).fadeIn(9000); // 9000 milliseconds = 9 seconds
    };
    
    setup.displayRandomDream(); // Call the function to display a random dream video.
});
&lt;&lt;/script&gt;&gt;

/* 
&lt;&lt;set $eroSphereDishesFailed = false&gt;&gt;\
&lt;&lt;set $eroSphereDishesAttempted = false&gt;&gt;\
&lt;&lt;set $simsWatchedToday = false&gt;&gt;\
&lt;&lt;done&gt;&gt;
&lt;&lt;set $implantCharge = 100&gt;&gt;\
&lt;&lt;/done&gt;&gt;\
\ */
/* :: TakeNap
&lt;&lt;set $dreamWebMs to [&quot;imgs/dreams/dream1.webm&quot;, &quot;imgs/dreams/dream2.webm&quot;, &quot;imgs/dreams/dream3.webm&quot;, &quot;imgs/dreams/dream4.webm&quot;, &quot;imgs/dreams/dream5.webm&quot;, &quot;imgs/dreams/dream6.webm&quot;, &quot;imgs/dreams/dream7.webm&quot;, &quot;imgs/dreams/dream8.webm&quot;, &quot;imgs/dreams/dream9.webm&quot;, &quot;imgs/dreams/dream10.webm&quot;]&gt;&gt;
\
&lt;div class=&quot;img-dream&quot; id=&quot;dreamDisplay&quot;&gt;
    &lt;!-- Video will be displayed here --&gt;
&lt;/div&gt;
&lt;&lt;fadein &quot;1s&quot;&gt;&gt;
You close your eyes, leaving behind the hustle and bustle of the world.
&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein &quot;1s&quot; &quot;1s&quot;&gt;&gt;
Drifting into slumber, you find solace in the peaceful dreams that await.
&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein &quot;1s&quot; &quot;2s&quot;&gt;&gt;
As you slowly wake up, a sense of renewal and peace fills you. 
&lt;&lt;/fadein&gt;&gt;
&lt;&lt;fadein &quot;1s&quot; &quot;3s&quot;&gt;&gt;
&lt;&lt;link &quot;Continue&quot;&gt;&gt;
    &lt;&lt;unset $dreamWebMs&gt;&gt;
    &lt;&lt;goto &quot;HomeBacklog&quot;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;/fadein&gt;&gt;
&lt;&lt;script&gt;&gt;
$(document).ready(function() {
    setup.displayRandomDream = function() {
        const webms = State.variables.dreamWebMs;
        const randomWebM = webms[Math.floor(Math.random() * webms.length)];
        const videoHTML = `&lt;video style=&quot;display:none;&quot; preload autoplay muted loop&gt;&lt;source src=&quot;${randomWebM}&quot; type=&quot;video/webm&quot;&gt;Your browser does not support the video tag.&lt;/video&gt;`;
        
        $(&#39;#dreamDisplay&#39;).html(videoHTML);
        $(&#39;#dreamDisplay video&#39;).fadeIn(9000); // 9000 milliseconds = 9 seconds
    };
    
    setup.displayRandomDream(); // Call the function to display a random dream video.
});
&lt;&lt;/script&gt;&gt; */</tw-passagedata><tw-passagedata pid="350" name="SteadySynapseVX-Variables" tags="nobr" position="1225,4350" size="100,100">&lt;&lt;set $implantCharge = 70&gt;&gt;
&lt;&lt;set $mentalCondition = &quot;Stable&quot;&gt;&gt; /* Stable -&gt; Unstable -&gt; Dysphoric */</tw-passagedata><tw-passagedata pid="351" name="SynapseSteadyVX" tags="nobr" position="100,4475" size="100,100">/* Mental condition */
&lt;&lt;set _playerBodyValue to MindWare.bodyToGenderValue($playerBody)&gt;&gt;
&lt;&lt;set _difference to Math.abs($playerGender - _playerBodyValue)&gt;&gt;

&lt;&lt;if _difference &gt; 40&gt;&gt;
    &lt;&lt;if $mentalCondition neq &quot;Dysphoric&quot;&gt;&gt;
        &lt;&lt;set $mentalCondition to &quot;Dysphoric&quot;&gt;&gt;
        &lt;&lt;run console.log(&quot;Player Body Value: &quot; + _playerBodyValue)&gt;&gt;
        &lt;&lt;run console.log(&quot;Difference between Gender and Body Value: &quot; + _difference)&gt;&gt;
        &lt;&lt;run console.log(&quot;Mental Condition set to Dysphoric due to difference &gt; 40&quot;)&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;elseif _difference &gt; 20&gt;&gt;
    &lt;&lt;if $mentalCondition neq &quot;Unstable&quot;&gt;&gt;
        &lt;&lt;set $mentalCondition to &quot;Unstable&quot;&gt;&gt;
        &lt;&lt;run console.log(&quot;Player Body Value: &quot; + _playerBodyValue)&gt;&gt;
        &lt;&lt;run console.log(&quot;Difference between Gender and Body Value: &quot; + _difference)&gt;&gt;
        &lt;&lt;run console.log(&quot;Mental Condition set to Unstable due to difference &gt; 20&quot;)&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;if $mentalCondition neq &quot;Stable&quot;&gt;&gt;
        &lt;&lt;set $mentalCondition to &quot;Stable&quot;&gt;&gt;
        &lt;&lt;run console.log(&quot;Player Body Value: &quot; + _playerBodyValue)&gt;&gt;
        &lt;&lt;run console.log(&quot;Difference between Gender and Body Value: &quot; + _difference)&gt;&gt;
        &lt;&lt;run console.log(&quot;Mental Condition set to Stable due to difference &lt;= 20&quot;)&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

/* Implant charge */
&lt;&lt;if $implantCharge &gt; 0 &amp;&amp; $mentalCondition === &quot;Stable&quot;&gt;&gt;
    &lt;&lt;set $implantCharge -= 1&gt;&gt;
    &lt;&lt;if $implantCharge &lt; 0&gt;&gt;&lt;&lt;set $implantCharge = 0&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $implantCharge &gt; 0 &amp;&amp; $mentalCondition === &quot;Unstable&quot;&gt;&gt;
    &lt;&lt;set $implantCharge -= 2&gt;&gt;
    &lt;&lt;if $implantCharge &lt; 0&gt;&gt;&lt;&lt;set $implantCharge = 0&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $implantCharge &gt; 0 &amp;&amp; $mentalCondition === &quot;Dysphoric&quot;&gt;&gt;
    &lt;&lt;set $implantCharge -= 3&gt;&gt;
    &lt;&lt;if $implantCharge &lt; 0&gt;&gt;&lt;&lt;set $implantCharge = 0&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="352" name="Task-LandlordJob" tags="" position="225,4475" size="100,100">Wait for an email from the client.

Add the provided IP address to your target list and hack the new target using the Hack-a-Target computer app.

Find evidence of the landlord&#39;s spying.</tw-passagedata><tw-passagedata pid="353" name="Task-StartBrainFryJob" tags="" position="350,4475" size="100,100">Go to the BrainFry building.

Meet your boss and coworkers.

Work on a project.</tw-passagedata><tw-passagedata pid="354" name="Task-ContinueTheGrind" tags="" position="475,4475" size="100,100">Keep working at BrainFry.</tw-passagedata><tw-passagedata pid="355" name="Minigame-Bruteforce" tags="" position="600,4475" size="100,100">&lt;div class=&quot;bf-desktop-hacking-tool-wrapper&quot;&gt;\
    &lt;div class=&quot;bf-desktop-hacking-tool-header&quot;&gt;&lt;span class=&quot;bf-desktop-hacking-tool-header-text&quot;&gt;Hack-a-Target - Manual Password Bruteforce&lt;/span&gt;&lt;/div&gt;\
    &lt;div class=&quot;bf-hacking-game&quot;&gt;\
        &lt;div class=&quot;bf-game-instructions&quot;&gt;&lt;p&gt;Start and enter the highlighted password as quickly as you can.&lt;/p&gt;&lt;/div&gt;
        
        &lt;div class=&quot;bf-word-container&quot;&gt;\
            &lt;div class=&quot;bf-main-word-container&quot;&gt;\
                &lt;span class=&quot;bf-main-word&quot;&gt;start&lt;/span&gt;\
            &lt;/div&gt;\
            &lt;span class=&quot;bf-secondary-word&quot;&gt;code&lt;/span&gt;\
        &lt;/div&gt;\
        &lt;input type=&quot;text&quot; id=&quot;bf-word-input&quot; class=&quot;bf-word-input&quot; placeholder=&quot;Enter Password&quot; disabled&gt;\
        &lt;div class=&quot;bf-progress-bar-container&quot;&gt;\
            &lt;div class=&quot;bf-progress-bar&quot;&gt;&lt;/div&gt;\
        &lt;/div&gt;\
        &lt;button id=&quot;bf-start-button&quot; class=&quot;bf-start-button&quot;&gt;Start&lt;/button&gt;




        &lt;div class=&quot;bf-trace-bar-container&quot;&gt;\
            &lt;div class=&quot;bf-trace-progress-bar-label&quot;&gt;Trace detection: &lt;span id=&quot;bf-detection-percentage&quot;&gt;0%&lt;/span&gt;&lt;/div&gt;\
            &lt;div class=&quot;bf-trace-progress-bar&quot;&gt;&lt;/div&gt;\
        &lt;/div&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\

&lt;&lt;if $tutorialManualBruteforce === false&gt;&gt;
&lt;div id=&quot;tutorial-box&quot;&gt;&lt;div class=&quot;instruction-container-lime&quot;&gt;\
    &lt;div class=&quot;instruction-title-bar-lime&quot;&gt;Tutorial: Manual Bruteforce &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.tutorialManualBruteforce = true; document.getElementById(&#39;tutorial-box&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;\
    &lt;div class=&quot;instruction-content&quot;&gt;\
        &lt;p&gt;To successfully bruteforce the password, you must guess enough times to fill the progress bar. This must be completed before detection results in network disconnection.&lt;/p&gt;\
    &lt;/div&gt;\
&lt;/div&gt;&lt;/div&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
\
&lt;&lt;script&gt;&gt;
$(document).ready(function() {
    // Passwords of varying complexity and length
    var passwordsByLength = {
        4: [&#39;pass&#39;, &#39;1234&#39;, &#39;test&#39;, &#39;lock&#39;, &#39;code&#39;, &#39;key!&#39;, &#39;door&#39;, &#39;user&#39;, &#39;quit&#39;, &#39;sign&#39;, &#39;boom&#39;, &#39;buzz&#39;, &#39;cool&#39;, &#39;drop&#39;, &#39;flip&#39;, &#39;glow&#39;, &#39;jump&#39;, &#39;king&#39;, &#39;link&#39;, &#39;moon&#39;],
        5: [&#39;abcde&#39;, &#39;12345&#39;, &#39;admin&#39;, &#39;guest&#39;, &#39;login&#39;, &#39;shell&#39;, &#39;debug&#39;, &#39;trace&#39;, &#39;quest&#39;, &#39;start&#39;, &#39;apple&#39;, &#39;blaze&#39;, &#39;crash&#39;, &#39;drift&#39;, &#39;eagle&#39;, &#39;flash&#39;, &#39;grace&#39;, &#39;heart&#39;, &#39;image&#39;, &#39;joker&#39;],
        6: [&#39;secret&#39;, &#39;unlock&#39;, &#39;change&#39;, &#39;qwerty&#39;, &#39;abcdef&#39;, &#39;123456&#39;, &#39;secure&#39;, &#39;effect&#39;, &#39;master&#39;, &#39;system&#39;, &#39;bright&#39;, &#39;circle&#39;, &#39;dreamy&#39;, &#39;frozen&#39;, &#39;golden&#39;, &#39;hybrid&#39;, &#39;impact&#39;, &#39;jungle&#39;, &#39;knight&#39;, &#39;legacy&#39;],
        7: [&#39;manager&#39;, &#39;freedom&#39;, &#39;scanner&#39;, &#39;network&#39;, &#39;desktop&#39;, &#39;digital&#39;, &#39;console&#39;, &#39;storage&#39;, &#39;archive&#39;, &#39;explore&#39;, &#39;harmony&#39;, &#39;journey&#39;, &#39;kingdom&#39;, &#39;liberty&#39;, &#39;miracle&#39;, &#39;nemesis&#39;, &#39;organic&#39;, &#39;phantom&#39;, &#39;quantum&#39;, &#39;rapture&#39;],
        8: [&#39;password&#39;, &#39;baseball&#39;, &#39;football&#39;, &#39;sunshine&#39;, &#39;iloveyou&#39;, &#39;starwars&#39;, &#39;whatever&#39;, &#39;superman&#39;, &#39;internet&#39;, &#39;lifehack&#39;, &#39;moonbeam&#39;, &#39;november&#39;, &#39;overlord&#39;, &#39;patriot&#39;, &#39;quicksil&#39;, &#39;rainbow&#39;, &#39;sapphire&#39;, &#39;tropical&#39;, &#39;ultimate&#39;, &#39;velocity&#39;],
        9: [&#39;passphrase&#39;, &#39;chocolate&#39;, &#39;pineapple&#39;, &#39;marketing&#39;, &#39;education&#39;, &#39;adventure&#39;, &#39;character&#39;, &#39;notebook&#39;, &#39;workplace&#39;, &#39;community&#39;, &#39;bluebird&#39;, &#39;chipmunk&#39;, &#39;dreamland&#39;, &#39;evergreen&#39;, &#39;firework&#39;, &#39;gladiator&#39;, &#39;hurricane&#39;, &#39;icecream&#39;, &#39;jellyfish&#39;, &#39;kaleidosc&#39;],
        10: [&#39;application&#39;, &#39;environment&#39;, &#39;integration&#39;, &#39;development&#39;, &#39;information&#39;, &#39;association&#39;, &#39;opportunity&#39;, &#39;intelligence&#39;, &#39;conversation&#39;, &#39;illustration&#39;, &#39;blackberry&#39;, &#39;butterfly&#39;, &#39;chocolatey&#39;, &#39;dragonfire&#39;, &#39;electronic&#39;, &#39;flashlight&#39;, &#39;greenhouse&#39;, &#39;harmonious&#39;, &#39;incredible&#39;, &#39;jackhammer&#39;]
    };

    // Function to shuffle an array
    function shuffleArray(array) {
        var currentIndex = array.length, temporaryValue, randomIndex;
        while (0 !== currentIndex) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex -= 1;
            temporaryValue = array[currentIndex];
            array[currentIndex] = array[randomIndex];
            array[randomIndex] = temporaryValue;
        }
        return array;
    }

    // Function to pick n unique passwords from the array
    function pickPasswords(array, n) {
        var shuffled = shuffleArray(array.slice());
        return shuffled.slice(0, n);
    }

    var selectedPasswordLength = State.variables.selectedPasswordLength; // The length of passwords to use
    var numberOfPasswordsNeeded = State.variables.numberOfPasswordsNeeded; // How many correct entries are needed to win
    var passwordsForThisRound = pickPasswords(passwordsByLength[selectedPasswordLength], numberOfPasswordsNeeded);
    var baseTraceTime = State.variables.bruteforceBaseTraceTime;
    var totalTraceTime = baseTraceTime;
    
    if (State.variables.traceUpgrade1) {
        totalTraceTime *= 1.10; // 10% more time
    }
    if (State.variables.traceUpgrade2) {
        totalTraceTime *= 1.25; // 25% more time
    }
    if (State.variables.traceUpgrade3) {
        totalTraceTime *= 1.50; // 50% more time
    }

    var currentPasswordIndex = 0;
    var progress = 0;
    var traceProgress = 0;
    var traceInterval;
    var gameEnded = false;

    function endGame(success) {
        clearInterval(traceInterval);
        $(&#39;#bf-word-input&#39;).prop(&#39;disabled&#39;, true);
        gameEnded = true;

        if (success) {
            $(&#39;#bf-word-input&#39;).val(&#39;Correct password!&#39;).removeClass(&#39;bf-input-fail&#39;).addClass(&#39;bf-input-success&#39;);
            $(&#39;#bf-start-button&#39;).replaceWith(&#39;&lt;button id=&quot;bf-end-game-button&quot; class=&quot;bf-start-button&quot;&gt;Log in&lt;/button&gt;&#39;);
            $(&#39;#bf-end-game-button&#39;).on(&#39;click&#39;, function() {
                SugarCube.Engine.play(State.variables.nextPassageAfterSuccessBruteforceGame);
            });
            SugarCube.UI.alert(&quot;The correct password is: &quot; + State.variables.bruteforceMinigameCorrectPassword);

        } else {
            $(&#39;#bf-word-input&#39;).val(&#39;Access denied&#39;).removeClass(&#39;bf-input-success&#39;).addClass(&#39;bf-input-fail&#39;);
            $(&#39;#bf-start-button&#39;).replaceWith(&#39;&lt;button id=&quot;bf-fail-button&quot; class=&quot;bf-fail-button&quot;&gt;Log out&lt;/button&gt;&#39;);
            $(&#39;#bf-fail-button&#39;).on(&#39;click&#39;, function() {
                SugarCube.Engine.play(State.variables.nextPassageAfterFailBruteforceGame);
            });
        }
    }

   $(&#39;#bf-start-button&#39;).on(&#39;click&#39;, function() {
        $(this).hide();
        $(&#39;#bf-word-input&#39;).prop(&#39;disabled&#39;, false).focus();
        $(&#39;.bf-main-word&#39;).text(passwordsForThisRound[currentPasswordIndex]);
        $(&#39;.bf-secondary-word&#39;).text(passwordsForThisRound[currentPasswordIndex + 1]);
        $(&#39;.bf-main-word, .bf-secondary-word&#39;).css(&#39;visibility&#39;, &#39;visible&#39;);

        traceInterval = setInterval(function() {
            if (gameEnded) return;

            traceProgress += 100 / totalTraceTime;
            var tracePercentage = Math.min(traceProgress, 100);
            $(&#39;.bf-trace-progress-bar&#39;).css(&#39;width&#39;, tracePercentage + &#39;%&#39;);
            $(&#39;#bf-detection-percentage&#39;).text(tracePercentage.toFixed(0) + &#39;%&#39;);

            if (traceProgress &gt;= 100 &amp;&amp; progress &lt; 100) {
                endGame(false); // Fail condition if trace completes first
            }
        }, 1000);
    });

    $(&#39;#bf-word-input&#39;).on(&#39;input&#39;, function() {
        var inputVal = $(this).val();
        var currentPassword = $(&#39;.bf-main-word&#39;).text();
        if (inputVal.toLowerCase() === currentPassword.toLowerCase() &amp;&amp; !gameEnded) {
            progress += 100 / numberOfPasswordsNeeded;
            $(&#39;.bf-progress-bar&#39;).css(&#39;width&#39;, progress + &#39;%&#39;);
            $(this).val(&#39;&#39;);

            if (progress &gt;= 100) {
                $(&#39;.bf-progress-bar&#39;).css(&#39;width&#39;, &#39;100%&#39;);
                endGame(true); // Success condition if passwords complete first
            } else {
                currentPasswordIndex = (currentPasswordIndex + 1) % passwordsForThisRound.length;
                $(&#39;.bf-main-word&#39;).text(passwordsForThisRound[currentPasswordIndex]);
                var nextIndex = (currentPasswordIndex + 1) % passwordsForThisRound.length;
                $(&#39;.bf-secondary-word&#39;).text(passwordsForThisRound[nextIndex]);
            }
        }
    });
});
&lt;&lt;/script&gt;&gt;
/* SET THESE STORYINIT VARIABLES !!!

&lt;&lt;set $selectedPasswordLength to 6&gt;&gt;
&lt;&lt;set $numberOfPasswordsNeeded to 5&gt;&gt;
&lt;&lt;set $bruteforceBaseTraceTime to 15&gt;&gt; // Base time in seconds
&lt;&lt;set $nextPassageAfterSuccessBruteforceGame to &quot;&quot;&gt;&gt;
&lt;&lt;set $nextPassageAfterFailBruteforceGame to &quot;&quot;&gt;&gt;

!!! SET THESE STORYINIT VARIABLES */</tw-passagedata><tw-passagedata pid="356" name="Minigame-Coding" tags="" position="725,4475" size="100,100">&lt;div class=&quot;minigame-coding-wrapper&quot;&gt;\
  &lt;div class=&quot;minigame-coding-header&quot;&gt;&lt;span class=&quot;minigame-coding-header-text&quot;&gt;Code, Monkey!&lt;/span&gt;&lt;/div&gt;\
  &lt;div class=&quot;minigame-coding-content&quot;&gt;\
    &lt;&lt;if $miniGameDifficulty is &quot;Normal&quot;&gt;&gt;\
    &lt;div class=&quot;minigame-coding-instructions&quot;&gt;&lt;p&gt;Type as fast as you can to earn money! You get paid $1.5 for each line of code.&lt;/p&gt;&lt;p&gt;You have 5 seconds.&lt;/p&gt;&lt;/div&gt;\
    &lt;&lt;set $codingMinigameTimeLeft to 5&gt;&gt;\
    &lt;&lt;set $moneyPerCharacter to 1.5&gt;&gt;\
    &lt;&lt;/if&gt;&gt;\
    &lt;&lt;if $miniGameDifficulty is &quot;Easy&quot;&gt;&gt;\
    &lt;div class=&quot;minigame-coding-instructions&quot;&gt;&lt;p&gt;Type as fast as you can to earn money! You get paid $2 for each line of code.&lt;/p&gt;&lt;p&gt;You have 5 seconds.&lt;/p&gt;&lt;/div&gt;\
    &lt;&lt;set $codingMinigameTimeLeft to 5&gt;&gt;\
    &lt;&lt;set $moneyPerCharacter to 2&gt;&gt;\
    &lt;&lt;/if&gt;&gt;\
    &lt;&lt;if $miniGameDifficulty is &quot;Story&quot;&gt;&gt;\
    &lt;div class=&quot;minigame-coding-instructions&quot;&gt;&lt;p&gt;Type as fast as you can to earn money! You get paid $2.5 for each line of code.&lt;/p&gt;&lt;p&gt;You have 5 seconds.&lt;/p&gt;&lt;/div&gt;\
    &lt;&lt;set $codingMinigameTimeLeft to 5&gt;&gt;\
    &lt;&lt;set $moneyPerCharacter to 2.5&gt;&gt;\
    &lt;&lt;/if&gt;&gt;\
    &lt;&lt;set $randomLine to setup.fakeCodes.random()&gt;&gt;
    &lt;div id=&quot;hackerGame_hackingOutput&quot;&gt;&lt;/div&gt;
        &lt;span id=&quot;hackerGame_startTyping&quot; style=&quot;display: none; font-size: 24px;&quot;&gt;Start typing!&lt;/span&gt;&lt;input type=&quot;text&quot; id=&quot;hackerGame_hiddenInput&quot; style=&quot;opacity: 0; position: absolute; pointer-events: none;&quot;&gt;\
        &lt;button id=&quot;hackerGame_beginButton&quot;&gt;Start&lt;/button&gt;

    &lt;div id=&quot;hackerGame_characterCount&quot;&gt;&lt;b&gt;Characters typed:&lt;/b&gt; 0&lt;/div&gt;\
    &lt;div id=&quot;hackerGame_result&quot;&gt;&lt;/div&gt;

    &lt;div class=&quot;minigame-coding-trace-bar-container&quot;&gt;\
      &lt;div class=&quot;minigame-coding-trace-progress-bar-label&quot;&gt;Seconds remaining: &lt;span id=&quot;minigameCodingTimeRemaining&quot;&gt;$codingMinigameTimeLeft&lt;/span&gt;&lt;/div&gt;\
      &lt;div class=&quot;minigame-coding-trace-progress-bar&quot;&gt;&lt;/div&gt;\
    &lt;/div&gt;\
  &lt;/div&gt;\
&lt;/div&gt;\
    &lt;&lt;nobr&gt;&gt;&lt;br&gt;&lt;p class=&quot;back-link&quot;&gt;
        &lt;&lt;link &quot;Go Back&quot;&gt;&gt;
            &lt;&lt;goto &quot;BrainFry&quot;&gt;&gt;

        &lt;&lt;/link&gt;&gt;
    &lt;/p&gt;&lt;br&gt;
    &lt;&lt;if $minigameSkipButtons === true&gt;&gt;
        &lt;p class=&quot;back-link&quot;&gt;
        &lt;&lt;link &quot;Skip the Minigame&quot;&gt;&gt;
            &lt;&lt;script&gt;&gt;
                var characterCount = 100;
                var moneyEarned = characterCount * State.variables.moneyPerCharacter;
                State.variables.playerMoney += moneyEarned;
                State.variables.brainFryWorkCount++;
                State.variables.workedToday = true;
                SugarCube.Engine.play(&quot;BrainFry&quot;);
            &lt;&lt;/script&gt;&gt;
        &lt;&lt;/link&gt;&gt;
    &lt;/p&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/nobr&gt;&gt;
\
&lt;&lt;if $tutorialCodingMinigame === false&gt;&gt;\
&lt;div id=&quot;tutorial-box&quot;&gt;&lt;div class=&quot;instruction-container-blue&quot;&gt;\
    &lt;div class=&quot;instruction-title-bar-blue&quot;&gt;Tutorial: Code, Monkey! &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.tutorialCodingMinigame = true; document.getElementById(&#39;tutorial-box&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;\
    &lt;div class=&quot;instruction-content&quot;&gt;\
        &lt;p&gt;Your goal is to earn money by typing code as fast as possible. Each character you type represents a line of code and earns you $moneyPerCharacter. You have a total of $codingMinigameTimeLeft seconds to type as much as you can. Once you start, your job is to hit any keys rapidly to simulate coding. The faster you type, the more random lines of code will appear on the screen, and the more you earn.&lt;/p&gt;\
    &lt;/div&gt;\
&lt;/div&gt;&lt;/div&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
    
&lt;&lt;script&gt;&gt;
// Initialize keyboard listener and trace progress bar
$(document).ready(function() {
    var characterCount = 0;
    var timerActive = false; // Variable to check if timer is active
    var traceProgress = 0;
    var totalTraceTime = State.variables.codingMinigameTimeLeft; // Total time for the trace progress bar
    var traceInterval;

    // Function to handle the end of the game
    function endGame() {
        clearInterval(traceInterval);
        timerActive = false; // Timer is no longer active
        $(&#39;#hackerGame_startTyping&#39;).text(&quot;Stop typing!&quot;); // Change text to &quot;Stop typing!&quot;
        var moneyEarned = characterCount * State.variables.moneyPerCharacter; // Calculate money earned
        State.variables.playerMoney += moneyEarned;
        State.variables.brainFryWorkCount++;
        $(&#39;#hackerGame_result&#39;).html(&quot;&lt;b&gt;You&#39;ve earned:&lt;/b&gt; $&quot; + moneyEarned.toFixed(1) + &quot;!&lt;br&gt;&lt;br&gt;&lt;button id=&#39;hackerGame_continueButton&#39; class=&#39;hackerGame_button&#39;&gt;Submit Your Work&lt;/button&gt;&quot;);
        $(&#39;#hackerGame_continueButton&#39;).click(function() {
            if (State.variables.brainFryFirstVisit === false &amp;&amp; State.variables.brainFryWorkCount === 1) {
                MindWare.completeTask(&quot;Start your new job&quot;);
                MindWare.addTask(&quot;Continue the grind&quot;, &quot;Task-ContinueTheGrind&quot;);
                MindWare.addInstantMessage(&#39;cipherInstantMessages&#39;, &#39;First day at BrainFry&#39;, &#39;IMApp-CipherLynx-FirstDayAtBrainFry&#39;, &#39;Cipher&#39;, true, true);
                State.variables.workedToday = true;
                State.variables.workedAtBrainFryToday = true; 
                SugarCube.Engine.play(&quot;BrainFry&quot;);
            } else if (State.variables.chapter1Started &amp;&amp; State.variables.synapseSteadyVXInstalled &amp;&amp; !State.variables.avaRecommendedCodingAssistant) {
                State.variables.workedToday = true;
                State.variables.workedAtBrainFryToday = true; 
                State.variables.avaRecommendedCodingAssistant = true;
                SugarCube.Engine.play(&quot;AVA-AI-Coding-Assistant-Suggestion&quot;);                
            } else if (State.variables.workedToday === false) {
                State.variables.workedToday = true;
                State.variables.workedAtBrainFryToday = true; 
                SugarCube.Engine.play(&quot;BrainFry&quot;);
            } else {
                // This is the else block where you can add alternative actions if workedToday is true
                SugarCube.UI.alert(&#39;You have already worked today.&#39;);
            }
        });
    }

    // Start button click event
    $(&#39;#hackerGame_beginButton&#39;).click(function() {
        $(this).hide(); // Hide the Begin button
        $(&#39;#hackerGame_startTyping&#39;).show(); // Show the &quot;Start typing!&quot; text
        $(&#39;#hackerGame_hiddenInput&#39;).css(&quot;pointer-events&quot;, &quot;auto&quot;).focus(); // Focus the hidden input
        timerActive = true; // Timer becomes active

        // Start the trace progress bar timer
        traceInterval = setInterval(function() {
            traceProgress += 100 / totalTraceTime;
            var secondsRemaining = totalTraceTime - Math.floor(traceProgress / 100 * totalTraceTime);
            $(&#39;#minigameCodingTimeRemaining&#39;).text(secondsRemaining);
            var tracePercentage = Math.min(traceProgress, 100);
            $(&#39;.minigame-coding-trace-progress-bar&#39;).css(&#39;width&#39;, tracePercentage + &#39;%&#39;);
            if (traceProgress &gt;= 100) {
                endGame();
            }
        }, 1000);
    });

    // Listen for keypresses
    $(document).keypress(function() {
        if (timerActive) { // Only increment if timer is active
            characterCount++;
            $(&#39;#hackerGame_characterCount&#39;).html(&quot;&lt;b&gt;Characters typed:&lt;/b&gt; &quot; + characterCount);
            var randomIndex = Math.floor(Math.random() * setup.fakeCodes.length);
            var fakeCode = setup.fakeCodes[randomIndex]; // Select a random fake line
            $(&quot;#hackerGame_hackingOutput&quot;).append(fakeCode + &quot;\n&quot;);
            $(&quot;#hackerGame_hackingOutput&quot;).scrollTop($(&quot;#hackerGame_hackingOutput&quot;)[0].scrollHeight);
        }
    });
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="357" name="Minigame-FindPassword" tags="" position="850,4475" size="100,100">You are presented with a grid of passwords. Identify the unique password that appears only once and enter it below.

    &lt;&lt;set $passwords to []&gt;&gt;
    &lt;&lt;set $uniquePassword = &quot;&quot;&gt;&gt;

    &lt;&lt;script&gt;&gt;
    // Function to generate a random password
    function generatePassword(length) {
    var charset = &quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;;
    var password = &quot;&quot;;
    for (var i = 0; i &lt; length; i++) {
        var randomIndex = Math.floor(Math.random() * charset.length);
        password += charset[randomIndex];
    }
    return password;
    }

    // Function to shuffle an array
    function shuffleArray(array) {
    for (let i = array.length - 1; i &gt; 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    }

    // Generate 1 unique password
    var uniquePassword = generatePassword(8);

    // Generate 5 pairs of passwords
    var passwordPairs = [];
    for (let i = 0; i &lt; 5; i++) {
    let pairPassword = generatePassword(8);
    
    // Make sure the pair password is different from the unique password
    while (pairPassword === uniquePassword) {
        pairPassword = generatePassword(8);
    }
    
    passwordPairs.push(pairPassword, pairPassword);
    }

    // Create the array based on the specified distribution
    var passwordsArray = [uniquePassword, ...passwordPairs];

    // Shuffle the array to randomize the order
    shuffleArray(passwordsArray);
 
    // Assign the shuffled array to the story variable
    State.variables.passwords = passwordsArray;

    // Store the unique password in a story variable
    State.variables.uniquePassword = uniquePassword;

  // Attach event handler for form submission
$(document).one(&quot;:passageend&quot;, function(event) {
  $(&#39;#passwordForm&#39;).one(&#39;submit&#39;, function(event) {
    event.preventDefault(); // prevent the default form submission
    var playerGuess = $(&#39;#playerGuess&#39;).val(); // get the player&#39;s input
    if (playerGuess === State.variables.uniquePassword) {
      clearInterval(window.myTimer);
      Engine.play(&quot;SuccessPassage&quot;); // Replace with your success passage name
    } else {
      clearInterval(window.myTimer);
      Engine.play(&quot;FailurePassage&quot;); // Replace with your failure passage name
    }
  });
});
&lt;&lt;/script&gt;&gt;


&lt;div class=&quot;minigame-terminal&quot;&gt;
  &lt;div class=&quot;help-icon&quot; data-tooltip=&quot;Enter the unique password to proceed.&quot;&gt;&amp;#63;&lt;/div&gt;
  &lt;div class=&quot;terminal-title&quot;&gt;cryptbreaker.exe&lt;/div&gt;
  &lt;b&gt;Passwords:&lt;/b&gt;
  &lt;ul&gt;
    &lt;&lt;for _i to 0; _i &lt; $passwords.length; _i++&gt;&gt;
      &lt;li&gt;&lt;&lt;=$passwords[_i]&gt;&gt;&lt;/li&gt;
    &lt;&lt;/for&gt;&gt;
  &lt;/ul&gt;
  &lt;form id=&quot;passwordForm&quot;&gt;
    &lt;input type=&quot;text&quot; id=&quot;playerGuess&quot; autocomplete=&quot;off&quot;&gt;
    &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;
  &lt;/form&gt;
  &lt;div class=&quot;countdown-bar-container&quot;&gt;
  &lt;div id=&quot;countdown-bar&quot; class=&quot;countdown-bar&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

    &lt;&lt;script&gt;&gt;
    // Clear any existing timers to avoid overlaps
    if (window.myTimer) {
        clearInterval(window.myTimer);
    }

var timeLeft = 60;  // total time
var initialTime = 60;  // used to calculate the percentage

// Function to update the countdown bar width
function updateCountdownBar() {
  var countdownBar = document.getElementById(&quot;countdown-bar&quot;);
  if (countdownBar) {
    var widthPercent = (timeLeft / initialTime) * 100;
    countdownBar.style.width = widthPercent + &quot;%&quot;;
  }
}

window.myTimer = setInterval(function() {
  // Your existing logic
  // ...

  updateCountdownBar();  // Update the countdown bar width

  // Your existing logic
  timeLeft -= 1;
  if (timeLeft &lt;= 0) {
    clearInterval(window.myTimer);
    Engine.play(&quot;FailurePassage&quot;);
  }
}, 1000);
    &lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="358" name="FailurePassage" tags="" position="900,375" size="100,100">Fail!</tw-passagedata><tw-passagedata pid="359" name="SuccessPassage" tags="" position="900,200" size="100,100">Success!</tw-passagedata><tw-passagedata pid="360" name="Resist-Minigame" tags="nobr" position="1225,4475" size="100,100">&lt;&lt;xavier&gt;&gt;You look lovely today!&lt;&lt;/xavier&gt;&gt;
&lt;br&gt;
@@.pink-choicebutton;&lt;&lt;button &quot;Feminizing action suggested by AVA&quot;&gt;&gt;&lt;&lt;run UI.alert(&quot;Action!&quot;)&gt;&gt;&lt;&lt;/button&gt;&gt;@@

&lt;div class=&quot;minigame-container&quot;&gt;
    &lt;div class=&quot;resist-instructions&quot; id=&quot;instructions&quot;&gt;Resist AVA&#39;s suggestion and reveal other options by repeatedly clicking the Resist button.&lt;/div&gt;
    &lt;div class=&quot;energy-container&quot;&gt;
        &lt;span class=&quot;energy-label&quot;&gt;Implant charge cost: &lt;/span&gt;
        &lt;span class=&quot;energy-value&quot; id=&quot;energy&quot;&gt;20%&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;timer-container&quot;&gt;
        &lt;span class=&quot;timer-label&quot;&gt;Time to resist: &lt;/span&gt;
        &lt;span class=&quot;timer-value&quot; id=&quot;timer&quot;&gt;&lt;&lt;if $mentalCondition === &quot;Unstable&quot;&gt;&gt;&lt;&lt;print 10/2&gt;&gt;&lt;&lt;else&gt;&gt;10&lt;&lt;/if&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;timer-value&quot;&gt; seconds&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gauge-container&quot;&gt;
        &lt;div class=&quot;gauge&quot; id=&quot;gauge&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;button class=&quot;pink-mindware-button&quot; id=&quot;resistButton&quot;&gt;Resist&lt;/button&gt;
&lt;/div&gt;

&lt;div id=&quot;minigame-container-hidden&quot;&gt;
&lt;br&gt;
@@.choicebutton;&lt;&lt;button &quot;Alternative action&quot;&gt;&gt;&lt;&lt;run UI.alert(&quot;Action!&quot;)&gt;&gt;&lt;&lt;/button&gt;&gt;@@
&lt;/div&gt;

&lt;&lt;include &quot;Resist-Minigame-Script-Default&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="361" name="Resist-Minigame-Script-Default" tags="nobr" position="100,4600" size="100,100">&lt;&lt;done&gt;&gt;&lt;&lt;script&gt;&gt;
function initializeMinigame(settings) {
    var progress = 0;
    var timeLeft = settings.timeLeft || 10;
    var fillAmount = settings.fillAmount || 5;
    var fallRate = settings.fallRate || 3;
    var fallInterval = settings.fallInterval || 200;
    var gameStarted = false;
    var resistanceCost = settings.resistanceCost || 20;

    const minigameContainer = document.querySelector(&#39;.minigame-container&#39;);
    const hiddenContainer = document.getElementById(&#39;minigame-container-hidden&#39;);
    const gauge = document.getElementById(&#39;gauge&#39;);
    const timerDisplay = document.getElementById(&#39;timer&#39;);
    const resistButton = document.getElementById(&#39;resistButton&#39;);

    const overlay = document.createElement(&#39;div&#39;);
    overlay.style.position = &#39;fixed&#39;;
    overlay.style.top = &#39;0&#39;;
    overlay.style.left = &#39;0&#39;;
    overlay.style.width = &#39;100%&#39;;
    overlay.style.height = &#39;100%&#39;;
    overlay.style.backgroundColor = &#39;rgba(0, 0, 0, 0)&#39;;
    overlay.style.zIndex = &#39;1000&#39;;
    overlay.style.display = &#39;none&#39;;

    document.body.appendChild(overlay);

    const resetGame = () =&gt; {
        progress = 0;
        timeLeft = settings.timeLeft || 10;
        gameStarted = false;
        gauge.style.width = &#39;0%&#39;;
        timerDisplay.textContent = timeLeft;
    };
    
    let timerInterval, decreaseInterval;

    const updateGauge = () =&gt; {
        gauge.style.width = `${progress}%`;
    };

    const endGame = (win) =&gt; {
        clearInterval(decreaseInterval);
        clearInterval(timerInterval);
        if (win) {
            SugarCube.State.variables.resistMinigameWinCount += 1;
            console.log(&quot;Successfully resisted AVA:&quot;, SugarCube.State.variables.resistMinigameWinCount);
            overlay.style.display = &#39;block&#39;; 
            setTimeout(() =&gt; {
                overlay.style.display = &#39;none&#39;; 
            }, 2000); 
                minigameContainer.style.display = &#39;none&#39;;
                hiddenContainer.style.display = &#39;block&#39;;
        } else {
            SugarCube.UI.alert(&#39;You failed to resist!&#39;);
            SugarCube.State.variables.resistMinigameFailCount += 1;
            console.log(&quot;Failed to resist AVA:&quot;, SugarCube.State.variables.resistMinigameFailCount);
            resetGame(); 
        }
    };

    resistButton.addEventListener(&#39;click&#39;, () =&gt; {
        if (SugarCube.State.variables.mentalCondition === &quot;Dysphoric&quot;) {
            SugarCube.UI.alert(&quot;Your mental condition is too compromised to resist.&quot;);
            return; 
        }

        if (!gameStarted) {
            if (SugarCube.State.variables.implantCharge &lt; resistanceCost) {
                SugarCube.UI.alert(&quot;Not enough charge&quot;);
                return; 
            } else {
                if (SugarCube.State.variables.implantCharge - resistanceCost &lt; 0) {
                    SugarCube.State.variables.implantCharge = 0;
                } else {
                    SugarCube.State.variables.implantCharge -= resistanceCost;
                }
                $(document).trigger(&quot;:liveupdate&quot;);
            }

            if (SugarCube.State.variables.mentalCondition === &quot;Unstable&quot;) {
                timeLeft /= 2;
            }

            gameStarted = true;
            timerInterval = setInterval(() =&gt; {
                if (--timeLeft &lt;= 0) {
                    endGame(false);
                }
                timerDisplay.textContent = `${timeLeft}`;
            }, 1000);

            decreaseInterval = setInterval(() =&gt; {
                if (progress &gt; 0) {
                    progress -= fallRate;
                    updateGauge();
                }
            }, fallInterval);
        }

        progress += fillAmount;
        if (progress &gt;= 100) {
            progress = 100;
            updateGauge();
            endGame(true);
        } else {
            updateGauge();
        }
    });
}

initializeMinigame({resistanceCost: 20}); 
&lt;&lt;/script&gt;&gt;&lt;&lt;/done&gt;&gt;</tw-passagedata><tw-passagedata pid="362" name="SocialIcons" tags="" position="225,4600" size="100,100">&lt;div class=&quot;social-icon-container&quot;&gt;
    &lt;a href=&quot;https://subjunctivegames.com/&quot; class=&quot;social-icon-link&quot; title=&quot;Subjunctive Games&quot;&gt;&lt;i class=&quot;fas fa-globe social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;!--&lt;a href=&quot;https://example.com/globe&quot; class=&quot;social-icon-link&quot; title=&quot;TFGames.Site&quot;&gt;&lt;i class=&quot;fab fa-trade-federation social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;--&gt;
    &lt;a href=&quot;https://discord.gg/wccdWE3sft&quot; class=&quot;social-icon-link&quot; title=&quot;Discord&quot;&gt;&lt;i class=&quot;fab fa-discord social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;a href=&quot;https://www.reddit.com/r/MindWare/&quot; class=&quot;social-icon-link&quot; title=&quot;Reddit&quot;&gt;&lt;i class=&quot;fab fa-reddit-alien social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;a href=&quot;https://www.tfgames.site/?module=viewgame&amp;id=3203&quot; class=&quot;social-icon-link&quot; title=&quot;TFGames&quot;&gt;&lt;i class=&quot;fab fa-trade-federation social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;a href=&quot;https://twitter.com/SubjunctiveGms&quot; class=&quot;social-icon-link&quot; title=&quot;Twitter&quot;&gt;&lt;i class=&quot;fab fa-twitter social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;a href=&quot;https://www.patreon.com/SubjunctiveGames&quot; class=&quot;social-icon-link&quot; title=&quot;Patreon&quot;&gt;&lt;i class=&quot;fab fa-patreon social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;a href=&quot;https://subscribestar.adult/subjunctivegames&quot; class=&quot;social-icon-link&quot; title=&quot;SubscribeStar&quot;&gt;&lt;i class=&quot;fab fa-stripe-s social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;a href=&quot;mailto:hello@subjunctivegames.com&quot; class=&quot;social-icon-link&quot; title=&quot;Email&quot;&gt;&lt;i class=&quot;fas fa-envelope social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;!--&lt;a href=&quot;https://itch.io&quot; class=&quot;social-icon-link&quot; title=&quot;Itch.io&quot;&gt;&lt;i class=&quot;fab fa-itch-io social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;--&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="363" name="DeadEnd" tags="" position="350,4600" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/UI/deadend.webp&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;

&lt;center&gt;
    &lt;p style=&quot;color: red; font-size: 22px;&quot;&gt;&lt;span style=&quot;font-family: Arial&quot;&gt;⚠️&lt;/span&gt; Work in Progress &lt;span style=&quot;font-family: Arial&quot;&gt;⚠️&lt;/span&gt;&lt;/p&gt;
    &lt;p&gt;This path is still under construction. Please check back later for updates!&lt;/p&gt;
    &lt;p&gt;⬇ Here&#39;s what you can do instead ⬇&lt;/p&gt;
&lt;/center&gt;\</tw-passagedata><tw-passagedata pid="364" name="DeadEnd-NoImg" tags="" position="475,4600" size="100,100">&lt;&lt;nobr&gt;&gt;&lt;center&gt;
    &lt;p style=&quot;color: red; font-size: 22px;&quot;&gt;&lt;span style=&quot;font-family: Arial&quot;&gt;⚠️&lt;/span&gt; Work in Progress &lt;span style=&quot;font-family: Arial&quot;&gt;⚠️&lt;/span&gt;&lt;/p&gt;
    &lt;p&gt;This path is still under construction. Please check back later for updates!&lt;/p&gt;
    &lt;p&gt;⬇ Here&#39;s what you can do instead ⬇&lt;/p&gt;
&lt;/center&gt;&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="365" name="WorkInProgress" tags="" position="600,4600" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/UI/workinprogress.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;

&lt;center&gt;
    &lt;p style=&quot;color: red; font-size: 22px;&quot;&gt;&lt;span style=&quot;font-family: Arial&quot;&gt;⚠️&lt;/span&gt; Work in Progress &lt;span style=&quot;font-family: Arial&quot;&gt;⚠️&lt;/span&gt;&lt;/p&gt;
    &lt;p&gt;This part of the game is still under construction. Please check back later for updates!&lt;/p&gt;
&lt;/center&gt;\
\
&lt;p class=&quot;back-link&quot;&gt;
        &lt;&lt;return &quot;Go Back&quot;&gt;&gt;
&lt;/p&gt;</tw-passagedata><tw-passagedata pid="366" name="WorkInProgress-SynTech" tags="" position="725,4600" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/UI/workinprogress.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;

&lt;center&gt;
    &lt;p style=&quot;color: red; font-size: 22px;&quot;&gt;&lt;span style=&quot;font-family: Arial&quot;&gt;⚠️&lt;/span&gt; Work in Progress &lt;span style=&quot;font-family: Arial&quot;&gt;⚠️&lt;/span&gt;&lt;/p&gt;
    &lt;p&gt;This part of the game is still under construction. Please check back later for updates!&lt;/p&gt;
&lt;/center&gt;\
\
&lt;&lt;nobr&gt;&gt;&lt;p class=&quot;back-link&quot;&gt;
    &lt;&lt;link &quot;Go Back&quot;&gt;&gt;
        &lt;&lt;set $goOutsideGoBackPassage = &quot;WorkInProgress-SynTech&quot;&gt;&gt;
        &lt;&lt;goto &quot;GoOutside&quot;&gt;&gt;
    &lt;&lt;/link&gt;&gt;
&lt;/p&gt;&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="367" name="WorkInProgress-Panacea" tags="" position="850,4600" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/UI/workinprogress.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;

&lt;center&gt;
    &lt;p style=&quot;color: red; font-size: 22px;&quot;&gt;&lt;span style=&quot;font-family: Arial&quot;&gt;⚠️&lt;/span&gt; Work in Progress &lt;span style=&quot;font-family: Arial&quot;&gt;⚠️&lt;/span&gt;&lt;/p&gt;
    &lt;p&gt;This part of the game is still under construction. Please check back later for updates!&lt;/p&gt;
&lt;/center&gt;\
\
&lt;&lt;nobr&gt;&gt;&lt;p class=&quot;back-link&quot;&gt;
    &lt;&lt;link &quot;Go Back&quot;&gt;&gt;
        &lt;&lt;set $goOutsideGoBackPassage = &quot;WorkInProgress-Panacea&quot;&gt;&gt;
        &lt;&lt;goto &quot;GoOutside&quot;&gt;&gt;
    &lt;&lt;/link&gt;&gt;
&lt;/p&gt;&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="368" name="EndOfCurrentStory-0.0.1" tags="" position="975,4600" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/UI/endofcurrentstory.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;

&lt;center&gt;
    &lt;p style=&quot;color: lime; font-size: 22px;&quot;&gt;🌟 Congratulations! 🌟&lt;/p&gt;
    You&#39;ve reached the current end of the story. Thank you for playing!

    In the next version, you will start your new job, meet your coworkers, and more.
&lt;/center&gt;
&lt;div class=&quot;social-media&quot;&gt;
    Stay tuned for more exciting updates:

&lt;div class=&quot;social-icon-container&quot;&gt;
    &lt;a href=&quot;https://subjunctivegames.com/&quot; class=&quot;social-icon-link&quot; title=&quot;Subjunctive Games&quot;&gt;&lt;i class=&quot;fas fa-globe social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;!--&lt;a href=&quot;https://example.com/globe&quot; class=&quot;social-icon-link&quot; title=&quot;TFGames.Site&quot;&gt;&lt;i class=&quot;fab fa-trade-federation social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;--&gt;
    &lt;a href=&quot;https://twitter.com/SubjunctiveGms&quot; class=&quot;social-icon-link&quot; title=&quot;Twitter&quot;&gt;&lt;i class=&quot;fab fa-twitter social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;a href=&quot;https://www.reddit.com/r/MindWare/&quot; class=&quot;social-icon-link&quot; title=&quot;Reddit&quot;&gt;&lt;i class=&quot;fab fa-reddit-alien social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;a href=&quot;https://discord.gg/DVvhhy7U&quot; class=&quot;social-icon-link&quot; title=&quot;Discord&quot;&gt;&lt;i class=&quot;fab fa-discord social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;!--&lt;a href=&quot;https://stripe.com&quot; class=&quot;social-icon-link&quot; title=&quot;SubscribeStar&quot;&gt;&lt;i class=&quot;fab fa-stripe-s social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;--&gt;
    &lt;a href=&quot;https://www.patreon.com/SubjunctiveGames&quot; class=&quot;social-icon-link&quot; title=&quot;Patreon&quot;&gt;&lt;i class=&quot;fab fa-patreon social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;!--&lt;a href=&quot;https://itch.io&quot; class=&quot;social-icon-link&quot; title=&quot;Itch.io&quot;&gt;&lt;i class=&quot;fab fa-itch-io social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;--&gt;
&lt;/div&gt;

&lt;hr&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Continue Playing -&gt; HomeBacklog]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="369" name="EndOfCurrentStory-0.0.2" tags="" position="1100,4600" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/UI/endofcurrentstory.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;

&lt;center&gt;
    &lt;p style=&quot;color: lime; font-size: 22px;&quot;&gt;🌟 Congratulations! 🌟&lt;/p&gt;
    You&#39;ve reached the current end of the story. Thank you for playing!

    In the next version, you will go on a life-changing hacking mission and more. 
&lt;/center&gt;
&lt;div class=&quot;social-media&quot;&gt;
    Stay tuned for more exciting updates:

&lt;&lt;include &quot;SocialIcons&quot;&gt;&gt;

&lt;hr&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Continue Playing -&gt; GoOutside]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="370" name="EndOfCurrentStory-0.0.4" tags="" position="1225,4600" size="100,100">&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/UI/endofcurrentstory.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;

&lt;center&gt;
    &lt;p style=&quot;color: lime; font-size: 22px;&quot;&gt;🌟 Congratulations! 🌟&lt;/p&gt;
    You&#39;ve reached the current end of the story. Thank you for playing!

    In the next version, you will learn of the consequences of your close encounter with AVA. 
&lt;/center&gt;
&lt;div class=&quot;social-media&quot;&gt;
    Stay tuned for more exciting updates:

&lt;div class=&quot;social-icon-container&quot;&gt;
    &lt;a href=&quot;https://subjunctivegames.com/&quot; class=&quot;social-icon-link&quot; title=&quot;Subjunctive Games&quot;&gt;&lt;i class=&quot;fas fa-globe social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;!--&lt;a href=&quot;https://example.com/globe&quot; class=&quot;social-icon-link&quot; title=&quot;TFGames.Site&quot;&gt;&lt;i class=&quot;fab fa-trade-federation social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;--&gt;
    &lt;a href=&quot;https://twitter.com/SubjunctiveGms&quot; class=&quot;social-icon-link&quot; title=&quot;Twitter&quot;&gt;&lt;i class=&quot;fab fa-twitter social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;a href=&quot;https://www.reddit.com/r/MindWare/&quot; class=&quot;social-icon-link&quot; title=&quot;Reddit&quot;&gt;&lt;i class=&quot;fab fa-reddit-alien social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;a href=&quot;https://discord.gg/DVvhhy7U&quot; class=&quot;social-icon-link&quot; title=&quot;Discord&quot;&gt;&lt;i class=&quot;fab fa-discord social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;a href=&quot;https://www.patreon.com/SubjunctiveGames&quot; class=&quot;social-icon-link&quot; title=&quot;Patreon&quot;&gt;&lt;i class=&quot;fab fa-patreon social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;a href=&quot;https://subscribestar.adult/subjunctivegames&quot; class=&quot;social-icon-link&quot; title=&quot;SubscribeStar&quot;&gt;&lt;i class=&quot;fab fa-stripe-s social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;a href=&quot;mailto:hello@subjunctivegames.com&quot; class=&quot;social-icon-link&quot; title=&quot;Email&quot;&gt;&lt;i class=&quot;fas fa-envelope social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;
    &lt;!--&lt;a href=&quot;https://itch.io&quot; class=&quot;social-icon-link&quot; title=&quot;Itch.io&quot;&gt;&lt;i class=&quot;fab fa-itch-io social-icon&quot;&gt;&lt;/i&gt;&lt;/a&gt;--&gt;
&lt;/div&gt;

&lt;hr&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Continue Playing -&gt; GoOutside]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="371" name="EndOfCurrentStory-0.0.6" tags="" position="100,4725" size="100,100">&lt;&lt;run UIBar.show().unstow();&gt;&gt;\
&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/UI/endofcurrentstory.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;

&lt;center&gt;
    &lt;p style=&quot;color: lime; font-size: 22px;&quot;&gt;🌟 Congratulations! 🌟&lt;/p&gt;
    You&#39;ve reached the current end of the story. Thank you for playing!

    In the next version, you will visit Xavier and more.
&lt;/center&gt;
&lt;div class=&quot;social-media&quot;&gt;
    Stay tuned for more exciting updates:

&lt;div class=&quot;social-icon-container&quot;&gt;
&lt;&lt;include &quot;SocialIcons&quot;&gt;&gt;
&lt;/div&gt;

&lt;hr&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Continue Playing -&gt; GoOutside]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="372" name="EndOfCurrentStory-0.0.7" tags="" position="225,4725" size="100,100">&lt;&lt;set $lockedUI = false&gt;&gt;\
&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/UI/endofcurrentstory.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;

&lt;center&gt;
    &lt;p style=&quot;color: lime; font-size: 22px;&quot;&gt;🌟 Congratulations! 🌟&lt;/p&gt;
    &lt;strong&gt;You&#39;ve reached the current end of the story, but rest assured, the story is far from over.&lt;/strong&gt; 

    For the next version, I will focus on making the right sidebar more useful by allowing you to move some information from the left sidebar there. 

    I also need to fix a ton of reported bugs + polish my writing and make various tweaks to the story here and there. 

    As far as new content goes, you can expect updates to the EroSphere club + post-surgery conversation with Cipher.
&lt;/center&gt;
&lt;div class=&quot;social-media&quot;&gt;
    Thank you for playing a stay tuned for more exciting updates:

&lt;div class=&quot;social-icon-container&quot;&gt;
&lt;&lt;include &quot;SocialIcons&quot;&gt;&gt;
&lt;/div&gt;

&lt;hr&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Continue Playing -&gt; GoOutside]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="373" name="EndOfCurrentStory-0.0.8" tags="" position="350,4725" size="100,100">&lt;&lt;set $lockedUI = false&gt;&gt;\
&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/UI/endofcurrentstory.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;

&lt;center&gt;
    &lt;p style=&quot;color: lime; font-size: 22px;&quot;&gt;🌟 Congratulations! 🌟&lt;/p&gt;
    &lt;strong&gt;You&#39;ve reached the current end of the story, but rest assured, the story is far from over.&lt;/strong&gt; 

    For the next version, I will focus on making the VX implant functional, so that AVA can start showing up in the game properly. 
&lt;/center&gt;
&lt;div class=&quot;social-media&quot;&gt;
    Thank you for playing a stay tuned for more exciting updates:

&lt;div class=&quot;social-icon-container&quot;&gt;
&lt;&lt;include &quot;SocialIcons&quot;&gt;&gt;
&lt;/div&gt;

&lt;hr&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Continue Playing -&gt; GoOutside]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="374" name="EndOfCurrentStory-0.0.9" tags="" position="475,4725" size="100,100">&lt;&lt;set $lockedUI = false&gt;&gt;\
&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/UI/endofcurrentstory.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;

&lt;center&gt;
    &lt;p style=&quot;color: lime; font-size: 22px;&quot;&gt;🌟 Congratulations! 🌟&lt;/p&gt;
    &lt;strong&gt;You&#39;ve reached the current end of the story, but rest assured, the story is far from over.&lt;/strong&gt; 

    In the next update, I want to finish the implementation of core gameplay mechanics, add an option to skip to Chapter 1, and fix several known bugs. 

    Once all that is done, I will continue working on the game&#39;s story. 
&lt;/center&gt;
&lt;div class=&quot;social-media&quot;&gt;
    Thank you for playing a stay tuned for more exciting updates:

&lt;div class=&quot;social-icon-container&quot;&gt;
&lt;&lt;include &quot;SocialIcons&quot;&gt;&gt;
&lt;/div&gt;

&lt;hr&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Continue Playing -&gt; GoOutside]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="375" name="EndOfCurrentStory-0.1.0" tags="" position="600,4725" size="100,100">&lt;&lt;set $lockedUI = false&gt;&gt;\
&lt;div class=&quot;img-location&quot;&gt;&lt;img src=&quot;imgs/UI/endofcurrentstory.jpg&quot; width=&quot;100%&quot;&gt;&lt;/div&gt;

&lt;center&gt;
    &lt;p style=&quot;color: lime; font-size: 22px;&quot;&gt;🌟 Congratulations! 🌟&lt;/p&gt;
    &lt;strong&gt;You&#39;ve reached the current end of the story, but rest assured, the journey is far from over.&lt;/strong&gt; 

    In the next update, the long-awaited AI coding assistant will finally become available, and you&#39;ll get to know your BrainFry colleagues a bit closer. 
&lt;/center&gt;
&lt;div class=&quot;social-media&quot;&gt;
    Thank you for playing a stay tuned for more exciting updates:

&lt;div class=&quot;social-icon-container&quot;&gt;
&lt;&lt;include &quot;SocialIcons&quot;&gt;&gt;
&lt;/div&gt;

&lt;hr&gt;
&lt;p class=&quot;back-link&quot;&gt;[[Continue Playing -&gt; HomeBacklog]]&lt;/p&gt;</tw-passagedata><tw-passagedata pid="376" name="Bug Report" tags="nobr" position="725,4725" size="100,100">&lt;iframe src=&quot;https://docs.google.com/forms/d/e/1FAIpQLSfUOAW108VMT9EN3MbDwSQoDF7ocXoLYuf75WdPOjMt-15pWQ/viewform?embedded=true&quot; width=&quot;640&quot; height=&quot;1252&quot; frameborder=&quot;0&quot; marginheight=&quot;0&quot; marginwidth=&quot;0&quot;&gt;Loading…&lt;/iframe&gt;</tw-passagedata><tw-passagedata pid="377" name="Changelog" tags="nobr" position="850,4725" size="100,100">&lt;div class=&quot;changelog-box&quot;&gt;
    &lt;h3&gt;Version 0.1.2&lt;/h3&gt;
    &lt;ul&gt;
        &lt;li&gt;Three neuroimaging sessions with Xavier added. Supporters can skip waiting using a button in the task description (visible only with Extra Options unlocked).&lt;/li&gt;
        &lt;li&gt;Gender change status messages now say 1 point instead of 1 points.&lt;/li&gt;
        &lt;li&gt;Added sexuality statistics in the Character screen.&lt;/li&gt;
        &lt;li&gt;New bar area in EroSphere.&lt;/li&gt;
        &lt;li&gt;You can now order a drink in EroSphere (doesn&#39;t have any effects yet).&lt;/li&gt;
        &lt;li&gt;The SynTech location is now accessible (but there&#39;s nothing to do there yet).&lt;/li&gt;
        &lt;li&gt;You can now go inside the Panacea Clinic (but there&#39;s nothing to do there yet).&lt;/li&gt;
        &lt;li&gt;You can now go inside the Panacea Clinic (but there&#39;s nothing to do there yet).&lt;/li&gt;
        &lt;li&gt;Supporters can now teleport inside EroSphere from the Extra Options menu.&lt;/li&gt;
        &lt;li&gt;You can now dance in EroSphere (but it doesn&#39;t lead to anything yet).&lt;/li&gt;
        &lt;li&gt;You can now enter the Glory Booths area (but there&#39;s nothing to do there yet).&lt;/li&gt;
        &lt;li&gt;It&#39;s no longer possible for implantCharge to be lower than 0.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h3&gt;Version 0.1.1&lt;/h3&gt;
    &lt;ul&gt;
        &lt;li&gt;Expenses are now stored and manipulated more intelligently.&lt;/li&gt;
        &lt;li&gt;Added Community Zone and Panacea Clinic in the navigation hub (in Chapter 1).&lt;/li&gt;
        &lt;li&gt;Navigation hub &quot;Go Back&quot; links now work as they should.&lt;/li&gt;
        &lt;li&gt;GitGud now has a hub passage.&lt;/li&gt;
        &lt;li&gt;AI coding assistant becomes available when you work at BrainFry for the first time since your infection.&lt;/li&gt;
        &lt;li&gt;You can talk with Yuki about your surgery.&lt;/li&gt;
        &lt;li&gt;You can talk with Xavier about your surgery. This leads to a side mission (NOT IMPLEMENTED YET).&lt;/li&gt;
        &lt;li&gt;There&#39;s a chance that Xavier will be &quot;busy&quot; when you visit him at GitGud.&lt;/li&gt;
        &lt;li&gt;Added a few post-surgery linear passages.&lt;/li&gt;
        &lt;li&gt;PornNexus website is now available (NOT FULLY IMPLEMENTED YET).&lt;/li&gt;
        &lt;li&gt;BrainFry and GitGud dialogs now display in the right order (newest first).&lt;/li&gt;
        &lt;li&gt;The prank mission now becomes available on day 4 of the open section of Chapter 1.&lt;/li&gt;
        &lt;li&gt;Relationship status change messages are more informative.&lt;/li&gt;
        &lt;li&gt;The Notifications box now displays available ByteBunker jobs instead of hacking targets.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h3&gt;Version 0.1.0&lt;/h3&gt;
    &lt;ul&gt;
        &lt;li&gt;The skip prank job minigame link now works as it should.&lt;/li&gt;
        &lt;li&gt;HOPEFULLY, sidebars and topbar are fixed.&lt;/li&gt;
        &lt;li&gt;It&#39;s now clearer which ByteBunker jobs are taken.&lt;/li&gt;
        &lt;li&gt;Nicer scrollbars in Safari.&lt;/li&gt;
        &lt;li&gt;Fixed the following reported bug: Notes deleted after saving.&lt;/li&gt;
        &lt;li&gt;Fixed the following reported bug: When starting a new game, if we change the &quot;Stats Box&quot; location to &quot;Top&quot; in the settings, there will be a padding-top (2em) applied to the CSS even if there isn&#39;t anything shown yet.&lt;/li&gt;
        &lt;li&gt;Fixed the following reported bug: There is an S at the top of the settings menu (before the &quot;Display Settings&quot; text)&lt;/li&gt;
        &lt;li&gt;Fixed the following reported bug: hypnosis screen infinitely changing gender to female&lt;/li&gt;
        &lt;li&gt;Fixed the following reported bug: Character Profile &quot;go back&quot; button going to wrong passage&lt;/li&gt;
        &lt;li&gt;EroSphere introduction now shows as intended.&lt;/li&gt;
        &lt;li&gt;Added task descriptions during the linear section of Chapter 1.&lt;/li&gt;
        &lt;li&gt;Added post-surgery chat with Cipher.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h3&gt;Version 0.0.9b&lt;/h3&gt;
    &lt;ul&gt;
        &lt;li&gt;The last Project XX hypno now affects player&#39;s gender if looked at for too long.&lt;/li&gt;
        &lt;li&gt;Added volume slider in the sidebar music player.&lt;/li&gt;
        &lt;li&gt;Improved how various status changes are handled.&lt;/li&gt;
        &lt;li&gt;Fixed issues with identical actions potentially triggering multiple variable changes.&lt;/li&gt;
        &lt;li&gt;Changed how APs are displayed.&lt;/li&gt;
        &lt;li&gt;Changed topbar behavior.&lt;/li&gt;
        &lt;li&gt;Fixed a back button bug on the Extendo website.&lt;/li&gt;
        &lt;li&gt;Added an OmniPedia entry for NeoUrbania.&lt;/li&gt;
        &lt;li&gt;Added an OmniPedia entry for SynTech.&lt;/li&gt;
        &lt;li&gt;Added a shuffle button to the large music player.&lt;/li&gt;
        &lt;li&gt;Finished the implementation of the Synapse Steady VX cyberware.&lt;/li&gt;
        &lt;li&gt;Lowered the maximum number of dishes to clean.&lt;/li&gt;
        &lt;li&gt;Fixed the following reported bug: there is an typo in emailss on the left side bar&lt;/li&gt;
        &lt;li&gt;Fixed the following reported bug: Spilling mistake: &quot;bathrooms of possibly hundreds of his tenatns.&quot;&lt;/li&gt;
        &lt;li&gt;Fixed the following reported bug: The side bar comes out every time I click to move forward. After I click sleep, bam, it opens, work, bam.&lt;/li&gt;
        &lt;li&gt;Fixed the following reported bug: &quot;extendo.omninet&quot; on our personal laptop &quot;opens&quot; someone else&#39;s laptop&lt;/li&gt;
        &lt;li&gt;Fixed the following reported bug: Stuck within the body details section of the Quick Access Menu, clicking &quot;Go back&quot; Just &quot;refreshes&quot; the page. Refreshes is in quotes because it takes you to the same page. You can permanently get stuck in the body details page with no way to go back to where you can leave your place.&lt;/li&gt;
        &lt;li&gt;Fixed the following reported bug: I find that whenever a track finishes, it always goes back to the top, instead of moving to the next track for me&lt;/li&gt;
        &lt;li&gt;Fixed the following reported bug: Oh right, very minor bit of feedback: If you talk to a colleague but you dont actually talk to them (ie: you dont have anything to talk about, or you click &quot;back&quot; instead of picking an available topic), it probably shouldnt consume energy?&lt;/li&gt;
        &lt;li&gt;Fixed the following reported bug: Brick breaker has no ending&lt;/li&gt;
        &lt;li&gt;Fixed the following reported bug: Click on the Extendo website in your laptop browser, it will output an error&lt;/li&gt;
        &lt;li&gt;Fixed the following reported bug: playing erosphere SIMS did not cost money&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h3&gt;Version 0.0.9&lt;/h3&gt;
    &lt;ul&gt;
        &lt;li&gt;Added top bar to display player stats.&lt;/li&gt;
        &lt;li&gt;Added play stat location setting to optionally display the information in the left sidebar.&lt;/li&gt;
        &lt;li&gt;UI is now partially visible during linear sections.&lt;/li&gt;
        &lt;li&gt;The Synapse Steady VX implant is now functional.&lt;/li&gt;
        &lt;li&gt;Added a character screen and a corresponding shortcut button.&lt;/li&gt;
        &lt;li&gt;Added a computer shortcut.&lt;/li&gt;
        &lt;li&gt;Added a right sidebar customization tip.&lt;/li&gt;
        &lt;li&gt;Added a Start button hover effect.&lt;/li&gt;
        &lt;li&gt;Added a Quick Start button.&lt;/li&gt;
        &lt;li&gt;Added an option to skip the Prologue.&lt;/li&gt;
        &lt;li&gt;Added an option to completely disable right sidebar.&lt;/li&gt; 
        &lt;li&gt;Fixed a web browser 404 page back button bug.&lt;/li&gt;
        &lt;li&gt;The SIMS watched variable now resets as it should when the player goes to sleep.&lt;/li&gt;
        &lt;li&gt;Added a &lt;&lt;link &quot;resist minigame&quot;&gt;&gt;&lt;&lt;set $rightSidebarEnabled = true&gt;&gt;&lt;&lt;goto &quot;Resist-Minigame&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h3&gt;Version 0.0.8&lt;/h3&gt;
    &lt;ul&gt;
        &lt;li&gt;Added sidebar settings (visible only when the right sidebar is visible).&lt;/li&gt;
        &lt;li&gt;Successful bruteforce now reveals the correct password.&lt;/li&gt;
        &lt;li&gt;Added an &lt;&lt;link &quot;optional hacking job&quot;&gt;&gt;&lt;&lt;set $totalDays = 10&gt;&gt;&lt;&lt;set $chapter1Days = 2&gt;&gt;&lt;&lt;set $introOver = true&gt;&gt;&lt;&lt;set $jobBoardFirstVisit = false&gt;&gt;&lt;&lt;goto &quot;HomeBacklog&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;. Becomes available on the second day of Chapter 1.&lt;/li&gt;
        &lt;li&gt;Added mobile compatibility warning.&lt;/li&gt;
        &lt;li&gt;Added &lt;&lt;link &quot;S.I.M.S. pods&quot;&gt;&gt;&lt;&lt;goto &quot;EroSphere-SIMSPods&quot;&gt;&gt;&lt;&lt;/link&gt;&gt; in EroSphere.&lt;/li&gt;
        &lt;li&gt;Fixed empty space at the bottom of passages.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h3&gt;Version 0.0.7&lt;/h3&gt;
    &lt;ul&gt;
        &lt;li&gt;Added a main story mission: &lt;&lt;link &quot;GitGud Synapse Steady VX installation&quot;&gt;&gt;&lt;&lt;run UIBar.hide().stow();&gt;&gt;&lt;&lt;goto &quot;UrgentRequest-AfterHospital-Sleep&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;.&lt;/li&gt;
        &lt;li&gt;Tweaked dialog boxes.&lt;/li&gt;
        &lt;li&gt;Implemented right sidebar.&lt;/li&gt;
        &lt;li&gt;Slight changes to certain dialogs for better consistency.&lt;/li&gt;
        &lt;li&gt;Fixed a lot of minor bugs found using SugarValidator.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h3&gt;Version 0.0.6&lt;/h3&gt;
    &lt;ul&gt;
        &lt;li&gt;Added Panacea Clinic as a new location.&lt;/li&gt;
        &lt;li&gt;Added a main story mission: [[hospital visit|UrgentRequest-server-wiping-new-wake-up]].&lt;/li&gt;
        &lt;li&gt;Added a photosensitivity warning.&lt;/li&gt;
        &lt;li&gt;Notifications change color based on their number (1 = yellow, 2 = orange, 3+ = red).&lt;/li&gt;
        &lt;li&gt;Improved email client design to make read and unread emails more distinct.&lt;/li&gt;
        &lt;li&gt;Added the ability to change the first name, last name, and nickname in the Extra Options menu.&lt;/li&gt;
        &lt;li&gt;Added the option to enable &quot;Skip Minigame&quot; buttons in the Extra Options menu.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h3&gt;Version 0.0.5&lt;/h3&gt;
    &lt;ul&gt;
        &lt;li&gt;Adjusted coding minigame reward.&lt;/li&gt;
        &lt;li&gt;Adjusted starting money.&lt;/li&gt;
        &lt;li&gt;Added a rent mechanic.&lt;/li&gt;
        &lt;li&gt;Added a Hive Properties website.&lt;/li&gt;
        &lt;li&gt;Added a Hive Properties email.&lt;/li&gt;
        &lt;li&gt;Added expenses tracking.&lt;/li&gt;
        &lt;li&gt;Added a bug report form.&lt;/li&gt;
        &lt;li&gt;Fixed a bunch of typos.&lt;/li&gt;
        &lt;li&gt;Fixed the Download Wiper Tool / Save Target button order issue.&lt;/li&gt;
        &lt;li&gt;Fixed the long black tunnel animation delay by implementing a preload function and optimizing the animation itself.&lt;/li&gt;
        &lt;li&gt;Added [[EroSphere location|EroSphere-Outside]].&lt;/li&gt;
        &lt;li&gt;Added EroSphere pole dancing.&lt;/li&gt;
        &lt;li&gt;Added EroSphere dishwashing minigame.&lt;/li&gt;
        &lt;li&gt;Added quick access buttons tooltips.&lt;/li&gt;
        &lt;li&gt;Adjusted Project XX text.&lt;/li&gt;
        &lt;li&gt;Improved Prologue pacing.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h3&gt;Version 0.0.4&lt;/h3&gt;
    &lt;ul&gt;
        &lt;li&gt;Improved email messages.&lt;/li&gt;
        &lt;li&gt;Added EroSphere promo email.&lt;/li&gt;
        &lt;li&gt;Added an &lt;&lt;link &quot;urgent request from Cipher&quot;&gt;&gt;&lt;&lt;set $brainFryFirstVisit = false&gt;&gt;&lt;&lt;set $dayOfWeek = &quot;Monday&quot;&gt;&gt;&lt;&lt;set $introOver = true&gt;&gt;&lt;&lt;run MindWare.addInstantMessage(&#39;cipherInstantMessages&#39;, &#39;Urgent Request&#39;, &#39;IMApp-CipherLynx-UrgentRequest&#39;, &#39;Cipher&#39;, true, true);&gt;&gt;&lt;&lt;set $cipherUrgentRequestSent = true&gt;&gt;&lt;&lt;goto &quot;Quest-CipherLynx-UrgentRequest-Introduction&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;.&lt;/li&gt;
        &lt;li&gt;Added a chapter transition screen.&lt;/li&gt;
        &lt;li&gt;Landlord mission is now time-sensitive.&lt;/li&gt;
        &lt;li&gt;Added Extra Options menu.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h3&gt;Version 0.0.3&lt;/h3&gt;
    &lt;ul&gt;
        &lt;li&gt;Improved email client.&lt;/li&gt;
        &lt;li&gt;Improved job descriptions.&lt;/li&gt;
        &lt;li&gt;Tweaked introduction.&lt;/li&gt;
        &lt;li&gt;Added inventory mechanics.&lt;/li&gt;
        &lt;li&gt;Added a &lt;&lt;link &quot;BrainFry mission&quot;&gt;&gt;&lt;&lt;set $brainFryFirstVisit = false&gt;&gt;&lt;&lt;set $dayOfWeek = &quot;Monday&quot;&gt;&gt;&lt;&lt;set $introOver = true&gt;&gt;&lt;&lt;goto &quot;GitGudDelivery-Intro&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;.&lt;/li&gt;
        &lt;li&gt;Added a chat with Cipher about the BrainFry mission.&lt;/li&gt;
        &lt;li&gt;Added contextual narrative messages with quick links.&lt;/li&gt;
        &lt;li&gt;Added OmniPedia.&lt;/li&gt;
        &lt;li&gt;Added OmniNet page in OmniPedia.&lt;/li&gt;
        &lt;li&gt;Removed the player sexuality variable.&lt;/li&gt;
        &lt;li&gt;Removed a warning about sleep not working.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h3&gt;Version 0.0.2&lt;/h3&gt;
    &lt;ul&gt;
        &lt;li&gt;Adjusted the difficulty of the hacking minigame.&lt;/li&gt;
        &lt;li&gt;Adjusted the sleep delay duration.&lt;/li&gt;
        &lt;li&gt;Added minigame difficulty setting.&lt;/li&gt;
        &lt;li&gt;Added text increase/decrease buttons in the settings menu.&lt;/li&gt;
        &lt;li&gt;Added a notification system.&lt;/li&gt;
        &lt;li&gt;Added an instant messenger app.&lt;/li&gt;
        &lt;li&gt;Added two chat conversations with Cipher.&lt;/li&gt;
        &lt;li&gt;Added a BrainFry work introduction.&lt;/li&gt;
        &lt;li&gt;Added three work conversations.&lt;/li&gt;
        &lt;li&gt;Added a BrainFry work minigame.&lt;/li&gt;
        &lt;li&gt;Added a quick access menu for apps.&lt;/li&gt; 
        &lt;li&gt;Added a player sexuality variable.&lt;/li&gt;
        &lt;li&gt;Added a week cycle.&lt;/li&gt;
        &lt;li&gt;Added an image lightbox (used in the instant messenger app).&lt;/li&gt;
        &lt;li&gt;Fixed several bugs.&lt;/li&gt;
        &lt;li&gt;Tweaked many things.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h3&gt;Version 0.0.1&lt;/h3&gt;
    &lt;ul&gt;
        &lt;li&gt;Initial release.&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="378" name="CharacterCreator" tags="" position="975,4725" size="100,100">&lt;div class=&quot;character-creator-container&quot;&gt;\
    &lt;h2&gt;Create Your Character&lt;/h2&gt;\
    &lt;div class=&quot;character-creator-input-group&quot;&gt;\
        &lt;label for=&quot;firstName&quot;&gt;&lt;strong&gt;First Name:&lt;/strong&gt;&lt;/label&gt;\
        &lt;input type=&quot;text&quot; id=&quot;firstName&quot; name=&quot;firstName&quot; value=&quot;John&quot;&gt;\
    &lt;/div&gt;\
    &lt;div class=&quot;character-creator-input-group&quot;&gt;\
        &lt;label for=&quot;lastName&quot;&gt;&lt;strong&gt;Last Name:&lt;/strong&gt;&lt;/label&gt;\
        &lt;input type=&quot;text&quot; id=&quot;lastName&quot; name=&quot;lastName&quot; value=&quot;Doe&quot;&gt;\
    &lt;/div&gt;\
    &lt;div class=&quot;character-creator-input-group&quot;&gt;\
        &lt;label for=&quot;nickname&quot;&gt;&lt;strong&gt;Nickname (Online Handle):&lt;/strong&gt;&lt;/label&gt;\
        &lt;input type=&quot;text&quot; id=&quot;nickname&quot; name=&quot;nickname&quot; value=&quot;Ghost&quot;&gt;\
    &lt;/div&gt;
    &lt;div class=&quot;character-creator-avatar-selector&quot;&gt;\
        &lt;button onclick=&quot;window.currentAvatarIndex = updateAvatarPreview(window.currentAvatarIndex - 1)&quot; class=&quot;character-creator-avatar-arrow&quot;&gt;←&lt;/button&gt;\
        &lt;div class=&quot;character-creator-avatar-preview&quot; id=&quot;avatarPreview&quot; style=&quot;background-image: url(&#39;imgs/characters/player/playerAvatar0.jpg&#39;);&quot;&gt;&lt;/div&gt;\
        &lt;button onclick=&quot;window.currentAvatarIndex = updateAvatarPreview(window.currentAvatarIndex + 1)&quot; class=&quot;character-creator-avatar-arrow&quot;&gt;→&lt;/button&gt;\
    &lt;/div&gt;\
    &lt;div class=&quot;female-avatar-preview-link&quot;&gt;
            &lt;a id=&quot;femaleAvatarLink&quot; class=&quot;link-internal&quot; onclick=&quot;updateFemaleAvatarPreview()&quot;&gt;Preview Female Version&lt;/a&gt;
    &lt;/div&gt;\
    &lt;!-- Add more input fields and attributes as needed --&gt;\
&lt;/div&gt;\

&lt;&lt;if $tutorialCharacterCreation === false&gt;&gt;&lt;div id=&quot;tutorial-box&quot;&gt;&lt;div class=&quot;instruction-container-blue&quot;&gt;\
    &lt;div class=&quot;instruction-title-bar-blue&quot;&gt;Tutorial: Character Creation &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.tutorialCharacterCreation = true; document.getElementById(&#39;tutorial-box&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;\
    &lt;div class=&quot;instruction-content&quot;&gt;\
        &lt;p&gt;Please provide your character&#39;s name and nickname. Additionally, select an avatar for your character. This avatar will be your visual representation in dialog boxes throughout the game, and it does not influence gameplay mechanics.&lt;/p&gt;\
    &lt;/div&gt;&lt;/div&gt;
    &lt;/div&gt;&lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;\
\
&lt;div class=&quot;back-done-buttons&quot;&gt;\
    &lt;&lt;button &quot;Go Back&quot; &quot;Start&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
    &lt;&lt;button &quot;Done&quot;&gt;&gt;
        &lt;&lt;set $playerName to jQuery(&quot;#firstName&quot;).val()&gt;&gt;
        &lt;&lt;set $playerLastName to jQuery(&quot;#lastName&quot;).val()&gt;&gt;
        &lt;&lt;set $playerNickname to jQuery(&quot;#nickname&quot;).val()&gt;&gt;
        &lt;&lt;run selectAvatar()&gt;&gt;
        &lt;&lt;goto &quot;GameplaySettings&quot;&gt;&gt;
    &lt;&lt;/button&gt;&gt;
&lt;/div&gt;
\
&lt;script&gt;
// Function to update the avatar preview
function updateAvatarPreview(index) {
    var avatars = SugarCube.State.variables.playerAvatar;
    if (index &lt; 0) {
        index = avatars.length - 1;
    } else if (index &gt;= avatars.length) {
        index = 0;
    }
    document.getElementById(&#39;avatarPreview&#39;).style.backgroundImage = &#39;url(&quot;&#39; + avatars[index] + &#39;&quot;)&#39;;
    return index;
}

// Initialize the current avatar index
window.currentAvatarIndex = 0;

// Function to select the avatar and store it in a SugarCube variable
function selectAvatar() {
    SugarCube.State.variables.playerAvatarSelected = window.currentAvatarIndex;
}

// Function to update the female avatar preview
function updateFemaleAvatarPreview() {
    var avatars = SugarCube.State.variables.playerAvatar;
    var currentAvatar = avatars[window.currentAvatarIndex];
    var femaleAvatar = currentAvatar.replace(&quot;.jpg&quot;, &quot;-female.jpg&quot;); // Assumes naming convention

    // Use UI.alert to show the image
    SugarCube.Dialog.setup(&quot;Female&quot;);
    SugarCube.Dialog.wiki(&#39;&lt;img src=&quot;&#39; + femaleAvatar + &#39;&quot; alt=&quot;Female Avatar&quot; style=&quot;max-width:250px; max-height:250px;&quot;&gt;&#39;);
    SugarCube.Dialog.open();  
}
&lt;/script&gt;</tw-passagedata><tw-passagedata pid="379" name="CharacterProfile" tags="nobr" position="1100,4725" size="100,100">&lt;style&gt;
.character-screen {
    background-color: #121212;
    color: #55BBBC;
    padding: 20px;
    border: 1px solid #55BBBC;
    box-shadow: 0 0 20px #00ffea;
    margin-bottom: 20px;
}

.character-profile-box {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-grow: 1;
    background-color: black;
    border: 2px solid #00ffea;
    padding: 15px;
    padding-left: 20px; /* Space from the character info */
    margin-bottom: 50px;
    line-height: 0;
}

.avatar-section {
    border-right: 2px solid #00ffea;
    margin-right: 20px;
}

.avatar-section .profile-avatar {
    width: 120px;
    height: 120px;
    margin-right: 20px;
}

.character-body img {
    display: block;
    max-width: 100%; /* Adjusts image to fit the container */
    margin: 0 auto; /* Centers image */
}

.character-info-section .info-label {
    font-weight: bold;
    margin-right: 5px;
    line-height: 1.75;
}

.body-attributes .attributes-heading, .character-stats .stats-heading {
    color: #55BBBC;
    border-bottom: 1px solid #55BBBC;
    padding-bottom: 5px;
    margin-bottom: 10px;
}

.attributes-list, .stats-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.attributes-list li, .stats-list li {
    padding: 8px 0;
    border-bottom: 1px dashed #55BBBC;
}

.attr-label, .stat-label {
    font-weight: bold;
}

.stat-value, .stat-value {
    float: right;
    font-weight: normal;
}

.attributes-list li:last-child, .stats-list li:last-child {
    border-bottom: none;
}

.view-options {
    display: flex;
    justify-content: center;
    margin-top: 20px;
}

.view-options button {
    background-color: transparent;
    color: #00ffea; /* Neon color for text */
    border: 1px solid #00ffea; /* Neon border */
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    margin: 0 10px;
    transition: all 0.3s ease; /* Smooth transition for color changes */
    position: relative; /* Needed for after pseudo-element */
    overflow: hidden; /* Ensures pseudo-elements don&#39;t extend outside the button */
}

/* Hover state */
.view-options button:hover {
    color: #121212 !important; /* Dark color for text to contrast with the bright background */
    background-color: #00ffea; /* Neon background */
}

/* Active (click) state */
.view-options button:active {
    transform: translateY(2px); /* Slight movement to simulate a click */
}

/* Neon glow effect on hover */
.view-options button:hover::after {

}

.active-button button {
    background-color: #00ffea !important;
    color: #121212 !important; /* Neon color for text */
    pointer-events: none;
}

/* Ensuring the glow effect fades in smoothly */
.view-options button::after {
    content: &#39;&#39;;
    position: absolute;
    top: -50%; right: -50%;
    bottom: -50%; left: -50%;
    border-radius: inherit; /* Inherit the button&#39;s border-radius */
    background-color: #00ffea;
    z-index: -1;
    filter: blur(10px); /* Creates the glow effect */
    opacity: 0; /* Starts out fully transparent */
    transition: opacity 0.3s ease;
}

.implants-section {
    display: flex;
    flex-direction: column; /* Changes to column to stack the label and the box container */
    align-items: flex-end;
    flex-grow: 1;
    padding-left: 20px; /* Space from the character info */
}

.implants-container {
    display: flex; /* New container for horizontal layout */
    justify-content: right; 
    width: 100%; /* Takes the full width of its parent container */
}

.implant-box {
    border: 2px solid #00ffea; /* Blue border for the implant boxes */
    width: 120px; /* Adjust width as needed */
    height: 120px; /* Adjust height as needed */
    display: flex;
    justify-content: center;
    margin-left: 20px;
    align-items: center;
    flex-direction: column; /* Aligns content vertically */
    padding: 5px; /* Adds padding inside the box for better text fitting */
    box-sizing: border-box; /* Ensures padding doesn&#39;t add to the box&#39;s size */
}

.implant-text, .implants-label {
    color: #55BBBC; /* Styling the text color to fit the theme */
    text-align: center; /* Centers the label text */
    width: 100%; /* Ensures the label spans the full width of its container */
    word-wrap: break-word; /* Ensures long words don&#39;t overflow the container */
    font-size: 0.8em;
    padding: 2px; /* Adds a little padding for spacing */
    line-height: 1.2; /* Adjusts line height for better text appearance */
}

.implant-image {
    max-width: 80%; /* Adjusts the image to not overflow its container */
    max-height: 80%;
    object-fit: contain; /* Maintains the aspect ratio of the image */
}
&lt;/style&gt;

&lt;div class=&quot;character-screen&quot;&gt;
    &lt;div class=&quot;character-profile-box&quot;&gt;
        &lt;div class=&quot;avatar-section&quot;&gt;
            &lt;img src=&quot;/Volumes/Dev/MindWare/imgs/characters/player/playerAvatar0.jpg&quot; alt=&quot;Player Avatar&quot; class=&quot;profile-avatar&quot;&gt;
        &lt;/div&gt;
        &lt;div class=&quot;character-info-section&quot;&gt;
            &lt;span class=&quot;info-label&quot;&gt;Name:&lt;/span&gt; $playerName
            &lt;br&gt;&lt;span class=&quot;info-label&quot;&gt;Last Name:&lt;/span&gt; $playerLastName
            &lt;br&gt;&lt;span class=&quot;info-label&quot;&gt;Nickname:&lt;/span&gt; $playerNickname
            &lt;!-- Additional character info here --&gt;
        &lt;/div&gt;
        &lt;div class=&quot;implants-section&quot;&gt;
            &lt;div class=&quot;implants-container&quot;&gt;
                &lt;div class=&quot;implant-box&quot;&gt;
                    &lt;&lt;if $synapseSteadyVXInstalled === true&gt;&gt;
                    &lt;img src=&quot;imgs/items/synapse-steady-vx-cropped.webp&quot; alt=&quot;Synapse Steady VX&quot; title=&quot;Synapse Steady VX&quot; class=&quot;implant-image&quot;&gt;
                    &lt;&lt;else&gt;&gt;
                    &lt;span class=&quot;implant-text&quot;&gt;Empty Implant Slot&lt;/span&gt;
                    &lt;&lt;/if&gt;&gt;
                &lt;/div&gt;
                &lt;div class=&quot;implant-box&quot;&gt;
                    &lt;!-- Placeholder for a second implant. --&gt;
                    &lt;span class=&quot;implant-text&quot;&gt;Empty Implant Slot&lt;/span&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;character-body&quot;&gt;
        &lt;span id=&quot;body-image&quot;&gt;&lt;&lt;include &quot;CharacterBodyFront&quot;&gt;&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;view-options&quot;&gt;
        &lt;span id=&quot;front-button&quot;&gt;&lt;&lt;button &quot;View Front&quot;&gt;&gt;
            &lt;&lt;set _characterView = &quot;front&quot;&gt;&gt;
            &lt;&lt;addclass &quot;#front-button&quot; &quot;active-button&quot;&gt;&gt;
            &lt;&lt;removeclass &quot;#back-button&quot; &quot;active-button&quot;&gt;&gt;
            &lt;&lt;replace &quot;#body-image&quot;&gt;&gt;
                &lt;&lt;include &quot;CharacterBodyFront&quot;&gt;&gt;
            &lt;&lt;/replace&gt;&gt;
        &lt;&lt;/button&gt;&gt;&lt;/span&gt;
        &lt;span id=&quot;back-button&quot;&gt;&lt;&lt;button &quot;View Back&quot;&gt;&gt;
            &lt;&lt;set _characterView = &quot;back&quot;&gt;&gt;
            &lt;&lt;addclass &quot;#back-button&quot; &quot;active-button&quot;&gt;&gt;
            &lt;&lt;removeclass &quot;#front-button&quot; &quot;active-button&quot;&gt;&gt;
            &lt;&lt;replace &quot;#body-image&quot;&gt;&gt;
                &lt;&lt;include &quot;CharacterBodyBack&quot;&gt;&gt;
            &lt;&lt;/replace&gt;&gt;
        &lt;&lt;/button&gt;&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;br&gt;
    &lt;div class=&quot;character-stats&quot;&gt;
        &lt;h3 class=&quot;stats-heading&quot;&gt;Physique&lt;/h3&gt;
        &lt;ul class=&quot;stats-list&quot;&gt;
            &lt;li&gt;&lt;span class=&quot;stat-label&quot;&gt;Body:&lt;/span&gt; &lt;span class=&quot;stat-value&quot;&gt;$playerBody&lt;/span&gt;&lt;/li&gt;
            &lt;li&gt;&lt;span class=&quot;stat-label&quot;&gt;Breast:&lt;/span&gt; &lt;span class=&quot;stat-value&quot;&gt;$playerBreast&lt;/span&gt;&lt;/li&gt;
            &lt;li&gt;&lt;span class=&quot;stat-label&quot;&gt;Buttocks:&lt;/span&gt; &lt;span class=&quot;stat-value&quot;&gt;$playerButtocks&lt;/span&gt;&lt;/li&gt;
            &lt;li&gt;&lt;span class=&quot;stat-label&quot;&gt;Genitals:&lt;/span&gt; &lt;span class=&quot;stat-value&quot;&gt;$playerGenitals&lt;/span&gt;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
    &lt;div class=&quot;character-stats&quot;&gt;
        &lt;h3 class=&quot;stats-heading&quot;&gt;Identity&lt;/h3&gt;
        &lt;ul class=&quot;stats-list&quot;&gt;
            &lt;li&gt;&lt;span class=&quot;stat-label&quot;&gt;Gender:&lt;/span&gt; &lt;span class=&quot;stat-value&quot;&gt;$playerGender out of 100 (&lt;&lt;print MindWare.getGenderStatus()&gt;&gt;)&lt;/span&gt;&lt;/li&gt;
            &lt;li&gt;&lt;span class=&quot;stat-label&quot;&gt;Morality:&lt;/span&gt; &lt;span class=&quot;stat-value&quot;&gt;$playerMorality out of 100 (&lt;&lt;print MindWare.getMoralityStatus()&gt;&gt;)&lt;/span&gt;&lt;/li&gt;
            &lt;!-- Additional stats here --&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
    &lt;div class=&quot;character-stats&quot;&gt;
        &lt;h3 class=&quot;stats-heading&quot;&gt;Sexuality&lt;/h3&gt;
        &lt;ul class=&quot;stats-list&quot;&gt;
            &lt;li&gt;
                &lt;span class=&quot;stat-label&quot;&gt;Female encounters:&lt;/span&gt; 
                &lt;span class=&quot;stat-value&quot;&gt;
                    &lt;&lt;if typeof $femaleEncounters !== &quot;undefined&quot;&gt;&gt;
                        &lt;&lt;print $femaleEncounters&gt;&gt;
                    &lt;&lt;else&gt;&gt;
                        0
                    &lt;&lt;/if&gt;&gt;
                &lt;/span&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;span class=&quot;stat-label&quot;&gt;Male encounters:&lt;/span&gt; 
                &lt;span class=&quot;stat-value&quot;&gt;
                    &lt;&lt;if typeof $maleEncounters !== &quot;undefined&quot;&gt;&gt;
                        &lt;&lt;print $maleEncounters&gt;&gt;
                    &lt;&lt;else&gt;&gt;
                        0
                    &lt;&lt;/if&gt;&gt;
                &lt;/span&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;span class=&quot;stat-label&quot;&gt;Trans encounters:&lt;/span&gt; 
                &lt;span class=&quot;stat-value&quot;&gt;
                    &lt;&lt;if typeof $transEncounters !== &quot;undefined&quot;&gt;&gt;
                        &lt;&lt;print $transEncounters&gt;&gt;
                    &lt;&lt;else&gt;&gt;
                        0
                    &lt;&lt;/if&gt;&gt;
                &lt;/span&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;span class=&quot;stat-label&quot;&gt;Submissive acts:&lt;/span&gt; 
                &lt;span class=&quot;stat-value&quot;&gt;
                    &lt;&lt;if typeof $submissiveActs !== &quot;undefined&quot;&gt;&gt;
                        &lt;&lt;print $submissiveActs&gt;&gt;
                    &lt;&lt;else&gt;&gt;
                        0
                    &lt;&lt;/if&gt;&gt;
                &lt;/span&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;span class=&quot;stat-label&quot;&gt;Dominant acts:&lt;/span&gt; 
                &lt;span class=&quot;stat-value&quot;&gt;
                    &lt;&lt;if typeof $dominantActs !== &quot;undefined&quot;&gt;&gt;
                        &lt;&lt;print $dominantActs&gt;&gt;
                    &lt;&lt;else&gt;&gt;
                        0
                    &lt;&lt;/if&gt;&gt;
                &lt;/span&gt;
            &lt;/li&gt;
            &lt;!-- Additional stats here --&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p class=&quot;back-link&quot;&gt;
    &lt;&lt;link &quot;Go Back&quot; $returnPassage&gt;&gt;
        &lt;&lt;set $navigatedFromSidebar to false&gt;&gt;
    &lt;&lt;/link&gt;&gt;
&lt;/p&gt;

&lt;&lt;set _characterView = &quot;front&quot;&gt;&gt;
&lt;&lt;done&gt;&gt;
    &lt;&lt;if _characterView === &quot;front&quot;&gt;&gt;
        &lt;&lt;addclass &quot;#front-button&quot; &quot;active-button&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if _characterView === &quot;back&quot;&gt;&gt;
        &lt;&lt;addclass &quot;#back-button&quot; &quot;active-button&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/done&gt;&gt;</tw-passagedata><tw-passagedata pid="380" name="CharacterBodyFront" tags="nobr" position="1225,4725" size="100,100">&lt;&lt;if $playerBody === &quot;Feminine&quot; &amp;&amp; $playerBreast === &quot;Huge&quot;&gt;&gt;
    &lt;img src=&quot;imgs/characters/player/body/front/5-female-front-huge-cropped.png&quot; alt=&quot;Player Wireframe&quot; class=&quot;body-image&quot;&gt;
&lt;&lt;elseif $playerBody === &quot;Feminine&quot; &amp;&amp; $playerBreast === &quot;Large&quot;&gt;&gt;
    &lt;img src=&quot;imgs/characters/player/body/front/5-female-front-large-cropped.png&quot; alt=&quot;Player Wireframe&quot; class=&quot;body-image&quot;&gt;
&lt;&lt;elseif $playerBody === &quot;Feminine&quot;&gt;&gt;
    &lt;img src=&quot;imgs/characters/player/body/front/5-female-front-average-cropped.png&quot; alt=&quot;Player Wireframe&quot; class=&quot;body-image&quot;&gt;
&lt;&lt;elseif $playerBody === &quot;Feminine-Leaning&quot;&gt;&gt;
    &lt;img src=&quot;imgs/characters/player/body/front/4-female-aligned-front-cropped.png&quot; alt=&quot;Player Wireframe&quot; class=&quot;body-image&quot;&gt;
&lt;&lt;elseif $playerBody === &quot;Androgynous&quot;&gt;&gt;
    &lt;img src=&quot;imgs/characters/player/body/front/3-androgynous-front-cropped.png&quot; alt=&quot;Player Wireframe&quot; class=&quot;body-image&quot;&gt;
&lt;&lt;elseif $playerBody === &quot;Masculine-Leaning&quot;&gt;&gt;
    &lt;img src=&quot;imgs/characters/player/body/front/2-male-aligned-front-cropped.png&quot; alt=&quot;Player Wireframe&quot; class=&quot;body-image&quot;&gt;
&lt;&lt;elseif $playerBody === &quot;Masculine&quot;&gt;&gt;
    &lt;img src=&quot;imgs/characters/player/body/front/1-male-front-cropped.png&quot; alt=&quot;Player Wireframe&quot; class=&quot;body-image&quot;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="381" name="CharacterBodyBack" tags="nobr" position="100,4850" size="100,100">&lt;&lt;if $playerBody === &quot;Feminine&quot; &amp;&amp; $playerButtocks === &quot;Huge&quot;&gt;&gt;
    &lt;img src=&quot;imgs/characters/player/body/rear/5-female-rear-huge-cropped.webp&quot; alt=&quot;Player Wireframe&quot; class=&quot;body-image&quot;&gt;
&lt;&lt;elseif $playerBody === &quot;Feminine&quot; &amp;&amp; $playerButtocks === &quot;Large&quot;&gt;&gt;
    &lt;img src=&quot;imgs/characters/player/body/rear/5-female-rear-large-cropped.webp&quot; alt=&quot;Player Wireframe&quot; class=&quot;body-image&quot;&gt;
&lt;&lt;elseif $playerBody === &quot;Feminine&quot;&gt;&gt;
    &lt;img src=&quot;imgs/characters/player/body/rear/5-female-rear-average-cropped.webp&quot; alt=&quot;Player Wireframe&quot; class=&quot;body-image&quot;&gt;
&lt;&lt;elseif $playerBody === &quot;Feminine-Leaning&quot;&gt;&gt;
    &lt;img src=&quot;imgs/characters/player/body/rear/4-female-aligned-rear-cropped.webp&quot; alt=&quot;Player Wireframe&quot; class=&quot;body-image&quot;&gt;
&lt;&lt;elseif $playerBody === &quot;Androgynous&quot;&gt;&gt;
    &lt;img src=&quot;imgs/characters/player/body/rear/3-androgynous-rear-cropped.webp&quot; alt=&quot;Player Wireframe&quot; class=&quot;body-image&quot;&gt;
&lt;&lt;elseif $playerBody === &quot;Masculine-Leaning&quot;&gt;&gt;
    &lt;img src=&quot;imgs/characters/player/body/rear/2-male-aligned-rear-cropped.webp&quot; alt=&quot;Player Wireframe&quot; class=&quot;body-image&quot;&gt;
&lt;&lt;elseif $playerBody === &quot;Masculine&quot;&gt;&gt;
    &lt;img src=&quot;imgs/characters/player/body/rear/1-male-rear-cropped.webp&quot; alt=&quot;Player Wireframe&quot; class=&quot;body-image&quot;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="382" name="Cheats" tags="nobr" position="225,4850" size="100,100">&lt;span id=&quot;cheatsContent&quot;&gt;
&lt;&lt;if $doYouKnowTheAnswer&gt;&gt;
&lt;h3&gt;Teleport to a Passage:&lt;/h3&gt;
&lt;&lt;set $selectedPassage = &#39;&#39;&gt;&gt; &lt;!-- Initialize the variable --&gt;
&lt;&lt;listbox &quot;$selectedPassage&quot;&gt;&gt;
    &lt;&lt;option &quot;Select a Passage&quot; &#39;&#39; selected&gt;&gt; &lt;!-- Default option --&gt;
    &lt;&lt;option &quot;Start&quot;&gt;&gt; &lt;!-- Value and label are the same --&gt;
    &lt;&lt;option &quot;HomeBacklog&quot;&gt;&gt;
    &lt;&lt;option &quot;Computer&quot;&gt;&gt;
    &lt;&lt;option &quot;EroSphere&quot;&gt;&gt;
    &lt;!-- Add more options as needed --&gt;
&lt;&lt;/listbox&gt;&gt;

&lt;&lt;button &quot;Go&quot;&gt;&gt;
    &lt;&lt;if $selectedPassage neq &#39;&#39;&gt;&gt;
        &lt;&lt;goto $selectedPassage&gt;&gt;
    &lt;&lt;else&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;br&gt;&lt;br&gt;
&lt;&lt;textbox &quot;$debugPassageName&quot; &quot;Enter a passage name&quot;&gt;&gt;
&lt;&lt;button &quot;Go&quot;&gt;&gt;
    &lt;&lt;if Story.has($debugPassageName)&gt;&gt;
        &lt;&lt;goto $debugPassageName&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;print &quot;Passage &#39;&quot; + $debugPassageName + &quot;&#39; does not exist.&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;br&gt;
&lt;p&gt;&lt;b&gt;Current passage name:&lt;/b&gt; &lt;&lt;print passage()&gt;&gt;&lt;/p&gt;
    &lt;hr&gt;
&lt;div&gt;
    &lt;h3&gt;Fade Effect Toggle:&lt;/h3&gt;
    &lt;p&gt;This option enables or disables the fade-in and fade-out effects in the game. When disabled, text appears and disappears instantly without any fading transition.&lt;/p&gt;
    &lt;&lt;checkbox &quot;$fadeDisable&quot; false true autocheck&gt;&gt; Disable Fade Effects?
    &lt;h3&gt;Show Minigame Skip Buttons:&lt;/h3&gt;
    &lt;p&gt;Enable this option to show buttons that allow you to skip minigames. Refresh the page (F5) if the button doesn&#39;t show up after you click Confirm.&lt;/p&gt;
    &lt;&lt;checkbox &quot;$minigameSkipButtons&quot; false true autocheck&gt;&gt; Show Skip Buttons?
&lt;/div&gt;
    &lt;hr&gt;
&lt;div&gt;
    &lt;div&gt;
        &lt;h3&gt;&lt;b&gt;Money:&lt;/b&gt; $&lt;span id=&quot;moneyDisplay&quot;&gt;&lt;&lt;print $playerMoney&gt;&gt;&lt;/span&gt;&lt;br&gt;&lt;/h3&gt;
        &lt;&lt;link &quot;+100&quot;&gt;&gt;
            &lt;&lt;set $playerMoney += 100&gt;&gt;
            &lt;&lt;replace &quot;#moneyDisplay&quot;&gt;&gt;&lt;&lt;print $playerMoney&gt;&gt;&lt;&lt;/replace&gt;&gt;
        &lt;&lt;/link&gt;&gt;
        &lt;&lt;link &quot;+1,000&quot;&gt;&gt;
            &lt;&lt;set $playerMoney += 1000&gt;&gt;
            &lt;&lt;replace &quot;#moneyDisplay&quot;&gt;&gt;&lt;&lt;print $playerMoney&gt;&gt;&lt;&lt;/replace&gt;&gt;
        &lt;&lt;/link&gt;&gt;
        &lt;&lt;link &quot;+10,000&quot;&gt;&gt;
            &lt;&lt;set $playerMoney += 10000&gt;&gt;
            &lt;&lt;replace &quot;#moneyDisplay&quot;&gt;&gt;&lt;&lt;print $playerMoney&gt;&gt;&lt;&lt;/replace&gt;&gt;
        &lt;&lt;/link&gt;&gt;
    &lt;/div&gt;
    &lt;div&gt;
        &lt;h3&gt;&lt;b&gt;Action Points:&lt;/b&gt; &lt;span id=&quot;actionPointsDisplay&quot;&gt;&lt;&lt;print $actionPoints&gt;&gt;&lt;/span&gt;&lt;br&gt;&lt;/h3&gt;
        &lt;&lt;link &quot;+1&quot;&gt;&gt;
            &lt;&lt;set $actionPoints += 1&gt;&gt;
            &lt;&lt;replace &quot;#actionPointsDisplay&quot;&gt;&gt;&lt;&lt;print $actionPoints&gt;&gt;&lt;&lt;/replace&gt;&gt;
        &lt;&lt;/link&gt;&gt;
        &lt;&lt;link &quot;+10&quot;&gt;&gt;
            &lt;&lt;set $actionPoints += 10&gt;&gt;
            &lt;&lt;replace &quot;#actionPointsDisplay&quot;&gt;&gt;&lt;&lt;print $actionPoints&gt;&gt;&lt;&lt;/replace&gt;&gt;
        &lt;&lt;/link&gt;&gt;
        &lt;&lt;link &quot;+100&quot;&gt;&gt;
            &lt;&lt;set $actionPoints += 100&gt;&gt;
            &lt;&lt;replace &quot;#actionPointsDisplay&quot;&gt;&gt;&lt;&lt;print $actionPoints&gt;&gt;&lt;&lt;/replace&gt;&gt;
        &lt;&lt;/link&gt;&gt;
    &lt;/div&gt;
    &lt;hr&gt;
    &lt;div&gt;
        &lt;h3&gt;&lt;b&gt;Character:&lt;/b&gt;&lt;/h3&gt;
        &lt;p&gt;First Name:&lt;br&gt;
        &lt;&lt;textbox &quot;_tempPlayerName&quot; $playerName&gt;&gt;&lt;/p&gt;
        &lt;p&gt;Last Name:&lt;br&gt;
        &lt;&lt;textbox &quot;_tempPlayerLastName&quot; $playerLastName&gt;&gt;&lt;/p&gt;
        &lt;p&gt;Nickname:&lt;br&gt;
        &lt;&lt;textbox &quot;_tempPlayerNickname&quot; $playerNickname&gt;&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;&lt;set _currentPassage = passage()&gt;&gt;
&lt;br&gt;
&lt;&lt;button &quot;Confirm&quot;&gt;&gt;
    &lt;&lt;run Dialog.close()&gt;&gt;
    &lt;&lt;set $playerName = _tempPlayerName&gt;&gt;
    &lt;&lt;set $playerLastName = _tempPlayerLastName&gt;&gt;
    &lt;&lt;set $playerNickname = _tempPlayerNickname&gt;&gt;
    &lt;&lt;goto _currentPassage&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;&lt;else&gt;&gt;
&lt;p&gt;Extra options are available only to &lt;a href=&quot;https://www.patreon.com/SubjunctiveGames&quot;&gt;Patreon&lt;/a&gt; and &lt;a hreat=&quot;https://subscribestar.adult/subjunctivegames&quot;&gt;SubscribeStar&lt;/a&gt; supporters.&lt;/p&gt;
&lt;p&gt;Supported options:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Teleport to a passage&lt;/li&gt;
&lt;li&gt;Disable fade effects (time delay)&lt;/li&gt;
&lt;li&gt;Skip minigames&lt;/li&gt;
&lt;li&gt;Add money&lt;/li&gt;
&lt;li&gt;Add action points&lt;/li&gt;
&lt;li&gt;Change first name, last name, and nickname.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Additionally, all supporters can use the Quick Start menu and download an offline version of MindWare to play without an internet connection.&lt;/p&gt;
&lt;p&gt;Enter the correct access code to unlock extra options:&lt;/p&gt;
&lt;&lt;textbox &quot;$enteredCode&quot; &quot;&quot;&gt;&gt;
&lt;&lt;button &quot;Submit&quot;&gt;&gt;
    &lt;&lt;if $enteredCode == MindWare.revealSecret()&gt;&gt;
        &lt;&lt;set $doYouKnowTheAnswer = true&gt;&gt;
        &lt;&lt;replace &quot;#cheatsContent&quot;&gt;&gt;&lt;&lt;include &quot;Cheats&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
        &lt;&lt;run Dialog.close()&gt;&gt;
        &lt;&lt;run Dialog.setup(&quot;Extra Options&quot;, &quot;Extra Options&quot;)&gt;&gt;
        &lt;&lt;run Dialog.wiki(Story.get(&quot;Cheats&quot;).processText())&gt;&gt;
        &lt;&lt;run Dialog.open()&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;replace &quot;#errorMessage&quot;&gt;&gt;
            &lt;p style=&quot;color: red;&quot;&gt;Incorrect code. Please try again.&lt;/p&gt;
        &lt;&lt;/replace&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;div id=&quot;errorMessage&quot;&gt;&lt;/div&gt;
&lt;/span&gt;</tw-passagedata><tw-passagedata pid="383" name="Credits" tags="" position="350,4850" size="100,100">This interactive story was created using &lt;a href=&quot;https://twinery.org/&quot;&gt;Twine&lt;/a&gt;, a versatile engine designed for crafting interactive narratives, and &lt;a href=&quot;https://www.motoslave.net/sugarcube/2/docs/&quot;&gt;SugarCube&lt;/a&gt;, a popular story format for Twine. It was written in the Twee notation and compiled using &lt;a href=&quot;https://www.motoslave.net/tweego/&quot;&gt;Tweego&lt;/a&gt;.

A huge thanks to &lt;a href=&quot;https://github.com/ChapelR&quot;&gt;ChapelR&lt;/a&gt; for the fantastic collection of SugarCube macros. I also want to thank Goctionni for his invaluable &lt;a href=&quot;https://github.com/Goctionni/SugarValidator&quot;&gt;SugarValidator tool&lt;/a&gt;. MindWare would be a much buggier game without it. 

The hacking animation was developed by &lt;a href=&quot;https://codepen.io/Fuzzylavender/details/QWBOeyW&quot;&gt;Yashasree&lt;/a&gt;

The firewall breach minigame was developed by &lt;a href=&quot;https://codepen.io/yashbhardwaj/details/AmZGQN&quot;&gt;Yash Bhardwaj&lt;/a&gt;.

The dish washing minigame is based on code by &lt;a href=&quot;https://codepen.io/Totati/pen/pPXrJV&quot;&gt;Totati&lt;/a&gt;.

The waiting clock is made by &lt;a href=&quot;https://github.com/prodev2004/clock-loader/&quot;&gt;prodev2004.&lt;/a&gt;

To update the Synapse Steady VX implant battery charge information in real time, I&#39;m using the &lt;a href=&quot;https://github.com/cyrusfirheir/cycy-wrote-custom-macros/tree/master/live-update&quot;&gt;Live Update macro&lt;/a&gt; by cyrusfirheir. 

&lt;hr&gt;
To my incredibly generous Patreon and SubscribeStar supporters, thank you from the bottom of my heart! 💖

A heartfelt hug to my Elite-level supporters:
&lt;ul&gt;
&lt;li&gt;adamdubai&lt;/li&gt;
&lt;li&gt;Alex&lt;/li&gt;
&lt;li&gt;Cashandbrand&lt;/li&gt;
&lt;li&gt;jed&lt;/li&gt;
&lt;li&gt;Lemonmasacre&lt;/li&gt;
&lt;li&gt;lookformee&lt;/li&gt;
&lt;li&gt;Sxftboi&lt;/li&gt;
&lt;li&gt;TAIGA&lt;/li&gt;
&lt;li&gt;Aldilenn&lt;/li&gt;
&lt;/ul&gt;
A special thank you to lookformee, who moderates our Discord server with unparalleled dedication and enthusiasm.</tw-passagedata><tw-passagedata pid="384" name="Inventory" tags="nobr" position="475,4850" size="100,100">&lt;&lt;inv $inventory&gt;&gt;

&lt;&lt;for _item, _amount range $inventory.table&gt;&gt;
    &lt;div class=&#39;item-listing&#39;&gt;_item (_amount)&lt;/div&gt;
&lt;&lt;/for&gt;&gt;</tw-passagedata><tw-passagedata pid="385" name="CyberPlayer" tags="" position="600,4850" size="100,100">&lt;div class=&quot;cyberplayer-container-sidebar&quot;&gt;\
    &lt;div class=&quot;cyberplayer-title&quot;&gt;Music Player&lt;/div&gt;\
    &lt;ul class=&quot;cyberplayer-playlist-sidebar&quot; id=&quot;cyberplayer-playlist&quot;&gt;
        &lt;!-- Songs will be loaded here by the JavaScript code --&gt;\
    &lt;/ul&gt;\
    &lt;div class=&quot;cyberplayer-now-playing&quot;&gt;
        &lt;b&gt;Now Playing:&lt;/b&gt; &lt;br&gt;&lt;span class=&quot;cyberplayer-current-song&quot;&gt;&lt;/span&gt;
    &lt;/div&gt;\
    &lt;div class=&quot;cyberplayer-control-center&quot;&gt;\
        &lt;button class=&quot;cyberplayer-control-button&quot; onclick=&quot;togglePlayback()&quot;&gt;⏯&lt;/button&gt;\
        &lt;!-- Volume Control --&gt;
        &lt;input type=&quot;range&quot; id=&quot;volumeControl&quot; value=&quot;100&quot; min=&quot;0&quot; max=&quot;100&quot; oninput=&quot;setVolume(this.value)&quot;&gt;
    &lt;/div&gt;\
&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
// Wait for the DOM to be ready
$(document).ready(function() {
    var playlist = $(&#39;#cyberplayer-playlist&#39;);
    playlist.empty(); // Clear the existing playlist items

    // Ensure that $mySongs is available and is an array
    if (Array.isArray(State.variables.mySongs)) {
        // Iterate over the songs and append them to the playlist
        State.variables.mySongs.forEach(function(song) {
            playlist.append(
                &#39;&lt;li class=&quot;cyberplayer-song&quot; data-filename=&quot;&#39; + song.filename + &#39;&quot;&gt;&#39; +
                    &#39;&lt;span class=&quot;cyberplayer-song-title&quot;&gt;&#39; + song.title + &#39;&lt;/span&gt; - &#39; +
                    &#39;&lt;span class=&quot;cyberplayer-song-artist&quot;&gt;&#39; + song.artist + &#39;&lt;/span&gt;&#39; +
                &#39;&lt;/li&gt;&#39;
            );
        });
    }
});
&lt;&lt;/script&gt;&gt;
&lt;script&gt;
// Set the volume from the volume slider
function setVolume(volume) {
    if (window.audio) {
        window.audio.volume = volume / 100;
    }
}

$(document).on(&quot;:passageready&quot;, function() {
    // Set initial volume
    if (window.audio) {
        let volumeSlider = document.getElementById(&#39;volumeControl&#39;);
        if (volumeSlider) {
            window.audio.volume = volumeSlider.value / 100;
        }
    }
});
&lt;/script&gt;</tw-passagedata><tw-passagedata pid="386" name="SidebarExtras" tags="" position="725,4850" size="100,100">&lt;&lt;if $musicPlayerLeft === true&gt;&gt;\
    &lt;&lt;include &quot;CyberPlayer&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="387" name="ListenToMusic" tags="" position="850,4850" size="100,100">&lt;div class=&quot;cyberplayer-container-sidebar-clone&quot;&gt;\
    &lt;div class=&quot;cyberplayer-title-clone&quot;&gt;Music Library&lt;/div&gt;
    &lt;ul class=&quot;cyberplayer-playlist-sidebar-clone&quot; id=&quot;cyberplayer-playlist-clone&quot;&gt;
        &lt;!-- Songs will be loaded here by the JavaScript code --&gt;\
    &lt;/ul&gt;
    &lt;div class=&quot;cyberplayer-now-playing-clone&quot;&gt;
        &lt;b&gt;Now Playing:&lt;/b&gt; &lt;span class=&quot;cyberplayer-current-song-clone&quot;&gt;&lt;/span&gt;\
    &lt;/div&gt;
    &lt;div class=&quot;cyberplayer-control-center-clone&quot;&gt;\
        &lt;button class=&quot;cyberplayer-control-button-clone&quot; onclick=&quot;togglePlaybackClone()&quot;&gt;⏯ Play/Pause&lt;/button&gt;\
        &lt;button class=&quot;cyberplayer-shuffle-button&quot; onclick=&quot;shufflePlaylistClone()&quot;&gt;🔀 Shuffle&lt;/button&gt;\
    &lt;/div&gt;\
&lt;/div&gt;\

[[Go Back -&gt; HomeBacklog]] | [[Save|ListenToMusic]]
\
&lt;&lt;if $tutorialMusicPlayer === false&gt;&gt;
&lt;div id=&quot;tutorial-box-1&quot;&gt;&lt;div class=&quot;instruction-container-blue&quot;&gt;\
    &lt;div class=&quot;instruction-title-bar-blue&quot;&gt;Tutorial: Music Player &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.tutorialMusicPlayer = true; document.getElementById(&#39;tutorial-box-1&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;\
    &lt;div class=&quot;instruction-content&quot;&gt;\
        &lt;p&gt;Here, you can organize your music playlist to change the order of your songs. When you&#39;re done, click the Save button or go back to the previous passage. Your sidebar music player will be automatically updated as well.&lt;/p&gt;\
    &lt;/div&gt;\
    &lt;/div&gt;
    &lt;/div&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $tipBuyMoreSongs === false&gt;&gt;\
&lt;div id=&quot;tutorial-box-2&quot;&gt;&lt;div class=&quot;instruction-container-green&quot;&gt;\
    &lt;div class=&quot;instruction-title-bar-green&quot;&gt;Tip: Purchase More Songs &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.tipBuyMoreSongs = true; document.getElementById(&#39;tutorial-box-2&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;\
    &lt;div class=&quot;instruction-content&quot;&gt;\
        &lt;p&gt;Looking for more tunes? Head over to the File Junkie online store and add new tracks to your collection!&lt;/p&gt;\
    &lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\
&lt;&lt;else&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
\
&lt;&lt;script&gt;&gt;
// Function to move songs up or down
window.moveSongClone = function(index, direction) {
    var songs = State.variables.mySongs;
    var newIndex = index + direction;
    
    // Check if the new index is within the range of the array
    if (newIndex &gt;= 0 &amp;&amp; newIndex &lt; songs.length) {
        // Swap the songs
        var temp = songs[newIndex];
        songs[newIndex] = songs[index];
        songs[index] = temp;

        // Save the modified array back into the state variable
        State.variables.mySongs = songs;
        
        // Refresh the playlist display
        refreshPlaylistClone();
    }
};

// Function to refresh the playlist display
function refreshPlaylistClone() {
    var playlistClone = $(&#39;#cyberplayer-playlist-clone&#39;);
    playlistClone.empty(); // Clear the existing playlist items

    // Ensure that $mySongs is available and is an array
    if (Array.isArray(State.variables.mySongs)) {
        // Iterate over the songs and append them to the playlist
        State.variables.mySongs.forEach(function(song, index) {
            playlistClone.append(
                &#39;&lt;li class=&quot;cyberplayer-song-clone&quot; data-filename=&quot;&#39; + song.filename + &#39;&quot;&gt;&#39; +
                    &#39;&lt;div class=&quot;song-details-clone&quot;&gt;&#39; +
                        &#39;&lt;span class=&quot;cyberplayer-song-title-clone&quot;&gt;&#39; + song.title + &#39;&lt;/span&gt; - &#39; +
                        &#39;&lt;span class=&quot;cyberplayer-song-artist-clone&quot;&gt;&#39; + song.artist + &#39;&lt;/span&gt;&#39; +
                    &#39;&lt;/div&gt;&#39; +
                    &#39;&lt;div class=&quot;song-move-buttons&quot;&gt;&#39; +
                        &#39;&lt;button class=&quot;move-up-clone&quot; onclick=&quot;moveSongClone(&#39; + index + &#39;, -1)&quot;&gt;↑&lt;/button&gt;&#39; +
                        &#39;&lt;button class=&quot;move-down-clone&quot; onclick=&quot;moveSongClone(&#39; + index + &#39;, 1)&quot;&gt;↓&lt;/button&gt;&#39; +
                    &#39;&lt;/div&gt;&#39; +
                &#39;&lt;/li&gt;&#39;
            );
        });
    }
}

window.shufflePlaylistClone = function() {
    let songs = State.variables.mySongs;
    for (let i = songs.length - 1; i &gt; 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [songs[i], songs[j]] = [songs[j], songs[i]]; // swap elements
    }
    State.variables.mySongs = songs; // Update the global state
    refreshPlaylistClone(); // Refresh the playlist display
}

// Clone the setup for the new player
$(document).ready(function() {
    refreshPlaylistClone(); // Call the refresh function to populate the playlist
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="388" name="PassageFooter" tags="nobr" position="975,4850" size="100,100">&lt;&lt;if tags().includes(&quot;bbar&quot;)&gt;&gt;
&lt;div id=&quot;bottombar&quot;&gt;&lt;div id=&quot;bbblock&quot;&gt;&lt;div id=&quot;bbtext&quot;&gt;Put your bottom bar text here.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="389" name="PassageHeader" tags="nobr" position="1100,4850" size="100,100">&lt;&lt;if $introOver &amp;&amp; $statsBoxLocation === &quot;top&quot;&gt;&gt;
&lt;div id=&quot;topbar&quot;&gt;&lt;div id=&quot;tbblock&quot;&gt;&lt;div id=&quot;tbtext&quot;&gt;
    &lt;span class=&quot;stat-item-top-first&quot;&gt;
        &lt;span class=&quot;stat-icon-top&quot;&gt;🗓️&lt;/span&gt;
        &lt;span class=&quot;stat-label&quot;&gt;Day:&lt;/span&gt;
        &lt;span class=&quot;stat-data&quot;&gt;$dayOfWeek&lt;/span&gt;
    &lt;/span&gt;
    &lt;span class=&quot;stat-item-top&quot;&gt;
        &lt;span class=&quot;stat-icon-top&quot;&gt;💰&lt;/span&gt;
        &lt;span class=&quot;stat-label&quot;&gt;Money:&lt;/span&gt;
        &lt;span class=&quot;stat-data&quot;&gt;&lt;&lt;print &quot;$&quot; + $playerMoney.toLocaleString(&quot;en-US&quot;, { minimumFractionDigits: 0, maximumFractionDigits: 0 })&gt;&gt;&lt;/span&gt;
    &lt;/span&gt;
    &lt;span class=&quot;stat-item-top&quot;&gt;
        &lt;span class=&quot;stat-icon-top&quot;&gt;🧾&lt;/span&gt;
        &lt;span class=&quot;stat-label&quot;&gt;Weekly Expenses:&lt;/span&gt;
        &lt;span class=&quot;stat-data&quot;&gt;&lt;&lt;print &quot;$&quot; + MindWare.calculateTotalExpenses().toLocaleString(&quot;en-US&quot;, { minimumFractionDigits: 0, maximumFractionDigits: 0 })&gt;&gt;&lt;/span&gt;
    &lt;/span&gt;
    /* &lt;span class=&quot;stat-item-top&quot;&gt;
        &lt;span class=&quot;stat-icon-top&quot;&gt;⚡&lt;/span&gt;
        &lt;span class=&quot;stat-label&quot;&gt;Action Points:&lt;/span&gt;
        &lt;span class=&quot;stat-data&quot;&gt;$actionPoints/5&lt;/span&gt;
    &lt;/span&gt; */
    &lt;span class=&quot;stat-item-top&quot;&gt;
        &lt;span class=&quot;stat-icon-top&quot;&gt;⚧&lt;/span&gt;
        &lt;span class=&quot;stat-label&quot;&gt;Gender:&lt;/span&gt;
        &lt;span class=&quot;stat-data&quot;&gt;&lt;&lt;print MindWare.getGenderStatus()&gt;&gt;&lt;/span&gt;
    &lt;/span&gt;
    &lt;span class=&quot;stat-item-top&quot;&gt;
        &lt;span class=&quot;stat-icon-top&quot;&gt;⚖️&lt;/span&gt;
        &lt;span class=&quot;stat-label&quot;&gt;Morality:&lt;/span&gt;
        &lt;span class=&quot;stat-data&quot;&gt;&lt;&lt;print MindWare.getMoralityStatus()&gt;&gt;&lt;/span&gt;
    &lt;/span&gt;
    &lt;span class=&quot;stat-item-top-last&quot;&gt;
        &lt;&lt;if $actionPoints &gt; 0&gt;&gt;
            &lt;&lt;for _i = 1; _i &lt;= $actionPoints; _i++&gt;&gt;
                &lt;span class=&quot;stat-icon-top&quot;&gt;⚡&lt;/span&gt;
            &lt;&lt;/for&gt;&gt;
        &lt;&lt;else&gt;&gt;
            &lt;span class=&quot;stat-icon-top&quot;&gt;💤&lt;/span&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;/span&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="390" name="QuickStart" tags="nobr" position="1225,4850" size="100,100">&lt;h2&gt;Step 1: Choose Where You Want to Start From&lt;/h2&gt;
&lt;div class=&quot;skip-options&quot;&gt;
    &lt;&lt;if $skipOption is &quot;Intro&quot;&gt;&gt;
        &lt;span class=&quot;skip-option&quot;&gt;@@.quickstart-button;&lt;&lt;button &quot;Prologue&quot;&gt;&gt; 
            &lt;&lt;set $skipOption to &#39;Intro&#39;&gt;&gt;
            &lt;&lt;goto &quot;QuickStart&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@&lt;/span&gt;
    &lt;&lt;else&gt;&gt;
        &lt;span class=&quot;skip-option&quot;&gt;&lt;&lt;button &quot;Prologue&quot;&gt;&gt; 
            &lt;&lt;set $skipOption to &#39;Intro&#39;&gt;&gt;
            &lt;&lt;goto &quot;QuickStart&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;&lt;/span&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if $skipOption is &quot;Chapter1Intro&quot;&gt;&gt;
        &lt;span class=&quot;skip-option&quot;&gt;@@.quickstart-button;&lt;&lt;button &quot;Chapter 1 Linear Section&quot;&gt;&gt;
            &lt;&lt;set $skipOption to &quot;Chapter1Intro&quot;&gt;&gt;
            &lt;&lt;goto &quot;QuickStart&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@&lt;/span&gt;
    &lt;&lt;else&gt;&gt;
        &lt;span class=&quot;skip-option&quot;&gt;&lt;&lt;button &quot;Chapter 1 Linear Section&quot;&gt;&gt;
            &lt;&lt;set $skipOption to &quot;Chapter1Intro&quot;&gt;&gt;
            &lt;&lt;goto &quot;QuickStart&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;&lt;/span&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if $skipOption is &quot;Chapter1Free&quot;&gt;&gt;
        &lt;span class=&quot;skip-option&quot;&gt;@@.quickstart-button;&lt;&lt;button &quot;Chapter 1 Free Roam Section&quot;&gt;&gt;
            &lt;&lt;set $skipOption to &quot;Chapter1Free&quot;&gt;&gt;
            &lt;&lt;goto &quot;QuickStart&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;@@&lt;/span&gt;
    &lt;&lt;else&gt;&gt;
        &lt;span class=&quot;skip-option&quot;&gt;&lt;&lt;button &quot;Chapter 1 Free Roam Section&quot;&gt;&gt;
            &lt;&lt;set $skipOption to &quot;Chapter1Free&quot;&gt;&gt;
            &lt;&lt;goto &quot;QuickStart&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;&lt;/span&gt;
    &lt;&lt;/if&gt;&gt;
&lt;/div&gt;

&lt;h2&gt;Step 2: Configure Variables&lt;/h2&gt;
&lt;div class=&quot;quickstart-config-section&quot;&gt;
    &lt;h2&gt;Required Variables&lt;/h2&gt;
    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;First Name:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;textbox &quot;$playerName&quot; &quot;John&quot;&gt;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Last Name:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;textbox &quot;$playerLastName&quot; &quot;Doe&quot;&gt;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Nickname (Online Handle):&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;textbox &quot;$playerNickname&quot; &quot;Ghost&quot;&gt;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Minigame difficulty:&lt;/strong&gt;&lt;/label&gt;
            &lt;ul class=&quot;no-bullets&quot;&gt;
                &lt;li&gt;
                    &lt;&lt;radiobutton &quot;$miniGameDifficulty&quot; &quot;Normal&quot; autocheck checked&gt;&gt; &lt;strong&gt;Normal:&lt;/strong&gt; For players seeking a balanced challenge.
                &lt;/li&gt;
                &lt;li&gt;
                    &lt;&lt;radiobutton &quot;$miniGameDifficulty&quot; &quot;Easy&quot; autocheck&gt;&gt; &lt;strong&gt;Easy:&lt;/strong&gt; A less challenging experience for those who don&#39;t want to struggle.
                &lt;/li&gt;
                &lt;li&gt;
                    &lt;&lt;radiobutton &quot;$miniGameDifficulty&quot; &quot;Story&quot; autocheck&gt;&gt; &lt;strong&gt;Easiest:&lt;/strong&gt; Focus on the narrative with minimal gameplay challenge.
                &lt;/li&gt;
            &lt;/ul&gt;
    &lt;/div&gt;

    &lt;div class=&quot;quickstart-config-item&quot;&gt;
            &lt;label&gt;&lt;strong&gt;Avatar:&lt;/strong&gt;&lt;/label&gt;
            &lt;div class=&quot;character-creator-avatar-selector&quot;&gt;
            &lt;button onclick=&quot;window.currentAvatarIndex = updateAvatarPreview(window.currentAvatarIndex - 1)&quot; class=&quot;character-creator-avatar-arrow&quot;&gt;←&lt;/button&gt;
            &lt;div class=&quot;character-creator-avatar-preview&quot; id=&quot;avatarPreview&quot; style=&quot;background-image: url(&#39;imgs/characters/player/playerAvatar0.jpg&#39;);&quot;&gt;&lt;/div&gt;
            &lt;button onclick=&quot;window.currentAvatarIndex = updateAvatarPreview(window.currentAvatarIndex + 1)&quot; class=&quot;character-creator-avatar-arrow&quot;&gt;→&lt;/button&gt;
        &lt;/div&gt;
        &lt;br&gt;
        &lt;div class=&quot;female-avatar-preview-link&quot;&gt;
                &lt;a id=&quot;femaleAvatarLink&quot; class=&quot;link-internal&quot; onclick=&quot;updateFemaleAvatarPreview()&quot;&gt;Preview Female Version&lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;quickstart-config-section&quot;&gt;
    &lt;h2&gt;Optional Variables&lt;/h2&gt;
    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Money:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$playerMoney&quot;&gt;&gt;
            &lt;&lt;option &quot;Default&quot; $playerMoney autoselect&gt;&gt;
            &lt;&lt;option &quot;$2,500&quot; &quot;2500&quot;&gt;&gt;
            &lt;&lt;option &quot;$5,000&quot; &quot;5000&quot;&gt;&gt;
            &lt;&lt;option &quot;$10,000&quot; &quot;10000&quot;&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;&lt;if $skipOption === &quot;Chapter1Intro&quot;&gt;&gt;
    &lt;&lt;include &quot;Chapter1IntroConfig&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $skipOption === &quot;Chapter1Free&quot;&gt;&gt;
    &lt;&lt;include &quot;Chapter1IntroConfig&quot;&gt;&gt;
    &lt;&lt;include &quot;Chapter1FreeConfig&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;div class=&quot;back-done-buttons&quot;&gt;
    &lt;&lt;button &quot;Go Back&quot; &quot;Start&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
    &lt;&lt;button &quot;Done&quot;&gt;&gt;
        &lt;&lt;if $skipOption === &quot;Intro&quot;&gt;&gt;
            &lt;&lt;include &quot;SkipIntroductionVariables&quot;&gt;&gt;
            
            &lt;!-- done --&gt;
            &lt;&lt;set $quickStartPath = true&gt;&gt;
            &lt;&lt;include &quot;QuickStartScripts&quot;&gt;&gt;
            
            &lt;&lt;goto &quot;HomeBacklog&quot;&gt;&gt;
        &lt;&lt;elseif $skipOption === &quot;Chapter1Intro&quot;&gt;&gt;
            &lt;&lt;include &quot;Chapter1SkipToStartVariables&quot;&gt;&gt;

            &lt;!-- done --&gt;
            &lt;&lt;set $quickStartPath = true&gt;&gt;
            &lt;&lt;include &quot;QuickStartScripts&quot;&gt;&gt;
            &lt;&lt;include &quot;Chapter1SkipToStartScripts&quot;&gt;&gt;
            
            &lt;&lt;goto &quot;UrgentRequest-server-wiping-new-wake-up&quot;&gt;&gt;
        &lt;&lt;elseif $skipOption === &quot;Chapter1Free&quot;&gt;&gt;
            &lt;&lt;include &quot;Chapter1SkipToOpenVariables&quot;&gt;&gt;

            &lt;!-- done --&gt;
            &lt;&lt;set $quickStartPath = true&gt;&gt;
            &lt;&lt;include &quot;QuickStartScripts&quot;&gt;&gt;
            &lt;&lt;include &quot;Chapter1SkipToStartScripts&quot;&gt;&gt;
            &lt;&lt;include &quot;Chapter1SkipToOpenScripts&quot;&gt;&gt;

            &lt;&lt;goto &quot;HomeBacklog-Chapter1-Open-Start-Wakeup&quot;&gt;&gt;
        &lt;&lt;else&gt;&gt;
            &lt;&lt;run UI.alert(&quot;Please select where you want to skip to.&quot;)&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/button&gt;&gt;
&lt;/div&gt;

&lt;script&gt;
/*  Function to update the avatar preview */
function updateAvatarPreview(index) {
    var avatars = SugarCube.State.variables.playerAvatar;
    if (index &lt; 0) {
        index = avatars.length - 1;
    } else if (index &gt;= avatars.length) {
        index = 0;
    }
    document.getElementById(&#39;avatarPreview&#39;).style.backgroundImage = &#39;url(&quot;&#39; + avatars[index] + &#39;&quot;)&#39;;
    return index;
}


window.currentAvatarIndex = 0;

/* Function to select the avatar and store it in a SugarCube variable */
function selectAvatar() {
    SugarCube.State.variables.playerAvatarSelected = window.currentAvatarIndex;
}

/* Function to update the female avatar preview */
function updateFemaleAvatarPreview() {
    var avatars = SugarCube.State.variables.playerAvatar;
    var currentAvatar = avatars[window.currentAvatarIndex];
    var femaleAvatar = currentAvatar.replace(&quot;.jpg&quot;, &quot;-female.jpg&quot;); /* // Assumes naming convention */

    /* // Use UI.alert to show the image */
    SugarCube.Dialog.setup(&quot;Female&quot;);
    SugarCube.Dialog.wiki(&#39;&lt;img src=&quot;&#39; + femaleAvatar + &#39;&quot; alt=&quot;Female Avatar&quot; style=&quot;max-width:250px; max-height:250px;&quot;&gt;&#39;);
    SugarCube.Dialog.open();  
}
&lt;/script&gt;</tw-passagedata><tw-passagedata pid="391" name="QuickStartScripts" tags="nobr" position="100,4975" size="100,100">&lt;&lt;if $quickStartPath === true &amp;&amp; $quickStartScriptExecuted !== true&gt;&gt;

    /* Days and Work */
    &lt;&lt;if $skipOption === &quot;Chapter1Intro&quot;&gt;&gt;
        &lt;&lt;set $brainFryWorkCount = 6&gt;&gt;
        &lt;&lt;set $totalDays = 8&gt;&gt;
    &lt;&lt;elseif $skipOption === &quot;Chapter1Free&quot;&gt;&gt;
        &lt;&lt;set $brainFryWorkCount = 6&gt;&gt;
        &lt;&lt;set $totalDays = 13&gt;&gt;
        &lt;&lt;set $chapter1Days = 1&gt;&gt;
    &lt;&lt;/if&gt;&gt;

    &lt;&lt;set $lockedUI = false&gt;&gt;
    &lt;&lt;set $quickStartScriptExecuted to true&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="392" name="SkipIntroductionVariables" tags="nobr" position="225,4975" size="100,100">&lt;&lt;run selectAvatar()&gt;&gt;
&lt;&lt;set $cipherMemeOpened = true&gt;&gt;
&lt;&lt;run MindWare.markEmailAsRead(&quot;Email-CipherFirstJobIntro&quot;)&gt;&gt;
&lt;&lt;run MindWare.addTask(&quot;Find spy camera feeds&quot;, &quot;Task-LandlordJob&quot;)&gt;&gt;
&lt;&lt;set $introOver = true&gt;&gt;
&lt;&lt;set $jobBoardFirstVisit = false&gt;&gt;
&lt;&lt;set $illegalSpyingJobAccepted = true&gt;&gt;
&lt;&lt;run MindWare.addInstantMessage(&#39;cipherInstantMessages&#39;, &#39;Landlord Job&#39;, &#39;IMApp-CipherLynx-Landlord&#39;, &#39;Cipher&#39;, true, true);&gt;&gt;
&lt;&lt;run setup.changeByteBunkerJobAcceptedStatus(&quot;LandlordJob&quot;, true)&gt;&gt;
&lt;&lt;run MindWare.addEmail (&quot;ConcernedTenant01&quot;,&quot;Info for the Landlord Job&quot;, &quot;First off, huge thanks for taking this on. You have no idea how much this means to all of us here.&quot;, &quot;Email-LandlordJobInfo&quot;)&gt;&gt;</tw-passagedata><tw-passagedata pid="393" name="Chapter1SkipToStartVariables" tags="nobr" position="350,4975" size="100,100">/* For Skip Prologue */
&lt;&lt;run selectAvatar()&gt;&gt;
&lt;&lt;set $cipherMemeOpened = true&gt;&gt;
&lt;&lt;run MindWare.markEmailAsRead(&quot;Email-CipherFirstJobIntro&quot;)&gt;&gt;
&lt;&lt;set $introOver = true&gt;&gt;
&lt;&lt;set $jobBoardFirstVisit = false&gt;&gt;
&lt;&lt;set $illegalSpyingJobAccepted = true&gt;&gt;
&lt;&lt;run setup.changeByteBunkerJobAcceptedStatus(&quot;LandlordJob&quot;, true)&gt;&gt;
&lt;&lt;run MindWare.addEmail (&quot;ConcernedTenant01&quot;,&quot;Info for the Landlord Job&quot;, &quot;First off, huge thanks for taking this on. You have no idea how much this means to all of us here.&quot;, &quot;Email-LandlordJobInfo&quot;)&gt;&gt;

/* For Chapter 1 Start*/
&lt;&lt;run MindWare.markEmailAsRead(&quot;Email-LandlordJobInfo&quot;)&gt;&gt;
&lt;&lt;run MindWare.addTask(&quot;Continue the grind&quot;, &quot;Task-ContinueTheGrind&quot;);&gt;&gt;
&lt;&lt;set $gitGutDeliveryStarted = true&gt;&gt;
&lt;&lt;set $gitGutUnlocked = true&gt;&gt;
&lt;&lt;set $gitGutIntroduced = true&gt;&gt;
&lt;&lt;set $cipherUrgentRequestSent = true&gt;&gt;
&lt;&lt;run setup.addHackingTool(&quot;Data Wiper&quot;)&gt;&gt;
&lt;&lt;set $prologueCompleted = true&gt;&gt;
&lt;&lt;set $brainFryFirstVisit to false&gt;&gt;</tw-passagedata><tw-passagedata pid="394" name="Chapter1SkipToStartScripts" tags="nobr" position="475,4975" size="100,100">&lt;&lt;if $spyingLandlordExposed === true&gt;&gt;
    &lt;&lt;increasemorality&gt;&gt;
    &lt;&lt;run MindWare.addEmail (&quot;ConcernedTenant01&quot;,&quot;Thank You!&quot;, &quot;I can&#39;t even begin to express my gratitude. You&#39;ve done something incredible here.&quot;, &quot;Email-LandlordJobFinishGood&quot;)&gt;&gt;
    &lt;&lt;run MindWare.markEmailAsRead(&quot;Email-LandlordJobFinishGood&quot;)&gt;&gt;
    &lt;&lt;set $playerMoney to $playerMoney + 1500&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $spyingLandlordExposed === false&gt;&gt;
    &lt;&lt;decreasemorality&gt;&gt;
    &lt;&lt;run MindWare.addEmail (&quot;ConcernedTenant01&quot;,&quot;Appreciate the effort&quot;, &quot;Thanks for giving it a shot. I&#39;m a bit surprised and disappointed that nothing turned up, but I guess these things happen.&quot;, &quot;Email-LandlordJobFinishBad&quot;)&gt;&gt;
    &lt;&lt;run MindWare.markEmailAsRead(&quot;Email-LandlordJobFinishBad&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;   
    
&lt;&lt;if $playerComplimentedTrixHair&gt;&gt;
    &lt;&lt;relationshipIncreasedWith &quot;Trix&quot; 1&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $GitGudSIMSExperience &amp;&amp; $GitGudSIMSExperienceLiked&gt;&gt;
    &lt;&lt;relationshipIncreasedWith &quot;Drake&quot; 10&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $GitGudSIMSExperience === true &amp;&amp; $GitGudSIMSExperienceLiked === false&gt;&gt;
    &lt;&lt;relationshipIncreasedWith &quot;Drake&quot; 10&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $staredAtProjectXXTooLong&gt;&gt;
    &lt;&lt;genderFeminine 5&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="395" name="Chapter1IntroConfig" tags="nobr" position="600,4975" size="100,100">&lt;div class=&quot;quickstart-config-section&quot; id=&quot;chapter1-config&quot;&gt;
    &lt;h2&gt;Prologue Variables&lt;/h2&gt;
    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Spying landlord mission finished:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$spyingLandlordFinished&quot;&gt;&gt;
            &lt;&lt;option &quot;False&quot; false&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;quickstart-config-item&quot; id=&quot;spying-landlord&quot; style=&quot;display: none;&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Spying landlord exposed:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$spyingLandlordExposed&quot;&gt;&gt;
            &lt;&lt;option &quot;False&quot; false&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Complimented Trix:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$playerComplimentedTrixHair&quot;&gt;&gt;
            &lt;&lt;option &quot;False&quot; false&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;   
    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Peeked during the GitGud delivery mission:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$GitGudIntroductionPeeked&quot;&gt;&gt;
            &lt;&lt;option &quot;False&quot; false&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Tried S.I.M.S. during the GitGud delivery mission:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$GitGudSIMSExperience&quot;&gt;&gt;
            &lt;&lt;option &quot;False&quot; false&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;quickstart-config-item&quot; id=&quot;gitgud-sims-liked&quot; style=&quot;display: none;&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Enjoyed the S.I.M.S.:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$GitGudSIMSExperienceLiked&quot;&gt;&gt;
            &lt;&lt;option &quot;False&quot; false&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;

    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Stared at Project XX hypno too long:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$staredAtProjectXXTooLong&quot;&gt;&gt;
            &lt;&lt;option &quot;False&quot; false&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;&lt;script&gt;&gt;
$(document).one(&#39;:passagerender&#39;, function (event) {
    $(event.content).find(&#39;[name=&quot;listbox-spyinglandlordfinished&quot;]&#39;).on(&#39;change&#39;, function() {
        var selected = $(this).find(&quot;:selected&quot;).text();
        if (selected === &quot;True&quot;) {
            $(&quot;#spying-landlord&quot;).show();
        } else {
            $(&quot;#spying-landlord&quot;).hide();
        }
    });

    $(event.content).find(&#39;[name=&quot;listbox-gitgudsimsexperience&quot;]&#39;).on(&#39;change&#39;, function() {
        var selected = $(this).find(&quot;:selected&quot;).text();
        if (selected === &quot;True&quot;) {
            $(&quot;#gitgud-sims-liked&quot;).show();
        } else {
            $(&quot;#gitgud-sims-liked&quot;).hide();
        }
    });
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="396" name="Chapter1SkipToOpenVariables" tags="nobr" position="725,4975" size="100,100">/* For Skip Prologue */
&lt;&lt;run selectAvatar()&gt;&gt;
&lt;&lt;set $cipherMemeOpened = true&gt;&gt;
&lt;&lt;run MindWare.markEmailAsRead(&quot;Email-CipherFirstJobIntro&quot;)&gt;&gt;
&lt;&lt;set $introOver = true&gt;&gt;
&lt;&lt;set $jobBoardFirstVisit = false&gt;&gt;
&lt;&lt;set $illegalSpyingJobAccepted = true&gt;&gt;
&lt;&lt;run setup.changeByteBunkerJobAcceptedStatus(&quot;LandlordJob&quot;, true)&gt;&gt;
&lt;&lt;run MindWare.addEmail (&quot;ConcernedTenant01&quot;,&quot;Info for the Landlord Job&quot;, &quot;First off, huge thanks for taking this on. You have no idea how much this means to all of us here.&quot;, &quot;Email-LandlordJobInfo&quot;)&gt;&gt;

/* For Chapter 1 Start*/
&lt;&lt;run MindWare.markEmailAsRead(&quot;Email-LandlordJobInfo&quot;)&gt;&gt;
&lt;&lt;run MindWare.addTask(&quot;Continue the grind&quot;, &quot;Task-ContinueTheGrind&quot;);&gt;&gt;
&lt;&lt;set $gitGutDeliveryStarted = true&gt;&gt;
&lt;&lt;set $gitGutUnlocked = true&gt;&gt;
&lt;&lt;set $gitGutIntroduced = true&gt;&gt;
&lt;&lt;set $cipherUrgentRequestSent = true&gt;&gt;
&lt;&lt;run setup.addHackingTool(&quot;Data Wiper&quot;)&gt;&gt;
&lt;&lt;set $prologueCompleted = true&gt;&gt;
&lt;&lt;set $brainFryFirstVisit to false&gt;&gt;

/* For Chapter 1 Open */
&lt;&lt;set $chapter1Started to true&gt;&gt;</tw-passagedata><tw-passagedata pid="397" name="Chapter1SkipToOpenScripts" tags="nobr" position="850,4975" size="100,100">/* Chapter 1 Linear Section */
    &lt;&lt;if $hospitalIntroPlayerInsisted === true&gt;&gt;
        &lt;&lt;decreasemorality&gt;&gt;
    &lt;&lt;/if&gt;&gt;

    &lt;&lt;if $hospitalExaminationResisted === true&gt;&gt;
        &lt;&lt;genderMasculine 5&gt;&gt;
    &lt;&lt;/if&gt;&gt;

    &lt;&lt;if $hospitalExaminationResisted === false&gt;&gt;
        &lt;&lt;genderFeminine 5&gt;&gt;
    &lt;&lt;/if&gt;&gt;

    &lt;&lt;if $talkedWithYukiAboutBrother === true&gt;&gt;
        &lt;&lt;relationshipIncreasedWith &quot;Yuki&quot; 5&gt;&gt;
    &lt;&lt;/if&gt;&gt;

    &lt;&lt;if $playerToldXavierTruthAboutAI === true&gt;&gt;
        &lt;&lt;relationshipIncreasedWith &quot;Xavier&quot; 5&gt;&gt;
    &lt;&lt;/if&gt;&gt;

    &lt;&lt;if $gitgudExaminationResisted === true || $gitgudExaminationResisted === false&gt;&gt;
        &lt;&lt;relationshipIncreasedWith &quot;Xavier&quot; 5&gt;&gt;
    &lt;&lt;/if&gt;&gt;

    &lt;&lt;if $synapseSteadyVXInstalled === true&gt;&gt;
        &lt;&lt;set $rightSidebarEnabled = true&gt;&gt;
    &lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="398" name="Chapter1FreeConfig" tags="nobr" position="975,4975" size="100,100">&lt;div class=&quot;quickstart-config-section&quot; id=&quot;chapter1-config&quot;&gt;
    &lt;h2&gt;Chapter 1 Linear Section Variables&lt;/h2&gt;
    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Player demanded to skip the queue at the hospital:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$hospitalIntroPlayerInsisted&quot;&gt;&gt;
            &lt;&lt;option &quot;False&quot; false&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;

    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Player resisted AVA during hospital examination:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$hospitalExaminationResisted&quot;&gt;&gt;
            &lt;&lt;option &quot;False&quot; false&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;

    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Player told Cipher everything about hospital visions:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$playerToldCipherEverythingAboutHospitalVisions&quot;&gt;&gt;
            &lt;&lt;option &quot;False&quot; false&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;

    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Player talked with Yuki about her brother:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$talkedWithYukiAboutBrother&quot;&gt;&gt;
            &lt;&lt;option &quot;False&quot; false&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;

    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Player told Xavier the full truth about the AI:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$playerToldXavierTruthAboutAI&quot;&gt;&gt;
            &lt;&lt;option &quot;False&quot; false&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;

    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Player accepted Xavier&#39;s implant deal:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$playerAcceptedXavierCyberwareDeal&quot;&gt;&gt;
            &lt;&lt;option &quot;False&quot; false&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;

    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Player resisted AVA during when diagnosed by Xavier:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$gitgudExaminationResisted&quot;&gt;&gt;
            &lt;&lt;option &quot;False&quot; false&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;

    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Player wants AVA&#39;s visions to return:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$installImplantPlayerWantsVisionsToReturn&quot;&gt;&gt;
            &lt;&lt;option &quot;False&quot; false&gt;&gt;
            &lt;&lt;option &quot;Not sure&quot; &quot;&quot;&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;

    &lt;div class=&quot;quickstart-config-item&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Player decided to install the Synapse Steady VX implant:&lt;/strong&gt;&lt;/label&gt;
        &lt;&lt;listbox &quot;$synapseSteadyVXInstalled&quot;&gt;&gt;
            &lt;&lt;option &quot;True&quot; true&gt;&gt;
        &lt;&lt;/listbox&gt;&gt;
    &lt;/div&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="399" name="StoryRightSidebar" tags="" position="1100,4975" size="100,100">&lt;&lt;nobr&gt;&gt;&lt;div class=&quot;synapse-box&quot;&gt;
    &lt;h3&gt;Synapse Steady VX&lt;/h3&gt;
&lt;&lt;if $mentalCondition is &quot;Stable&quot;&gt;&gt;
    &lt;div class=&quot;brain-icon&quot;&gt;
        &lt;svg fill=&quot;#0F0&quot; height=&quot;100px&quot; version=&quot;1.1&quot; id=&quot;Capa_1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; viewBox=&quot;0 0 463 463&quot; xml:space=&quot;preserve&quot;&gt;
            &lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?&gt;
    &lt;g&gt;
        &lt;path d=&quot;M151.245,222.446C148.054,237.039,135.036,248,119.5,248c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5
            c23.774,0,43.522-17.557,46.966-40.386c14.556-1.574,27.993-8.06,38.395-18.677c2.899-2.959,2.85-7.708-0.109-10.606
            c-2.958-2.897-7.707-2.851-10.606,0.108C184.947,202.829,172.643,208,159.5,208c-26.743,0-48.5-21.757-48.5-48.5
            c0-4.143-3.358-7.5-7.5-7.5s-7.5,3.357-7.5,7.5C96,191.715,120.119,218.384,151.245,222.446z&quot;/&gt;
        &lt;path d=&quot;M183,287.5c0-4.143-3.358-7.5-7.5-7.5c-35.014,0-63.5,28.486-63.5,63.5c0,0.362,0.013,0.725,0.019,1.088
            C109.23,344.212,106.39,344,103.5,344c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5c26.743,0,48.5,21.757,48.5,48.5
            c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5c0-26.611-16.462-49.437-39.731-58.867c-0.178-1.699-0.269-3.418-0.269-5.133
            c0-26.743,21.757-48.5,48.5-48.5C179.642,295,183,291.643,183,287.5z&quot;/&gt;
        &lt;path d=&quot;M439,223.5c0-17.075-6.82-33.256-18.875-45.156c1.909-6.108,2.875-12.426,2.875-18.844
            c0-30.874-22.152-56.659-51.394-62.329C373.841,91.6,375,85.628,375,79.5c0-19.557-11.883-36.387-28.806-43.661
            C317.999,13.383,287.162,0,263.5,0c-13.153,0-24.817,6.468-32,16.384C224.317,6.468,212.653,0,199.5,0
            c-23.662,0-54.499,13.383-82.694,35.839C99.883,43.113,88,59.943,88,79.5c0,6.128,1.159,12.1,3.394,17.671
            C62.152,102.841,40,128.626,40,159.5c0,6.418,0.965,12.735,2.875,18.844C30.82,190.244,24,206.425,24,223.5
            c0,13.348,4.149,25.741,11.213,35.975C27.872,270.087,24,282.466,24,295.5c0,23.088,12.587,44.242,32.516,55.396
            C56.173,353.748,56,356.626,56,359.5c0,31.144,20.315,58.679,49.79,68.063C118.611,449.505,141.965,463,167.5,463
            c27.995,0,52.269-16.181,64-39.674c11.731,23.493,36.005,39.674,64,39.674c25.535,0,48.889-13.495,61.71-35.437
            c29.475-9.385,49.79-36.92,49.79-68.063c0-2.874-0.173-5.752-0.516-8.604C426.413,339.742,439,318.588,439,295.5
            c0-13.034-3.872-25.413-11.213-36.025C434.851,249.241,439,236.848,439,223.5z M167.5,448c-21.029,0-40.191-11.594-50.009-30.256
            c-0.973-1.849-2.671-3.208-4.688-3.751C88.19,407.369,71,384.961,71,359.5c0-3.81,0.384-7.626,1.141-11.344
            c0.702-3.447-1.087-6.92-4.302-8.35C50.32,332.018,39,314.626,39,295.5c0-8.699,2.256-17.014,6.561-24.379
            C56.757,280.992,71.436,287,87.5,287c4.142,0,7.5-3.357,7.5-7.5s-3.358-7.5-7.5-7.5C60.757,272,39,250.243,39,223.5
            c0-14.396,6.352-27.964,17.428-37.221c2.5-2.09,3.365-5.555,2.14-8.574C56.2,171.869,55,165.744,55,159.5
            c0-26.743,21.757-48.5,48.5-48.5s48.5,21.757,48.5,48.5c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5
            c0-33.642-26.302-61.243-59.421-63.355C104.577,91.127,103,85.421,103,79.5c0-13.369,8.116-24.875,19.678-29.859
            c0.447-0.133,0.885-0.307,1.308-0.527C127.568,47.752,131.447,47,135.5,47c12.557,0,23.767,7.021,29.256,18.325
            c1.81,3.727,6.298,5.281,10.023,3.47c3.726-1.809,5.28-6.296,3.47-10.022c-6.266-12.903-18.125-22.177-31.782-25.462
            C165.609,21.631,184.454,15,199.5,15c13.509,0,24.5,10.99,24.5,24.5v97.051c-6.739-5.346-15.25-8.551-24.5-8.551
            c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5c13.509,0,24.5,10.99,24.5,24.5v180.279c-9.325-12.031-22.471-21.111-37.935-25.266
            c-3.999-1.071-8.114,1.297-9.189,5.297c-1.075,4.001,1.297,8.115,5.297,9.189C206.8,343.616,224,366.027,224,391.5
            C224,422.654,198.654,448,167.5,448z M395.161,339.807c-3.215,1.43-5.004,4.902-4.302,8.35c0.757,3.718,1.141,7.534,1.141,11.344
            c0,25.461-17.19,47.869-41.803,54.493c-2.017,0.543-3.716,1.902-4.688,3.751C335.691,436.406,316.529,448,295.5,448
            c-31.154,0-56.5-25.346-56.5-56.5c0-2.109-0.098-4.2-0.281-6.271c0.178-0.641,0.281-1.314,0.281-2.012V135.5
            c0-13.51,10.991-24.5,24.5-24.5c4.142,0,7.5-3.357,7.5-7.5s-3.358-7.5-7.5-7.5c-9.25,0-17.761,3.205-24.5,8.551V39.5
            c0-13.51,10.991-24.5,24.5-24.5c15.046,0,33.891,6.631,53.033,18.311c-13.657,3.284-25.516,12.559-31.782,25.462
            c-1.81,3.727-0.256,8.214,3.47,10.022c3.726,1.81,8.213,0.257,10.023-3.47C303.733,54.021,314.943,47,327.5,47
            c4.053,0,7.933,0.752,11.514,2.114c0.422,0.22,0.86,0.393,1.305,0.526C351.883,54.624,360,66.13,360,79.5
            c0,5.921-1.577,11.627-4.579,16.645C322.302,98.257,296,125.858,296,159.5c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5
            c0-26.743,21.757-48.5,48.5-48.5s48.5,21.757,48.5,48.5c0,6.244-1.2,12.369-3.567,18.205c-1.225,3.02-0.36,6.484,2.14,8.574
            C417.648,195.536,424,209.104,424,223.5c0,26.743-21.757,48.5-48.5,48.5c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5
            c16.064,0,30.743-6.008,41.939-15.879c4.306,7.365,6.561,15.68,6.561,24.379C424,314.626,412.68,332.018,395.161,339.807z&quot;/&gt;
        &lt;path d=&quot;M359.5,240c-15.536,0-28.554-10.961-31.745-25.554C358.881,210.384,383,183.715,383,151.5c0-4.143-3.358-7.5-7.5-7.5
            s-7.5,3.357-7.5,7.5c0,26.743-21.757,48.5-48.5,48.5c-13.143,0-25.447-5.171-34.646-14.561c-2.898-2.958-7.647-3.007-10.606-0.108
            s-3.008,7.647-0.109,10.606c10.402,10.617,23.839,17.103,38.395,18.677C315.978,237.443,335.726,255,359.5,255
            c4.142,0,7.5-3.357,7.5-7.5S363.642,240,359.5,240z&quot;/&gt;
        &lt;path d=&quot;M335.5,328c-2.89,0-5.73,0.212-8.519,0.588c0.006-0.363,0.019-0.726,0.019-1.088c0-35.014-28.486-63.5-63.5-63.5
            c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5c26.743,0,48.5,21.757,48.5,48.5c0,1.714-0.091,3.434-0.269,5.133
            C288.462,342.063,272,364.889,272,391.5c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5c0-26.743,21.757-48.5,48.5-48.5
            c4.142,0,7.5-3.357,7.5-7.5S339.642,328,335.5,328z&quot;/&gt;
    &lt;/g&gt;
        &lt;/svg&gt;
    &lt;/div&gt;
&lt;&lt;elseif $mentalCondition is &quot;Unstable&quot;&gt;&gt;
    &lt;div class=&quot;brain-icon&quot;&gt;
        &lt;svg fill=&quot;#FFFF00&quot; height=&quot;100px&quot; version=&quot;1.1&quot; id=&quot;Capa_1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; viewBox=&quot;0 0 463 463&quot; xml:space=&quot;preserve&quot;&gt;
            &lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?&gt;
    &lt;g&gt;
        &lt;path d=&quot;M151.245,222.446C148.054,237.039,135.036,248,119.5,248c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5
            c23.774,0,43.522-17.557,46.966-40.386c14.556-1.574,27.993-8.06,38.395-18.677c2.899-2.959,2.85-7.708-0.109-10.606
            c-2.958-2.897-7.707-2.851-10.606,0.108C184.947,202.829,172.643,208,159.5,208c-26.743,0-48.5-21.757-48.5-48.5
            c0-4.143-3.358-7.5-7.5-7.5s-7.5,3.357-7.5,7.5C96,191.715,120.119,218.384,151.245,222.446z&quot;/&gt;
        &lt;path d=&quot;M183,287.5c0-4.143-3.358-7.5-7.5-7.5c-35.014,0-63.5,28.486-63.5,63.5c0,0.362,0.013,0.725,0.019,1.088
            C109.23,344.212,106.39,344,103.5,344c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5c26.743,0,48.5,21.757,48.5,48.5
            c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5c0-26.611-16.462-49.437-39.731-58.867c-0.178-1.699-0.269-3.418-0.269-5.133
            c0-26.743,21.757-48.5,48.5-48.5C179.642,295,183,291.643,183,287.5z&quot;/&gt;
        &lt;path d=&quot;M439,223.5c0-17.075-6.82-33.256-18.875-45.156c1.909-6.108,2.875-12.426,2.875-18.844
            c0-30.874-22.152-56.659-51.394-62.329C373.841,91.6,375,85.628,375,79.5c0-19.557-11.883-36.387-28.806-43.661
            C317.999,13.383,287.162,0,263.5,0c-13.153,0-24.817,6.468-32,16.384C224.317,6.468,212.653,0,199.5,0
            c-23.662,0-54.499,13.383-82.694,35.839C99.883,43.113,88,59.943,88,79.5c0,6.128,1.159,12.1,3.394,17.671
            C62.152,102.841,40,128.626,40,159.5c0,6.418,0.965,12.735,2.875,18.844C30.82,190.244,24,206.425,24,223.5
            c0,13.348,4.149,25.741,11.213,35.975C27.872,270.087,24,282.466,24,295.5c0,23.088,12.587,44.242,32.516,55.396
            C56.173,353.748,56,356.626,56,359.5c0,31.144,20.315,58.679,49.79,68.063C118.611,449.505,141.965,463,167.5,463
            c27.995,0,52.269-16.181,64-39.674c11.731,23.493,36.005,39.674,64,39.674c25.535,0,48.889-13.495,61.71-35.437
            c29.475-9.385,49.79-36.92,49.79-68.063c0-2.874-0.173-5.752-0.516-8.604C426.413,339.742,439,318.588,439,295.5
            c0-13.034-3.872-25.413-11.213-36.025C434.851,249.241,439,236.848,439,223.5z M167.5,448c-21.029,0-40.191-11.594-50.009-30.256
            c-0.973-1.849-2.671-3.208-4.688-3.751C88.19,407.369,71,384.961,71,359.5c0-3.81,0.384-7.626,1.141-11.344
            c0.702-3.447-1.087-6.92-4.302-8.35C50.32,332.018,39,314.626,39,295.5c0-8.699,2.256-17.014,6.561-24.379
            C56.757,280.992,71.436,287,87.5,287c4.142,0,7.5-3.357,7.5-7.5s-3.358-7.5-7.5-7.5C60.757,272,39,250.243,39,223.5
            c0-14.396,6.352-27.964,17.428-37.221c2.5-2.09,3.365-5.555,2.14-8.574C56.2,171.869,55,165.744,55,159.5
            c0-26.743,21.757-48.5,48.5-48.5s48.5,21.757,48.5,48.5c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5
            c0-33.642-26.302-61.243-59.421-63.355C104.577,91.127,103,85.421,103,79.5c0-13.369,8.116-24.875,19.678-29.859
            c0.447-0.133,0.885-0.307,1.308-0.527C127.568,47.752,131.447,47,135.5,47c12.557,0,23.767,7.021,29.256,18.325
            c1.81,3.727,6.298,5.281,10.023,3.47c3.726-1.809,5.28-6.296,3.47-10.022c-6.266-12.903-18.125-22.177-31.782-25.462
            C165.609,21.631,184.454,15,199.5,15c13.509,0,24.5,10.99,24.5,24.5v97.051c-6.739-5.346-15.25-8.551-24.5-8.551
            c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5c13.509,0,24.5,10.99,24.5,24.5v180.279c-9.325-12.031-22.471-21.111-37.935-25.266
            c-3.999-1.071-8.114,1.297-9.189,5.297c-1.075,4.001,1.297,8.115,5.297,9.189C206.8,343.616,224,366.027,224,391.5
            C224,422.654,198.654,448,167.5,448z M395.161,339.807c-3.215,1.43-5.004,4.902-4.302,8.35c0.757,3.718,1.141,7.534,1.141,11.344
            c0,25.461-17.19,47.869-41.803,54.493c-2.017,0.543-3.716,1.902-4.688,3.751C335.691,436.406,316.529,448,295.5,448
            c-31.154,0-56.5-25.346-56.5-56.5c0-2.109-0.098-4.2-0.281-6.271c0.178-0.641,0.281-1.314,0.281-2.012V135.5
            c0-13.51,10.991-24.5,24.5-24.5c4.142,0,7.5-3.357,7.5-7.5s-3.358-7.5-7.5-7.5c-9.25,0-17.761,3.205-24.5,8.551V39.5
            c0-13.51,10.991-24.5,24.5-24.5c15.046,0,33.891,6.631,53.033,18.311c-13.657,3.284-25.516,12.559-31.782,25.462
            c-1.81,3.727-0.256,8.214,3.47,10.022c3.726,1.81,8.213,0.257,10.023-3.47C303.733,54.021,314.943,47,327.5,47
            c4.053,0,7.933,0.752,11.514,2.114c0.422,0.22,0.86,0.393,1.305,0.526C351.883,54.624,360,66.13,360,79.5
            c0,5.921-1.577,11.627-4.579,16.645C322.302,98.257,296,125.858,296,159.5c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5
            c0-26.743,21.757-48.5,48.5-48.5s48.5,21.757,48.5,48.5c0,6.244-1.2,12.369-3.567,18.205c-1.225,3.02-0.36,6.484,2.14,8.574
            C417.648,195.536,424,209.104,424,223.5c0,26.743-21.757,48.5-48.5,48.5c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5
            c16.064,0,30.743-6.008,41.939-15.879c4.306,7.365,6.561,15.68,6.561,24.379C424,314.626,412.68,332.018,395.161,339.807z&quot;/&gt;
        &lt;path d=&quot;M359.5,240c-15.536,0-28.554-10.961-31.745-25.554C358.881,210.384,383,183.715,383,151.5c0-4.143-3.358-7.5-7.5-7.5
            s-7.5,3.357-7.5,7.5c0,26.743-21.757,48.5-48.5,48.5c-13.143,0-25.447-5.171-34.646-14.561c-2.898-2.958-7.647-3.007-10.606-0.108
            s-3.008,7.647-0.109,10.606c10.402,10.617,23.839,17.103,38.395,18.677C315.978,237.443,335.726,255,359.5,255
            c4.142,0,7.5-3.357,7.5-7.5S363.642,240,359.5,240z&quot;/&gt;
        &lt;path d=&quot;M335.5,328c-2.89,0-5.73,0.212-8.519,0.588c0.006-0.363,0.019-0.726,0.019-1.088c0-35.014-28.486-63.5-63.5-63.5
            c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5c26.743,0,48.5,21.757,48.5,48.5c0,1.714-0.091,3.434-0.269,5.133
            C288.462,342.063,272,364.889,272,391.5c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5c0-26.743,21.757-48.5,48.5-48.5
            c4.142,0,7.5-3.357,7.5-7.5S339.642,328,335.5,328z&quot;/&gt;
    &lt;/g&gt;
        &lt;/svg&gt;
    &lt;/div&gt;
&lt;&lt;else&gt;&gt;
    &lt;div class=&quot;brain-icon&quot;&gt;
        &lt;svg fill=&quot;#FF0000&quot; height=&quot;100px&quot; version=&quot;1.1&quot; id=&quot;Capa_1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; viewBox=&quot;0 0 463 463&quot; xml:space=&quot;preserve&quot;&gt;
            &lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?&gt;
    &lt;g&gt;
        &lt;path d=&quot;M151.245,222.446C148.054,237.039,135.036,248,119.5,248c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5
            c23.774,0,43.522-17.557,46.966-40.386c14.556-1.574,27.993-8.06,38.395-18.677c2.899-2.959,2.85-7.708-0.109-10.606
            c-2.958-2.897-7.707-2.851-10.606,0.108C184.947,202.829,172.643,208,159.5,208c-26.743,0-48.5-21.757-48.5-48.5
            c0-4.143-3.358-7.5-7.5-7.5s-7.5,3.357-7.5,7.5C96,191.715,120.119,218.384,151.245,222.446z&quot;/&gt;
        &lt;path d=&quot;M183,287.5c0-4.143-3.358-7.5-7.5-7.5c-35.014,0-63.5,28.486-63.5,63.5c0,0.362,0.013,0.725,0.019,1.088
            C109.23,344.212,106.39,344,103.5,344c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5c26.743,0,48.5,21.757,48.5,48.5
            c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5c0-26.611-16.462-49.437-39.731-58.867c-0.178-1.699-0.269-3.418-0.269-5.133
            c0-26.743,21.757-48.5,48.5-48.5C179.642,295,183,291.643,183,287.5z&quot;/&gt;
        &lt;path d=&quot;M439,223.5c0-17.075-6.82-33.256-18.875-45.156c1.909-6.108,2.875-12.426,2.875-18.844
            c0-30.874-22.152-56.659-51.394-62.329C373.841,91.6,375,85.628,375,79.5c0-19.557-11.883-36.387-28.806-43.661
            C317.999,13.383,287.162,0,263.5,0c-13.153,0-24.817,6.468-32,16.384C224.317,6.468,212.653,0,199.5,0
            c-23.662,0-54.499,13.383-82.694,35.839C99.883,43.113,88,59.943,88,79.5c0,6.128,1.159,12.1,3.394,17.671
            C62.152,102.841,40,128.626,40,159.5c0,6.418,0.965,12.735,2.875,18.844C30.82,190.244,24,206.425,24,223.5
            c0,13.348,4.149,25.741,11.213,35.975C27.872,270.087,24,282.466,24,295.5c0,23.088,12.587,44.242,32.516,55.396
            C56.173,353.748,56,356.626,56,359.5c0,31.144,20.315,58.679,49.79,68.063C118.611,449.505,141.965,463,167.5,463
            c27.995,0,52.269-16.181,64-39.674c11.731,23.493,36.005,39.674,64,39.674c25.535,0,48.889-13.495,61.71-35.437
            c29.475-9.385,49.79-36.92,49.79-68.063c0-2.874-0.173-5.752-0.516-8.604C426.413,339.742,439,318.588,439,295.5
            c0-13.034-3.872-25.413-11.213-36.025C434.851,249.241,439,236.848,439,223.5z M167.5,448c-21.029,0-40.191-11.594-50.009-30.256
            c-0.973-1.849-2.671-3.208-4.688-3.751C88.19,407.369,71,384.961,71,359.5c0-3.81,0.384-7.626,1.141-11.344
            c0.702-3.447-1.087-6.92-4.302-8.35C50.32,332.018,39,314.626,39,295.5c0-8.699,2.256-17.014,6.561-24.379
            C56.757,280.992,71.436,287,87.5,287c4.142,0,7.5-3.357,7.5-7.5s-3.358-7.5-7.5-7.5C60.757,272,39,250.243,39,223.5
            c0-14.396,6.352-27.964,17.428-37.221c2.5-2.09,3.365-5.555,2.14-8.574C56.2,171.869,55,165.744,55,159.5
            c0-26.743,21.757-48.5,48.5-48.5s48.5,21.757,48.5,48.5c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5
            c0-33.642-26.302-61.243-59.421-63.355C104.577,91.127,103,85.421,103,79.5c0-13.369,8.116-24.875,19.678-29.859
            c0.447-0.133,0.885-0.307,1.308-0.527C127.568,47.752,131.447,47,135.5,47c12.557,0,23.767,7.021,29.256,18.325
            c1.81,3.727,6.298,5.281,10.023,3.47c3.726-1.809,5.28-6.296,3.47-10.022c-6.266-12.903-18.125-22.177-31.782-25.462
            C165.609,21.631,184.454,15,199.5,15c13.509,0,24.5,10.99,24.5,24.5v97.051c-6.739-5.346-15.25-8.551-24.5-8.551
            c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5c13.509,0,24.5,10.99,24.5,24.5v180.279c-9.325-12.031-22.471-21.111-37.935-25.266
            c-3.999-1.071-8.114,1.297-9.189,5.297c-1.075,4.001,1.297,8.115,5.297,9.189C206.8,343.616,224,366.027,224,391.5
            C224,422.654,198.654,448,167.5,448z M395.161,339.807c-3.215,1.43-5.004,4.902-4.302,8.35c0.757,3.718,1.141,7.534,1.141,11.344
            c0,25.461-17.19,47.869-41.803,54.493c-2.017,0.543-3.716,1.902-4.688,3.751C335.691,436.406,316.529,448,295.5,448
            c-31.154,0-56.5-25.346-56.5-56.5c0-2.109-0.098-4.2-0.281-6.271c0.178-0.641,0.281-1.314,0.281-2.012V135.5
            c0-13.51,10.991-24.5,24.5-24.5c4.142,0,7.5-3.357,7.5-7.5s-3.358-7.5-7.5-7.5c-9.25,0-17.761,3.205-24.5,8.551V39.5
            c0-13.51,10.991-24.5,24.5-24.5c15.046,0,33.891,6.631,53.033,18.311c-13.657,3.284-25.516,12.559-31.782,25.462
            c-1.81,3.727-0.256,8.214,3.47,10.022c3.726,1.81,8.213,0.257,10.023-3.47C303.733,54.021,314.943,47,327.5,47
            c4.053,0,7.933,0.752,11.514,2.114c0.422,0.22,0.86,0.393,1.305,0.526C351.883,54.624,360,66.13,360,79.5
            c0,5.921-1.577,11.627-4.579,16.645C322.302,98.257,296,125.858,296,159.5c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5
            c0-26.743,21.757-48.5,48.5-48.5s48.5,21.757,48.5,48.5c0,6.244-1.2,12.369-3.567,18.205c-1.225,3.02-0.36,6.484,2.14,8.574
            C417.648,195.536,424,209.104,424,223.5c0,26.743-21.757,48.5-48.5,48.5c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5
            c16.064,0,30.743-6.008,41.939-15.879c4.306,7.365,6.561,15.68,6.561,24.379C424,314.626,412.68,332.018,395.161,339.807z&quot;/&gt;
        &lt;path d=&quot;M359.5,240c-15.536,0-28.554-10.961-31.745-25.554C358.881,210.384,383,183.715,383,151.5c0-4.143-3.358-7.5-7.5-7.5
            s-7.5,3.357-7.5,7.5c0,26.743-21.757,48.5-48.5,48.5c-13.143,0-25.447-5.171-34.646-14.561c-2.898-2.958-7.647-3.007-10.606-0.108
            s-3.008,7.647-0.109,10.606c10.402,10.617,23.839,17.103,38.395,18.677C315.978,237.443,335.726,255,359.5,255
            c4.142,0,7.5-3.357,7.5-7.5S363.642,240,359.5,240z&quot;/&gt;
        &lt;path d=&quot;M335.5,328c-2.89,0-5.73,0.212-8.519,0.588c0.006-0.363,0.019-0.726,0.019-1.088c0-35.014-28.486-63.5-63.5-63.5
            c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5c26.743,0,48.5,21.757,48.5,48.5c0,1.714-0.091,3.434-0.269,5.133
            C288.462,342.063,272,364.889,272,391.5c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5c0-26.743,21.757-48.5,48.5-48.5
            c4.142,0,7.5-3.357,7.5-7.5S339.642,328,335.5,328z&quot;/&gt;
    &lt;/g&gt;
        &lt;/svg&gt;
    &lt;/div&gt;
&lt;&lt;/if&gt;&gt;

    &lt;p class=&quot;synergy-level-text&quot;&gt;Mental Condition: 
&lt;&lt;if $mentalCondition is &quot;Stable&quot;&gt;&gt;
    &lt;span style=&quot;color: #00ff00;&quot;&gt;$mentalCondition&lt;/span&gt;
&lt;&lt;elseif $mentalCondition is &quot;Unstable&quot;&gt;&gt;
    &lt;span style=&quot;color: yellow;&quot;&gt;$mentalCondition&lt;/span&gt;
&lt;&lt;else&gt;&gt;
    &lt;span style=&quot;color: red;&quot;&gt;$mentalCondition&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
&lt;/p&gt;

&lt;&lt;if $mentalCondition is &quot;Stable&quot;&gt;&gt;
    &lt;p class=&quot;synergy-level-description&quot;&gt;Your mental condition is stable, and your mind is aligned with your body.&lt;/p&gt;
&lt;&lt;elseif $mentalCondition is &quot;Unstable&quot;&gt;&gt;
    &lt;p class=&quot;synergy-level-description&quot;&gt;Your mental condition is unstable, and you have less time to resist AVA&#39;s suggestions.&lt;/p&gt;
&lt;&lt;else&gt;&gt;
    &lt;p class=&quot;synergy-level-description&quot;&gt;You are dysphoric because your mind isn&#39;t aligned with your body. Your are unable to resist AVA&#39;s suggestions.&lt;/p&gt;
&lt;&lt;/if&gt;&gt;

    &lt;p class=&quot;resistance-level-text&quot;&gt;Implant Charge:&lt;/p&gt;
    &lt;div class=&quot;resistance-progress&quot;&gt;
        &lt;div class=&quot;resistance-bar&quot;&gt;&lt;/div&gt; &lt;!-- Progress bar fill --&gt;
        &lt;div class=&quot;resistance-progress-percentage&quot;&gt;&lt;&lt;live $implantCharge&gt;&gt;%&lt;/div&gt; 
    &lt;/div&gt;
&lt;/div&gt;
&lt;&lt;nobr&gt;&gt;&lt;&lt;done&gt;&gt;&lt;&lt;script&gt;&gt;
    $(document).on(&quot;:liveupdate&quot;, function() {
        var currentCharge = SugarCube.State.variables.implantCharge;

        $(&quot;.resistance-bar&quot;).css(&quot;width&quot;, currentCharge + &quot;%&quot;);

        $(&quot;.resistance-progress-percentage&quot;).text(currentCharge + &quot;%&quot;);
    });

    $(document).trigger(&quot;:liveupdate&quot;);

&lt;&lt;/script&gt;&gt;&lt;&lt;/done&gt;&gt;&lt;&lt;/nobr&gt;&gt;
&lt;br&gt;
&lt;&lt;if $statsBoxLocation === &quot;right&quot;&gt;&gt;
    &lt;&lt;include &quot;StatsBox&quot;&gt;&gt;
    &lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $quickAccessBoxLeft is false&gt;&gt;
    &lt;&lt;include &quot;QuickAccessBox&quot;&gt;&gt;
    &lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $notificationsBoxLeft is false&gt;&gt;
    &lt;&lt;include &quot;NotificationsBox&quot;&gt;&gt;
    &lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $todoBoxLeft is false&gt;&gt;
    &lt;&lt;include &quot;TodoBox&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;\
&lt;&lt;if $musicPlayerLeft === false&gt;&gt;\
    &lt;&lt;include &quot;CyberPlayer&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;nobr&gt;&gt;&lt;&lt;if !$tipSidebarCustomizationClosed&gt;&gt;
&lt;&lt;set _currentPassage = passage()&gt;&gt;
&lt;div id=&quot;tutorial-box&quot;&gt;&lt;div class=&quot;instruction-container-green&quot;&gt;
&lt;div class=&quot;instruction-title-bar-green&quot;&gt;Tip: Sidebar Customization &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.tipSidebarCustomizationClosed = true; document.getElementById(&#39;tutorial-box&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;
&lt;div class=&quot;instruction-content&quot;&gt;
&lt;p&gt;You can customize what information is displayed here in the Settings menu.&lt;/p&gt;
&lt;p&gt;For example, you can &lt;&lt;link &quot;display Notifications and Tasks&quot;&gt;&gt;.
    &lt;&lt;set $notificationsBoxLeft = false&gt;&gt;
    &lt;&lt;set $todoBoxLeft = false&gt;&gt;
    &lt;&lt;set $tipSidebarCustomizationClosed = true&gt;&gt;
    &lt;&lt;goto _currentPassage&gt;&gt;
&lt;&lt;/link&gt;&gt;.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br&gt;&lt;br&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="400" name="SettingsMenu" tags="nobr" position="1225,4975" size="100,100">&lt;style&gt;
.settings-menu h2 {
    margin-bottom: 30px; /* Space below the heading */
    padding-bottom: 5px; /* Optional: padding below the text */
    border-bottom: 1px solid #55BBBC; /* Optional: a line to underline the heading */
    margin-top: 0px;
    padding-top: 0px;
    color: #55BBBC;
    font-size: 1.5em; /* AdjusSt size as needed */
}
&lt;/style&gt;
&lt;div class=&quot;settings-menu&quot;&gt;
&lt;h2&gt;Display Settings&lt;/h2&gt;
&lt;strong&gt;Text Size:&lt;/strong&gt;
&lt;br&gt;
&lt;a href=&quot;#&quot; onclick=&quot;fontSize(1); return false;&quot;&gt;&lt;i class=&quot;fas fa-search-plus&quot;&gt;&lt;/i&gt; Increase&lt;/a&gt;
&lt;br&gt;
&lt;a href=&quot;#&quot; onclick=&quot;fontSize(-1); return false;&quot;&gt;&lt;i class=&quot;fas fa-search-minus&quot;&gt;&lt;/i&gt; Decrease&lt;/a&gt;

&lt;br&gt;&lt;br&gt;
&lt;h2&gt;Gameplay Settings&lt;/h2&gt;
&lt;div class=&quot;gameplay-settings-group&quot;&gt;
    &lt;label&gt;&lt;strong&gt;Minigame Difficulty:&lt;/strong&gt;&lt;/label&gt;
    &lt;ul class=&quot;no-bullets&quot;&gt;
        &lt;li&gt;
            &lt;&lt;radiobutton &quot;$miniGameDifficulty&quot; &quot;Normal&quot; autocheck&gt;&gt; &lt;strong&gt;Normal:&lt;/strong&gt; For players seeking a balanced challenge.
        &lt;/li&gt;
        &lt;li&gt;
            &lt;&lt;radiobutton &quot;$miniGameDifficulty&quot; &quot;Easy&quot; autocheck&gt;&gt; &lt;strong&gt;Easy:&lt;/strong&gt; A less challenging experience for those who don&#39;t want to struggle.
        &lt;/li&gt;
        &lt;li&gt;
            &lt;&lt;radiobutton &quot;$miniGameDifficulty&quot; &quot;Story&quot; autocheck&gt;&gt; &lt;strong&gt;Story:&lt;/strong&gt; Focus on the narrative with minimal gameplay challenge.
        &lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;Please manually refresh the page (F5) when you close this settings window if you&#39;re changing the minigame difficulty setting from a minigame passage.&lt;/p&gt;
&lt;h2&gt;Sidebar Settings&lt;/h2&gt;
&lt;div class=&quot;sidebar-settings-group&quot;&gt;
    &lt;&lt;if $synapseSteadyVXInstalled === true&gt;&gt;
        &lt;label&gt;&lt;strong&gt;Right sidebar:&lt;/strong&gt;&lt;/label&gt;
        &lt;ul class=&quot;no-bullets&quot;&gt;
            &lt;li&gt;
                &lt;&lt;radiobutton &quot;$rightSidebarEnabled&quot; true autocheck&gt;&gt; Enabled
            &lt;/li&gt;
            &lt;li&gt;
                &lt;&lt;radiobutton &quot;$rightSidebarEnabled&quot; false autocheck&gt;&gt; Disabled
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;&lt;/if&gt;&gt;

    &lt;label&gt;&lt;strong&gt;Stats Box:&lt;/strong&gt;&lt;/label&gt;
    &lt;ul class=&quot;no-bullets&quot;&gt;
        &lt;li&gt;
            &lt;&lt;radiobutton &quot;$statsBoxLocation&quot; &quot;top&quot; autocheck&gt;&gt; Top
        &lt;/li&gt;
        &lt;li&gt;
            &lt;&lt;radiobutton &quot;$statsBoxLocation&quot; &quot;left&quot; autocheck&gt;&gt; Left
        &lt;/li&gt;
        &lt;&lt;if $rightSidebarEnabled === true&gt;&gt;
        &lt;li&gt;
            &lt;&lt;radiobutton &quot;$statsBoxLocation&quot; &quot;right&quot; autocheck&gt;&gt; Right
        &lt;/li&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;/ul&gt;
&lt;&lt;if $rightSidebarEnabled === true&gt;&gt;
    &lt;label&gt;&lt;strong&gt;Quick Access Box:&lt;/strong&gt;&lt;/label&gt;
    &lt;ul class=&quot;no-bullets&quot;&gt;
        &lt;li&gt;
            &lt;&lt;radiobutton &quot;$quickAccessBoxLeft&quot; true autocheck&gt;&gt; Left
        &lt;/li&gt;
        &lt;li&gt;
            &lt;&lt;radiobutton &quot;$quickAccessBoxLeft&quot; false autocheck&gt;&gt; Right
        &lt;/li&gt;
    &lt;/ul&gt;

    &lt;label&gt;&lt;strong&gt;Notifications Box:&lt;/strong&gt;&lt;/label&gt;
    &lt;ul class=&quot;no-bullets&quot;&gt;
        &lt;li&gt;
            &lt;&lt;radiobutton &quot;$notificationsBoxLeft&quot; true autocheck&gt;&gt; Left
        &lt;/li&gt;
        &lt;li&gt;
            &lt;&lt;radiobutton &quot;$notificationsBoxLeft&quot; false autocheck&gt;&gt; Right
        &lt;/li&gt;
    &lt;/ul&gt;

    &lt;label&gt;&lt;strong&gt;Todo Box:&lt;/strong&gt;&lt;/label&gt;
    &lt;ul class=&quot;no-bullets&quot;&gt;
        &lt;li&gt;
            &lt;&lt;radiobutton &quot;$todoBoxLeft&quot; true autocheck&gt;&gt; Left
        &lt;/li&gt;
        &lt;li&gt;
            &lt;&lt;radiobutton &quot;$todoBoxLeft&quot; false autocheck&gt;&gt; Right
        &lt;/li&gt;
    &lt;/ul&gt;

    &lt;label&gt;&lt;strong&gt;Music Player:&lt;/strong&gt;&lt;/label&gt;
    &lt;ul class=&quot;no-bullets&quot;&gt;
        &lt;li&gt;
            &lt;&lt;radiobutton &quot;$musicPlayerLeft&quot; true autocheck&gt;&gt; Left
        &lt;/li&gt;
        &lt;li&gt;
            &lt;&lt;radiobutton &quot;$musicPlayerLeft&quot; false autocheck&gt;&gt; Right
        &lt;/li&gt;
    &lt;/ul&gt;
&lt;&lt;/if&gt;&gt;
&lt;/div&gt;

&lt;br&gt;
&lt;&lt;set _currentPassage = passage()&gt;&gt;
&lt;&lt;button &quot;Save Settings&quot;&gt;&gt;
    &lt;&lt;run Dialog.close()&gt;&gt;
    &lt;&lt;goto _currentPassage&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="401" name="StatsBox" tags="nobr" position="100,5100" size="100,100">&lt;div class=&quot;stats-box&quot;&gt;
    &lt;h3&gt;Stats&lt;/h3&gt;
    &lt;div class=&quot;stat-item&quot;&gt;
        &lt;span class=&quot;stat-icon&quot;&gt;🗓️&lt;/span&gt;
        &lt;span class=&quot;stat-label&quot;&gt;Day:&lt;/span&gt;
        &lt;span class=&quot;stat-data&quot;&gt;$dayOfWeek&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;stat-item&quot;&gt;
        &lt;span class=&quot;stat-icon&quot;&gt;💰&lt;/span&gt;
        &lt;span class=&quot;stat-label&quot;&gt;Money:&lt;/span&gt;
        &lt;span class=&quot;stat-data&quot;&gt;&lt;&lt;print &quot;$&quot; + $playerMoney.toLocaleString(&quot;en-US&quot;, { minimumFractionDigits: 0, maximumFractionDigits: 0 })&gt;&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;stat-item&quot;&gt;
        &lt;span class=&quot;stat-icon&quot;&gt;🧾&lt;/span&gt;
        &lt;span class=&quot;stat-label&quot;&gt;Weekly Expenses:&lt;/span&gt;
        &lt;span class=&quot;stat-data&quot;&gt;&lt;&lt;print &quot;$&quot; + MindWare.calculateTotalExpenses().toLocaleString(&quot;en-US&quot;, { minimumFractionDigits: 0, maximumFractionDigits: 0 })&gt;&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;stat-item&quot;&gt;
        &lt;span class=&quot;stat-icon&quot;&gt;⚧&lt;/span&gt;
        &lt;span class=&quot;stat-label&quot;&gt;Gender:&lt;/span&gt;
        &lt;span class=&quot;stat-data&quot;&gt;&lt;&lt;print MindWare.getGenderStatus()&gt;&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;stat-item&quot;&gt;
        &lt;span class=&quot;stat-icon&quot;&gt;⚖️&lt;/span&gt;
        &lt;span class=&quot;stat-label&quot;&gt;Morality:&lt;/span&gt;
        &lt;span class=&quot;stat-data&quot;&gt;&lt;&lt;print MindWare.getMoralityStatus()&gt;&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;stat-item-ap&quot;&gt;
        &lt;span class=&quot;stat-data&quot;&gt;
            &lt;&lt;if $actionPoints &gt; 0&gt;&gt;
                &lt;&lt;for _i = 1; _i &lt;= $actionPoints; _i++&gt;&gt;
                    &lt;span class=&quot;stat-icon&quot;&gt;⚡&lt;/span&gt;
                &lt;&lt;/for&gt;&gt;
            &lt;&lt;else&gt;&gt;
                &lt;span class=&quot;stat-icon&quot;&gt;💤&lt;/span&gt;
            &lt;&lt;/if&gt;&gt;
        &lt;/span&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;!--    &lt;div class=&quot;stat-item&quot;&gt;\
        &lt;span class=&quot;stat-icon&quot;&gt;🫦&lt;/span&gt;\
        &lt;span class=&quot;stat-label&quot;&gt;Sexuality:&lt;/span&gt;\
        &lt;span class=&quot;stat-data&quot;&gt;&lt;&lt;print MindWare.getSexualityStatus()&gt;&gt;&lt;/span&gt;\
    &lt;/div&gt;\ --&gt;</tw-passagedata><tw-passagedata pid="402" name="QuickAccessBox" tags="nobr" position="225,5100" size="100,100">&lt;div class=&quot;quick-access-box&quot;&gt;
    &lt;h3&gt;Quick Access&lt;/h3&gt;
    &lt;div class=&quot;quick-access-buttons-top&quot;&gt;
        &lt;button title=&quot;View Character Profile&quot; onclick=&#39;quickAccessClick(&quot;CharacterProfile&quot;, event);&#39;&gt;&lt;i class=&quot;fas fa-user&quot;&gt;&lt;/i&gt;&lt;/button&gt; &lt;!-- Character Profile --&gt;
        &lt;button title=&quot;Open Computer&quot; onclick=&#39;quickAccessClick(&quot;Computer-QuickAccess&quot;, event);&#39;&gt;&lt;i class=&quot;fas fa-laptop&quot;&gt;&lt;/i&gt;&lt;/button&gt;
        &lt;!-- &lt;button title=&quot;Open Inventory&quot; onclick=&#39;quickAccessClick(&quot;Inventory&quot;, event);&#39;&gt;&lt;i class=&quot;fas fa-briefcase&quot;&gt;&lt;/i&gt;&lt;/button&gt;--&gt;
    &lt;/div&gt;
    &lt;div class=&quot;quick-access-buttons&quot;&gt;
        &lt;button title=&quot;Open Web Browser&quot; onclick=&#39;quickAccessClick(&quot;WebBrowser-QuickAccess&quot;, event);&#39;&gt;&lt;i class=&quot;fas fa-globe&quot;&gt;&lt;/i&gt;&lt;/button&gt; &lt;!-- Web Browser --&gt;
        &lt;button title=&quot;Open Email Client&quot; onclick=&#39;quickAccessClick(&quot;EmailClient-QuickAccess&quot;, event);&#39;&gt;&lt;i class=&quot;fas fa-envelope&quot;&gt;&lt;/i&gt;&lt;/button&gt; &lt;!-- Email --&gt;
        &lt;button title=&quot;Open Instant Messenger&quot; onclick=&#39;quickAccessClick(&quot;IMApp-QuickAccess&quot;, event);&#39;&gt;&lt;i class=&quot;fas fa-comments&quot;&gt;&lt;/i&gt;&lt;/button&gt; &lt;!-- Instant Messenger --&gt;
        &lt;button title=&quot;Open Notes App&quot; onclick=&#39;quickAccessClick(&quot;NotesApp-QuickAccess&quot;, event);&#39;&gt;&lt;i class=&quot;fas fa-sticky-note&quot;&gt;&lt;/i&gt;&lt;/button&gt; &lt;!-- Notes --&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
function quickAccessClick(passageName, event) {
    const currentPassage = SugarCube.State.passage;
    const quickAccessPassages = [&quot;CharacterProfile&quot;, &quot;Computer-QuickAccess&quot;, &quot;Inventory&quot;, &quot;WebBrowser-QuickAccess&quot;, &quot;EmailClient-QuickAccess&quot;, &quot;IMApp-QuickAccess&quot;, &quot;NotesApp-QuickAccess&quot;];

    if (!quickAccessPassages.includes(SugarCube.State.passage)) {
        SugarCube.State.variables.returnPassage = SugarCube.State.passage;
    }

    SugarCube.State.variables.navigatedFromSidebar = true;
    SugarCube.Engine.play(passageName);
}
&lt;/script&gt;</tw-passagedata><tw-passagedata pid="403" name="NotificationsBox" tags="nobr" position="350,5100" size="100,100">&lt;div class=&quot;notifications-box&quot;&gt;
    &lt;h3&gt;Notifications&lt;/h3&gt;
    &lt;p&gt;
        &lt;&lt;run State.variables.unreadCount = MindWare.getUnreadEmailCount()&gt;&gt;
        &lt;&lt;if State.variables.unreadCount == 0&gt;&gt;
            &lt;&lt;print State.variables.unreadCount&gt;&gt; unread email&lt;&lt;if State.variables.unreadCount != 1&gt;&gt;s&lt;&lt;/if&gt;&gt;
        &lt;&lt;else&gt;&gt;
            &lt;&lt;set _color = (State.variables.unreadCount == 1) ? &quot;yellow&quot; : (State.variables.unreadCount == 2) ? &quot;orange&quot; : &quot;red&quot;&gt;&gt;
            &lt;&lt;print `&lt;span style=&quot;color: ${_color}; font-weight: bold;&quot;&gt;${State.variables.unreadCount} unread email${State.variables.unreadCount != 1 ? &quot;s&quot; : &quot;&quot;}&lt;/span&gt;`&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;/p&gt;
    &lt;p&gt;
        &lt;&lt;run State.variables.unreadChatCount = MindWare.getUnreadMessageCount()&gt;&gt;
        &lt;&lt;if State.variables.unreadChatCount == 0&gt;&gt;
            &lt;&lt;print State.variables.unreadChatCount&gt;&gt; available chats&lt;&lt;if State.variables.unreadChatCount != 1&gt;&gt;&lt;&lt;else&gt;&gt;s&lt;&lt;/if&gt;&gt;
        &lt;&lt;else&gt;&gt;
            &lt;&lt;set _color = (State.variables.unreadChatCount == 1) ? &quot;yellow&quot; : (State.variables.unreadChatCount == 2) ? &quot;orange&quot; : &quot;red&quot;&gt;&gt;
            &lt;&lt;print `&lt;span style=&quot;color: ${_color}; font-weight: bold;&quot;&gt;${State.variables.unreadChatCount} available chat${State.variables.unreadChatCount != 1 ? &quot;s&quot; : &quot;&quot;}&lt;/span&gt;`&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;/p&gt;
    /* &lt;p&gt;
        &lt;&lt;run State.variables.availableTargets = setup.getHackingTargetCount()&gt;&gt;
        &lt;&lt;if State.variables.availableTargets == 0&gt;&gt;
            &lt;&lt;print State.variables.availableTargets&gt;&gt; available targets&lt;&lt;if State.variables.availableTargets != 1&gt;&gt;&lt;&lt;else&gt;&gt;s&lt;&lt;/if&gt;&gt;
        &lt;&lt;else&gt;&gt;
            &lt;&lt;set _color = (State.variables.availableTargets == 1) ? &quot;yellow&quot; : (State.variables.availableTargets == 2) ? &quot;orange&quot; : &quot;red&quot;&gt;&gt;
            &lt;&lt;print `&lt;span style=&quot;color: ${_color}; font-weight: bold;&quot;&gt;${State.variables.availableTargets} available target${State.variables.availableTargets != 1 ? &quot;s&quot; : &quot;&quot;}&lt;/span&gt;`&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;/p&gt; */
    &lt;p&gt;
        &lt;&lt;run State.variables.byteBunkerJobsCount = setup.countAvailableUnacceptedByteBunkerJobs()&gt;&gt;
        &lt;&lt;if setup.isAvailableUnacceptedByteBunkerJobPresent()&gt;&gt;
            &lt;&lt;set _color = (State.variables.byteBunkerJobsCount == 1) ? &quot;yellow&quot; : (State.variables.byteBunkerJobsCount == 2) ? &quot;orange&quot; : &quot;red&quot;&gt;&gt;
            &lt;&lt;print `&lt;span style=&quot;color: ${_color}; font-weight: bold;&quot;&gt;${State.variables.byteBunkerJobsCount} available ByteBunker job${State.variables.byteBunkerJobsCount != 1 ? &quot;s&quot; : &quot;&quot;}&lt;/span&gt;`&gt;&gt;
        &lt;&lt;else&gt;&gt;
            &lt;&lt;print &quot;No available ByteBunker jobs&quot;&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;/p&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="404" name="TodoBox" tags="nobr" position="475,5100" size="100,100">&lt;div class=&quot;todo-box&quot;&gt;
    &lt;h3&gt;Tasks&lt;/h3&gt;
    &lt;ul id=&quot;taskList&quot;&gt;
        &lt;&lt;if $tasks.filter(function(task){return task.status == &#39;active&#39;}).length == 0&gt;&gt;
            &lt;li&gt;empty&lt;/li&gt;
        &lt;&lt;else&gt;&gt;
            &lt;&lt;for _task range $tasks&gt;&gt;
                &lt;&lt;if _task.status == &#39;active&#39;&gt;&gt;
                    &lt;li&gt;
                        @@.task-link;&lt;&lt;print MindWare.generateTaskLink(_task)&gt;&gt;@@
                    &lt;/li&gt;
                &lt;&lt;/if&gt;&gt;
            &lt;&lt;/for&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;/ul&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="405" name="StoryCaption" tags="" position="600,5100" size="100,100">&lt;&lt;nobr&gt;&gt;&lt;&lt;if $introOver is true&gt;&gt;
&lt;&lt;if $statsBoxLocation is &quot;left&quot;&gt;&gt;
    &lt;&lt;include &quot;StatsBox&quot;&gt;&gt;
    &lt;&lt;if $quickAccessBoxLeft or $notificationsBoxLeft or $todoBoxLeft&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $quickAccessBoxLeft is true&gt;&gt;
    &lt;&lt;include &quot;QuickAccessBox&quot;&gt;&gt;
    &lt;&lt;if $notificationsBoxLeft or $todoBoxLeft&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $notificationsBoxLeft is true&gt;&gt;
    &lt;&lt;include &quot;NotificationsBox&quot;&gt;&gt;
    &lt;&lt;if $todoBoxLeft&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $todoBoxLeft is true&gt;&gt;
    &lt;&lt;include &quot;TodoBox&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="406" name="StartScreen" tags="" position="725,5100" size="100,100">&lt;img src=&quot;imgs/UI/banner.jpg&quot; alt=&quot;&quot; width=&quot;100%&quot;&gt;
&lt;div class=&quot;start-warning-box&quot;&gt;
    &lt;h2&gt;Explicit Content Warning&lt;/h2&gt;&lt;p&gt;&lt;span style=&quot;color:red&quot;&gt;For adults (18+) only.&lt;/span&gt;&lt;br&gt;Please proceed only if you meet this age requirement.&lt;/p&gt;
    &lt;h2&gt;Photosensitivity Warning&lt;/h2&gt;&lt;p&gt;This game contains flashing images that may potentially trigger seizures for people with photosensitive epilepsy. Player discretion is advised.&lt;/p&gt;
&lt;/div&gt;

@@.start-button;
&lt;&lt;button &quot;Start a New Game&quot;&gt;&gt;
  &lt;&lt;goto &quot;CharacterCreator&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;@@\
@@.start-button;
&lt;&lt;button &quot;Quick Start&quot;&gt;&gt; /* This is the new Skip button */
    &lt;&lt;if $doYouKnowTheAnswer === true&gt;&gt;
        &lt;&lt;goto &quot;QuickStart&quot;&gt;&gt; 
    &lt;&lt;else&gt;&gt;
        &lt;&lt;run UI.alert(&quot;The Quick Start option is available only to supporters. To unlock it, please enter the correct password in the Extra Options menu (located in the left sidebar).&quot;)&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;@@\

&lt;p style=&quot;text-align: center; color: rgba(255, 223, 223, 0.7);&quot;&gt;&lt;strong&gt;Important:&lt;/strong&gt; MindWare isn&#39;t optimized for mobile devices.&lt;/p&gt;
\
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;&lt;link `&quot;Version: &quot; + $gameVersion`&gt;&gt;&lt;&lt;run Dialog.setup(&quot;Changelog&quot;)&gt;&gt;\
                                                        &lt;&lt;run Dialog.wiki(Story.get(&quot;Changelog&quot;).processText())&gt;&gt;\
                                                        &lt;&lt;run Dialog.open()&gt;&gt;\&lt;&lt;/link&gt;&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;This game is currently in the thrilling stages of early development.
Enjoy exploring and stay tuned for more updates!&lt;/p&gt;
\
&lt;&lt;include &quot;SocialIcons&quot;&gt;&gt;


&lt;p style=&quot;text-align: center;&quot;&gt;&lt;b&gt;Images and videos within this game are AI-generated creations.&lt;/b&gt; All characters, events, places, organizations, and entities in this story are entirely fictional. Any resemblance to real persons, living or dead, or actual events, places, organizations, or entities is purely coincidental.&lt;/p&gt;</tw-passagedata><tw-passagedata pid="407" name="GameplaySettings" tags="nobr" position="850,5100" size="100,100">&lt;div class=&quot;gameplay-settings-container&quot;&gt;
    &lt;h2&gt;Gameplay Settings&lt;/h2&gt;
    &lt;div class=&quot;gameplay-settings-group&quot;&gt;
        &lt;label&gt;&lt;strong&gt;Minigame difficulty:&lt;/strong&gt;&lt;/label&gt;
        &lt;ul class=&quot;no-bullets&quot;&gt;
            &lt;li&gt;
                &lt;&lt;radiobutton &quot;$miniGameDifficulty&quot; &quot;Normal&quot; autocheck&gt;&gt; &lt;strong&gt;Normal:&lt;/strong&gt; For players seeking a balanced challenge.
            &lt;/li&gt;
            &lt;li&gt;
                &lt;&lt;radiobutton &quot;$miniGameDifficulty&quot; &quot;Easy&quot; autocheck&gt;&gt; &lt;strong&gt;Easy:&lt;/strong&gt; A less challenging experience for those who don&#39;t want to struggle.
            &lt;/li&gt;
            &lt;li&gt;
                &lt;&lt;radiobutton &quot;$miniGameDifficulty&quot; &quot;Story&quot; autocheck&gt;&gt; &lt;strong&gt;Easiest:&lt;/strong&gt; Focus on the narrative with minimal gameplay challenge.
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;&lt;if $tutorialGameplaySettings === false&gt;&gt;&lt;div id=&quot;tutorial-box&quot;&gt;&lt;div class=&quot;instruction-container-blue&quot;&gt;
    &lt;div class=&quot;instruction-title-bar-blue&quot;&gt;Tutorial: Gameplay Settings &lt;button class=&quot;tutorial-close-button&quot; onclick=&quot;SugarCube.State.variables.tutorialGameplaySettings = true; document.getElementById(&#39;tutorial-box&#39;).style.display = &#39;none&#39;;&quot;&gt;&lt;span style=&quot;tutorial-close-button&quot;&gt;&lt;i class=&quot;fas fa-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;
    &lt;div class=&quot;instruction-content&quot;&gt;
        &lt;p&gt;You can always change these settings later from the settings menu located in the left pane.&lt;/p&gt;
    &lt;/div&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;&lt;else&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;br&gt;
&lt;&lt;button &quot;Save Settings&quot;&gt;&gt;
    &lt;&lt;goto &quot;Prologue&quot;&gt;&gt;
&lt;&lt;/button&gt;&gt;@@


/* :: GameplaySettings-old [nobr]
&lt;div class=&quot;gameplay-settings-container&quot;&gt;
    &lt;h2&gt;Gameplay Settings&lt;/h2&gt;
    &lt;div class=&quot;gameplay-settings-group&quot;&gt;
        &lt;label for=&quot;miniGameDifficulty&quot;&gt;Minigame Difficulty:&lt;/label&gt;
        &lt;select id=&quot;miniGameDifficulty&quot; name=&quot;miniGameDifficulty&quot;&gt;
            &lt;option value=&quot;Story&quot;&gt;Story&lt;/option&gt;
            &lt;option value=&quot;Easy&quot;&gt;Easy&lt;/option&gt;
            &lt;option value=&quot;Normal&quot; selected&gt;Normal&lt;/option&gt;
        &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;difficulty-explanation&quot;&gt;
        &lt;ul&gt;
        &lt;li&gt;&lt;strong&gt;Normal:&lt;/strong&gt; For players seeking a balanced challenge.&lt;/li&gt;
        &lt;li&gt;&lt;strong&gt;Easy:&lt;/strong&gt; A less challenging experience, suitable for those who prefer minimal struggle.&lt;/li&gt;
        &lt;li&gt;&lt;strong&gt;Story:&lt;/strong&gt; Focus on the narrative with minimal gameplay challenge.&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/div&gt; */</tw-passagedata><tw-passagedata pid="408" name="WaitingAnimation" tags="nobr" position="975,5100" size="100,100">&lt;&lt;fadein 6s&gt;&gt;
    &lt;div class=&quot;clock-container&quot;&gt;
        &lt;div class=&quot;waiting-clock&quot;&gt;
            &lt;div class=&quot;clock-hour-hand&quot;&gt;&lt;/div&gt;
            &lt;div class=&quot;clock-min-hand&quot;&gt;&lt;/div&gt;
            &lt;div class=&quot;clock-dot&quot;&gt;&lt;/div&gt;
            &lt;div class=&quot;clock-line clock-line1&quot;&gt;&lt;/div&gt;
            &lt;div class=&quot;clock-line clock-line2&quot;&gt;&lt;/div&gt;
            &lt;div class=&quot;clock-line clock-line3&quot;&gt;&lt;/div&gt;
            &lt;div class=&quot;clock-line clock-line4&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;&lt;/fadein&gt;&gt;
    &lt;br&gt;
&lt;div class=&quot;wait-container&quot;&gt;
&lt;&lt;fadein 6s&gt;&gt;You wait. Seconds tick by, slow and steady.&lt;&lt;/fadein&gt;&gt;
&lt;br&gt;&lt;br&gt;

&lt;&lt;fadein 6s 6s&gt;&gt;Patience wears thin as the minutes pile up.&lt;&lt;/fadein&gt;&gt;
&lt;br&gt;&lt;br&gt;

&lt;&lt;fadein 6s 12s&gt;&gt;Finally, the endless waiting comes to its end.&lt;&lt;/fadein&gt;&gt;
&lt;/div&gt;
    &lt;style&gt;
.wait-container {
    text-align: center;
}

.clock-container {
    display: flex;
    justify-content: center; /* Centers the child horizontally */
    align-items: center; /* Centers the child vertically */
    height: 60vh; /* Set to the height of the viewport, adjust as needed */
}

.waiting-clock {
    width: 60%;
    aspect-ratio: 1;
    border: 3px solid #fff;
    border-radius: 50%;
    position: relative;
}
.clock-dot {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 10px;
    aspect-ratio: 1;
    background-color: #fff;
    border-radius: 50%;
}
.clock-hour-hand,
.clock-min-hand {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 3px;
    height: 20%;
    background-color: #fff;
    border-radius: 50vw;
    transform: translateX(-50%);
    transform-origin: top;
    animation: rotate 4000ms linear infinite;
}
.clock-min-hand {
    height: 30%;
    animation: clock-rotate 2000ms linear infinite;
}

@keyframes clock-rotate {
    from { transform: rotate(0); }
    to { transform: rotate(360deg); }
}

.clock-line {
    width: 3px;
    height: 7px;
    background-color: #fff;
    position: absolute;
    border-radius: 50vw;
}
.clock-line1 {
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
}
.clock-line2 {
    right: 10px;
    top: 50%;
    transform: translateY(-50%) rotate(90deg);
}
.clock-line3 {
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
}
.clock-line4 {
    left: 10px;
    top: 50%;
    transform: translateY(-50%) rotate(90deg);
}

&lt;/style&gt;</tw-passagedata><tw-passagedata pid="409" name="Widget-Picture-Widget" tags="widget nobr" position="1100,5100" size="100,100">&lt;&lt;widget &quot;picture&quot;&gt;&gt;
    &lt;&lt;set _imgSrc to $args[0]&gt;&gt;
    &lt;&lt;link [img[_imgSrc]]&gt;&gt;
        &lt;&lt;popover&gt;&gt;[img[_imgSrc]]&lt;&lt;/popover&gt;&gt;
    &lt;&lt;/link&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="410" name="Widget-SexualityMessages" tags="nobr widget" position="1225,5100" size="100,100">&lt;&lt;widget &quot;sexualitySubmissive&quot;&gt;&gt;
    &lt;&lt;set _target = $args.length &gt; 0 ? $args[0] : &quot;player&quot;&gt;&gt;
    &lt;&lt;if _target == &quot;player&quot;&gt;&gt;
        &lt;&lt;set $playerSexuality to Math.max($playerSexuality - 1, 0)&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;set _sexualityVar = _target + &quot;Sexuality&quot;&gt;&gt;
        &lt;&lt;set State.variables[_sexualityVar] to Math.max(State.variables[_sexualityVar] - 1, 0)&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;div class=&quot;sexuality-change&quot;&gt;&lt;span class=&quot;sexuality-submissive&quot;&gt;&lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;🥺&lt;/span&gt; &lt;&lt;print _target == &quot;player&quot; ? &quot;Your&quot; : _target + &quot;&#39;s&quot;&gt;&gt; submissive tendencies have grown.&lt;/span&gt;&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;sexualityDominant&quot;&gt;&gt;
    &lt;&lt;set _target = $args.length &gt; 0 ? $args[0] : &quot;player&quot;&gt;&gt;
    &lt;&lt;if _target == &quot;player&quot;&gt;&gt;
        &lt;&lt;set $playerSexuality to Math.min($playerSexuality + 1, 100)&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;set _sexualityVar = _target + &quot;Sexuality&quot;&gt;&gt;
        &lt;&lt;set State.variables[_sexualityVar] to Math.min(State.variables[_sexualityVar] + 1, 100)&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;div class=&quot;sexuality-change&quot;&gt;&lt;span class=&quot;sexuality-dominant&quot;&gt;&lt;span style=&quot;font-family: &#39;Noto Color Emoji&#39;, sans-serif;&quot;&gt;😈&lt;/span&gt; &lt;&lt;print _target == &quot;player&quot; ? &quot;Your&quot; : _target + &quot;&#39;s&quot;&gt;&gt; dominant tendencies have grown.&lt;/span&gt;&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;


/* 
or the player: &lt;&lt;sexualitySubmissive&gt;&gt; or &lt;&lt;sexualityDominant&gt;&gt;
For a specific character (e.g., &quot;ray&quot; or &quot;trix&quot;): &lt;&lt;sexualitySubmissive &quot;ray&quot;&gt;&gt; or &lt;&lt;sexualityDominant &quot;trix&quot;&gt;&gt;
*/</tw-passagedata><tw-passagedata pid="411" name="PassageDone" tags="" position="100,5225" size="100,100">/* Hiding UI */
&lt;&lt;if $rightSidebarEnabled === true&gt;&gt;
	&lt;&lt;run window.createAndShowRightSidebar()&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;run window.destroyRightSidebar()&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set _changed = $lockedUI neq $lastLockedUI&gt;&gt;
&lt;&lt;if _changed&gt;&gt;
    &lt;&lt;if $lockedUI&gt;&gt;
        &lt;&lt;run UIBar.stow()&gt;&gt;
        &lt;&lt;run MindWare.adjustForLeftSidebar()&gt;&gt;
        &lt;&lt;run window.stowRightSidebar()&gt;&gt;
        /* &lt;&lt;run $(&quot;#topbar&quot;).hide()&gt;&gt; */
        &lt;&lt;run MindWare.adjustUIBarMargins()&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;run UIBar.show().unstow()&gt;&gt;
        /* &lt;&lt;run $(&quot;#topbar&quot;).show()&gt;&gt; */
        &lt;&lt;run window.unstowRightSidebar()&gt;&gt;
        &lt;&lt;run MindWare.adjustForLeftSidebar()&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;set $lastLockedUI = $lockedUI&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;run MindWare.adjustUIBarMargins()&gt;&gt;

&lt;&lt;if $lockedUI&gt;&gt;
        &lt;&lt;run $(&quot;#topbar&quot;).hide()&gt;&gt;
        &lt;&lt;run MindWare.adjustTopPadding()&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;run $(&quot;#topbar&quot;).show()&gt;&gt;
        &lt;&lt;run MindWare.adjustTopPadding()&gt;&gt;
&lt;&lt;/if&gt;&gt;


/* SIMS */
&lt;&lt;switch $simsLevel&gt;&gt;
    &lt;&lt;case 1&gt;&gt;
        &lt;&lt;if $simsWatched &gt;= 5&gt;&gt; &lt;&lt;set $simsLevel = 2&gt;&gt; &lt;&lt;/if&gt;&gt;
    &lt;&lt;case 2&gt;&gt;
        &lt;&lt;if $simsWatched &gt;= 10&gt;&gt; &lt;&lt;set $simsLevel = 3&gt;&gt; &lt;&lt;/if&gt;&gt;
    &lt;&lt;case 3&gt;&gt;
        &lt;&lt;if $simsWatched &gt;= 15&gt;&gt; &lt;&lt;set $simsLevel = 4&gt;&gt; &lt;&lt;/if&gt;&gt;
    &lt;&lt;case 4&gt;&gt;
        &lt;&lt;if $simsWatched &gt;= 20&gt;&gt; &lt;&lt;set $simsLevel = 5&gt;&gt; &lt;&lt;/if&gt;&gt;
    &lt;&lt;case 5&gt;&gt;
        &lt;&lt;if $simsWatched &gt;= 30&gt;&gt; &lt;&lt;set $simsLevel = 6&gt;&gt; &lt;&lt;/if&gt;&gt;
&lt;&lt;/switch&gt;&gt;

/* Synapse Steady VX */
&lt;&lt;include &quot;SynapseSteadyVX&quot;&gt;&gt;

/* Rent */
&lt;&lt;set _daysInWeek = 7&gt;&gt;
&lt;&lt;if not $rentPaidThisWeek and ($totalDays - 1) % _daysInWeek is 0 and $dayOfWeek is &quot;Monday&quot;&gt;&gt;
    &lt;&lt;if $playerMoney &gt;= $rentPrice&gt;&gt;
        &lt;&lt;set $playerMoney -= $rentPrice&gt;&gt;
        &lt;&lt;set $rentPaidThisWeek = true&gt;&gt;
        &lt;&lt;set $rentPaymentCounter += 1&gt;&gt;
        &lt;&lt;notify&gt;&gt;Rent of $&lt;&lt;print $rentPrice.toLocaleString(&quot;en-US&quot;, { minimumFractionDigits: 0, maximumFractionDigits: 0 })&gt;&gt; has been deducted from your account.&lt;&lt;/notify&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;set $rentPaidThisWeek = true&gt;&gt; 
        &lt;&lt;set $missedPaymentsCount += 1&gt;&gt; 
        &lt;&lt;set $totalMissedRent += $rentPrice&gt;&gt;
        &lt;&lt;notify&gt;&gt;You do not have enough money to pay the rent.&lt;&lt;/notify&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;elseif ($totalDays - 1) % _daysInWeek is not 0 or $dayOfWeek is not &quot;Monday&quot;&gt;&gt;
    &lt;&lt;set $rentPaidThisWeek = false&gt;&gt; 
&lt;&lt;/if&gt;&gt;

/* CodeBuddy Subscription Payment and Day Tracking */
&lt;&lt;if $codeBuddyInstalled and $codeBuddyEnabled&gt;&gt;
    &lt;&lt;if $codeBuddyCheckedDay neq $totalDays&gt;&gt;  /* Check if a new day has started */
        &lt;&lt;set $codeBuddyCheckedDay to $totalDays&gt;&gt;  /* Update the last checked day */
        &lt;&lt;set $codeBuddySubscriptionCounter += 1&gt;&gt;  /* Increment only once per day */

        /* Check if it&#39;s time to pay again based on subscription counter */
        &lt;&lt;if $codeBuddySubscriptionCounter % _daysInWeek is 0&gt;&gt;
            &lt;&lt;if $playerMoney &gt;= 500&gt;&gt;
                &lt;&lt;set $playerMoney -= 500&gt;&gt;
                &lt;&lt;notify&gt;&gt;$500 has been deducted from your account for your CodeBuddy subscription.&lt;&lt;/notify&gt;&gt;
            &lt;&lt;else&gt;&gt;
                &lt;&lt;set $codeBuddyEnabled to false&gt;&gt;  /* Disable subscription due to non-payment */
                &lt;&lt;set $codeBuddyDebt to true&gt;&gt;
                &lt;&lt;notify&gt;&gt;You do not have enough money to pay for your CodeBuddy subscription. Subscription has been disabled.&lt;&lt;/notify&gt;&gt;
            &lt;&lt;/if&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;



/* ************************************************** */

/* Chapter 0 */
&lt;&lt;include &quot;Scripts-Chapter0&quot;&gt;&gt;

/********************* Chapter 1 *********************/
&lt;&lt;include &quot;Scripts-Chapter1&quot;&gt;&gt;

/* Updates */

&lt;&lt;if ndef $expenses&gt;&gt;
    &lt;&lt;set $expenses = {
        &quot;Backlog Rent&quot;: {
            &quot;value&quot;: 1000,
            &quot;status&quot;: &quot;active&quot;
        }
    }&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="412" name="DebugWindow" tags="" position="225,5225" size="100,100">&lt;&lt;textbox &quot;$debugPassageName&quot; &quot;&quot;&gt;&gt;
&lt;&lt;button &quot;Go to Passage&quot;&gt;&gt;
    &lt;&lt;if Story.has($debugPassageName)&gt;&gt;
        &lt;&lt;goto $debugPassageName&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;print &quot;Passage &#39;&quot; + $debugPassageName + &quot;&#39; does not exist.&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/button&gt;&gt;


[[Go to Start|Start]]
[[Go to Apartment|HomeBacklog]]
[[Go to Computer|Computer]]
[[Go to GamesHub|GamesHub]]
[[Go to Job Board|JobBoard]]
[[Go to Email Client|EmailClient]]
[[Go to Bruteforce Minigame|Minigame-Bruteforce]]
[[SpyingLandlordHack-server-camera-access]]
[[WorkInProgress]]
[[EndOfCurrentStory]]
[[EroSphere-SIMSPods-Selection|EroSphere-SIMSPods-Selection]]
[[EroSphere-SIMSPods|EroSphere-SIMSPods]]


&lt;&lt;link &quot;Notification&quot;&gt;&gt;
  &lt;&lt;notify&gt;&gt;Test notification&lt;&lt;/notify&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;link &quot;Complete Landlord Spying&quot;&gt;&gt;
      &lt;&lt;set $spyingLandlordFinished to true&gt;&gt;
    &lt;&lt;set $spyingLandlordExposed to false&gt;&gt;
&lt;&lt;/link&gt;&gt;

    &lt;div class=&quot;btn-wrapper&quot;&gt;
        &lt;&lt;button &quot;Accept this job&quot;&gt;&gt;
            &lt;&lt;set $tasks.push(&quot;Find spy camera feeds&quot;)&gt;&gt;
            &lt;&lt;set $introOver = true&gt;&gt;
            &lt;&lt;set $jobBoardFirstVisit = false&gt;&gt;
            &lt;&lt;set $illegalSpyingJobAccepted = true&gt;&gt;
            &lt;&lt;run setup.addNotification(&quot;You have received a new email from ConcernedTenant01.&quot;)&gt;&gt;
            &lt;&lt;run setup.changeByteBunkerJobAcceptedStatus(&quot;LandlordJob&quot;, true)&gt;&gt;
            &lt;&lt;run MindWare.addEmail (&quot;ConcernedTenant01&quot;,&quot;Info for the Landlord Job&quot;, &quot;First off, huge thanks for taking this on. You have no idea how much this means to all of us here.&quot;, &quot;Email-LandlordJobInfo&quot;)&gt;&gt;
            &lt;&lt;goto &quot;HomeBacklog&quot;&gt;&gt;
        &lt;&lt;/button&gt;&gt;
    &lt;/div&gt;

&lt;&lt;link &quot;Add Email&quot;&gt;&gt;
    &lt;&lt;run MindWare.addEmail(&quot;NewSender&quot;, &quot;New Subject&quot;, &quot;This is a new email message&quot;, &quot;NewEmailPassage&quot;)&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;link &quot;Job board already visited&quot;&gt;&gt;&lt;&lt;set $jobBoardFirstVisit = false&gt;&gt;&lt;&lt;/link&gt;&gt;


&lt;!-- StoryShare
TEST
--&gt;</tw-passagedata><tw-passagedata pid="413" name="StorySubtitle" tags="" position="350,5225" size="100,100">Infected Identity</tw-passagedata><tw-passagedata pid="414" name="StoryBanner" tags="" position="475,5225" size="100,100">&lt;img src=&quot;imgs/UI/logo-small-cropped.png&quot; width=&quot;100%&quot;&gt;</tw-passagedata><tw-passagedata pid="415" name="StoryAuthor" tags="" position="600,5225" size="100,100">by &lt;a href=&quot;https://subjunctivegames.com&quot; class=&quot;link-internal&quot;&gt;Subjunctive Games&lt;/a&gt;</tw-passagedata><tw-passagedata pid="416" name="StoryInit" tags="" position="725,5225" size="100,100">&lt;&lt;set $gameVersion = &quot;0.1.2&quot;&gt;&gt;

&lt;&lt;set $doYouKnowTheAnswer = false&gt;&gt;
&lt;&lt;set $fadeDisable = false&gt;&gt;
&lt;&lt;set $minigameSkipButtons = false&gt;&gt;

/* Quick Start */
&lt;&lt;set $skipOption to &quot;Intro&quot;&gt;&gt;

/* Inventory */
&lt;&lt;newinv $inventory&gt;&gt;

/* Navigation */
&lt;&lt;set $returnPassage to &quot;&quot;&gt;&gt;
&lt;&lt;set $navigatedFromSidebar to false&gt;&gt;
&lt;&lt;set $goOutsideGoBackPassage = &quot;HomeBacklog&quot;&gt;&gt;

/* Introduction */
&lt;&lt;set $introOver = false&gt;&gt;

/* UI */
&lt;&lt;set $lockedUI = false&gt;&gt;
&lt;&lt;set $lastLockedUI = false&gt;&gt;

/* Sidebar */
&lt;&lt;set $quickAccessBoxLeft = true&gt;&gt;
&lt;&lt;set $notificationsBoxLeft = true&gt;&gt;
&lt;&lt;set $todoBoxLeft = true&gt;&gt;
&lt;&lt;set $musicPlayerLeft = true&gt;&gt;
&lt;&lt;set $statsBoxLocation = &quot;top&quot;&gt;&gt;


/* Difficulty */
&lt;&lt;set $miniGameDifficulty = &quot;Normal&quot;&gt;&gt; /* Settings: Story, Easy, Normal */

/* Player Home */
&lt;&lt;set $playerHome = &quot;HomeBacklog&quot;&gt;&gt;

/* Money */
&lt;&lt;set $playerMoney to 1150&gt;&gt;
&lt;&lt;set $rentPrice = 1000&gt;&gt;
&lt;&lt;set $totalExpenses = $rentPrice&gt;&gt;
&lt;&lt;set $rentPaymentCounter = 0&gt;&gt;
&lt;&lt;set $missedPaymentsCount = 0&gt;&gt; 
&lt;&lt;set $totalMissedRent = 0&gt;&gt;

/* Expenses */
&lt;&lt;set $expenses = {
    &quot;Backlog Rent&quot;: {
        &quot;value&quot;: 1000,
        &quot;status&quot;: &quot;active&quot;
    }
}&gt;&gt;

/* Work */
&lt;&lt;set $currentJob = &quot;BrainFry&quot;&gt;&gt;
&lt;&lt;set $workedToday = false&gt;&gt;

/* BrainFry */
&lt;&lt;set $brainFryFirstVisit = true&gt;&gt;
&lt;&lt;set $brainFryWorkCount = 0&gt;&gt;

/* EroSphere */
&lt;&lt;set $simsCatalogue = {
    &quot;Bike Ride&quot;: {
        &quot;thumbnail&quot;: &quot;imgs/locations/erosphere/sims/SIMS-bike-ride-thumb.jpeg&quot;,
        &quot;price&quot;: 250,
        &quot;level&quot;: 1,
        &quot;isNew&quot;: true,
        &quot;unlocked&quot;: true,
    },
    &quot;Ocean Dive&quot;: {
        &quot;thumbnail&quot;: &quot;imgs/locations/erosphere/sims/SIMS-ocean-dive-thumb.jpeg&quot;,
        &quot;price&quot;: 250,
        &quot;level&quot;: 1,
        &quot;isNew&quot;: true, 
        &quot;unlocked&quot;: true, 
    },
    &quot;Nature Hike&quot;: {
        &quot;thumbnail&quot;: &quot;imgs/locations/erosphere/sims/SIMS-nature-hike-thumb.jpeg&quot;,
        &quot;price&quot;: 250,
        &quot;level&quot;: 1,
        &quot;isNew&quot;: true,
        &quot;unlocked&quot;: true,
    }
}&gt;&gt;

&lt;&lt;set $simsWatched = 0&gt;&gt;
&lt;&lt;set $simsWatchedToday = false&gt;&gt;
&lt;&lt;set $simsMoneySpent = 0&gt;&gt;
&lt;&lt;set $simsLevel = 1&gt;&gt;

/* GitGud */
&lt;&lt;set $gitGutUnlocked = false&gt;&gt;
&lt;&lt;set $gitGutIntroduced = false&gt;&gt;

/* IM */
&lt;&lt;include &quot;IMApp-CipherLynx-Messages&quot;&gt;&gt;

/* Tutorial Boxes */
&lt;&lt;set $displayHints = true&gt;&gt;

&lt;&lt;set $tutorialActionPoints = false&gt;&gt;
&lt;&lt;set $tutorialMusicPlayer = false&gt;&gt;
&lt;&lt;set $tutorialManualBruteforce = false&gt;&gt;
&lt;&lt;set $tutorialCharacterCreation = false&gt;&gt;
&lt;&lt;set $tutorialGameplaySettings = false&gt;&gt;
&lt;&lt;set $tutorialMorality = false&gt;&gt;
&lt;&lt;set $tutorialCodingMinigame = false&gt;&gt;

/* Warning Boxes */
&lt;&lt;set $warningSleep = false&gt;&gt;

/* Tip Boxes */
&lt;&lt;set $tipBuyMoreSongs = false&gt;&gt;
&lt;&lt;set $tipBuyMoreGames = false&gt;&gt;
&lt;&lt;set $tipBuyMoreChannels = false&gt;&gt;
&lt;&lt;set $tipAutomateCoding = false&gt;&gt;

/* Time Cycle */
&lt;&lt;set $totalDays = 0&gt;&gt;
&lt;&lt;set $chapter1Days = 0&gt;&gt;
&lt;&lt;set $chapter2Days = 0&gt;&gt;
&lt;&lt;set $chapter3Days = 0&gt;&gt;
&lt;&lt;set $chapter4Days = 0&gt;&gt;
&lt;&lt;set $chapter5Days = 0&gt;&gt;
&lt;&lt;set $chapter6Days = 0&gt;&gt;
&lt;&lt;set $chapter7Days = 0&gt;&gt;
&lt;&lt;set $chapter8Days = 0&gt;&gt;
&lt;&lt;set $chapter9Days = 0&gt;&gt;
&lt;&lt;set $chapter10Days = 0&gt;&gt;
&lt;&lt;set $dayOfWeek = &quot;Sunday&quot;&gt;&gt;
&lt;&lt;set $lastCheckedDay = 0&gt;&gt;

/* Action Points */
&lt;&lt;set $actionPoints = 5&gt;&gt;
&lt;&lt;set $actionPointsMax = 5&gt;&gt;

/* Synapse Steady VX */
&lt;&lt;include &quot;SteadySynapseVX-Variables&quot;&gt;&gt;

/* Player Character */
&lt;&lt;set $playerName to &quot;John&quot;&gt;&gt;
&lt;&lt;set $playerLastName to &quot;Doe&quot;&gt;&gt;
&lt;&lt;set $playerNickname to &quot;Ghost&quot;&gt;&gt;
&lt;&lt;set $playerAvatar = [
    &quot;imgs/characters/player/playerAvatar0.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar1.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar2.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar3.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar4.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar5.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar6.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar7.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar8.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar9.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar10.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar11.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar12.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar13.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar14.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar15.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar16.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar17.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar18.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar19.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar20.jpg&quot;,
    &quot;imgs/characters/player/playerAvatar21.jpg&quot;
]&gt;&gt;
&lt;&lt;set $playerAvatarSelected = 0&gt;&gt;  

&lt;&lt;set $playerMorality to 50&gt;&gt;
&lt;&lt;set $playerGender to 100&gt;&gt;

/* Sexuality */
&lt;&lt;set $playerSexuality to 50&gt;&gt;
&lt;&lt;set $femaleEncounters to 0&gt;&gt;
&lt;&lt;set $maleEncounters to 0&gt;&gt;
&lt;&lt;set $transEncounters to 0&gt;&gt;
&lt;&lt;set $submissiveActs to 0&gt;&gt;
&lt;&lt;set $dominantActs to 0&gt;&gt;

&lt;&lt;set $playerBody to &quot;Masculine&quot;&gt;&gt;
/* 
Male -&gt; Masculine
Male-Aligned -&gt; Masculine-Leaning
Androgynous -&gt; Androgynous
Female-Aligned -&gt; Feminine-Leaning
Female -&gt; Feminine
*/
&lt;&lt;set $playerBreast to &quot;Defined&quot;&gt;&gt;
/* 
Male -&gt; Defined
Male-Aligned -&gt; Supple
Androgynous -&gt; Budding
Female-Aligned -&gt; Small
Female -&gt; Average

EXTRA 1: Large 
EXTRA 2: Huge 
*/
&lt;&lt;set $playerButtocks to &quot;Firm&quot;&gt;&gt;
/* 
Male -&gt; Firm
Male-Aligned -&gt; Soft
Androgynous -&gt; Rounded
Female-Aligned -&gt; Plush
Female -&gt; Average

EXTRA 1: Large
EXTRA 2: Huge
*/
&lt;&lt;set $playerGenitals to &quot;Penis (Above-Average)&quot;&gt;&gt; 
/* 
Male -&gt; Penis (Above-Average)
Male-Aligned -&gt; Penis (Average)
Androgynous -&gt; Penis (Below-Average)
Female-Aligned -&gt; Penis (Tiny)
Female -&gt; Vagina
*/

/* Trix */
&lt;&lt;include &quot;CharacterTrix&quot;&gt;&gt;

/* Ray */
&lt;&lt;include &quot;CharacterRay&quot;&gt;&gt;

/* Drake */
&lt;&lt;include &quot;CharacterDrake&quot;&gt;&gt;

/* CipherLynx */
&lt;&lt;include &quot;CharacterCipher&quot;&gt;&gt;

/* Yuki */
&lt;&lt;include &quot;CharacterYuki&quot;&gt;&gt;

/* Xavier */
&lt;&lt;include &quot;CharacterXavier&quot;&gt;&gt;

/* Tasks and Notes */
&lt;&lt;set $tasks to []&gt;&gt;

&lt;&lt;set $notes = $notes or []&gt;&gt;

/* PC */
&lt;&lt;set $notificationsPC = []&gt;&gt;
&lt;&lt;set $notificationCountPC = 0&gt;&gt;

&lt;&lt;set $playerPcName = &quot;MyComputer&quot;&gt;&gt;
&lt;&lt;set $playerPcPerformance = 1.32&gt;&gt;

/* Wallpapers */
&lt;&lt;set $activeWallpaper = &quot;cyberpunk1&quot;&gt;&gt;
&lt;&lt;set $availableWallpapers = [&quot;cyberpunk1&quot;, &quot;cyberpunk2&quot;, &quot;cyberpunk3&quot;, &quot;cyberpunk4&quot;, &quot;cyberpunk5&quot;]&gt;&gt;
&lt;&lt;set $babesWallpaperPurchased = false&gt;&gt;
&lt;&lt;set $nsftWallpaper1Purchased = false&gt;&gt;
&lt;&lt;set $fastCarsWallpaperPurchased = false&gt;&gt;

/* Research */
&lt;&lt;set $researchMaterial = []&gt;&gt;
&lt;&lt;for _i = 1; _i &lt;= 66; _i++&gt;&gt;
    &lt;&lt;set $researchMaterial.push(&quot;research&quot; + _i)&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;set $unlockedImages = [&quot;research1&quot;, &quot;research2&quot;, &quot;research3&quot;, &quot;research4&quot;, &quot;research5&quot;, &quot;research6&quot;, &quot;research7&quot;]&gt;&gt;

&lt;&lt;set _tempMaterial = []&gt;&gt;

&lt;&lt;for _i = 0; _i &lt; $researchMaterial.length; _i++&gt;&gt;
    &lt;&lt;if $unlockedImages.indexOf($researchMaterial[_i]) === -1&gt;&gt;
        &lt;&lt;set _tempMaterial.push($researchMaterial[_i])&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;set $researchMaterial = _tempMaterial&gt;&gt;

&lt;&lt;run MindWare.shuffleArray(State.variables.researchMaterial)&gt;&gt;

/* Unlock research images
&lt;&lt;if $unlockedImages.length &lt; $researchMaterial.length&gt;&gt;
    &lt;&lt;set $unlockedImages.push($researchMaterial[$unlockedImages.length])&gt;&gt;
&lt;&lt;/if&gt;&gt;
 */

/* TV Channels */ 
&lt;&lt;set $watchingTV = false&gt;&gt;

&lt;&lt;set $adultChannelPurchased = false&gt;&gt;
&lt;&lt;set $memesChannelPurchased = false&gt;&gt;
&lt;&lt;set $pornChannelPurchased = false&gt;&gt;

/* Set up sample channels and GIFs */
&lt;&lt;set $weatherGifsPlaying&gt;&gt;
&lt;&lt;set $weatherGifs to [&quot;imgs/TV/weather1.gif&quot;, &quot;imgs/TV/weather2.gif&quot;, &quot;imgs/TV/weather3.gif&quot;]&gt;&gt;

&lt;&lt;set $newsGifsPlaying&gt;&gt;
&lt;&lt;set $newsGifs to [&quot;imgs/TV/news1.gif&quot;, &quot;imgs/TV/news2.gif&quot;, &quot;imgs/TV/news3.gif&quot;, &quot;imgs/TV/news4.gif&quot;, &quot;imgs/TV/news5.gif&quot;, &quot;imgs/TV/news6.gif&quot;, &quot;imgs/TV/news7.gif&quot;, &quot;imgs/TV/news8.gif&quot;, &quot;imgs/TV/news9.gif&quot;, &quot;imgs/TV/news10.gif&quot;]&gt;&gt;

&lt;&lt;set $comedyGifsPlaying&gt;&gt;
&lt;&lt;set $comedyGifs to [&quot;imgs/TV/comedy1.gif&quot;, &quot;imgs/TV/comedy2.gif&quot;, &quot;imgs/TV/comedy3.gif&quot;]&gt;&gt;

&lt;&lt;set $adultGifsPlaying&gt;&gt;
&lt;&lt;set $adultGifs to [
&quot;imgs/TV/romance1.gif&quot;,
&quot;imgs/TV/romance2.gif&quot;,
&quot;imgs/TV/romance3.gif&quot;,
&quot;imgs/TV/romance4.gif&quot;,
&quot;imgs/TV/romance5.gif&quot;,
&quot;imgs/TV/romance6.gif&quot;,
&quot;imgs/TV/romance7.gif&quot;,
&quot;imgs/TV/romance8.gif&quot;,
&quot;imgs/TV/romance9.gif&quot;,
&quot;imgs/TV/romance10.gif&quot;
]&gt;&gt;

/* Games */
&lt;&lt;set $snakeGamePurchased = false&gt;&gt; 
&lt;&lt;set $breakoutGamePurchased = false&gt;&gt; 
&lt;&lt;set $matchTwoLatexGamePurchased = false&gt;&gt; 

/* Songs */
&lt;&lt;set $mySongs = [
    { title: &quot;Lifelike&quot;, artist: &quot;AlexiAction&quot;, filename: &quot;audio/songs/lifelike-126735.mp3&quot; },
    { title: &quot;Password Infinity&quot;, artist: &quot;Evgeny Bardyuzha&quot;, filename: &quot;audio/songs/password-infinity-123276.mp3&quot; },
    { title: &quot;Emerald&quot;, artist: &quot;Eidunn&quot;, filename: &quot;audio/songs/emerald-21054.mp3&quot; },
    { title: &quot;Cyber Attack&quot;, artist: &quot;AlexiAction&quot;, filename: &quot;audio/songs/cyber-attack-110475.mp3&quot; },
    { title: &quot;Shadowy Figure&quot;, artist: &quot;SoundCarousel&quot;, filename: &quot;audio/songs/shadowy-figure-116963.mp3&quot; },
    { title: &quot;Data Breach&quot;, artist: &quot;FASSounds&quot;, filename: &quot;audio/songs/data-breach-112775.mp3&quot; },
    { title: &quot;Gradient&quot;, artist: &quot;Execore&quot;, filename: &quot;audio/songs/gradient-148888.mp3&quot; },
    { title: &quot;Blast&quot;, artist: &quot;AlexiAction&quot;, filename: &quot;audio/songs/blast-138451.mp3&quot; }
]&gt;&gt;
/*    
{ title: &quot;Cyber War&quot;, artist: &quot;AlexiAction&quot;, filename: &quot;audio/songs/cyber-war-126419.mp3&quot; },
{ title: &quot;Flashes&quot;, artist: &quot;Mezhdunami&quot;, filename: &quot;audio/songs/mezhdunami-flashes-95436.mp3&quot; },
{ title: &quot;Evasion&quot;, artist: &quot;Evgeny Bardyuzha&quot;, filename: &quot;audio/songs/evasion-123274.mp3&quot; },
{ title: &quot;Cyber Race&quot;, artist: &quot;FASSounds&quot;, filename: &quot;audio/songs/cyber-race-112774.mp3&quot; },
{ title: &quot;Midnight&quot;, artist: &quot;AlexiAction&quot;, filename: &quot;audio/songs/midnight-138704.mp3&quot; },
{ title: &quot;Insurrection&quot;, artist: &quot;AleXZavesa&quot;, filename: &quot;audio/songs/insurrection-10941.mp3&quot; },
*/

&lt;&lt;set $cyberWarSongPurchased = false&gt;&gt;
&lt;&lt;set $flashesSongPurchased = false&gt;&gt;
&lt;&lt;set $evasionSongPurchased = false&gt;&gt;
&lt;&lt;set $cyberRaceSongPurchased = false&gt;&gt;
&lt;&lt;set $midnightSongPurchased = false&gt;&gt;
&lt;&lt;set $insurrectionSongPurchased = false&gt;&gt;

/* Job Board */
&lt;&lt;set $jobBoardFirstVisit = true&gt;&gt;

&lt;&lt;set $illegalSpyingJobVisible = true&gt;&gt;
&lt;&lt;set $illegalSpyingJobAccepted = false&gt;&gt;
&lt;&lt;set $sqlTroubleshootJobVisible = true&gt;&gt;
&lt;&lt;set $sqlTroubleshootJobAccepted = true&gt;&gt;
&lt;&lt;set $crackEncryptionJobVisible = true&gt;&gt;
&lt;&lt;set $crackEncryptionJobAccepted = true&gt;&gt;
&lt;&lt;set $photoEditJobVisible = true&gt;&gt;
&lt;&lt;set $photoEditJobAccepted = true&gt;&gt;

/* Email Client - replaced with a script passage in emailclient.twee file
&lt;&lt;set $emails = [
    {
        sent: true,
        viewed: false,
        from: &quot;Unknown&quot;,
        subject: &quot;Urgent Message&quot;,
        preview: &quot;This could be urgent, you better take a look...&quot;,
        link: &quot;NewEmail&quot;
    },
    {
        sent: true,
        viewed: true,
        from: &quot;CipherLynx&quot;,
        subject: &quot;New Gig&quot;,
        preview: &quot;Hey, Been a while since our last sync-up. All good with you?&quot;,
        link: &quot;OldEmail&quot;
    }
    // ... additional emails
]&gt;&gt;
*/

/* Trace Upgrade */
&lt;&lt;set $traceUpgrade1 to false&gt;&gt; /* 10% more time */
&lt;&lt;set $traceUpgrade2 to false&gt;&gt; /* 25% more time */
&lt;&lt;set $traceUpgrade3 to false&gt;&gt; /* 50% more time */

/* Bruteforce Minigame */
&lt;&lt;set $selectedPasswordLength to 6&gt;&gt;
&lt;&lt;set $numberOfPasswordsNeeded to 5&gt;&gt;
&lt;&lt;set $bruteforceBaseTraceTime to 15&gt;&gt; // Base time in seconds
&lt;&lt;set $nextPassageAfterSuccessBruteforceGame to &quot;&quot;&gt;&gt;
&lt;&lt;set $nextPassageAfterFailBruteforceGame to &quot;HackTarget&quot;&gt;&gt;

/* Spying Landlord Mission
&lt;&lt;set $spyingLandlordHackSuccess to false&gt;&gt;
&lt;&lt;set $spyingLandlordExposed to false&gt;&gt;
&lt;&lt;set $spyingLandlordFinished = false&gt;&gt; */

/* Black Variables */
&lt;&lt;set $blankVariable1 to &quot;&quot;&gt;&gt;
&lt;&lt;set $blankVariable2 to &quot;&quot;&gt;&gt;
&lt;&lt;set $blankVariable3 to &quot;&quot;&gt;&gt;
&lt;&lt;set $blankVariable4 to &quot;&quot;&gt;&gt;
&lt;&lt;set $blankVariable5 to &quot;&quot;&gt;&gt;
&lt;&lt;set $blankVariable6 to &quot;&quot;&gt;&gt;
&lt;&lt;set $blankVariable7 to &quot;&quot;&gt;&gt;
&lt;&lt;set $blankVariable8 to &quot;&quot;&gt;&gt;
&lt;&lt;set $blankVariable9 to &quot;&quot;&gt;&gt;
&lt;&lt;set $blankVariable10 to &quot;&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="417" name="Start" tags="" position="850,5225" size="100,100">&lt;&lt;include &quot;StartScreen&quot;&gt;&gt;
&lt;&lt;nobr&gt;&gt;
&lt;&lt;script&gt;&gt;
function getMobileOperatingSystem() {
    var userAgent = navigator.userAgent || navigator.vendor || window.opera;

    if (/windows phone/i.test(userAgent)) {
        return &quot;Windows Phone&quot;;
    }

    if (/android/i.test(userAgent)) {
        return &quot;Android&quot;;
    }

    if (/iPad|iPhone|iPod/.test(userAgent) &amp;&amp; !window.MSStream) {
        return &quot;iOS&quot;;
    }

    return &quot;unknown&quot;;
}

var os = getMobileOperatingSystem();

if (os === &quot;iOS&quot; || os === &quot;Android&quot; || os === &quot;Windows Phone&quot;) {
    alert(&quot;This game is not optimized for mobile devices.&quot;);
}
&lt;&lt;/script&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata></tw-storydata>
	<script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS */
	if(document.documentElement.getAttribute("data-init")==="loading"){(function(window,document,jQuery,undefined){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var errorPrologRegExp=/^(?:(?:uncaught\s+(?:exception:\s+)?)?\w*(?:error|exception|_err):\s+)+/i,Alert=function(){function mesg(where,error,isFatal,isUncaught){var mesg="Error",nice="A".concat(isFatal?" fatal":"n"," error has occurred.");nice+=isFatal?" Aborting.":" You may be able to continue, but some parts may not work properly.";var isObject=null!==error&&"object"===_typeof(error),what=(isObject&&"message"in error?String(error.message).replace(errorPrologRegExp,""):String(error)).trim()||"unknown error";null!=where&&(mesg+=" [".concat(where,"]")),mesg+=": ".concat(what,"."),isObject&&"stack"in error&&(mesg+="\n\nStack Trace:\n".concat(error.stack)),mesg&&(nice+="\n\n".concat(mesg)),isUncaught||console[isFatal?"error":"warn"](mesg),window.alert(nice)}var origOnError;return origOnError=window.onerror,window.onerror=function(what,source,lineNum,colNum,error){"complete"===document.readyState?mesg(null,null!=error?error:what,!1,!0):(mesg(null,null!=error?error:what,!0,!0),window.onerror=origOnError,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))},Object.freeze(Object.defineProperties({},{error:{value:function(where,error){mesg(where,error)}},fatal:{value:function(where,error){mesg(where,error,!0)}}}))}(),Patterns=(wsMap=new Map([[" ","\\u0020"],["\f","\\f"],["\n","\\n"],["\r","\\r"],["\t","\\t"],["\v","\\v"],[" ","\\u00a0"],[" ","\\u1680"],["᠎","\\u180e"],[" ","\\u2000"],[" ","\\u2001"],[" ","\\u2002"],[" ","\\u2003"],[" ","\\u2004"],[" ","\\u2005"],[" ","\\u2006"],[" ","\\u2007"],[" ","\\u2008"],[" ","\\u2009"],[" ","\\u200a"],["\u2028","\\u2028"],["\u2029","\\u2029"],[" ","\\u202f"],[" ","\\u205f"],["　","\\u3000"],["\ufeff","\\ufeff"]]),wsRe=/^\s$/,missing="",wsMap.forEach((function(pat,char){wsRe.test(char)||(missing+=pat)})),space=missing?"[\\s".concat(missing,"]"):"\\s",spaceNoTerminator="[\\u0020\\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",notSpace="\\s"===space?"\\S":space.replace(/^\[/,"[^"),anyChar="(?:.|".concat("[\\n\\r\\u2028\\u2029]",")"),anyLetter="[0-9A-Z_a-z\\-\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]",anyLetterStrict=anyLetter.replace("\\-",""),identifier="".concat("[$A-Z_a-z]").concat("[$0-9A-Z_a-z]","*"),variable="[$_]"+identifier,htmlTagName="[A-Za-z](?:".concat(cENChar="(?:[\\x2D.0-9A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])","*-").concat(cENChar,"*|[0-9A-Za-z]*)"),twStyle="(".concat(anyLetter,"+)\\(([^\\)\\|\\n]+)\\):"),cssStyle="".concat(spaceNoTerminator,"*(").concat(anyLetter,"+)").concat(spaceNoTerminator,"*:([^;\\|\\n]+);"),idOrClass="".concat(spaceNoTerminator,"*((?:").concat("[#.]").concat(anyLetter,"+").concat(spaceNoTerminator,"*)+);"),inlineCss="".concat(twStyle,"|").concat(cssStyle,"|").concat(idOrClass),Object.freeze({space:space,spaceNoTerminator:spaceNoTerminator,lineTerminator:"[\\n\\r\\u2028\\u2029]",notSpace:notSpace,anyChar:anyChar,anyLetter:anyLetter,anyLetterStrict:anyLetterStrict,identifierFirstChar:"[$A-Z_a-z]",identifierNextChar:"[$0-9A-Z_a-z]",identifier:identifier,variableSigil:"[$_]",variable:variable,macroName:"[A-Za-z][\\w-]*|[=-]",templateName:"[A-Za-z][\\w-]*",htmlTagName:htmlTagName,cssIdOrClassSigil:"[#.]",cssImage:"\\[[<>]?[Ii][Mm][Gg]\\[(?:\\s|\\S)*?\\]\\]+",inlineCss:inlineCss,url:"(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+"})),wsMap,wsRe,missing,cENChar,twStyle,cssStyle,idOrClass,space,spaceNoTerminator,notSpace,anyChar,anyLetter,anyLetterStrict,identifier,variable,htmlTagName,inlineCss;!function(){var startWSRe,endWSRe,_trimString=(startWSRe=new RegExp("^".concat(Patterns.space).concat(Patterns.space,"*")),endWSRe=new RegExp("".concat(Patterns.space).concat(Patterns.space,"*$")),function(str,where){var val=String(str);if(!val)return val;switch(where){case"start":return startWSRe.test(val)?val.replace(startWSRe,""):val;case"end":return endWSRe.test(val)?val.replace(endWSRe,""):val;default:throw new Error('_trimString called with incorrect where parameter value: "'.concat(where,'"'))}});function _createPadString(length,padding){var targetLength=Number.parseInt(length,10)||0;if(targetLength<1)return"";var padString=void 0===padding?"":String(padding);for(""===padString&&(padString=" ");padString.length<targetLength;){var curPadLength=padString.length,remainingLength=targetLength-curPadLength;padString+=curPadLength>remainingLength?padString.slice(0,remainingLength):padString}return padString.length>targetLength&&(padString=padString.slice(0,targetLength)),padString}Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,writable:!0,value:function flat(){if(null==this)throw new TypeError("Array.prototype.flat called on null or undefined");var depth=0===arguments.length?1:Number(arguments[0])||0;return depth<1?Array.prototype.slice.call(this):Array.prototype.reduce.call(this,(function(acc,cur){return cur instanceof Array?acc.push.apply(acc,_toConsumableArray(flat.call(cur,depth-1))):acc.push(cur),acc}),[])}}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatMap called on null or undefined");return Array.prototype.map.apply(this,arguments).flat()}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var length=this.length>>>0;if(0===length)return!1;var needle=arguments[0],i=Number(arguments[1])||0;for(i<0&&(i=Math.max(0,length+i));i<length;++i){var value=this[i];if(value===needle||value!=value&&needle!=needle)return!0}return!1}}),Object.entries||Object.defineProperty(Object,"entries",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.entries object parameter must be an object");return Object.keys(obj).map((function(key){return[key,obj[key]]}))}}),Object.fromEntries||Object.defineProperty(Object,"fromEntries",{configurable:!0,writable:!0,value:function(iter){return Array.from(iter).reduce((function(acc,pair){if(Object(pair)!==pair)throw new TypeError("Object.fromEntries iterable parameter must yield objects");return pair[0]in acc?Object.defineProperty(acc,pair[0],{configurable:!0,enumerable:!0,writable:!0,value:pair[1]}):acc[pair[0]]=pair[1],acc}),{})}}),Object.getOwnPropertyDescriptors||Object.defineProperty(Object,"getOwnPropertyDescriptors",{configurable:!0,writable:!0,value:function(obj){if(null==obj)throw new TypeError("Object.getOwnPropertyDescriptors object parameter is null or undefined");var O=Object(obj);return Reflect.ownKeys(O).reduce((function(acc,key){var desc=Object.getOwnPropertyDescriptor(O,key);return void 0!==desc&&(key in acc?Object.defineProperty(acc,key,{configurable:!0,enumerable:!0,writable:!0,value:desc}):acc[key]=desc),acc}),{})}}),Object.values||Object.defineProperty(Object,"values",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.values object parameter must be an object");return Object.keys(obj).map((function(key){return obj[key]}))}}),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padStart called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:_createPadString(targetLength-baseLength,padding)+baseString}}),String.prototype.padEnd||Object.defineProperty(String.prototype,"padEnd",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padEnd called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:baseString+_createPadString(targetLength-baseLength,padding)}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return _trimString(this,"end")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return _trimString(this,"end")}})}(),function(){var _nativeMathRandom=Math.random,_regExpMetaCharsRe,_hasRegExpMetaCharsRe,_formatRegExp,_hasFormatRegExp;function _random(){var min,max;switch(arguments.length){case 0:throw new Error("_random called with insufficient parameters");case 1:min=0,max=arguments[0];break;default:min=arguments[0],max=arguments[1]}if(min>max){var _ref=[max,min];min=_ref[0],max=_ref[1]}return Math.floor(_nativeMathRandom()*(max-min+1))+min}function _randomIndex(length,boundsArgs){var min,max;switch(boundsArgs.length){case 1:min=0,max=length-1;break;case 2:min=0,max=Math.trunc(boundsArgs[1]);break;default:min=Math.trunc(boundsArgs[1]),max=Math.trunc(boundsArgs[2])}return Number.isNaN(min)?min=0:!Number.isFinite(min)||min>=length?min=length-1:min<0&&(min=length+min)<0&&(min=0),Number.isNaN(max)?max=0:(!Number.isFinite(max)||max>=length||max<0&&(max=length+max)<0)&&(max=length-1),_random(min,max)}function _getCodePointStartAndEnd(str,pos){var code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};if(code<55296||code>57343)return{char:str.charAt(pos),start:pos,end:pos};if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)throw new Error("high surrogate without trailing low surrogate");var nextCode=str.charCodeAt(nextPos);if(nextCode<56320||nextCode>57343)throw new Error("high surrogate without trailing low surrogate");return{char:str.charAt(pos)+str.charAt(nextPos),start:pos,end:nextPos}}if(0===pos)throw new Error("low surrogate without leading high surrogate");var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);if(prevCode<55296||prevCode>56319)throw new Error("low surrogate without leading high surrogate");return{char:str.charAt(prevPos)+str.charAt(pos),start:prevPos,end:pos}}Object.defineProperty(Array,"random",{configurable:!0,writable:!0,value:function(array){if("object"!==_typeof(array)||null===array||!Object.prototype.hasOwnProperty.call(array,"length"))throw new TypeError("Array.random array parameter must be an array or array-lke object");var length=array.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments,1));return array[index]}}}),Object.defineProperty(Array.prototype,"concatUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.concatUnique called on null or undefined");var result=Array.from(this);if(0===arguments.length)return result;var items=Array.prototype.reduce.call(arguments,(function(prev,cur){return prev.concat(cur)}),[]),addSize=items.length;if(0===addSize)return result;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=items[i];-1===indexOf.call(result,value)&&push.call(result,value)}return result}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var indexOf=Array.prototype.indexOf,needle=arguments[0],pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,++pos;return count}}),Object.defineProperty(Array.prototype,"countWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.countWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.countWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return 0;for(var count=0,i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&++count;return count}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.delete called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var needles=Array.prototype.concat.apply([],arguments),needlesLength=needles.length,indices=[],i=0;i<length;++i)for(var value=this[i],j=0;j<needlesLength;++j){var needle=needles[j];if(value===needle||value!=value&&needle!=needle){indices.push(i);break}}for(var result=[],_i=0,iend=indices.length;_i<iend;++_i)result[_i]=this[indices[_i]];for(var splice=Array.prototype.splice,_i2=indices.length-1;_i2>=0;--_i2)splice.call(this,indices[_i2],1);return result}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,cpyIndices=_toConsumableArray(new Set(Array.prototype.concat.apply([],arguments).map((function(x){return x<0?Math.max(0,length+x):x}))).values()),delIndices=_toConsumableArray(cpyIndices).sort((function(a,b){return b-a})),result=[],i=0,iend=cpyIndices.length;i<iend;++i)result[i]=this[cpyIndices[i]];for(var _i3=0,_iend=delIndices.length;_i3<_iend;++_i3)splice.call(this,delIndices[_i3],1);return result}}),Object.defineProperty(Array.prototype,"deleteWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.deleteWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.deleteWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,indices=[],result=[],i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&(result.push(this[i]),indices.push(i));for(var _i4=indices.length-1;_i4>=0;--_i4)splice.call(this,indices[_i4],1);return result}}),Object.defineProperty(Array.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.first called on null or undefined");if(0!==this.length>>>0)return this[0]}}),Object.defineProperty(Array.prototype,"includesAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAll.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(!Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"includesAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAny.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.last called on null or undefined");var length=this.length>>>0;if(0!==length)return this[length-1]}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments));return Array.prototype.splice.call(this,index,1)[0]}}}),Object.defineProperty(Array.prototype,"pluckMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.pluckMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.pluckMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var splice=Array.prototype.splice,result=[],max=length-1;do{result.push(splice.call(this,_random(0,max--),1)[0])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"pushUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pushUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&push.call(this,value)}return this.length>>>0}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments));return this[index]}}}),Object.defineProperty(Array.prototype,"randomMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.randomMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.randomMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var picked=new Map,result=[],max=length-1;do{var i=void 0;do{i=_random(0,max)}while(picked.has(i));picked.set(i,!0),result.push(this[i])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var length=this.length>>>0;if(0===length)return this;for(var i=length-1;i>0;--i){var j=Math.floor(_nativeMathRandom()*(i+1));if(i!==j){var swap=this[i];this[i]=this[j],this[j]=swap}}return this}}),Object.defineProperty(Array.prototype,"unshiftUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.unshiftUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,unshift=Array.prototype.unshift,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&unshift.call(this,value)}return this.length>>>0}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var slice=Array.prototype.slice,fn=this,bound=slice.call(arguments,0);return function(){for(var applied=[],argc=0,i=0;i<bound.length;++i)applied.push(bound[i]===undefined?arguments[argc++]:bound[i]);return fn.apply(this,applied.concat(slice.call(arguments,argc)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function(num,min,max){var value=Number(num);return Number.isNaN(value)?NaN:value.clamp(min,max)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(num){return 1-(Math.cos(Number(num)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters");var min=Number(arguments[0]),max=Number(arguments[1]);if(min>max){var _ref2=[max,min];min=_ref2[0],max=_ref2[1]}return Math.min(Math.max(this,min),max)}}),RegExp.escape||(_regExpMetaCharsRe=/[\\^$*+?.()|[\]{}]/g,_hasRegExpMetaCharsRe=new RegExp(_regExpMetaCharsRe.source),Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(str){var val=String(str);return val&&_hasRegExpMetaCharsRe.test(val)?val.replace(_regExpMetaCharsRe,"\\$&"):val}})),_formatRegExp=/{(\d+)(?:,([+-]?\d+))?}/g,_hasFormatRegExp=new RegExp(_formatRegExp.source),Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(format){function padString(str,align,pad){if(!align)return str;var plen=Math.abs(align)-str.length;if(plen<1)return str;var padding=String(pad).repeat(plen);return align<0?str+padding:padding+str}if(arguments.length<2)return 0===arguments.length?"":format;var args=2===arguments.length&&Array.isArray(arguments[1])?_toConsumableArray(arguments[1]):Array.prototype.slice.call(arguments,1);return 0===args.length?format:_hasFormatRegExp.test(format)?(_formatRegExp.lastIndex=0,format.replace(_formatRegExp,(function(match,index,align){var retval=args[index];if(null==retval)return"";for(;"function"==typeof retval;)retval=retval();switch(_typeof(retval)){case"string":break;case"object":retval=JSON.stringify(retval);break;default:retval=String(retval)}return padString(retval,align?Number.parseInt(align,10):0," ")}))):format}}),Object.defineProperty(String.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.contains called on null or undefined");return-1!==String.prototype.indexOf.apply(this,arguments)}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var needle=String(arguments[0]||"");if(""===needle)return 0;for(var indexOf=String.prototype.indexOf,step=needle.length,pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,pos+=step;return count}}),Object.defineProperty(String.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.first called on null or undefined");return _getCodePointStartAndEnd(String(this),0).char}}),Object.defineProperty(String.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.last called on null or undefined");var str=String(this);return _getCodePointStartAndEnd(str,str.length-1).char}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(startAt,delCount,replacement){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var length=this.length>>>0;if(0===length)return"";var start=Number(startAt);Number.isSafeInteger(start)?start<0&&(start+=length)<0&&(start=0):start=0,start>length&&(start=length);var count=Number(delCount);(!Number.isSafeInteger(count)||count<0)&&(count=0);var res=this.slice(0,start);return void 0!==replacement&&(res+=replacement),start+count<length&&(res+=this.slice(start+count)),res}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"toLocaleUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd3=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd3.char,end=_getCodePointStartAnd3.end;return-1===end?"":char.toLocaleUpperCase()+str.slice(end+1)}}),Object.defineProperty(String.prototype,"toUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd4=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd4.char,end=_getCodePointStartAnd4.end;return-1===end?"":char.toUpperCase()+str.slice(end+1)}}),Object.defineProperty(Date.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:date)",this.toISOString()]}}),Object.defineProperty(Function.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)","(".concat(this.toString(),")")]}}),Object.defineProperty(Map.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:map)",_toConsumableArray(this)]}}),Object.defineProperty(RegExp.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)",this.toString()]}}),Object.defineProperty(Set.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:set)",_toConsumableArray(this)]}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(code,data){if("string"!=typeof code)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return["(revive:eval)",[code,data]]}}),Object.defineProperty(JSON,"_real_stringify",{value:JSON.stringify}),Object.defineProperty(JSON,"stringify",{configurable:!0,writable:!0,value:function(_value,replacer,space){return JSON._real_stringify(_value,(function(key,val){var value=val;if("function"==typeof replacer)try{value=replacer(key,value)}catch(ex){}return void 0===value&&(value=["(revive:eval)","undefined"]),value}),space)}}),Object.defineProperty(JSON,"_real_parse",{value:JSON.parse}),Object.defineProperty(JSON,"parse",{configurable:!0,writable:!0,value:function value(text,reviver){return JSON._real_parse(text,(function(key,val){var value=val;if(Array.isArray(value)&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":try{if(Array.isArray(value[1])){var $ReviveData$=value[1][1];value=eval(value[1][0])}else value=eval(value[1])}catch(ex){}}else if("string"==typeof value&&"@@revive@@"===value.slice(0,10))try{value=eval(value.slice(10))}catch(ex){}if("function"==typeof reviver)try{value=reviver(key,value)}catch(ex){}return value}))}}),Object.defineProperty(Array.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.contains called on null or undefined");return Array.prototype.includes.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAll called on null or undefined");return Array.prototype.includesAll.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAny called on null or undefined");return Array.prototype.includesAny.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"flatten",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatten called on null or undefined");return Array.prototype.flat.call(this,1/0)}}),Object.defineProperty(String.prototype,"readBracketedList",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.readBracketedList called on null or undefined");for(var match,re=new RegExp("(?:\\[\\[((?:\\s|\\S)*?)\\]\\])|([^\"'\\s]\\S*)","gm"),names=[];null!==(match=re.exec(this));)match[1]?names.push(match[1]):match[2]&&names.push(match[2]);return names}})}();var Browser=(userAgent=navigator.userAgent.toLowerCase(),winPhone=userAgent.includes("windows phone"),isMobile=Object.freeze({Android:!winPhone&&userAgent.includes("android"),BlackBerry:/blackberry|bb10/.test(userAgent),iOS:!winPhone&&/ip(?:hone|ad|od)/.test(userAgent),Opera:!winPhone&&("object"===_typeof(window.operamini)||userAgent.includes("opera mini")),Windows:winPhone||/iemobile|wpdesktop/.test(userAgent),any:function(){return isMobile.Android||isMobile.BlackBerry||isMobile.iOS||isMobile.Opera||isMobile.Windows}}),isGecko=!isMobile.Windows&&!/khtml|trident|edge/.test(userAgent)&&userAgent.includes("gecko"),isIE=!userAgent.includes("opera")&&/msie|trident/.test(userAgent),ieVersion=isIE?(ver=/(?:msie\s+|rv:)(\d+\.\d)/.exec(userAgent))?Number(ver[1]):0:null,isOpera=userAgent.includes("opera")||userAgent.includes(" opr/"),operaVersion=isOpera?function(){var ver=new RegExp("".concat(/khtml|chrome/.test(userAgent)?"opr":"version","\\/(\\d+\\.\\d+)")).exec(userAgent);return ver?Number(ver[1]):0}():null,isVivaldi=userAgent.includes("vivaldi"),Object.freeze({userAgent:userAgent,isMobile:isMobile,isGecko:isGecko,isIE:isIE,ieVersion:ieVersion,isOpera:isOpera,operaVersion:operaVersion,isVivaldi:isVivaldi})),ver,userAgent,winPhone,isMobile,isGecko,isIE,ieVersion,isOpera,operaVersion,isVivaldi,Has=(hasAudioElement=function(){try{return"function"==typeof document.createElement("audio").canPlayType}catch(ex){}return!1}(),hasFile=function(){try{return"Blob"in window&&"File"in window&&"FileList"in window&&"FileReader"in window&&(!Browser.isOpera||Browser.operaVersion>=15)}catch(ex){}return!1}(),hasGeolocation=function(){try{return"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition}catch(ex){}return!1}(),hasMutationObserver=function(){try{return"MutationObserver"in window&&"function"==typeof window.MutationObserver}catch(ex){}return!1}(),hasPerformance=function(){try{return"performance"in window&&"function"==typeof window.performance.now}catch(ex){}return!1}(),hasTouch=function(){try{return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof window.DocumentTouch||!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints}catch(ex){}return!1}(),hasTransitionEndEvent=function(){try{for(var teMap=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),teKeys=_toConsumableArray(teMap.keys()),el=document.createElement("div"),i=0;i<teKeys.length;++i)if(el.style[teKeys[i]]!==undefined)return teMap.get(teKeys[i])}catch(ex){}return!1}(),Object.freeze({audio:hasAudioElement,fileAPI:hasFile,geolocation:hasGeolocation,mutationObserver:hasMutationObserver,performance:hasPerformance,touch:hasTouch,transitionEndEvent:hasTransitionEndEvent})),hasAudioElement,hasFile,hasGeolocation,hasMutationObserver,hasPerformance,hasTouch,hasTransitionEndEvent,Visibility=(vendor=function(){try{return Object.freeze([{hiddenProperty:"hidden",stateProperty:"visibilityState",changeEvent:"visibilitychange"},{hiddenProperty:"webkitHidden",stateProperty:"webkitVisibilityState",changeEvent:"webkitvisibilitychange"},{hiddenProperty:"mozHidden",stateProperty:"mozVisibilityState",changeEvent:"mozvisibilitychange"},{hiddenProperty:"msHidden",stateProperty:"msVisibilityState",changeEvent:"msvisibilitychange"}].find((function(vnd){return vnd.hiddenProperty in document})))}catch(ex){}return undefined}(),Object.freeze(Object.defineProperties({},{vendor:{get:function(){return vendor}},state:{get:function(){return vendor&&document[vendor.stateProperty]||"visible"}},isEnabled:{value:function(){return Boolean(vendor)}},isHidden:{value:function(){return Boolean(vendor&&document[vendor.hiddenProperty])}},hiddenProperty:{value:vendor&&vendor.hiddenProperty},stateProperty:{value:vendor&&vendor.stateProperty},changeEvent:{value:vendor&&vendor.changeEvent}}))),vendor,Fullscreen=function(){var _hasPromise,vendor=function(){try{return Object.freeze([{isEnabled:"fullscreenEnabled",element:"fullscreenElement",requestFn:"requestFullscreen",exitFn:"exitFullscreen",changeEvent:"fullscreenchange",errorEvent:"fullscreenerror"},{isEnabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",requestFn:"webkitRequestFullscreen",exitFn:"webkitExitFullscreen",changeEvent:"webkitfullscreenchange",errorEvent:"webkitfullscreenerror"},{isEnabled:"mozFullScreenEnabled",element:"mozFullScreenElement",requestFn:"mozRequestFullScreen",exitFn:"mozCancelFullScreen",changeEvent:"mozfullscreenchange",errorEvent:"mozfullscreenerror"},{isEnabled:"msFullscreenEnabled",element:"msFullscreenElement",requestFn:"msRequestFullscreen",exitFn:"msExitFullscreen",changeEvent:"MSFullscreenChange",errorEvent:"MSFullscreenError"}].find((function(vnd){return vnd.isEnabled in document})))}catch(ex){}return undefined}(),_returnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,vendor)try{var value=document.exitFullscreen();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise});function _selectElement(requestedEl){var selectedEl=requestedEl||document.documentElement;return selectedEl===document.documentElement&&("msRequestFullscreen"===vendor.requestFn||Browser.isOpera&&Browser.operaVersion<15)&&(selectedEl=document.body),selectedEl}function isFullscreen(){return Boolean(vendor&&document[vendor.element])}function requestFullscreen(options,requestedEl){var _this=this;if(!vendor)return Promise.reject(new Error("fullscreen not supported"));var element=_selectElement(requestedEl);if("function"!=typeof element[vendor.requestFn])return Promise.reject(new Error("fullscreen not supported"));if(isFullscreen())return Promise.resolve();if(_returnsPromise())return element[vendor.requestFn](options);var namespace=".Fullscreen_requestFullscreen";return new Promise((function(resolve,reject){jQuery(element).off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){jQuery(_this).off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen request error")):resolve()})),element[vendor.requestFn](options)}))}function exitFullscreen(){var _this2=this;if(!vendor||"function"!=typeof document[vendor.exitFn])return Promise.reject(new TypeError("fullscreen not supported"));if(!isFullscreen())return Promise.reject(new TypeError("fullscreen mode not active"));if(_returnsPromise())return document[vendor.exitFn]();var namespace=".Fullscreen_exitFullscreen";return new Promise((function(resolve,reject){jQuery(document).off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){jQuery(_this2).off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen exit error")):resolve()})),document[vendor.exitFn]()}))}return Object.freeze(Object.defineProperties({},{vendor:{get:function(){return vendor}},element:{get:function(){return vendor?document[vendor.element]:null}},isEnabled:{value:function(){return Boolean(vendor&&document[vendor.isEnabled])}},isFullscreen:{value:isFullscreen},request:{value:requestFullscreen},exit:{value:exitFullscreen},toggle:{value:function(options,requestedEl){return isFullscreen()?exitFullscreen():requestFullscreen(options,requestedEl)}},onChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);$(element).on(vendor.changeEvent,handlerFn)}}},offChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?$(element).off(vendor.changeEvent,handlerFn):$(element).off(vendor.changeEvent)}}},onError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);$(element).on(vendor.errorEvent,handlerFn)}}},offError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?$(element).off(vendor.errorEvent,handlerFn):$(element).off(vendor.errorEvent)}}}}))}(),_ref3=Object.freeze(Object.defineProperties({},{clone:{value:function clone(orig){return"object"!==_typeof(orig)||null===orig?orig:orig instanceof String?String(orig):orig instanceof Number?Number(orig):orig instanceof Boolean?Boolean(orig):"function"==typeof orig.clone?orig.clone(!0):orig.nodeType&&"function"==typeof orig.cloneNode?orig.cloneNode(!0):(orig instanceof Array?copy=new Array(orig.length):orig instanceof Date?copy=new Date(orig.getTime()):orig instanceof Map?(copy=new Map,orig.forEach((function(val,key){return copy.set(key,clone(val))}))):orig instanceof RegExp?copy=new RegExp(orig):orig instanceof Set?(copy=new Set,orig.forEach((function(val){return copy.add(clone(val))}))):copy=Object.create(Object.getPrototypeOf(orig)),Object.keys(orig).forEach((function(name){return copy[name]=clone(orig[name])})),copy);var copy}},convertBreaks:{value:function(source){for(var node,output=document.createDocumentFragment(),para=document.createElement("p");null!==(node=source.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":if(null!==node.nextSibling&&node.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===node.nextSibling.nodeName.toUpperCase()){source.removeChild(node.nextSibling),source.removeChild(node),output.appendChild(para),para=document.createElement("p");continue}if(!para.hasChildNodes()){source.removeChild(node);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":para.hasChildNodes()&&(output.appendChild(para),para=document.createElement("p")),output.appendChild(node);continue}para.appendChild(node)}para.hasChildNodes()&&output.appendChild(para),source.appendChild(output)}},safeActiveElement:{value:function(){try{return document.activeElement||null}catch(ex){return null}}},setDisplayTitle:{value:function(title){if("string"!=typeof title)throw new TypeError("story display title must be a string (received: ".concat(Util.getType(title),")"));var render=document.createDocumentFragment();new Wikifier(render,title);var text=function(source){for(var node,copy=source.cloneNode(!0),frag=document.createDocumentFragment();null!==(node=copy.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":case"DIV":case"P":frag.appendChild(document.createTextNode(" "))}frag.appendChild(node)}return frag.textContent}(render).trim();document.title=Config.passages.displayTitles&&""!==State.passage&&State.passage!==Config.passages.start?"".concat(State.passage," | ").concat(text):text;var storyTitle=document.getElementById("story-title");null!==storyTitle&&jQuery(storyTitle).empty().append(render)}},setPageElement:{value:function(idOrElement,titles,defaultText){var el="object"===_typeof(idOrElement)?idOrElement:document.getElementById(idOrElement);if(null==el)return null;var ids=Array.isArray(titles)?titles:[titles];jQuery(el).empty();for(var i=0,iend=ids.length;i<iend;++i)if(Story.has(ids[i]))return new Wikifier(el,Story.get(ids[i]).processText().trim()),el;if(null!=defaultText){var text=String(defaultText).trim();""!==text&&new Wikifier(el,text)}return el}},throwError:{value:function(place,message,source){var $wrapper=jQuery(document.createElement("div")),$toggle=jQuery(document.createElement("button")),$source=jQuery(document.createElement("pre")),mesg="".concat(L10n.get("errorTitle"),": ").concat(message||"unknown error");return $toggle.addClass("error-toggle").ariaClick({label:L10n.get("errorToggle")},(function(){$toggle.hasClass("enabled")?($toggle.removeClass("enabled"),$source.attr({"aria-hidden":!0,hidden:"hidden"})):($toggle.addClass("enabled"),$source.removeAttr("aria-hidden hidden"))})).appendTo($wrapper),jQuery(document.createElement("span")).addClass("error").text(mesg).appendTo($wrapper),jQuery(document.createElement("code")).text(source).appendTo($source),$source.addClass("error-source").attr({"aria-hidden":!0,hidden:"hidden"}).appendTo($wrapper),$wrapper.addClass("error-view").appendTo(place),console.warn("".concat(mesg,"\n\t").concat(source.replace(/\n/g,"\n\t"))),!1}},stringFrom:{value:function stringFrom(value){switch(_typeof(value)){case"function":return"[function]";case"number":if(Number.isNaN(value))return"[number NaN]";break;case"object":if(null===value)return"[null]";if(value instanceof Array)return value.map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Set)return Array.from(value).map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Map){var result=Array.from(value).map((function(_ref4){var _ref5=_slicedToArray(_ref4,2),key=_ref5[0],val=_ref5[1];return"".concat(stringFrom(key)," → ").concat(stringFrom(val))}));return"{ ".concat(result.join(", ")," }")}if(value instanceof Date)return value.toLocaleString();if(value instanceof Element){if(value===document.documentElement||value===document.head||value===document.body)throw new Error("illegal operation; attempting to convert the <html>, <head>, or <body> tags to string is not allowed");return value.outerHTML}return value instanceof Node?value.textContent:"function"==typeof value.toString?value.toString():Object.prototype.toString.call(value);case"symbol":var desc=void 0!==value.description?' "'.concat(value.description,'"'):"";return"[symbol".concat(desc,"]");case"undefined":return"[undefined]"}return String(value)}}})),clone=_ref3.clone,convertBreaks=_ref3.convertBreaks,safeActiveElement=_ref3.safeActiveElement,setDisplayTitle=_ref3.setDisplayTitle,setPageElement=_ref3.setPageElement,throwError=_ref3.throwError,stringFrom=_ref3.stringFrom;!function(){function onKeypressFn(ev){13!==ev.which&&32!==ev.which||(ev.preventDefault(),jQuery(safeActiveElement()||this).trigger("click"))}function onClickFnWrapper(fn){return function(){var $this=jQuery(this);$this.ariaIsDisabled()||($this.is("[aria-pressed]")&&$this.attr("aria-pressed","true"===$this.attr("aria-pressed")?"false":"true"),fn.apply(this,arguments))}}function oneClickFnWrapper(fn){return onClickFnWrapper((function(){jQuery(this).off(".aria-clickable").removeAttr("role tabindex aria-controls aria-pressed").filter("button").prop("disabled",!0),fn.apply(this,arguments)}))}jQuery.fn.extend({ariaClick:function(options,handler){if(0===this.length||0===arguments.length)return this;var opts=options,fn=handler;return null==fn&&(fn=opts,opts=undefined),"string"!=typeof(opts=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,role:undefined,controls:undefined,pressed:undefined,label:undefined},opts)).namespace?opts.namespace="":"."!==opts.namespace[0]&&(opts.namespace=".".concat(opts.namespace)),"boolean"==typeof opts.pressed&&(opts.pressed=opts.pressed?"true":"false"),this.filter("button").prop("type","button"),null!=opts.role?this.attr("role",opts.role):this.not("[role]").filter("a,[data-passage]").attr("role","link").end().not("a").not("[data-passage]").attr("role","button").end().end().end(),this.attr("tabindex",0),null!=opts.controls&&this.attr("aria-controls",opts.controls),null!=opts.pressed&&this.attr("aria-pressed",opts.pressed),null!=opts.label&&this.attr({"aria-label":opts.label,title:opts.label}),this.not("button").on("keypress.aria-clickable".concat(opts.namespace),opts.selector,onKeypressFn),this.on("click.aria-clickable".concat(opts.namespace),opts.selector,opts.data,opts.one?oneClickFnWrapper(fn):onClickFnWrapper(fn)),this},ariaDisabled:function(disable){if(0===this.length||0===arguments.length)return this;var $nonDisableable=this.not("button,fieldset,input,menuitem,optgroup,option,select,textarea"),$disableable=this.filter("button,fieldset,input,menuitem,optgroup,option,select,textarea");return disable?($nonDisableable.each((function(){this.setAttribute("disabled",""),this.setAttribute("aria-disabled","true")})),$disableable.each((function(){this.disabled=!0,this.setAttribute("aria-disabled","true")}))):($nonDisableable.each((function(){this.removeAttribute("disabled"),this.removeAttribute("aria-disabled")})),$disableable.each((function(){this.disabled=!1,this.removeAttribute("aria-disabled")}))),this},ariaIsDisabled:function(){return this.is("[disabled]")}})}(),jQuery.extend({wikiWithOptions:function(options){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)sources[_key-1]=arguments[_key];if(0!==sources.length){var frag=document.createDocumentFragment();sources.forEach((function(content){return new Wikifier(frag,content,options)}));var errors=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "))}},wiki:function(){for(var _len2=arguments.length,sources=new Array(_len2),_key2=0;_key2<_len2;_key2++)sources[_key2]=arguments[_key2];this.wikiWithOptions.apply(this,[undefined].concat(sources))}}),jQuery.fn.extend({wikiWithOptions:function(options){for(var _len3=arguments.length,sources=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)sources[_key3-1]=arguments[_key3];if(0===this.length||0===sources.length)return this;var frag=document.createDocumentFragment();return sources.forEach((function(content){return new Wikifier(frag,content,options)})),this.append(frag),this},wiki:function(){for(var _len4=arguments.length,sources=new Array(_len4),_key4=0;_key4<_len4;_key4++)sources[_key4]=arguments[_key4];return this.wikiWithOptions.apply(this,[undefined].concat(sources))}});var Util=function(){var toString,utilGetType="[object Object]"===(toString=Object.prototype.toString).call(new Map)?function(O){if(null===O)return"null";if(O instanceof Map)return"Map";if(O instanceof Set)return"Set";var baseType=_typeof(O);return"object"===baseType?toString.call(O).slice(8,-1):baseType}:function(O){if(null===O)return"null";var baseType=_typeof(O);return"object"===baseType?toString.call(O).slice(8,-1):baseType};function utilToEnum(obj){var pEnum=Object.create(null);if(obj instanceof Array)obj.forEach((function(val,i){return pEnum[String(val)]=i}));else if(obj instanceof Set)Array.from(obj).forEach((function(val,i){return pEnum[String(val)]=i}));else if(obj instanceof Map)obj.forEach((function(val,key){return pEnum[String(key)]=val}));else{if("object"!==_typeof(obj)||null===obj||Object.getPrototypeOf(obj)!==Object.prototype)throw new TypeError("Util.toEnum obj parameter must be an Array, Map, Set, or generic object");Object.assign(pEnum,obj)}return Object.freeze(pEnum)}function utilToStringTag(obj){return Object.prototype.toString.call(obj).slice(8,-1)}var _illegalSlugCharsRe=/[\x00-\x20!-/:-@[-^`{-\x9f]+/g,_isInvalidSlugRe=/^-*$/;var _illegalFilenameCharsRE=/[\x00-\x1f"#$%&'*+,/:;<=>?\\^`|\x7f-\x9f]+/g;var _markupCharsRe=/[!"#$&'*\-/<=>?@[\\\]^_`{|}~]/g,_hasMarkupCharsRe=new RegExp(_markupCharsRe.source),_markupCharsMap=utilToEnum({"!":"&#33;",'"':"&quot;","#":"&#35;",$:"&#36;","&":"&amp;","'":"&#39;","*":"&#42;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","?":"&#63;","@":"&#64;","[":"&#91;","\\":"&#92;","]":"&#93;","^":"&#94;",_:"&#95;","`":"&#96;","{":"&#123;","|":"&#124;","}":"&#125;","~":"&#126;"});var _htmlCharsRe=/[&<>"'`]/g,_hasHtmlCharsRe=new RegExp(_htmlCharsRe.source),_htmlCharsMap=utilToEnum({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"});function utilEscape(str){if(null==str)return"";var val=String(str);return val&&_hasHtmlCharsRe.test(val)?val.replace(_htmlCharsRe,(function(ch){return _htmlCharsMap[ch]})):val}var _escapedHtmlRe=/&(?:amp|#38|#x26|lt|#60|#x3c|gt|#62|#x3e|quot|#34|#x22|apos|#39|#x27|#96|#x60);/gi,_hasEscapedHtmlRe=new RegExp(_escapedHtmlRe.source,"i"),_escapedHtmlMap=utilToEnum({"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3c;":"<","&gt;":">","&#62;":">","&#x3e;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"});function utilUnescape(str){if(null==str)return"";var val=String(str);return val&&_hasEscapedHtmlRe.test(val)?val.replace(_escapedHtmlRe,(function(entity){return _escapedHtmlMap[entity.toLowerCase()]})):val}var _nowSource=Has.performance?performance:Date;var _cssTimeRe=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/;var utilScrubEventKey=function(){var separatorKey,decimalKey;if("undefined"!=typeof Intl&&"function"==typeof Intl.NumberFormat){var match=(new Intl.NumberFormat).format(111111.5).match(/(\D*)\d+(\D*)/);match&&(separatorKey=match[1],decimalKey=match[2])}return separatorKey||decimalKey||(separatorKey=",",decimalKey="."),function(key){switch(key){case"Scroll":return"ScrollLock";case"Spacebar":return" ";case"Left":return"ArrowLeft";case"Right":return"ArrowRight";case"Up":return"ArrowUp";case"Down":return"ArrowDown";case"Del":return"Delete";case"Crsel":return"CrSel";case"Exsel":return"ExSel";case"Esc":return"Escape";case"Apps":return"ContextMenu";case"Nonconvert":return"NonConvert";case"MediaNextTrack":return"MediaTrackNext";case"MediaPreviousTrack":return"MediaTrackPrevious";case"VolumeUp":return"AudioVolumeUp";case"VolumeDown":return"AudioVolumeDown";case"VolumeMute":return"AudioVolumeMute";case"Zoom":return"ZoomToggle";case"SelectMedia":case"MediaSelect":return"LaunchMediaPlayer";case"Add":return"+";case"Divide":return"/";case"Multiply":return"*";case"Subtract":return"-";case"Decimal":return decimalKey;case"Separator":return separatorKey}return key}}(),utilHasMediaQuery="function"!=typeof window.matchMedia?function(){return!1}:function(mediaQuery){return window.matchMedia(mediaQuery).matches};return Object.freeze(Object.defineProperties({},{getType:{value:utilGetType},isBoolean:{value:function(obj){return"boolean"==typeof obj||"string"==typeof obj&&("true"===obj||"false"===obj)}},isIterable:{value:function(obj){return null!=obj&&"function"==typeof obj[Symbol.iterator]}},isNumeric:{value:function(obj){var num;switch(_typeof(obj)){case"number":num=obj;break;case"string":num=Number(obj);break;default:return!1}return!Number.isNaN(num)&&Number.isFinite(num)}},sameValueZero:{value:function(a,b){return a===b||a!=a&&b!=b}},toEnum:{value:utilToEnum},toStringTag:{value:utilToStringTag},slugify:{value:function(str){var base=String(str).trim(),_legacy=base.replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase();return _isInvalidSlugRe.test(_legacy)?base.replace(_illegalSlugCharsRe,"").replace(/[_\s\u2013\u2014-]+/g,"-"):_legacy}},sanitizeFilename:{value:function(str){return String(str).trim().replace(_illegalFilenameCharsRE,"")}},escapeMarkup:{value:function(str){if(null==str)return"";var val=String(str);return val&&_hasMarkupCharsRe.test(val)?val.replace(_markupCharsRe,(function(ch){return _markupCharsMap[ch]})):val}},escape:{value:utilEscape},unescape:{value:utilUnescape},charAndPosAt:{value:function(text,position){var str=String(text),pos=Math.trunc(position),code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};var retval={char:str.charAt(pos),start:pos,end:pos};if(code<55296||code>57343)return retval;if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)return retval;var nextCode=str.charCodeAt(nextPos);return nextCode<56320||nextCode>57343||(retval.char=retval.char+str.charAt(nextPos),retval.end=nextPos),retval}if(0===pos)return retval;var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);return prevCode<55296||prevCode>56319||(retval.char=str.charAt(prevPos)+retval.char,retval.start=prevPos),retval}},now:{value:function(){return _nowSource.now()}},fromCssTime:{value:function(cssTime){var match=_cssTimeRe.exec(String(cssTime));if(null===match)throw new SyntaxError('invalid time value syntax: "'.concat(cssTime,'"'));var msec=Number(match[1]);if(1===match[2].length&&(msec*=1e3),Number.isNaN(msec)||!Number.isFinite(msec))throw new RangeError('invalid time value: "'.concat(cssTime,'"'));return msec}},toCssTime:{value:function(msec){if("number"!=typeof msec||Number.isNaN(msec)||!Number.isFinite(msec)){var what;switch(_typeof(msec)){case"string":what='"'.concat(msec,'"');break;case"number":what=String(msec);break;default:what=utilToStringTag(msec)}throw new Error("invalid milliseconds: ".concat(what))}return"".concat(msec,"ms")}},fromCssProperty:{value:function(cssName){if(!cssName.includes("-"))switch(cssName){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return cssName}return("-ms-"===cssName.slice(0,4)?cssName.slice(1):cssName).split("-").map((function(part,i){return 0===i?part:part.toUpperFirst()})).join("")}},parseUrl:{value:function(url){var el=document.createElement("a"),queryObj=Object.create(null);el.href=url,el.search&&el.search.replace(/^\?/,"").splitOrEmpty(/(?:&(?:amp;)?|;)/).forEach((function(query){var _query$split2=_slicedToArray(query.split("="),2),key=_query$split2[0],value=_query$split2[1];queryObj[key]=value}));var pathname=el.host&&"/"!==el.pathname[0]?"/".concat(el.pathname):el.pathname;return{href:el.href,protocol:el.protocol,host:el.host,hostname:el.hostname,port:el.port,path:"".concat(pathname).concat(el.search),pathname:pathname,query:el.search,search:el.search,queries:queryObj,searches:queryObj,hash:el.hash}}},newExceptionFrom:{value:function(original,exceptionType,override){if("object"!==_typeof(original)||null===original)throw new Error("Util.newExceptionFrom original parameter must be an object");if("function"!=typeof exceptionType)throw new Error("Util.newExceptionFrom exceptionType parameter must be an error type constructor");var ex=new exceptionType(original.message);void 0!==original.name&&(ex.name=original.name),void 0!==original.code&&(ex.code=original.code),void 0!==original.columnNumber&&(ex.columnNumber=original.columnNumber),void 0!==original.description&&(ex.description=original.description),void 0!==original.fileName&&(ex.fileName=original.fileName),void 0!==original.lineNumber&&(ex.lineNumber=original.lineNumber),void 0!==original.number&&(ex.number=original.number),void 0!==original.stack&&(ex.stack=original.stack);var overrideType=_typeof(override);if("undefined"!==overrideType)if("object"===overrideType&&null!==override)Object.assign(ex,override);else{if("string"!==overrideType)throw new Error("Util.newExceptionFrom override parameter must be an object or string");ex.message=override}return ex}},scrubEventKey:{value:utilScrubEventKey},hasMediaQuery:{value:utilHasMediaQuery},random:{value:Math.random},entityEncode:{value:utilEscape},entityDecode:{value:utilUnescape},evalExpression:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),SimpleStore=(_adapters=[],_initialized=null,Object.freeze(Object.defineProperties({},{adapters:{value:_adapters},create:{value:function(storageId,persistent){if(_initialized)return _initialized.create(storageId,persistent);for(var i=0;i<_adapters.length;++i)if(_adapters[i].init(storageId,persistent))return(_initialized=_adapters[i]).create(storageId,persistent);throw new Error("no valid storage adapters found")}}}))),_adapters,_initialized,_ok,_WebStorageAdapter;SimpleStore.adapters.push((_ok=!1,_WebStorageAdapter=function(){function _WebStorageAdapter(storageId,persistent){_classCallCheck(this,_WebStorageAdapter);var prefix="".concat(storageId,"."),engine=null,name=null;persistent?(engine=window.localStorage,name="localStorage"):(engine=window.sessionStorage,name="sessionStorage"),Object.defineProperties(this,{_engine:{value:engine},_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:name},id:{value:storageId},persistent:{value:!!persistent}})}return _createClass(_WebStorageAdapter,[{key:"length",get:function(){return this.keys().length}},{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){for(var keys=[],i=0;i<this._engine.length;++i){var key=this._engine.key(i);this._prefixRe.test(key)&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&this._engine.hasOwnProperty(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=this._engine.getItem(this._prefix+key);return null==value?null:_WebStorageAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{this._engine.setItem(this._prefix+key,_WebStorageAdapter._serialize(value))}catch(ex){if(/quota.?(?:exceeded|reached)/i.test(ex.name+ex.message))throw Util.newExceptionFrom(ex,Error,"".concat(this.name," quota exceeded"));throw ex}return!0}},{key:"delete",value:function(key){return!("string"!=typeof key||!key||(this._engine.removeItem(this._prefix+key),0))}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,iend=keys.length;i<iend;++i)this.delete(keys[i]);return!0}}],[{key:"_serialize",value:function(obj){return LZString.compressToUTF16(JSON.stringify(obj))}},{key:"_deserialize",value:function(str){return JSON.parse(LZString.decompressFromUTF16(str))}}]),_WebStorageAdapter}(),Object.freeze(Object.defineProperties({},{init:{value:function(){function hasWebStorage(storeId){try{var store=window[storeId],tid="_sc_".concat(String(Date.now()));store.setItem(tid,tid);var result=store.getItem(tid)===tid;return store.removeItem(tid),result}catch(ex){}return!1}return _ok=hasWebStorage("localStorage")&&hasWebStorage("sessionStorage")}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new _WebStorageAdapter(storageId,persistent)}}})))),SimpleStore.adapters.push(function(){var _MAX_EXPIRY="Tue, 19 Jan 2038 03:14:07 GMT",_MIN_EXPIRY="Thu, 01 Jan 1970 00:00:00 GMT",_ok=!1,_CookieAdapter=function(){function _CookieAdapter(storageId,persistent){_classCallCheck(this,_CookieAdapter);var prefix="".concat(storageId).concat(persistent?"!":"*",".");Object.defineProperties(this,{_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:"cookie"},id:{value:storageId},persistent:{value:!!persistent}})}return _createClass(_CookieAdapter,[{key:"length",get:function(){return this.keys().length}},{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){if(""===document.cookie)return[];for(var cookies=document.cookie.split(/;\s*/),keys=[],i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(this._prefixRe.test(key))""!==decodeURIComponent(kvPair[1])&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&null!==_CookieAdapter._getCookie(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=_CookieAdapter._getCookie(this._prefix+key);return null===value?null:_CookieAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{if(_CookieAdapter._setCookie(this._prefix+key,_CookieAdapter._serialize(value),this.persistent?"Tue, 19 Jan 2038 03:14:07 GMT":undefined),!this.has(key))throw new Error("unknown validation error during set")}catch(ex){throw Util.newExceptionFrom(ex,Error,"cookie error: ".concat(ex.message))}return!0}},{key:"delete",value:function(key){if("string"!=typeof key||!key||!this.has(key))return!1;try{if(_CookieAdapter._setCookie(this._prefix+key,undefined,_MIN_EXPIRY),this.has(key))throw new Error("unknown validation error during delete")}catch(ex){throw Util.newExceptionFrom(ex,Error,"cookie error: ".concat(ex.message))}return!0}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,iend=keys.length;i<iend;++i)this.delete(keys[i]);return!0}}],[{key:"_getCookie",value:function(prefixedKey){if(!prefixedKey||""===document.cookie)return null;for(var cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("=");if(prefixedKey===decodeURIComponent(kvPair[0]))return decodeURIComponent(kvPair[1])||null}return null}},{key:"_setCookie",value:function(prefixedKey,value,expiry){if(prefixedKey){var payload="".concat(encodeURIComponent(prefixedKey),"=");null!=value&&(payload+=encodeURIComponent(value)),null!=expiry&&(payload+="; expires=".concat(expiry)),payload+="; path=/",document.cookie=payload}}},{key:"_serialize",value:function(obj){return LZString.compressToBase64(JSON.stringify(obj))}},{key:"_deserialize",value:function(str){return JSON.parse(LZString.decompressFromBase64(str))}}]),_CookieAdapter}();return Object.freeze(Object.defineProperties({},{init:{value:function(storageId){try{var tid="_sc_".concat(String(Date.now()));_CookieAdapter._setCookie(tid,_CookieAdapter._serialize(tid),undefined),_ok=_CookieAdapter._deserialize(_CookieAdapter._getCookie(tid))===tid,_CookieAdapter._setCookie(tid,undefined,_MIN_EXPIRY)}catch(ex){_ok=!1}return _ok&&function(storageId){if(""===document.cookie)return;for(var oldPrefix="".concat(storageId,"."),oldPrefixRe=new RegExp("^".concat(RegExp.escape(oldPrefix))),persistPrefix="".concat(storageId,"!."),sessionPrefix="".concat(storageId,"*."),sessionTestRe=/\.(?:state|rcWarn)$/,cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(oldPrefixRe.test(key)){var value=decodeURIComponent(kvPair[1]);""!==value&&function(){var persist=!sessionTestRe.test(key);_CookieAdapter._setCookie(key,undefined,_MIN_EXPIRY),_CookieAdapter._setCookie(key.replace(oldPrefixRe,(function(){return persist?persistPrefix:sessionPrefix})),value,persist?_MAX_EXPIRY:undefined)}()}}}(storageId),_ok}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new _CookieAdapter(storageId,persistent)}}}))}());var DebugView=function(){function DebugView(parent,type,name,title){_classCallCheck(this,DebugView),Object.defineProperties(this,{parent:{value:parent},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:title,"aria-label":title,"data-type":null!=type?type:"","data-name":null!=name?name:""}).addClass("debug"),jQuery(this.break).addClass("debug hidden"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(DebugView,[{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(type){this.view.setAttribute("data-type",null!=type?type:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(name){this.view.setAttribute("data-name",null!=name?name:"")}},{key:"title",get:function(){return this.view.title},set:function(title){this.view.title=title}},{key:"append",value:function(el){return jQuery(this.view).append(el),this}},{key:"modes",value:function(options){if(null==options){var current={};return this.view.className.splitOrEmpty(/\s+/).forEach((function(name){"debug"!==name&&(current[name]=!0)})),current}if("object"===_typeof(options))return Object.keys(options).forEach((function(name){this[options[name]?"addClass":"removeClass"](name)}),jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}},{key:"remove",value:function(){var $view=jQuery(this.view);this.view.hasChildNodes()&&$view.contents().appendTo(this.parent),$view.remove(),jQuery(this.break).remove()}}],[{key:"isEnabled",value:function(){return"enabled"===jQuery(document.documentElement).attr("data-debug-view")}},{key:"enable",value:function(){jQuery(document.documentElement).attr("data-debug-view","enabled"),jQuery.event.trigger(":debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeAttr("data-debug-view"),jQuery.event.trigger(":debugviewupdate")}},{key:"toggle",value:function(){"enabled"===jQuery(document.documentElement).attr("data-debug-view")?DebugView.disable():DebugView.enable()}}]),DebugView}(),NodeTyper=function(){var NodeTyper=function(){function NodeTyper(config){if(_classCallCheck(this,NodeTyper),"object"!==_typeof(config)||null===config)throw new Error("config parameter must be an object (received: ".concat(Util.getType(config),")"));if(!(config.hasOwnProperty("targetNode")&&config.targetNode instanceof Node))throw new Error('config parameter object "targetNode" property must be a node');Object.defineProperties(this,{node:{value:config.targetNode},childNodes:{value:[]},nodeValue:{writable:!0,value:""},appendTo:{writable:!0,value:config.parentNode||null},classNames:{writable:!0,value:config.classNames||null},finished:{writable:!0,value:!1}});var childNode,node=this.node;for(node.nodeValue&&(this.nodeValue=node.nodeValue,node.nodeValue="");null!==(childNode=node.firstChild);)this.childNodes.push(new NodeTyper({targetNode:childNode,parentNode:node,classNames:this.classNames})),node.removeChild(childNode)}return _createClass(NodeTyper,[{key:"finish",value:function(){for(;this.type(!0););return!1}},{key:"type",value:function(flush){if(this.finished)return!1;if(this.appendTo){if(this.appendTo.appendChild(this.node),this.appendTo=null,this.node.nodeType!==Node.ELEMENT_NODE&&this.node.nodeType!==Node.TEXT_NODE||"none"===jQuery(this.node.parentNode).css("display"))return this.finish();this.node.parentNode&&this.classNames&&jQuery(this.node.parentNode).addClass(this.classNames)}if(this.nodeValue){if(flush)this.node.nodeValue+=this.nodeValue,this.nodeValue="";else{var _Util$charAndPosAt=Util.charAndPosAt(this.nodeValue,0),char=_Util$charAndPosAt.char,start=_Util$charAndPosAt.start,end=_Util$charAndPosAt.end;this.node.nodeValue+=char,this.nodeValue=this.nodeValue.slice(1+end-start)}return!0}this.classNames&&(jQuery(this.node.parentNode).removeClass(this.classNames),this.classNames=null);for(var childNodes=this.childNodes;childNodes.length>0;){if(childNodes[0].type())return!0;childNodes.shift()}return this.finished=!0,!1}}]),NodeTyper}();return NodeTyper}(),PRNGWrapper=function(){function PRNGWrapper(seed,useEntropy){_classCallCheck(this,PRNGWrapper),Object.defineProperties(this,new Math.seedrandom(seed,useEntropy,(function(prng,seed){return{_prng:{value:prng},seed:{writable:!0,value:seed},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this._prng()}}}})))}return _createClass(PRNGWrapper,null,[{key:"marshal",value:function(prng){if(!prng||!prng.hasOwnProperty("seed")||!prng.hasOwnProperty("pull"))throw new Error("PRNG is missing required data");return{seed:prng.seed,pull:prng.pull}}},{key:"unmarshal",value:function(prngObj){if(!prngObj||!prngObj.hasOwnProperty("seed")||!prngObj.hasOwnProperty("pull"))throw new Error("PRNG object is missing required data");for(var prng=new PRNGWrapper(prngObj.seed,!1),i=prngObj.pull;i>0;--i)prng.random();return prng}}]),PRNGWrapper}(),StyleWrapper=(_imageMarkupRe=new RegExp(Patterns.cssImage,"g"),_hasImageMarkupRe=new RegExp(Patterns.cssImage),function(){function StyleWrapper(style){if(_classCallCheck(this,StyleWrapper),null==style)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:style}})}return _createClass(StyleWrapper,[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(rawCss){this.clear(),this.add(rawCss)}},{key:"add",value:function(rawCss){var css=rawCss;_hasImageMarkupRe.test(css)&&(_imageMarkupRe.lastIndex=0,css=css.replace(_imageMarkupRe,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(markup.hasOwnProperty("error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text.trim())}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),this.style.styleSheet?this.style.styleSheet.cssText+=css:this.style.appendChild(document.createTextNode(css))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}]),StyleWrapper}()),_imageMarkupRe,_hasImageMarkupRe,Diff=(Op=Util.toEnum({Delete:0,SpliceArray:1,Copy:2,CopyDate:3}),Object.freeze(Object.defineProperties({},{Op:{value:Op},diff:{value:function diff(orig,dest){for(var aOpRef,objToString=Object.prototype.toString,origIsArray=orig instanceof Array,keys=[].concat(Object.keys(orig),Object.keys(dest)).sort().filter((function(val,i,arr){return 0===i||arr[i-1]!==val})),diffed={},keyIsAOpRef=function(key){return key===aOpRef},i=0,klen=keys.length;i<klen;++i){var key=keys[i],origP=orig[key],destP=dest[key];if(orig.hasOwnProperty(key))if(dest.hasOwnProperty(key)){if(origP===destP)continue;if(_typeof(origP)===_typeof(destP))if("function"==typeof origP)origP.toString()!==destP.toString()&&(diffed[key]=[Op.Copy,destP]);else if("object"!==_typeof(origP)||null===origP)diffed[key]=[Op.Copy,destP];else{var origPType=objToString.call(origP);if(origPType===objToString.call(destP))if(origP instanceof Date)Number(origP)!==Number(destP)&&(diffed[key]=[Op.Copy,clone(destP)]);else if(origP instanceof Map)diffed[key]=[Op.Copy,clone(destP)];else if(origP instanceof RegExp)origP.toString()!==destP.toString()&&(diffed[key]=[Op.Copy,clone(destP)]);else if(origP instanceof Set)diffed[key]=[Op.Copy,clone(destP)];else if("[object Object]"!==origPType)diffed[key]=[Op.Copy,clone(destP)];else{var recurse=diff(origP,destP);null!==recurse&&(diffed[key]=recurse)}else diffed[key]=[Op.Copy,clone(destP)]}else diffed[key]=[Op.Copy,"object"!==_typeof(destP)||null===destP?destP:clone(destP)]}else if(origIsArray&&Util.isNumeric(key)){var nKey=Number(key);if(!aOpRef){aOpRef="";do{aOpRef+="~"}while(keys.some(keyIsAOpRef));diffed[aOpRef]=[Op.SpliceArray,nKey,nKey]}nKey<diffed[aOpRef][1]&&(diffed[aOpRef][1]=nKey),nKey>diffed[aOpRef][2]&&(diffed[aOpRef][2]=nKey)}else diffed[key]=Op.Delete;else diffed[key]=[Op.Copy,"object"!==_typeof(destP)||null===destP?destP:clone(destP)]}return Object.keys(diffed).length>0?diffed:null}},patch:{value:function patch(orig,diffed){for(var keys=Object.keys(diffed||{}),patched=clone(orig),i=0,klen=keys.length;i<klen;++i){var key=keys[i],diffedP=diffed[key];if(diffedP===Op.Delete)delete patched[key];else if(diffedP instanceof Array)switch(diffedP[0]){case Op.SpliceArray:patched.splice(diffedP[1],diffedP[2]-diffedP[1]+1);break;case Op.Copy:patched[key]=clone(diffedP[1]);break;case Op.CopyDate:patched[key]=new Date(diffedP[1])}else patched[key]=patch(patched[key],diffedP)}return patched}}}))),Op,L10n=(_patternRe=/\{\w+\}/g,_hasPatternRe=new RegExp(_patternRe.source),Object.freeze(Object.defineProperties({},{init:{value:function(){strings&&Object.keys(strings).length>0&&Object.keys(l10nStrings).forEach((function(id){try{var value;switch(id){case"identity":value=strings.identity;break;case"aborting":value=strings.aborting;break;case"cancel":value=strings.cancel;break;case"close":value=strings.close;break;case"ok":value=strings.ok;break;case"errorTitle":value=strings.errors.title;break;case"errorNonexistentPassage":value=strings.errors.nonexistentPassage;break;case"errorSaveMissingData":value=strings.errors.saveMissingData;break;case"errorSaveIdMismatch":value=strings.errors.saveIdMismatch;break;case"warningDegraded":value=strings.warnings.degraded;break;case"debugViewTitle":value=strings.debugView.title;break;case"debugViewToggle":value=strings.debugView.toggle;break;case"uiBarToggle":value=strings.uiBar.toggle;break;case"uiBarBackward":value=strings.uiBar.backward;break;case"uiBarForward":value=strings.uiBar.forward;break;case"uiBarJumpto":value=strings.uiBar.jumpto;break;case"jumptoTitle":value=strings.jumpto.title;break;case"jumptoTurn":value=strings.jumpto.turn;break;case"jumptoUnavailable":value=strings.jumpto.unavailable;break;case"savesTitle":value=strings.saves.title;break;case"savesDisallowed":value=strings.saves.disallowed;break;case"savesIncapable":value=strings.saves.incapable;break;case"savesLabelAuto":value=strings.saves.labelAuto;break;case"savesLabelDelete":value=strings.saves.labelDelete;break;case"savesLabelExport":value=strings.saves.labelExport;break;case"savesLabelImport":value=strings.saves.labelImport;break;case"savesLabelLoad":value=strings.saves.labelLoad;break;case"savesLabelClear":value=strings.saves.labelClear;break;case"savesLabelSave":value=strings.saves.labelSave;break;case"savesLabelSlot":value=strings.saves.labelSlot;break;case"savesUnavailable":value=strings.saves.unavailable;break;case"savesUnknownDate":value=strings.saves.unknownDate;break;case"settingsTitle":value=strings.settings.title;break;case"settingsOff":value=strings.settings.off;break;case"settingsOn":value=strings.settings.on;break;case"settingsReset":value=strings.settings.reset;break;case"restartTitle":value=strings.restart.title;break;case"restartPrompt":value=strings.restart.prompt;break;case"shareTitle":value=strings.share.title;break;case"alertTitle":break;case"autoloadTitle":value=strings.autoload.title;break;case"autoloadCancel":value=strings.autoload.cancel;break;case"autoloadOk":value=strings.autoload.ok;break;case"autoloadPrompt":value=strings.autoload.prompt;break;case"macroBackText":value=strings.macros.back.text;break;case"macroReturnText":value=strings.macros.return.text}value&&(l10nStrings[id]=value.replace(/%\w+%/g,(function(pat){return"{".concat(pat.slice(1,-1),"}")})))}catch(ex){}}))}},get:{value:function(ids,overrides){if(!ids)return"";var selectedId,id=((Array.isArray(ids)?ids:[ids]).some((function(id){return!!l10nStrings.hasOwnProperty(id)&&(selectedId=id,!0)})),selectedId);if(!id)return"";for(var processed=l10nStrings[id],iteration=0;_hasPatternRe.test(processed);){if(++iteration>50)throw new Error("L10n.get exceeded maximum replacement iterations, probable infinite loop");_patternRe.lastIndex=0,processed=processed.replace(_patternRe,(function(pat){var subId=pat.slice(1,-1);return overrides&&overrides.hasOwnProperty(subId)?overrides[subId]:l10nStrings.hasOwnProperty(subId)?l10nStrings[subId]:void 0}))}return processed}}}))),_patternRe,_hasPatternRe,strings={errors:{},warnings:{},debugView:{},uiBar:{},jumpto:{},saves:{},settings:{},restart:{},share:{},autoload:{},macros:{back:{},return:{}}},l10nStrings={identity:"game",aborting:"Aborting",cancel:"Cancel",close:"Close",ok:"OK",errorTitle:"Error",errorToggle:"Toggle the error view",errorNonexistentPassage:'the passage "{passage}" does not exist',errorSaveDiskLoadFailed:"failed to load save file from disk",errorSaveMissingData:"save is missing required data. Either the loaded file is not a save or the save has become corrupted",errorSaveIdMismatch:"save is from the wrong {identity}",_warningIntroLacking:"Your browser either lacks or has disabled",_warningOutroDegraded:", so this {identity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningNoWebStorage:"{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}",warningDegraded:"{_warningIntroLacking} some of the capabilities required by this {identity}{_warningOutroDegraded}",debugBarToggle:"Toggle the debug bar",debugBarNoWatches:"— no watches set —",debugBarAddWatch:"Add watch",debugBarDeleteWatch:"Delete watch",debugBarWatchAll:"Watch all",debugBarWatchNone:"Delete all",debugBarLabelAdd:"Add",debugBarLabelWatch:"Watch",debugBarLabelTurn:"Turn",debugBarLabelViews:"Views",debugBarViewsToggle:"Toggle the debug views",debugBarWatchToggle:"Toggle the watch panel",uiBarToggle:"Toggle the UI bar",uiBarBackward:"Go backward within the {identity} history",uiBarForward:"Go forward within the {identity} history",uiBarJumpto:"Jump to a specific point within the {identity} history",jumptoTitle:"Jump To",jumptoTurn:"Turn",jumptoUnavailable:"No jump points currently available…",savesTitle:"Saves",savesDisallowed:"Saving has been disallowed on this passage.",savesIncapable:"{_warningIntroLacking} the capabilities required to support saves, so saves have been disabled for this session.",savesLabelAuto:"Autosave",savesLabelDelete:"Delete",savesLabelExport:"Save to Disk…",savesLabelImport:"Load from Disk…",savesLabelLoad:"Load",savesLabelClear:"Delete All",savesLabelSave:"Save",savesLabelSlot:"Slot",savesUnavailable:"No save slots found…",savesUnknownDate:"unknown",settingsTitle:"Settings",settingsOff:"Off",settingsOn:"On",settingsReset:"Reset to Defaults",restartTitle:"Restart",restartPrompt:"Are you sure that you want to restart? Unsaved progress will be lost.",shareTitle:"Share",alertTitle:"Alert",autoloadTitle:"Autoload",autoloadCancel:"Go to start",autoloadOk:"Load autosave",autoloadPrompt:"An autosave exists. Load it now or go to the start?",macroBackText:"Back",macroReturnText:"Return"},Config=(_debug=!1,_addVisitedLinkClass=!1,_cleanupWikifierOutput=!1,_loadDelay=0,_audioPauseOnFadeToZero=!0,_audioPreloadMetadata=!0,_historyControls=!0,_historyMaxStates=40,_macrosIfAssignmentError=!0,_macrosMaxLoopIterations=1e3,_macrosTypeSkipKey=" ",_macrosTypeVisitedPassages=!0,_passagesDisplayTitles=!1,_passagesNobr=!1,_savesId="untitled-story",_savesSlots=8,_savesTryDiskOnMobile=!0,_uiStowBarInitially=800,_uiUpdateStoryElements=!0,_errHistoryModeDeprecated="Config.history.mode has been deprecated and is no longer used by SugarCube, please remove it from your code",Object.freeze({get debug(){return _debug},set debug(value){_debug=Boolean(value)},get addVisitedLinkClass(){return _addVisitedLinkClass},set addVisitedLinkClass(value){_addVisitedLinkClass=Boolean(value)},get cleanupWikifierOutput(){return _cleanupWikifierOutput},set cleanupWikifierOutput(value){_cleanupWikifierOutput=Boolean(value)},get loadDelay(){return _loadDelay},set loadDelay(value){if(!Number.isSafeInteger(value)||value<0)throw new RangeError("Config.loadDelay must be a non-negative integer");_loadDelay=value},audio:Object.freeze({get pauseOnFadeToZero(){return _audioPauseOnFadeToZero},set pauseOnFadeToZero(value){_audioPauseOnFadeToZero=Boolean(value)},get preloadMetadata(){return _audioPreloadMetadata},set preloadMetadata(value){_audioPreloadMetadata=Boolean(value)}}),history:Object.freeze({get controls(){return _historyControls},set controls(value){var controls=Boolean(value);if(1===_historyMaxStates&&controls)throw new Error("Config.history.controls must be false when Config.history.maxStates is 1");_historyControls=controls},get maxStates(){return _historyMaxStates},set maxStates(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.history.maxStates must be a positive integer");_historyMaxStates=value,_historyControls&&1===value&&(_historyControls=!1)},get mode(){throw new Error(_errHistoryModeDeprecated)},set mode(_){throw new Error(_errHistoryModeDeprecated)},get tracking(){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")},set tracking(_){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")}}),macros:Object.freeze({get ifAssignmentError(){return _macrosIfAssignmentError},set ifAssignmentError(value){_macrosIfAssignmentError=Boolean(value)},get maxLoopIterations(){return _macrosMaxLoopIterations},set maxLoopIterations(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.macros.maxLoopIterations must be a positive integer");_macrosMaxLoopIterations=value},get typeSkipKey(){return _macrosTypeSkipKey},set typeSkipKey(value){_macrosTypeSkipKey=String(value)},get typeVisitedPassages(){return _macrosTypeVisitedPassages},set typeVisitedPassages(value){_macrosTypeVisitedPassages=Boolean(value)}}),navigation:Object.freeze({get override(){return _navigationOverride},set override(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.navigation.override must be a function or null/undefined (received: ".concat(Util.getType(value),")"));_navigationOverride=value}}),passages:Object.freeze({get descriptions(){return _passagesDescriptions},set descriptions(value){if(null!=value){var valueType=Util.getType(value);if("boolean"!==valueType&&"Object"!==valueType&&"function"!==valueType)throw new TypeError("Config.passages.descriptions must be a boolean, object, function, or null/undefined (received: ".concat(valueType,")"))}_passagesDescriptions=value},get displayTitles(){return _passagesDisplayTitles},set displayTitles(value){_passagesDisplayTitles=Boolean(value)},get nobr(){return _passagesNobr},set nobr(value){_passagesNobr=Boolean(value)},get onProcess(){return _passagesOnProcess},set onProcess(value){if(null!=value){var valueType=Util.getType(value);if("function"!==valueType)throw new TypeError("Config.passages.onProcess must be a function or null/undefined (received: ".concat(valueType,")"))}_passagesOnProcess=value},get start(){return _passagesStart},set start(value){if(null!=value){var valueType=Util.getType(value);if("string"!==valueType)throw new TypeError("Config.passages.start must be a string or null/undefined (received: ".concat(valueType,")"))}_passagesStart=value},get transitionOut(){return _passagesTransitionOut},set transitionOut(value){if(null!=value){var valueType=Util.getType(value);if("string"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.passages.transitionOut must be a string, non-negative integer, or null/undefined (received: ".concat(valueType,")"))}_passagesTransitionOut=value}}),saves:Object.freeze({get autoload(){return _savesAutoload},set autoload(value){if(null!=value){var valueType=Util.getType(value);if("boolean"!==valueType&&"string"!==valueType&&"function"!==valueType)throw new TypeError("Config.saves.autoload must be a boolean, string, function, or null/undefined (received: ".concat(valueType,")"))}_savesAutoload=value},get autosave(){return _savesAutosave},set autosave(value){if(null!=value){var valueType=Util.getType(value);if("string"===valueType)return void(_savesAutosave=[value]);if("boolean"!==valueType&&("Array"!==valueType||!value.every((function(item){return"string"==typeof item})))&&"function"!==valueType)throw new TypeError("Config.saves.autosave must be a boolean, Array<string>, function, or null/undefined (received: ".concat(valueType).concat("Array"===valueType?"<any>":"",")"))}_savesAutosave=value},get id(){return _savesId},set id(value){if("string"!=typeof value||""===value)throw new TypeError("Config.saves.id must be a non-empty string (received: ".concat(Util.getType(value),")"));_savesId=value},get isAllowed(){return _savesIsAllowed},set isAllowed(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.saves.isAllowed must be a function or null/undefined (received: ".concat(Util.getType(value),")"));_savesIsAllowed=value},get slots(){return _savesSlots},set slots(value){if(!Number.isSafeInteger(value)||value<0)throw new TypeError("Config.saves.slots must be a non-negative integer (received: ".concat(Util.getType(value),")"));_savesSlots=value},get tryDiskOnMobile(){return _savesTryDiskOnMobile},set tryDiskOnMobile(value){_savesTryDiskOnMobile=Boolean(value)},get version(){return _savesVersion},set version(value){_savesVersion=value},get onLoad(){throw new Error("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead")},set onLoad(value){console.warn("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead"),Save.onLoad.add(value)},get onSave(){throw new Error("Config.saves.onSave has been deprecated, use the Save.onSave API instead")},set onSave(value){console.warn("Config.saves.onSave has been deprecated, use the Save.onSave API instead"),Save.onSave.add(value)}}),ui:Object.freeze({get stowBarInitially(){return _uiStowBarInitially},set stowBarInitially(value){var valueType=Util.getType(value);if("boolean"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.ui.stowBarInitially must be a boolean or non-negative integer (received: ".concat(valueType,")"));_uiStowBarInitially=value},get updateStoryElements(){return _uiUpdateStoryElements},set updateStoryElements(value){_uiUpdateStoryElements=Boolean(value)}})})),_navigationOverride,_passagesDescriptions,_passagesStart,_passagesOnProcess,_passagesTransitionOut,_savesAutoload,_savesAutosave,_savesIsAllowed,_savesVersion,_debug,_addVisitedLinkClass,_cleanupWikifierOutput,_loadDelay,_audioPauseOnFadeToZero,_audioPreloadMetadata,_historyControls,_historyMaxStates,_macrosIfAssignmentError,_macrosMaxLoopIterations,_macrosTypeSkipKey,_macrosTypeVisitedPassages,_passagesDisplayTitles,_passagesNobr,_savesId,_savesSlots,_savesTryDiskOnMobile,_uiStowBarInitially,_uiUpdateStoryElements,_errHistoryModeDeprecated,SimpleAudio=function(){var _hasPromise,_gestureEventNames=Object.freeze(["click","contextmenu","dblclick","keyup","mouseup","pointerup","touchend"]),_specialIds=Object.freeze([":not",":all",":looped",":muted",":paused",":playing"]),_formatSpecRe=/^([\w-]+)\s*\|\s*(\S.*)$/,_badIdRe=/[:\s]/,_tracks=new Map,_groups=new Map,_lists=new Map,_subscribers=new Map,_masterRate=1,_masterVolume=1,_masterMute=!1,_masterMuteOnHidden=!1,_playReturnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,Has.audio)try{var audio=document.createElement("audio");audio.muted=!0;var value=audio.play();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise}),AudioTrack=function(){function AudioTrack(obj){if(_classCallCheck(this,AudioTrack),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioTrack))throw new Error("sources parameter must be either an array, of URIs or source objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioTrack,[{key:"_create",value:function(sourceList){var dataUriRe=/^data:\s*audio\/(?:x-)?([^;,]+)\s*[;,]/i,extRe=/\.([^./\\]+)$/,formats=AudioTrack.formats,usedSources=[],audio=document.createElement("audio");audio.preload="none",sourceList.forEach((function(src){var srcUri=null;switch(_typeof(src)){case"string":var match;if("data:"===src.slice(0,5)){if(null===(match=dataUriRe.exec(src)))throw new Error("source data URI missing media type")}else if(null===(match=extRe.exec(Util.parseUrl(src).pathname)))throw new Error("source URL missing file extension");formats[match[1]]&&(srcUri=src);break;case"object":if(null===src)throw new Error("source object cannot be null");if(!src.hasOwnProperty("src"))throw new Error('source object missing required "src" property');if(!src.hasOwnProperty("format"))throw new Error('source object missing required "format" property');formats[src.format]&&(srcUri=src.src);break;default:throw new Error("invalid source value (type: ".concat(_typeof(src),")"))}if(null!==srcUri){var source=document.createElement("source");source.src=srcUri,audio.appendChild(source),usedSources.push(srcUri)}})),audio.hasChildNodes()&&Config.audio.preloadMetadata&&(audio.preload="metadata"),this._finalize(audio,usedSources,clone(sourceList))}},{key:"_copy",value:function(obj){this._finalize(obj.audio.cloneNode(!0),clone(obj.sources),clone(obj.originals))}},{key:"_finalize",value:function(audio,sources,originals){var _this3=this;Object.defineProperties(this,{audio:{configurable:!0,value:audio},sources:{value:Object.freeze(sources)},originals:{value:Object.freeze(originals)},_error:{writable:!0,value:!1},_faderId:{writable:!0,value:null},_mute:{writable:!0,value:!1},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1}}),jQuery(this.audio).on("loadstart.AudioTrack",(function(){return _this3._error=!1})).on("error.AudioTrack",(function(){return _this3._error=!0})).find("source:last-of-type").on("error.AudioTrack",(function(){return _this3._trigger("error")})),function(id,callback){if("function"!=typeof callback)throw new Error("callback parameter must be a function");_subscribers.set(id,callback)}(this,(function(mesg){if(_this3.audio)switch(mesg){case"loadwithscreen":if(_this3.hasSource()){var lockId=LoadScreen.lock();_this3.one("canplaythrough.AudioTrack_loadwithscreen error.AudioTrack_loadwithscreen",(function(){jQuery(this).off(".AudioTrack_loadwithscreen"),LoadScreen.unlock(lockId)})).load()}break;case"load":_this3.load();break;case"mute":_this3._updateAudioMute();break;case"rate":_this3._updateAudioRate();break;case"stop":_this3.stop();break;case"volume":_this3._updateAudioVolume();break;case"unload":_this3.unload()}else unsubscribe(_this3)})),this._updateAudioMute(),this._updateAudioRate(),this._updateAudioVolume()}},{key:"_trigger",value:function(eventName){jQuery(this.audio).triggerHandler(eventName)}},{key:"_destroy",value:function(){unsubscribe(this),this.audio&&(jQuery(this.audio).off(),this.unload(),this._error=!0,delete this.audio)}},{key:"clone",value:function(){return new AudioTrack(this)}},{key:"load",value:function(){var _this4=this;if(this.fadeStop(),this.audio.pause(),!this.audio.hasChildNodes()){if(0===this.sources.length)return;this.sources.forEach((function(srcUri){var source=document.createElement("source");source.src=srcUri,_this4.audio.appendChild(source)}))}"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.isLoading()||this.audio.load()}},{key:"unload",value:function(){this.fadeStop(),this.stop();var audio=this.audio;for(audio.preload="none";audio.hasChildNodes();)audio.removeChild(audio.firstChild);audio.load()}},{key:"play",value:function(){var _this5=this;if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));"auto"!==this.audio.preload&&(this.audio.preload="auto");var namespace=".AudioTrack_play";return _playReturnsPromise()?this.audio.play():new Promise((function(resolve,reject){_this5.isPlaying()?resolve():(jQuery(_this5.audio).off(namespace).one("error".concat(namespace," playing").concat(namespace," timeupdate").concat(namespace),(function(ev){jQuery(_this5).off(namespace),"error"===ev.type?reject(new Error("unknown audio play error")):resolve()})),_this5.audio.play())}))}},{key:"playWhenAllowed",value:function(){var _this6=this;this.play().catch((function(){var gestures=_gestureEventNames.map((function(name){return"".concat(name,".AudioTrack_playWhenAllowed")})).join(" ");jQuery(document).one(gestures,(function(){jQuery(document).off(".AudioTrack_playWhenAllowed"),_this6.audio.play()}))}))}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time(0),this._trigger(":stopped")}},{key:"fade",value:function(duration,toVol,fromVol){var _this7=this;if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));this.fadeStop();var from=Math.clamp(null==fromVol?this.volume():fromVol,0,1),to=Math.clamp(toVol,0,1);return from!==to?(this.volume(from),jQuery(this.audio).off("timeupdate.AudioTrack_fade").one("timeupdate.AudioTrack_fade",(function(){var min,max;from<to?(min=from,max=to):(min=to,max=from);var time=Math.max(duration,1),delta=(to-from)/(time/.025);_this7._trigger(":fading"),_this7._faderId=setInterval((function(){_this7.isPlaying()?(_this7.volume(Math.clamp(_this7.volume()+delta,min,max)),Config.audio.pauseOnFadeToZero&&0===_this7.volume()&&_this7.pause(),_this7.volume()===to&&(_this7.fadeStop(),_this7._trigger(":faded"))):_this7.fadeStop()}),25)})),this.play()):void 0}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null)}},{key:"loop",value:function(_loop){return null==_loop?this.audio.loop:(this.audio.loop=!!_loop,this)}},{key:"mute",value:function(_mute){return null==_mute?this._mute:(this._mute=!!_mute,this._updateAudioMute(),this)}},{key:"_updateAudioMute",value:function(){this.audio.muted=this._mute||_masterMute}},{key:"rate",value:function(_rate){if(null==_rate)return this._rate;if("number"!=typeof _rate)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate,.2,5),this._updateAudioRate(),this}},{key:"_updateAudioRate",value:function(){this.audio.playbackRate=Math.clamp(this._rate*_masterRate,.2,5)}},{key:"time",value:function(_time){var _this8=this;if(null==_time)return this.audio.currentTime;if("number"!=typeof _time)throw new TypeError("time parameter must be a number");return this.hasMetadata()?this.audio.currentTime=_time:jQuery(this.audio).off("loadedmetadata.AudioTrack_time").one("loadedmetadata.AudioTrack_time",(function(){return _this8.audio.currentTime=_time})),this}},{key:"volume",value:function(_volume){if(null==_volume)return this._volume;if("number"!=typeof _volume)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume,0,1),this._updateAudioVolume(),this}},{key:"_updateAudioVolume",value:function(){this.audio.volume=Math.clamp(this._volume*_masterVolume,0,1)}},{key:"duration",value:function(){return this.audio.duration}},{key:"remaining",value:function(){return this.audio.duration-this.audio.currentTime}},{key:"isFailed",value:function(){return this._error}},{key:"isLoading",value:function(){return this.audio.networkState===HTMLMediaElement.NETWORK_LOADING}},{key:"isUnloaded",value:function(){return!this.audio.hasChildNodes()}},{key:"isUnavailable",value:function(){return!this.hasSource()||this.isUnloaded()||this.isFailed()}},{key:"isPlaying",value:function(){return!this.audio.paused&&this.hasSomeData()}},{key:"isPaused",value:function(){return this.audio.paused&&(this.audio.duration===1/0||this.audio.currentTime>0)&&!this.audio.ended}},{key:"isStopped",value:function(){return this.audio.paused&&0===this.audio.currentTime}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isFading",value:function(){return null!==this._faderId}},{key:"isSeeking",value:function(){return this.audio.seeking}},{key:"hasSource",value:function(){return this.sources.length>0}},{key:"hasNoData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_NOTHING}},{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasSomeData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"hasData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA}},{key:"on",value:function(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return jQuery.fn.on.apply(jQuery(this.audio),args),this}},{key:"one",value:function(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];return jQuery.fn.one.apply(jQuery(this.audio),args),this}},{key:"off",value:function(){for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++)args[_key7]=arguments[_key7];return jQuery.fn.off.apply(jQuery(this.audio),args),this}}]),AudioTrack}();Object.defineProperties(AudioTrack,{formats:{value:function(){var audio=document.createElement("audio"),types=new Map;function canPlay(mimeType){return types.has(mimeType)||types.set(mimeType,""!==audio.canPlayType(mimeType).replace(/^no$/i,"")),types.get(mimeType)}return Object.assign(Object.create(null),{aac:canPlay("audio/aac"),caf:canPlay("audio/x-caf")||canPlay("audio/caf"),flac:canPlay("audio/x-flac")||canPlay("audio/flac"),mp3:canPlay('audio/mpeg; codecs="mp3"')||canPlay("audio/mpeg")||canPlay("audio/mp3")||canPlay("audio/mpa"),mpeg:canPlay("audio/mpeg"),m4a:canPlay("audio/x-m4a")||canPlay("audio/m4a")||canPlay("audio/aac"),mp4:canPlay("audio/x-mp4")||canPlay("audio/mp4")||canPlay("audio/aac"),ogg:canPlay("audio/ogg"),oga:canPlay("audio/ogg"),opus:canPlay('audio/ogg; codecs="opus"')||canPlay("audio/opus"),wav:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),wave:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),weba:canPlay("audio/webm"),webm:canPlay("audio/webm")})}()}});var AudioList=function(){function AudioList(obj){if(_classCallCheck(this,AudioList),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioList))throw new Error("tracks parameter must be either an array, of track objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioList,[{key:"_create",value:function(trackList){var _this9=this;this._finalize(trackList.map((function(trackObj){if("object"!==_typeof(trackObj))throw new Error("tracks parameter array members must be objects");var own,rate,track,volume;if(trackObj instanceof AudioTrack)own=!0,rate=trackObj.rate(),track=trackObj.clone(),volume=trackObj.volume();else{if(!trackObj.hasOwnProperty("track"))throw new Error('track object missing required "track" property');if(!(trackObj.track instanceof AudioTrack))throw new Error('track object\'s "track" property must be an AudioTrack object');own=trackObj.hasOwnProperty("own")&&trackObj.own,rate=trackObj.hasOwnProperty("rate")?trackObj.rate:trackObj.track.rate(),track=trackObj.track,volume=trackObj.hasOwnProperty("volume")?trackObj.volume:trackObj.track.volume()}return track.stop(),track.loop(!1),track.mute(!1),track.rate(rate),track.volume(volume),track.on("ended.AudioList",(function(){return _this9._onEnd()})),{own:own,track:track,volume:volume,rate:rate}})))}},{key:"_copy",value:function(obj){this._finalize(clone(obj.tracks))}},{key:"_finalize",value:function(tracks){Object.defineProperties(this,{tracks:{configurable:!0,value:Object.freeze(tracks)},queue:{configurable:!0,value:[]},current:{writable:!0,value:null},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1},_mute:{writable:!0,value:!1},_loop:{writable:!0,value:!1},_shuffle:{writable:!0,value:!1}})}},{key:"_destroy",value:function(){this.stop(),this.tracks.filter((function(trackObj){return trackObj.own})).forEach((function(trackObj){return trackObj.track._destroy()})),delete this.tracks,delete this.queue}},{key:"load",value:function(){this.tracks.forEach((function(trackObj){return trackObj.track.load()}))}},{key:"unload",value:function(){this.stop(),this.tracks.forEach((function(trackObj){return trackObj.track.unload()}))}},{key:"play",value:function(){return null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||(0===this.queue.length&&this._fillQueue(),this._next())?this.current.track.play():Promise.reject(new Error("no tracks were available"))}},{key:"playWhenAllowed",value:function(){var _this10=this;this.play().catch((function(){var gestures=_gestureEventNames.map((function(name){return"".concat(name,".AudioList_playWhenAllowed")})).join(" ");jQuery(document).one(gestures,(function(){jQuery(document).off(".AudioList_playWhenAllowed"),_this10.play()}))}))}},{key:"pause",value:function(){null!==this.current&&this.current.track.pause()}},{key:"stop",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null),this._drainQueue()}},{key:"skip",value:function(){this._next()?this.current.track.play():this._loop&&this.play()}},{key:"fade",value:function(duration,toVol,fromVol){if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(0===this.queue.length&&this._fillQueue(),null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||this._next()){var adjFromVol,adjToVol=Math.clamp(toVol,0,1)*this.current.volume;return null!=fromVol&&(adjFromVol=Math.clamp(fromVol,0,1)*this.current.volume),this._volume=toVol,this.current.track.fade(duration,adjToVol,adjFromVol)}}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this.current&&this.current.track.fadeStop()}},{key:"loop",value:function(_loop2){return null==_loop2?this._loop:(this._loop=!!_loop2,this)}},{key:"mute",value:function(_mute2){return null==_mute2?this._mute:(this._mute=!!_mute2,null!==this.current&&this.current.track.mute(this._mute),this)}},{key:"rate",value:function(_rate2){if(null==_rate2)return this._rate;if("number"!=typeof _rate2)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate2,.2,5),null!==this.current&&this.current.track.rate(this._rate*this.current.rate),this}},{key:"shuffle",value:function(_shuffle){var _this11=this;if(null==_shuffle)return this._shuffle;if(this._shuffle=!!_shuffle,this.queue.length>0&&(this._fillQueue(),!this._shuffle&&null!==this.current&&this.queue.length>1)){var _this$queue,firstIdx=this.queue.findIndex((function(trackObj){return trackObj===_this11.current}));if(-1!==firstIdx)(_this$queue=this.queue).push.apply(_this$queue,_toConsumableArray(this.queue.splice(0,firstIdx+1)))}return this}},{key:"volume",value:function(_volume2){if(null==_volume2)return this._volume;if("number"!=typeof _volume2)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume2,0,1),null!==this.current&&this.current.track.volume(this._volume*this.current.volume),this}},{key:"duration",value:function(){if(arguments.length>0)throw new Error("duration takes no parameters");return this.tracks.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0)}},{key:"remaining",value:function(){if(arguments.length>0)throw new Error("remaining takes no parameters");var remainingTime=this.queue.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0);return null!==this.current&&(remainingTime+=this.current.track.remaining()),remainingTime}},{key:"time",value:function(){if(arguments.length>0)throw new Error("time takes no parameters");return this.duration()-this.remaining()}},{key:"isPlaying",value:function(){return null!==this.current&&this.current.track.isPlaying()}},{key:"isPaused",value:function(){return null===this.current||this.current.track.isPaused()}},{key:"isStopped",value:function(){return 0===this.queue.length&&null===this.current}},{key:"isEnded",value:function(){return 0===this.queue.length&&(null===this.current||this.current.track.isEnded())}},{key:"isFading",value:function(){return null!==this.current&&this.current.track.isFading()}},{key:"_next",value:function(){var nextTrack;for(null!==this.current&&(this.current.track.stop(),this.current=null);nextTrack=this.queue.shift();)if(!nextTrack.track.isUnavailable()){this.current=nextTrack;break}return null!==this.current&&(this.current.track.mute(this._mute),this.current.track.rate(this._rate*this.current.rate),this.current.track.volume(this._volume*this.current.volume),this.current.track.loop(!1),!0)}},{key:"_onEnd",value:function(){if(0===this.queue.length){if(!this._loop)return;this._fillQueue()}this._next()&&this.current.track.play()}},{key:"_drainQueue",value:function(){this.queue.splice(0)}},{key:"_fillQueue",value:function(){var _this$queue2;this._drainQueue(),(_this$queue2=this.queue).push.apply(_this$queue2,_toConsumableArray(this.tracks.filter((function(trackObj){return!trackObj.track.isUnavailable()})))),0!==this.queue.length&&this._shuffle&&(this.queue.shuffle(),this.queue.length>1&&this.queue[0]===this.current&&this.queue.push(this.queue.shift()))}}]),AudioList}(),AudioRunner=function(){function AudioRunner(list){if(_classCallCheck(this,AudioRunner),!(list instanceof Set||list instanceof AudioRunner))throw new TypeError("list parameter must be a Set or a AudioRunner instance");Object.defineProperties(this,{trackIds:{value:new Set(list instanceof AudioRunner?list.trackIds:list)}})}return _createClass(AudioRunner,[{key:"load",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.load)}},{key:"unload",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.unload)}},{key:"play",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.play)}},{key:"playWhenAllowed",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.playWhenAllowed)}},{key:"pause",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.pause)}},{key:"stop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.stop)}},{key:"fade",value:function(duration,toVol,fromVol){if(null==duration||null==toVol)throw new Error("fade requires parameters");AudioRunner._run(this.trackIds,AudioTrack.prototype.fade,duration,toVol,fromVol)}},{key:"fadeIn",value:function(duration,fromVol){if(null==duration)throw new Error("fadeIn requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeIn,duration,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){if(null==duration)throw new Error("fadeOut requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeOut,duration,fromVol)}},{key:"fadeStop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeStop)}},{key:"loop",value:function(_loop3){if(null==_loop3)throw new Error("loop requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.loop,_loop3),this}},{key:"mute",value:function(_mute3){if(null==_mute3)throw new Error("mute requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.mute,_mute3),this}},{key:"rate",value:function(_rate3){if(null==_rate3)throw new Error("rate requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.rate,_rate3),this}},{key:"time",value:function(_time2){if(null==_time2)throw new Error("time requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.time,_time2),this}},{key:"volume",value:function(_volume3){if(null==_volume3)throw new Error("volume requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.volume,_volume3),this}},{key:"on",value:function(){for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++)args[_key8]=arguments[_key8];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.on].concat(args)),this}},{key:"one",value:function(){for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++)args[_key9]=arguments[_key9];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.one].concat(args)),this}},{key:"off",value:function(){for(var _len10=arguments.length,args=new Array(_len10),_key10=0;_key10<_len10;_key10++)args[_key10]=arguments[_key10];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.off].concat(args)),this}}],[{key:"_run",value:function(ids,fn){for(var _len11=arguments.length,args=new Array(_len11>2?_len11-2:0),_key11=2;_key11<_len11;_key11++)args[_key11-2]=arguments[_key11];ids.forEach((function(id){var track=_tracks.get(id);track&&fn.apply(track,args)}))}}]),AudioRunner}();var _runnerParseSelector=function(){var notWsRe=/\S/g,parenRe=/[()]/g;function processNegation(str,startPos){var match;if(notWsRe.lastIndex=startPos,null===(match=notWsRe.exec(str))||"("!==match[0])throw new Error('invalid ":not()" syntax: missing parentheticals');parenRe.lastIndex=notWsRe.lastIndex;for(var start=notWsRe.lastIndex,result={str:"",nextMatch:-1},depth=1;null!==(match=parenRe.exec(str));)if("("===match[0]?++depth:--depth,depth<1){result.nextMatch=parenRe.lastIndex,result.str=str.slice(start,result.nextMatch-1);break}return result}return function parseSelector(idArg){for(var match,ids=[],idRe=/:?[^\s:()]+/g;null!==(match=idRe.exec(idArg));){var id=match[0];if(":not"===id){if(0===ids.length)throw new Error('invalid negation: no group ID preceded ":not()"');var parent=ids[ids.length-1];if(":"!==parent.id[0])throw new Error('invalid negation of track "'.concat(parent.id,'": only groups may be negated with ":not()"'));var negation=processNegation(idArg,idRe.lastIndex);if(-1===negation.nextMatch)throw new Error('unknown error parsing ":not()"');idRe.lastIndex=negation.nextMatch,parent.not=parseSelector(negation.str)}else ids.push({id:id})}return ids}}();function masterMute(mute){if(null==mute)return _masterMute;publish("mute",_masterMute=!!mute)}function unsubscribe(id){_subscribers.delete(id)}function publish(mesg,data){_subscribers.forEach((function(fn){return fn(mesg,data)}))}function _newTrack(sources){return new AudioTrack(sources.map((function(source){if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);if(passage.tags.includes("Twine.audio"))return passage.text.trim()}var match=_formatSpecRe.exec(source);return null===match?source:{format:match[1],src:match[2]}})))}return Object.freeze(Object.defineProperties({},{tracks:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("track ID"),arguments.length<2&&errors.push("sources"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='track ID "'.concat(id,'"');if(_badIdRe.test(id))throw new Error("invalid ".concat(what,": track IDs must not contain colons or whitespace"));var track,sources=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{track=_newTrack(sources)}catch(ex){throw new Error("".concat(what,": error during track initialization: ").concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("".concat(what,": no supported audio sources found"));_tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.set(id,track)}},delete:{value:function(id){return _tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.delete(id)}},clear:{value:function(){_tracks.forEach((function(track){return track._destroy()})),_tracks.clear()}},has:{value:function(id){return _tracks.has(id)}},get:{value:function(id){return _tracks.get(id)||null}}}))},groups:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("group ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='group ID "'.concat(id,'"');if(":"!==id[0]||_badIdRe.test(id.slice(1)))throw new Error("invalid ".concat(what,": group IDs must start with a colon and must not contain colons or whitespace"));if(_specialIds.includes(id))throw new Error("cannot clobber special ".concat(what));var group,trackIds=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{group=new Set(trackIds.map((function(trackId){if(!_tracks.has(trackId))throw new Error('track "'.concat(trackId,'" does not exist'));return trackId})))}catch(ex){throw new Error("".concat(what,": error during group initialization: ").concat(ex.message))}_groups.set(id,Object.freeze(Array.from(group)))}},delete:{value:function(id){return _groups.delete(id)}},clear:{value:function(){_groups.clear()}},has:{value:function(id){return _groups.has(id)}},get:{value:function(id){return _groups.get(id)||null}}}))},lists:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("list ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='list ID "'.concat(id,'"');if(_badIdRe.test(id))return this.error("invalid ".concat(what,": list IDs must not contain colons or whitespace"));var list,descriptors=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{list=new AudioList(descriptors.map((function(desc){if(null===desc)throw new Error("track descriptor must be a string or object (type: null)");switch(_typeof(desc)){case"string":desc={id:desc};break;case"object":if(!desc.hasOwnProperty("id")&&!desc.hasOwnProperty("sources"))throw new Error('track descriptor must contain one of either an "id" or a "sources" property');if(desc.hasOwnProperty("id")&&desc.hasOwnProperty("sources"))throw new Error('track descriptor must contain either an "id" or a "sources" property, not both');break;default:throw new Error("track descriptor must be a string or object (type: ".concat(_typeof(desc),")"))}var own,track,volume;if(desc.hasOwnProperty("id")){if("string"!=typeof desc.id)throw new Error('"id" property must be a string');if(!_tracks.has(desc.id))throw new Error('track "'.concat(desc.id,'" does not exist'));track=_tracks.get(desc.id)}else if(desc.hasOwnProperty("sources")){if(!Array.isArray(desc.sources)||0===desc.sources.length)throw new Error('"sources" property must be a non-empty array');if(desc.hasOwnProperty("own"))throw new Error('"own" property is not allowed with the "sources" property');try{track=_newTrack(desc.sources),own=!0}catch(ex){throw new Error("error during track initialization: ".concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("no supported audio sources found")}if(desc.hasOwnProperty("own")){if("boolean"!=typeof desc.own)throw new Error('"own" property must be a boolean');(own=desc.own)&&(track=track.clone())}if(desc.hasOwnProperty("volume")){if("number"!=typeof desc.volume||Number.isNaN(desc.volume)||!Number.isFinite(desc.volume)||desc.volume<0)throw new Error('"volume" property must be a non-negative finite number');volume=desc.volume}return{own:null!=own&&own,track:track,volume:null!=volume?volume:track.volume()}})))}catch(ex){throw new Error("".concat(what,": error during playlist initialization: ").concat(ex.message))}_lists.has(id)&&_lists.get(id)._destroy(),_lists.set(id,list)}},delete:{value:function(id){return _lists.has(id)&&_lists.get(id)._destroy(),_lists.delete(id)}},clear:{value:function(){_lists.forEach((function(list){return list._destroy()})),_lists.clear()}},has:{value:function(id){return _lists.has(id)}},get:{value:function(id){return _lists.get(id)||null}}}))},select:{value:function(){if(0===arguments.length)throw new Error("no track selector specified");var selector=String(arguments[0]).trim(),trackIds=new Set;try{var renderIds=function renderIds(idObj){var ids,id=idObj.id;switch(id){case":all":ids=allIds;break;case":looped":ids=allIds.filter((function(id){return _tracks.get(id).loop()}));break;case":muted":ids=allIds.filter((function(id){return _tracks.get(id).mute()}));break;case":paused":ids=allIds.filter((function(id){return _tracks.get(id).isPaused()}));break;case":playing":ids=allIds.filter((function(id){return _tracks.get(id).isPlaying()}));break;default:ids=":"===id[0]?_groups.get(id):[id]}if(idObj.hasOwnProperty("not")){var negated=idObj.not.map((function(idObj){return renderIds(idObj)})).flat(1/0);ids=ids.filter((function(id){return!negated.includes(id)}))}return ids},allIds=Array.from(_tracks.keys());_runnerParseSelector(selector).forEach((function(idObj){return renderIds(idObj).forEach((function(id){if(!_tracks.has(id))throw new Error('track "'.concat(id,'" does not exist'));trackIds.add(id)}))}))}catch(ex){throw new Error("error during runner initialization: ".concat(ex.message))}return new AudioRunner(trackIds)}},load:{value:function(){publish("load")}},loadWithScreen:{value:function(){publish("loadwithscreen")}},mute:{value:masterMute},muteOnHidden:{value:function(mute){if(!Visibility.isEnabled())return!1;if(null==mute)return _masterMuteOnHidden;var namespace=".SimpleAudio_masterMuteOnHidden";if(_masterMuteOnHidden=!!mute){var visibilityChange="".concat(Visibility.changeEvent).concat(namespace);jQuery(document).off(namespace).on(visibilityChange,(function(){return masterMute(Visibility.isHidden())})),Visibility.isHidden()&&masterMute(!0)}else jQuery(document).off(namespace)}},rate:{value:function(rate){if(null==rate)return _masterRate;if("number"!=typeof rate||Number.isNaN(rate)||!Number.isFinite(rate))throw new Error("rate must be a finite number");publish("rate",_masterRate=Math.clamp(rate,.2,5))}},stop:{value:function(){publish("stop")}},unload:{value:function(){publish("unload")}},volume:{value:function(volume){if(null==volume)return _masterVolume;if("number"!=typeof volume||Number.isNaN(volume)||!Number.isFinite(volume))throw new Error("volume must be a finite number");publish("volume",_masterVolume=Math.clamp(volume,0,1))}}}))}(),State=function(){var _history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null,_tempVariables={};function stateMarshal(noDelta){var stateObj={index:_activeIndex};return noDelta?stateObj.history=clone(_history):stateObj.delta=historyDeltaEncode(_history),_expired.length>0&&(stateObj.expired=_toConsumableArray(_expired)),null!==_prng&&(stateObj.seed=_prng.seed),stateObj}function stateUnmarshal(stateObj,noDelta){if(null==stateObj)throw new Error("state object is null or undefined");if(!stateObj.hasOwnProperty(noDelta?"history":"delta")||0===stateObj[noDelta?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!stateObj.hasOwnProperty("index"))throw new Error("state object has no index");if(null!==_prng&&!stateObj.hasOwnProperty("seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===_prng&&stateObj.hasOwnProperty("seed"))throw new Error("state object has seed, but PRNG is disabled");_history=noDelta?clone(stateObj.history):historyDeltaDecode(stateObj.delta),_activeIndex=stateObj.index,_expired=stateObj.hasOwnProperty("expired")?_toConsumableArray(stateObj.expired):[],stateObj.hasOwnProperty("seed")&&(_prng.seed=stateObj.seed),momentActivate(_activeIndex)}function momentCreate(title,variables){return{title:null==title?"":String(title),variables:null==variables?{}:clone(variables)}}function momentActivate(moment){if(null==moment)throw new Error("moment activation attempted with null or undefined");switch(_typeof(moment)){case"object":_active=clone(moment);break;case"number":if(historyIsEmpty())throw new Error("moment activation attempted with index on empty history");if(moment<0||moment>=historySize())throw new RangeError("moment activation attempted with out-of-bounds index; need [0, ".concat(historySize()-1,"], got ").concat(moment));_active=clone(_history[moment]);break;default:throw new TypeError('moment activation attempted with a "'.concat(_typeof(moment),'"; must be an object or valid history stack index'))}return null!==_prng&&(_prng=PRNGWrapper.unmarshal({seed:_prng.seed,pull:_active.pull})),session.set("state",stateMarshal()),jQuery.event.trigger(":historyupdate"),_active}function historyLength(){return _activeIndex+1}function historySize(){return _history.length}function historyIsEmpty(){return 0===_history.length}function historyTop(){return _history.length>0?_history[_history.length-1]:null}function historyGoTo(index){return!(null==index||index<0||index>=historySize()||index===_activeIndex)&&(momentActivate(_activeIndex=index),!0)}function historyDeltaEncode(historyArr){if(!Array.isArray(historyArr))return null;if(0===historyArr.length)return[];for(var delta=[historyArr[0]],i=1,iend=historyArr.length;i<iend;++i)delta.push(Diff.diff(historyArr[i-1],historyArr[i]));return delta}function historyDeltaDecode(delta){if(!Array.isArray(delta))return null;if(0===delta.length)return[];for(var historyArr=[clone(delta[0])],i=1,iend=delta.length;i<iend;++i)historyArr.push(Diff.patch(historyArr[i-1],delta[i]));return historyArr}function prngInit(seed,useEntropy){var scriptSection;if(!historyIsEmpty())throw scriptSection="the Story JavaScript",new Error("State.prng.init must be called during initialization, within either ".concat(scriptSection," or the StoryInit special passage"));_prng=new PRNGWrapper(seed,useEntropy),_active.pull=_prng.pull}function metadataDelete(key){if("string"!=typeof key)throw new TypeError("State.metadata.delete key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");store&&store.hasOwnProperty(key)&&(1===Object.keys(store).length?storage.delete("metadata"):(delete store[key],storage.set("metadata",store)))}return Object.freeze(Object.defineProperties({},{reset:{value:function(){session.delete("state"),_history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null===_prng?null:new PRNGWrapper(_prng.seed,!1)}},restore:{value:function(){if(session.has("state")){var stateObj=session.get("state");return null!=stateObj&&(stateUnmarshal(stateObj),!0)}return!1}},marshalForSave:{value:function(){return stateMarshal(!0)}},unmarshalForSave:{value:function(stateObj){return stateUnmarshal(stateObj,!0)}},expired:{get:function(){return _expired}},turns:{get:function(){return _expired.length+historyLength()}},passages:{get:function(){return _expired.concat(_history.slice(0,historyLength()).map((function(moment){return moment.title})))}},hasPlayed:{value:function(title){return null!=title&&""!==title&&(!!_expired.includes(title)||!!_history.slice(0,historyLength()).some((function(moment){return moment.title===title})))}},active:{get:function(){return _active}},activeIndex:{get:function(){return _activeIndex}},passage:{get:function(){return _active.title}},variables:{get:function(){return _active.variables}},history:{get:function(){return _history}},length:{get:historyLength},size:{get:historySize},isEmpty:{value:historyIsEmpty},current:{get:function(){return _history.length>0?_history[_activeIndex]:null}},top:{get:historyTop},bottom:{get:function(){return _history.length>0?_history[0]:null}},index:{value:function(index){return historyIsEmpty()||index<0||index>_activeIndex?null:_history[index]}},peek:{value:function(offset){if(historyIsEmpty())return null;var lengthOffset=1+(offset?Math.abs(offset):0);return lengthOffset>historyLength()?null:_history[historyLength()-lengthOffset]}},has:{value:function(title){if(historyIsEmpty()||null==title||""===title)return!1;for(var i=_activeIndex;i>=0;--i)if(_history[i].title===title)return!0;return!1}},create:{value:function(title){for(0,historyLength()<historySize()&&_history.splice(historyLength(),historySize()-historyLength()),_history.push(momentCreate(title,_active.variables)),_prng&&(historyTop().pull=_prng.pull);historySize()>Config.history.maxStates;)_expired.push(_history.shift().title);return momentActivate(_activeIndex=historySize()-1),historyLength()}},goTo:{value:historyGoTo},go:{value:function(offset){return null!=offset&&0!==offset&&historyGoTo(_activeIndex+offset)}},deltaEncode:{value:historyDeltaEncode},deltaDecode:{value:historyDeltaDecode},prng:{value:Object.freeze(Object.defineProperties({},{init:{value:prngInit},isEnabled:{value:function(){return null!==_prng}},pull:{get:function(){return _prng?_prng.pull:NaN}},seed:{get:function(){return _prng?_prng.seed:null}}}))},random:{value:function(){return _prng?_prng.random():Math.random()}},clearTemporary:{value:function(){TempVariables=_tempVariables={}}},temporary:{get:function(){return _tempVariables}},getVar:{value:function(varExpression){try{return Scripting.evalTwineScript(varExpression)}catch(ex){}}},setVar:{value:function(varExpression,value){try{return Scripting.evalTwineScript("".concat(varExpression," = evalTwineScript$Data$"),null,value),!0}catch(ex){}return!1}},metadata:{value:Object.freeze(Object.defineProperties({},{clear:{value:function(){storage.delete("metadata")}},delete:{value:metadataDelete},entries:{value:function(){var store=storage.get("metadata");return store&&Object.entries(store)}},get:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.get key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");return store&&store.hasOwnProperty(key)?store[key]:undefined}},has:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.has key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");return store&&store.hasOwnProperty(key)}},keys:{value:function(){var store=storage.get("metadata");return store&&Object.keys(store)}},set:{value:function(key,value){if("string"!=typeof key)throw new TypeError("State.metadata.set key parameter must be a string (received: ".concat(_typeof(key),")"));if(void 0===value)metadataDelete(key);else{var store=storage.get("metadata")||{};store[key]=value,storage.set("metadata",store)}}},size:{get:function(){var store=storage.get("metadata");return store?Object.keys(store).length:0}}}))},initPRNG:{value:prngInit},restart:{value:function(){return Engine.restart()}},backward:{value:function(){return Engine.backward()}},forward:{value:function(){return Engine.forward()}},display:{value:function(){return Engine.display.apply(Engine,arguments)}},show:{value:function(){return Engine.show.apply(Engine,arguments)}},play:{value:function(){return Engine.play.apply(Engine,arguments)}}}))}(),Scripting=function(){function addAccessibleClickHandler(targets,selector,handler,one,namespace){if(arguments.length<2)throw new Error("addAccessibleClickHandler insufficient number of parameters");var fn,opts;if("function"==typeof selector?(fn=selector,opts={namespace:one,one:!!handler}):(fn=handler,opts={namespace:namespace,one:!!one,selector:selector}),"function"!=typeof fn)throw new TypeError("addAccessibleClickHandler handler parameter must be a function");return jQuery(targets).ariaClick(opts,fn)}function insertElement(place,type,id,classNames,text,title){var $el=jQuery(document.createElement(type));return id&&$el.attr("id",id),classNames&&$el.addClass(classNames),title&&$el.attr("title",title),text&&$el.text(text),place&&$el.appendTo(place),$el[0]}function insertText(place,text){jQuery(place).append(document.createTextNode(text))}function removeChildren(node){jQuery(node).empty()}function removeElement(node){jQuery(node).remove()}function fade(el,options){var current,intervalId,direction="in"===options.fade?1:-1,proxy=el.cloneNode(!0);function setOpacity(el,opacity){el.style.zoom=1,el.style.filter="alpha(opacity=".concat(Math.floor(100*opacity),")"),el.style.opacity=opacity}el.parentNode.replaceChild(proxy,el),"in"===options.fade?(current=0,proxy.style.visibility="visible"):current=1,setOpacity(proxy,current),intervalId=window.setInterval((function(){current+=.05*direction,setOpacity(proxy,Math.easeInOut(current)),(1===direction&&current>=1||-1===direction&&current<=0)&&(el.style.visibility="in"===options.fade?"visible":"hidden",proxy.parentNode.replaceChild(el,proxy),proxy=null,window.clearInterval(intervalId),options.onComplete&&options.onComplete())}),25)}function scrollWindowTo(el,incrementBy){var increment=null!=incrementBy?Number(incrementBy):.1;Number.isNaN(increment)||!Number.isFinite(increment)||increment<0?increment=.1:increment>1&&(increment=1);var intervalId,start=window.scrollY?window.scrollY:document.body.scrollTop,end=function(el){var posTop=function(el){var curtop=0;for(;el.offsetParent;)curtop+=el.offsetTop,el=el.offsetParent;return curtop}(el),posBottom=posTop+el.offsetHeight,winTop=window.scrollY?window.scrollY:document.body.scrollTop,winHeight=window.innerHeight?window.innerHeight:document.body.clientHeight,winBottom=winTop+winHeight;return posTop>=winTop&&posBottom>winBottom&&el.offsetHeight<winHeight?posTop-(winHeight-el.offsetHeight)+20:posTop}(el),distance=Math.abs(start-end),direction=start>end?-1:1,progress=0;intervalId=window.setInterval((function(){progress+=increment,window.scroll(0,start+direction*(distance*Math.easeInOut(progress))),progress>=1&&window.clearInterval(intervalId)}),25)}function toStringOrDefault(value){return stringFrom(value)}function either(){if(0!==arguments.length)return Array.prototype.concat.apply([],arguments).random()}function forget(key){if("string"!=typeof key)throw new TypeError("forget key parameter must be a string (received: ".concat(Util.getType(key),")"));State.metadata.delete(key)}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,i=0,iend=needles.length;i<iend;++i)if(!played.includes(needles[i]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,uBound=played.length-1,turns=State.turns,i=0,iend=needles.length;i<iend&&turns>-1;++i){var lastIndex=played.lastIndexOf(needles[i]);turns=Math.min(turns,-1===lastIndex?-1:uBound-lastIndex)}return turns}function memorize(key,value){if("string"!=typeof key)throw new TypeError("memorize key parameter must be a string (received: ".concat(Util.getType(key),")"));State.metadata.set(key,value)}function passage(){return State.passage}function previous(){var passages=State.passages;if(arguments.length>0){var offset=Number(arguments[0]);if(!Number.isSafeInteger(offset)||offset<1)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return passages.length>offset?passages[passages.length-1-offset]:""}for(var i=passages.length-2;i>=0;--i)if(passages[i]!==State.passage)return passages[i];return""}function random(){var min,max;switch(arguments.length){case 0:throw new Error("random called with insufficient parameters");case 1:min=0,max=Math.trunc(arguments[0]);break;default:min=Math.trunc(arguments[0]),max=Math.trunc(arguments[1])}if(!Number.isInteger(min))throw new Error("random min parameter must be an integer");if(!Number.isInteger(max))throw new Error("random max parameter must be an integer");if(min>max){var _ref6=[max,min];min=_ref6[0],max=_ref6[1]}return Math.floor(State.random()*(max-min+1))+min}function randomFloat(){var min,max;switch(arguments.length){case 0:throw new Error("randomFloat called with insufficient parameters");case 1:min=0,max=Number(arguments[0]);break;default:min=Number(arguments[0]),max=Number(arguments[1])}if(Number.isNaN(min)||!Number.isFinite(min))throw new Error("randomFloat min parameter must be a number");if(Number.isNaN(max)||!Number.isFinite(max))throw new Error("randomFloat max parameter must be a number");if(min>max){var _ref7=[max,min];min=_ref7[0],max=_ref7[1]}return State.random()*(max-min)+min}function recall(key,defaultValue){if("string"!=typeof key)throw new TypeError("recall key parameter must be a string (received: ".concat(Util.getType(key),")"));return State.metadata.has(key)?State.metadata.get(key):defaultValue}function tags(){if(0===arguments.length)return Story.get(State.passage).tags.slice(0);for(var passages=Array.prototype.concat.apply([],arguments),tags=[],i=0,iend=passages.length;i<iend;++i)tags=tags.concat(Story.get(passages[i]).tags);return tags}function temporary(){return State.temporary}function time(){return null===Engine.lastPlay?0:Util.now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),played=State.passages,count=State.turns,i=0,iend=needles.length;i<iend&&count>0;++i)count=Math.min(count,played.count(needles[i]));return count}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],arguments),nLength=needles.length,played=State.passages,seen=new Map,count=0,i=0,iend=played.length;i<iend;++i){var title=played[i];if(seen.has(title))seen.get(title)&&++count;else{var _tags2=Story.get(title).tags;if(_tags2.length>0){for(var found=0,j=0;j<nLength;++j)_tags2.includes(needles[j])&&++found;found===nLength?(++count,seen.set(title,!0)):seen.set(title,!1)}}}return count}var _ref8=function(){function slugifyUrl(url){return Util.parseUrl(url).path.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w]+/g,"-").toLocaleLowerCase()}function addScript(url){return new Promise((function(resolve,reject){jQuery(document.createElement("script")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importScripts failed to load the script "'.concat(url,'".')))})).appendTo(document.head).attr({id:"script-imported-".concat(slugifyUrl(url)),type:"text/javascript",src:url})}))}function addStyle(url){return new Promise((function(resolve,reject){jQuery(document.createElement("link")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importStyles failed to load the stylesheet "'.concat(url,'".')))})).appendTo(document.head).attr({id:"style-imported-".concat(slugifyUrl(url)),rel:"stylesheet",href:url})}))}function sequence(callbacks){return callbacks.reduce((function(seq,fn){return seq.then(fn)}),Promise.resolve())}return{importScripts:function(){for(var _len12=arguments.length,urls=new Array(_len12),_key12=0;_key12<_len12;_key12++)urls[_key12]=arguments[_key12];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addScript(url)}}))):addScript(oneOrSeries)})))},importStyles:function(){for(var _len13=arguments.length,urls=new Array(_len13),_key13=0;_key13<_len13;_key13++)urls[_key13]=arguments[_key13];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addStyle(url)}}))):addStyle(oneOrSeries)})))}}}(),importScripts=_ref8.importScripts,importStyles=_ref8.importStyles,parse=function(){var tokenTable=Util.toEnum({$:"State.variables.",_:"State.temporary.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),parseRe=new RegExp(["(?:\"\"|''|``)",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(`(?:\\\\.|[^`\\\\])+`)","(?:[=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),notSpaceRe=/\S/,varTest=new RegExp("^".concat(Patterns.variable)),withColonTestRe=/^\s*:/,withNotTestRe=/^\s+not\b/;function parse(rawCodeString){if(0!==parseRe.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start");for(var match,code=rawCodeString;null!==(match=parseRe.exec(code));)if(match[1]){var rawTemplate=match[1],parsedTemplate=parseTemplate(rawTemplate);parsedTemplate!==rawTemplate&&(code=code.splice(match.index,rawTemplate.length,parsedTemplate),parseRe.lastIndex+=parsedTemplate.length-rawTemplate.length)}else if(match[2]){var token=match[2];if("$"===token||"_"===token)continue;if(varTest.test(token))token=token[0];else if("is"===token){var start=parseRe.lastIndex,ahead=code.slice(start);withNotTestRe.test(ahead)&&(code=code.splice(start,ahead.search(notSpaceRe)),token="isnot")}else{var _ahead=code.slice(parseRe.lastIndex);if(withColonTestRe.test(_ahead))continue}tokenTable[token]&&(code=code.splice(match.index,token.length,tokenTable[token]),parseRe.lastIndex+=tokenTable[token].length-token.length)}return code}var templateGroupStartRe=/\$\{/g,templateGroupParseRe=new RegExp(["(?:\"\"|'')",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(\\{)","(\\})"].join("|"),"g");function parseTemplate(rawTemplateLiteral){if(0!==templateGroupStartRe.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start of template literal");for(var startMatch,template=rawTemplateLiteral;null!==(startMatch=templateGroupStartRe.exec(template));){var startIdx=startMatch.index+2,endIdx=startIdx,depth=1,endMatch=void 0;for(templateGroupParseRe.lastIndex=startIdx;null!==(endMatch=templateGroupParseRe.exec(template));)if(endMatch[1]?++depth:endMatch[2]&&--depth,0===depth){endIdx=endMatch.index;break}if(endIdx>startIdx){var parseIndex=parseRe.lastIndex,rawGroup=template.slice(startIdx,endIdx);parseRe.lastIndex=0;var parsedGroup=parse(rawGroup);parseRe.lastIndex=parseIndex,template=template.splice(startIdx,rawGroup.length,parsedGroup),templateGroupStartRe.lastIndex+=parsedGroup.length-rawGroup.length}}return template}return parse}();function evalJavaScript(code,output,data){return function(code,output,evalJavaScript$Data$){return eval(code)}.call(output?{output:output}:null,String(code),output,data)}function evalTwineScript(code,output,data){return function(code,output,evalTwineScript$Data$){return eval(code)}.call(output?{output:output}:null,parse(String(code)),output,data)}return Object.freeze(Object.defineProperties({},{parse:{value:parse},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript}}))}(),_ref9=function(){var Lexer=function(){function Lexer(source,initialState){if(_classCallCheck(this,Lexer),arguments.length<2)throw new Error("Lexer constructor called with too few parameters (source:string , initialState:function)");Object.defineProperties(this,{source:{value:source},initial:{value:initialState},state:{writable:!0,value:initialState},start:{writable:!0,value:0},pos:{writable:!0,value:0},depth:{writable:!0,value:0},items:{writable:!0,value:[]},data:{writable:!0,value:{}}})}return _createClass(Lexer,[{key:"reset",value:function(){this.state=this.initial,this.start=0,this.pos=0,this.depth=0,this.items=[],this.data={}}},{key:"run",value:function(){for(;null!==this.state;)this.state=this.state(this);return this.items}},{key:"nextItem",value:function(){for(;0===this.items.length&&null!==this.state;)this.state=this.state(this);return this.items.shift()}},{key:"next",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos++]}},{key:"peek",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos]}},{key:"backup",value:function(num){this.pos-=num||1}},{key:"forward",value:function(num){this.pos+=num||1}},{key:"ignore",value:function(){this.start=this.pos}},{key:"accept",value:function(valid){var ch=this.next();return-1!==ch&&(!!valid.includes(ch)||(this.backup(),!1))}},{key:"acceptRe",value:function(validRe){var ch=this.next();return-1!==ch&&(!!validRe.test(ch)||(this.backup(),!1))}},{key:"acceptRun",value:function(valid){for(;;){var ch=this.next();if(-1===ch)return;if(!valid.includes(ch))break}this.backup()}},{key:"acceptRunRe",value:function(validRe){for(;;){var ch=this.next();if(-1===ch)return;if(!validRe.test(ch))break}this.backup()}},{key:"emit",value:function(type){this.items.push({type:type,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),this.start=this.pos}},{key:"error",value:function(type,message){if(arguments.length<2)throw new Error("Lexer.prototype.error called with too few parameters (type:number , message:string)");return this.items.push({type:type,message:message,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),null}}],[{key:"enumFromNames",value:function(names){var obj=names.reduce((function(obj,name,i){return obj[name]=i,obj}),{});return Object.freeze(Object.assign(Object.create(null),obj))}}]),Lexer}();return{EOF:-1,Lexer:Lexer}}(),EOF=_ref9.EOF,Lexer=_ref9.Lexer,Wikifier=function(){var _optionsStack,lookaheadRe,idOrClassRe,_callDepth=0,Wikifier=function(){function Wikifier(destination,source,options){_classCallCheck(this,Wikifier),Wikifier.Parser.Profile.isEmpty()&&Wikifier.Parser.Profile.compile(),Object.defineProperties(this,{source:{value:String(source)},options:{writable:!0,value:Object.assign({profile:"all"},options)},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""}}),null==destination?this.output=document.createDocumentFragment():destination.jquery?this.output=destination[0]:this.output=destination;try{++_callDepth,this.subWikify(this.output),1===_callDepth&&Config.cleanupWikifierOutput&&convertBreaks(this.output)}finally{--_callDepth}}return _createClass(Wikifier,[{key:"subWikify",value:function(output,terminator,options){var newOptions,oldOptions,oldOutput=this.output;this.output=output,Wikifier.Option.length>0&&(newOptions=Object.assign(newOptions||{},Wikifier.Option.options)),null!==options&&"object"===_typeof(options)&&(newOptions=Object.assign(newOptions||{},options)),newOptions&&(oldOptions=this.options,this.options=Object.assign({},this.options,newOptions));var terminatorMatch,parserMatch,parsersProfile=Wikifier.Parser.Profile.get(this.options.profile),terminatorRegExp=terminator?new RegExp("(?:".concat(terminator,")"),this.options.ignoreTerminatorCase?"gim":"gm"):null;do{if(parsersProfile.parserRegExp.lastIndex=this.nextMatch,terminatorRegExp&&(terminatorRegExp.lastIndex=this.nextMatch),parserMatch=parsersProfile.parserRegExp.exec(this.source),(terminatorMatch=terminatorRegExp?terminatorRegExp.exec(this.source):null)&&(!parserMatch||terminatorMatch.index<=parserMatch.index))return terminatorMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,terminatorMatch.index),this.matchStart=terminatorMatch.index,this.matchLength=terminatorMatch[0].length,this.matchText=terminatorMatch[0],this.nextMatch=terminatorRegExp.lastIndex,this.output=oldOutput,void(oldOptions&&(this.options=oldOptions));if(parserMatch){parserMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,parserMatch.index),this.matchStart=parserMatch.index,this.matchLength=parserMatch[0].length,this.matchText=parserMatch[0],this.nextMatch=parsersProfile.parserRegExp.lastIndex;for(var matchingParser=void 0,i=1,iend=parserMatch.length;i<iend;++i)if(parserMatch[i]){matchingParser=i-1;break}if(parsersProfile.parsers[matchingParser].handler(this),null!=TempState.break)break}}while(terminatorMatch||parserMatch);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=oldOutput,oldOptions&&(this.options=oldOptions)}},{key:"outputText",value:function(destination,startPos,endPos){jQuery(destination).append(document.createTextNode(this.source.substring(startPos,endPos)))}},{key:"rawArgs",value:function(){return this._rawArgs}},{key:"fullArgs",value:function(){return Scripting.parse(this._rawArgs)}}],[{key:"wikifyEval",value:function(text){var output=document.createDocumentFragment();new Wikifier(output,text);var errors=output.querySelector(".error");if(null!==errors)throw new Error(errors.textContent.replace(errorPrologRegExp,""));return output}},{key:"createInternalLink",value:function(destination,passage,text,callback){var $link=jQuery(document.createElement("a"));return null!=passage&&($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken"),$link.ariaClick({one:!0},(function(){"function"==typeof callback&&callback(),Engine.play(passage)}))),text&&$link.append(document.createTextNode(text)),destination&&$link.appendTo(destination),$link[0]}},{key:"createExternalLink",value:function(destination,url,text){var $link=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(text).appendTo(destination);return null!=url&&$link.attr({href:url,tabindex:0}),$link[0]}},{key:"isExternalLink",value:function(link){return!Story.has(link)&&(new RegExp("^".concat(Patterns.url),"gim").test(link)||/[/.?#]/.test(link))}}]),Wikifier}();return Object.defineProperty(Wikifier,"Option",{value:(_optionsStack=[],Object.freeze(Object.defineProperties({},{length:{get:function(){return _optionsStack.length}},options:{get:function(){return Object.assign.apply(Object,[{}].concat(_toConsumableArray(_optionsStack)))}},clear:{value:function(){_optionsStack=[]}},get:{value:function(idx){return _optionsStack[idx]}},pop:{value:function(){return _optionsStack.pop()}},push:{value:function(options){if("object"!==_typeof(options)||null===options)throw new TypeError("Wikifier.Option.push options parameter must be an object (received: ".concat(Util.getType(options),")"));return _optionsStack.push(options)}}})))}),Object.defineProperty(Wikifier,"Parser",{value:function(){var _profiles,_parsers=[];function parsersHas(name){return!!_parsers.find((function(parser){return parser.name===name}))}return Object.freeze(Object.defineProperties({},{parsers:{get:function(){return _parsers}},add:{value:function(parser){if("object"!==_typeof(parser))throw new Error("Wikifier.Parser.add parser parameter must be an object");if(!parser.hasOwnProperty("name"))throw new Error('parser object missing required "name" property');if("string"!=typeof parser.name)throw new Error('parser object "name" property must be a string');if(!parser.hasOwnProperty("match"))throw new Error('parser object missing required "match" property');if("string"!=typeof parser.match)throw new Error('parser object "match" property must be a string');if(!parser.hasOwnProperty("handler"))throw new Error('parser object missing required "handler" property');if("function"!=typeof parser.handler)throw new Error('parser object "handler" property must be a function');if(parser.hasOwnProperty("profiles")&&!Array.isArray(parser.profiles))throw new Error('parser object "profiles" property must be an array');if(parsersHas(parser.name))throw new Error('cannot clobber existing parser "'.concat(parser.name,'"'));_parsers.push(parser)}},delete:{value:function(name){var parser=_parsers.find((function(parser){return parser.name===name}));parser&&_parsers.delete(parser)}},isEmpty:{value:function(){return 0===_parsers.length}},has:{value:parsersHas},get:{value:function(name){return _parsers.find((function(parser){return parser.name===name}))||null}},Profile:{value:Object.freeze(Object.defineProperties({},{profiles:{get:function(){return _profiles}},compile:{value:function(){var all=_parsers,core=all.filter((function(parser){return!Array.isArray(parser.profiles)||parser.profiles.includes("core")}));return _profiles=Object.freeze({all:{parsers:all,parserRegExp:new RegExp(all.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")},core:{parsers:core,parserRegExp:new RegExp(core.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")}})}},isEmpty:{value:function(){return"object"!==_typeof(_profiles)||0===Object.keys(_profiles).length}},has:{value:function(profile){return"object"===_typeof(_profiles)&&_profiles.hasOwnProperty(profile)}},get:{value:function(profile){if("object"!==_typeof(_profiles)||!_profiles.hasOwnProperty(profile))throw new Error('nonexistent parser profile "'.concat(profile,'"'));return _profiles[profile]}}}))}}))}()}),Object.defineProperties(Wikifier,{helpers:{value:{}},getValue:{value:State.getVar},setValue:{value:State.setVar},parse:{value:Scripting.parse},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(Wikifier.helpers,{inlineCss:{value:(lookaheadRe=new RegExp(Patterns.inlineCss,"gm"),idOrClassRe=new RegExp("(".concat(Patterns.cssIdOrClassSigil,")(").concat(Patterns.anyLetter,"+)"),"g"),function(w){var matched,css={classes:[],id:"",styles:{}};do{lookaheadRe.lastIndex=w.nextMatch;var match=lookaheadRe.exec(w.source);if(matched=match&&match.index===w.nextMatch){if(match[1])css.styles[Util.fromCssProperty(match[1])]=match[2].trim();else if(match[3])css.styles[Util.fromCssProperty(match[3])]=match[4].trim();else if(match[5]){var subMatch=void 0;for(idOrClassRe.lastIndex=0;null!==(subMatch=idOrClassRe.exec(match[5]));)"."===subMatch[1]?css.classes.push(subMatch[2]):css.id=subMatch[2]}w.nextMatch=lookaheadRe.lastIndex}}while(matched);return css})},evalText:{value:function(text){var result;try{switch(_typeof(result=Scripting.evalTwineScript(text))){case"string":""===result.trim()&&(result=text);break;case"number":result=String(result);break;default:result=text}}catch(ex){result=text}return result}},evalPassageId:{value:function(passage){return null==passage||Story.has(passage)?passage:Wikifier.helpers.evalText(passage)}},hasBlockContext:{value:function(nodes){for(var hasGCS="function"==typeof window.getComputedStyle,i=nodes.length-1;i>=0;--i){var node=nodes[i];switch(node.nodeType){case Node.ELEMENT_NODE:var tagName=node.nodeName.toUpperCase();if("BR"===tagName)return!0;var styles=hasGCS?window.getComputedStyle(node,null):node.currentStyle;if(styles&&styles.display){if("none"===styles.display)continue;return"block"===styles.display}switch(tagName){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}},createShadowSetterCallback:{value:function(){var macroParser=null;function getMacroContextShadowView(){for(var macro=macroParser||function(){if(!macroParser&&!(macroParser=Wikifier.Parser.get("macro")))throw new Error('cannot find "macro" parser');return macroParser}(),view=new Set,context=macro.context;null!==context;context=context.parent)context._shadows&&context._shadows.forEach((function(name){return view.add(name)}));return _toConsumableArray(view)}return function(code){var shadowStore={};return getMacroContextShadowView().forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]})),function(){var shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null;try{return shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),Scripting.evalJavaScript(code)}finally{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}}()},parseSquareBracketedMarkup:{value:function(){var Item=Lexer.enumFromNames(["Error","DelimLTR","DelimRTL","InnerMeta","ImageMeta","LinkMeta","Link","RightMeta","Setter","Source","Text"]),Delim=Lexer.enumFromNames(["None","LTR","RTL"]);function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexLeftMeta(lexer){if(!lexer.accept("["))return lexer.error(Item.Error,"malformed square-bracketed markup");if(lexer.accept("["))lexer.data.isLink=!0,lexer.emit(Item.LinkMeta);else{if(lexer.accept("<>"),!(lexer.accept("Ii")&&lexer.accept("Mm")&&lexer.accept("Gg")&&lexer.accept("[")))return lexer.error(Item.Error,"malformed square-bracketed markup");lexer.data.isLink=!1,lexer.emit(Item.ImageMeta)}return lexer.depth=2,lexCoreComponents}function lexCoreComponents(lexer){for(var what=lexer.data.isLink?"link":"image",delim=Delim.None;;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup"));break;case"|":delim===Delim.None&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(),lexer.emit(Item.DelimLTR));break;case"-":delim===Delim.None&&">"===lexer.peek()&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(2),lexer.emit(Item.DelimLTR));break;case"<":delim===Delim.None&&"-"===lexer.peek()&&(delim=Delim.RTL,lexer.backup(),lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.DelimRTL));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.InnerMeta),lexer.data.isLink?lexSetter:lexImageLink;case"]":return--lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexImageLink(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup link component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.InnerMeta),lexSetter;case"]":return--lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexSetter(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup setter component"));break;case"'":if(slurpQuote(lexer,"'")===EOF)return lexer.error(Item.Error,"unterminated single quoted string in ".concat(what," markup setter component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)return"]"!==lexer.peek()?lexer.error(Item.Error,"malformed ".concat(what," markup")):(--lexer.depth,lexer.backup(),lexer.emit(Item.Setter),lexer.forward(2),lexer.emit(Item.RightMeta),null)}}return function(w){var lexer=new Lexer(w.source,lexLeftMeta);lexer.start=lexer.pos=w.matchStart;var markup={},items=lexer.run(),last=items.last();return last&&last.type===Item.Error?markup.error=last.message:items.forEach((function(item){var text=item.text.trim();switch(item.type){case Item.ImageMeta:markup.isImage=!0,"<"===text[1]?markup.align="left":">"===text[1]&&(markup.align="right");break;case Item.LinkMeta:markup.isLink=!0;break;case Item.Link:"~"===text[0]?(markup.forceInternal=!0,markup.link=text.slice(1)):markup.link=text;break;case Item.Setter:markup.setter=text;break;case Item.Source:markup.source=text;break;case Item.Text:markup.text=text}})),markup.pos=lexer.pos,markup}}()}}),Wikifier}();!function(){function _verbatimTagHandler(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(match[1]).appendTo(w.output))}Wikifier.Parser.add({name:"quoteByBlock",profiles:["block"],match:"^<<<\\n",terminator:"^<<<\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("blockquote")).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"quoteByLine",profiles:["block"],match:"^>+",lookahead:/^>+/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,i,destStack=[w.output],curLevel=0,newLevel=w.matchLength;do{if(newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement("blockquote")).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();curLevel=newLevel,w.subWikify(destStack[destStack.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(destStack[destStack.length-1]),this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);(matched=match&&match.index===w.nextMatch)&&(newLevel=match[0].length,w.nextMatch+=match[0].length)}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"macro",profiles:["core"],match:"<<",lookahead:new RegExp("<<(/?".concat(Patterns.macroName,")(?:\\s*)((?:(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/)|(?://.*\\n)|(?:`(?:\\\\.|[^`\\\\])*`)|(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>"),"gm"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(w){var matchStart=this.lookahead.lastIndex=w.matchStart;if(this.parseTag(w)){var macro,nextMatch=w.nextMatch,name=this.working.name,rawArgs=this.working.arguments;try{if(!(macro=Macro.get(name))){if(Macro.tags.has(name)){var tags=Macro.tags.get(name);return throwError(w.output,"child tag <<".concat(name,">> was found outside of a call to its parent macro").concat(1===tags.length?"":"s"," <<").concat(tags.join(">>, <<"),">>"),w.source.slice(matchStart,w.nextMatch))}return throwError(w.output,"macro <<".concat(name,">> does not exist"),w.source.slice(matchStart,w.nextMatch))}var payload=null;if(void 0!==macro.tags&&!(payload=this.parseBody(w,macro)))return w.nextMatch=nextMatch,throwError(w.output,"cannot find a closing tag for macro <<".concat(name,">>"),"".concat(w.source.slice(matchStart,w.nextMatch),"…"));if("function"!=typeof macro.handler)return throwError(w.output,"macro <<".concat(name,">> handler function ").concat(void 0===macro.handler?"does not exist":"is not a function"),w.source.slice(matchStart,w.nextMatch));var args=payload?payload[0].args:this.createArgs(rawArgs,this.skipArgs(macro,macro.name));if(void 0!==macro._MACRO_API){this.context=new MacroContext({macro:macro,name:name,args:args,payload:payload,source:w.source.slice(matchStart,w.nextMatch),parent:this.context,parser:w});try{macro.handler.call(this.context)}finally{this.context=this.context.parent}}else{var prevRawArgs=w._rawArgs;w._rawArgs=rawArgs;try{macro.handler(w.output,name,args,w,payload)}finally{w._rawArgs=prevRawArgs}}}catch(ex){return throwError(w.output,"cannot execute ".concat(macro&&macro.isWidget?"widget":"macro"," <<").concat(name,">>: ").concat(ex.message),w.source.slice(matchStart,w.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else w.outputText(w.output,w.matchStart,w.nextMatch)},parseTag:function(w){var match=this.lookahead.exec(w.source);return!(!match||match.index!==w.matchStart||!match[1])&&(w.nextMatch=this.lookahead.lastIndex,this.working.source=w.source.slice(match.index,this.lookahead.lastIndex),this.working.name=match[1],this.working.arguments=match[2],this.working.index=match.index,!0)},parseBody:function(w,macro){for(var openTag=this.working.name,closeTag="/".concat(openTag),closeAlt="end".concat(openTag),bodyTags=!!Array.isArray(macro.tags)&&macro.tags,payload=[],end=-1,opened=1,curSource=this.working.source,curTag=this.working.name,curArgument=this.working.arguments,contentStart=w.nextMatch;-1!==(w.matchStart=w.source.indexOf(this.match,w.nextMatch));)if(this.parseTag(w)){var tagSource=this.working.source,tagName=this.working.name,tagArgs=this.working.arguments,tagBegin=this.working.index,tagEnd=w.nextMatch,hasArgs=""!==tagArgs.trim();switch(tagName){case openTag:++opened;break;case closeAlt:case closeTag:if(hasArgs)throw w.nextMatch=tagBegin+2+tagName.length,new Error('malformed closing tag: "'.concat(tagSource,'"'));--opened;break;default:if(hasArgs&&(tagName.startsWith("/")||tagName.startsWith("end"))){this.lookahead.lastIndex=w.nextMatch=tagBegin+2+tagName.length;continue}if(1===opened&&bodyTags)for(var i=0,iend=bodyTags.length;i<iend;++i)tagName===bodyTags[i]&&(payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),curSource=tagSource,curTag=tagName,curArgument=tagArgs,contentStart=tagEnd)}if(0===opened){payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),end=tagEnd;break}}else this.lookahead.lastIndex=w.nextMatch=w.matchStart+this.match.length;return-1!==end?(w.nextMatch=end,payload):null},createArgs:function(rawArgsString,skipArgs){var args=skipArgs?[]:this.parseArgs(rawArgsString);return Object.defineProperties(args,{raw:{value:rawArgsString},full:{value:Scripting.parse(rawArgsString)}}),args},skipArgs:function(macro,tagName){if(void 0!==macro.skipArgs){var sa=macro.skipArgs;return"boolean"==typeof sa&&sa||Array.isArray(sa)&&sa.includes(tagName)}return void 0!==macro.skipArg0&&(macro.skipArg0&&macro.name===tagName)},parseArgs:function(){var Item=Lexer.enumFromNames(["Error","Bareword","Expression","String","SquareBracket"]),spaceRe=new RegExp(Patterns.space),notSpaceRe=new RegExp(Patterns.notSpace),varTest=new RegExp("^".concat(Patterns.variable));function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexSpace(lexer){var offset=lexer.source.slice(lexer.pos).search(notSpaceRe);if(offset===EOF)return null;switch(0!==offset&&(lexer.pos+=offset,lexer.ignore()),lexer.next()){case"`":return lexExpression;case'"':return lexDoubleQuote;case"'":return lexSingleQuote;case"[":return lexSquareBracket;default:return lexBareword}}function lexExpression(lexer){return slurpQuote(lexer,"`")===EOF?lexer.error(Item.Error,"unterminated backquote expression"):(lexer.emit(Item.Expression),lexSpace)}function lexDoubleQuote(lexer){return slurpQuote(lexer,'"')===EOF?lexer.error(Item.Error,"unterminated double quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSingleQuote(lexer){return slurpQuote(lexer,"'")===EOF?lexer.error(Item.Error,"unterminated single quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSquareBracket(lexer){var what;if(lexer.accept("<>IiMmGg")?(what="image",lexer.acceptRun("<>IiMmGg")):what="link",!lexer.accept("["))return lexer.error(Item.Error,"malformed ".concat(what," markup"));lexer.depth=2;loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case"[":++lexer.depth;break;case"]":if(--lexer.depth,lexer.depth<0)return lexer.error(Item.Error,"unexpected right square bracket ']'");if(1===lexer.depth){if("]"===lexer.next()){--lexer.depth;break loop}lexer.backup()}}return lexer.emit(Item.SquareBracket),lexSpace}function lexBareword(lexer){var offset=lexer.source.slice(lexer.pos).search(spaceRe);return lexer.pos=offset===EOF?lexer.source.length:lexer.pos+offset,lexer.emit(Item.Bareword),offset===EOF?null:lexSpace}return function(rawArgsString){var lexer=new Lexer(rawArgsString,lexSpace),args=[];return lexer.run().forEach((function(item){var arg=item.text;switch(item.type){case Item.Error:throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(item.message));case Item.Bareword:if(varTest.test(arg))arg=State.getVar(arg);else if(/^(?:settings|setup)[.[]/.test(arg))try{arg=Scripting.evalTwineScript(arg)}catch(ex){throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(ex.message))}else if("null"===arg)arg=null;else if("undefined"===arg)arg=undefined;else if("true"===arg)arg=!0;else if("false"===arg)arg=!1;else if("NaN"===arg)arg=NaN;else{var argAsNum=Number(arg);Number.isNaN(argAsNum)||(arg=argAsNum)}break;case Item.Expression:if(""===(arg=arg.slice(1,-1).trim()))arg=undefined;else try{arg=Scripting.evalTwineScript("(".concat(arg,")"))}catch(ex){throw new Error('unable to parse macro argument expression "'.concat(arg,'": ').concat(ex.message))}break;case Item.String:try{arg=Scripting.evalJavaScript(arg)}catch(ex){throw new Error('unable to parse macro argument string "'.concat(arg,'": ').concat(ex.message))}break;case Item.SquareBracket:var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:arg,matchStart:0});if(markup.hasOwnProperty("error"))throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(markup.error));if(markup.pos<arg.length)throw new Error('unable to parse macro argument "'.concat(arg,'": unexpected character(s) "').concat(arg.slice(markup.pos),'" (pos: ').concat(markup.pos,")"));markup.isLink?((arg={isLink:!0}).count=markup.hasOwnProperty("text")?2:1,arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.text=markup.hasOwnProperty("text")?Wikifier.helpers.evalText(markup.text):arg.link,arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link),arg.setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null):markup.isImage&&(arg=function(source){var imgObj={source:source,isImage:!0};if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(imgObj.source=passage.text,imgObj.passage=passage.title)}return imgObj}(Wikifier.helpers.evalPassageId(markup.source)),markup.hasOwnProperty("align")&&(arg.align=markup.align),markup.hasOwnProperty("text")&&(arg.title=Wikifier.helpers.evalText(markup.text)),markup.hasOwnProperty("link")&&(arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link)),arg.setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null)}args.push(arg)})),args}}()}),Wikifier.Parser.add({name:"link",profiles:["core"],match:"\\[\\[[^[]",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(markup.hasOwnProperty("error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{w.nextMatch=markup.pos;var link=Wikifier.helpers.evalPassageId(markup.link),text=markup.hasOwnProperty("text")?Wikifier.helpers.evalText(markup.text):link,setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null,output=(Config.debug?new DebugView(w.output,"link-markup","[[link]]",w.source.slice(w.matchStart,w.nextMatch)):w).output;markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(output,link,text,setFn):Wikifier.createExternalLink(output,link,text)}}}),Wikifier.Parser.add({name:"urlLink",profiles:["core"],match:Patterns.url,handler:function(w){w.outputText(Wikifier.createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch)}}),Wikifier.Parser.add({name:"image",profiles:["core"],match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(markup.hasOwnProperty("error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{var debugView;w.nextMatch=markup.pos,Config.debug&&(debugView=new DebugView(w.output,"image-markup",markup.hasOwnProperty("link")?"[img[][link]]":"[img[]]",w.source.slice(w.matchStart,w.nextMatch))).modes({block:!0});var source,setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null,el=(Config.debug?debugView:w).output;if(markup.hasOwnProperty("link")){var link=Wikifier.helpers.evalPassageId(markup.link);(el=markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(el,link,null,setFn):Wikifier.createExternalLink(el,link)).classList.add("link-image")}if(el=jQuery(document.createElement("img")).appendTo(el).get(0),"data:"!==(source=Wikifier.helpers.evalPassageId(markup.source)).slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(el.setAttribute("data-passage",passage.title),source=passage.text.trim())}el.src=source,markup.hasOwnProperty("text")&&(el.title=Wikifier.helpers.evalText(markup.text)),markup.hasOwnProperty("align")&&(el.align=markup.align)}}}),Wikifier.Parser.add({name:"monospacedByBlock",profiles:["block"],match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){var pre=jQuery(document.createElement("pre"));jQuery(document.createElement("code")).text(match[1]).appendTo(pre),pre.appendTo(w.output),w.nextMatch=this.lookahead.lastIndex}}}),Wikifier.Parser.add({name:"formatByChar",profiles:["core"],match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(w){switch(w.matchText){case"''":w.subWikify(jQuery(document.createElement("strong")).appendTo(w.output).get(0),"''");break;case"//":w.subWikify(jQuery(document.createElement("em")).appendTo(w.output).get(0),"//");break;case"__":w.subWikify(jQuery(document.createElement("u")).appendTo(w.output).get(0),"__");break;case"^^":w.subWikify(jQuery(document.createElement("sup")).appendTo(w.output).get(0),"\\^\\^");break;case"~~":w.subWikify(jQuery(document.createElement("sub")).appendTo(w.output).get(0),"~~");break;case"==":w.subWikify(jQuery(document.createElement("s")).appendTo(w.output).get(0),"==");break;case"{{{":var lookahead=/\{\{\{((?:.|\n)*?)\}\}\}/gm;lookahead.lastIndex=w.matchStart;var match=lookahead.exec(w.source);match&&match.index===w.matchStart&&(jQuery(document.createElement("code")).text(match[1]).appendTo(w.output),w.nextMatch=lookahead.lastIndex)}}}),Wikifier.Parser.add({name:"customStyle",profiles:["core"],match:"@@",terminator:"@@",blockRe:/\s*\n/gm,handler:function(w){var css=Wikifier.helpers.inlineCss(w);this.blockRe.lastIndex=w.nextMatch;var blockMatch=this.blockRe.exec(w.source),blockLevel=blockMatch&&blockMatch.index===w.nextMatch,$el=jQuery(document.createElement(blockLevel?"div":"span")).appendTo(w.output);0===css.classes.length&&""===css.id&&0===Object.keys(css.styles).length?$el.addClass("marked"):(css.classes.forEach((function(className){return $el.addClass(className)})),""!==css.id&&$el.attr("id",css.id),$el.css(css.styles)),blockLevel?(w.nextMatch+=blockMatch[0].length,w.subWikify($el[0],"\\n?".concat(this.terminator))):w.subWikify($el[0],this.terminator)}}),Wikifier.Parser.add({name:"verbatimText",profiles:["core"],match:'"{3}|<[Nn][Oo][Ww][Ii][Kk][Ii]>',lookahead:/(?:"{3}((?:.|\n)*?)"{3})|(?:<[Nn][Oo][Ww][Ii][Kk][Ii]>((?:.|\n)*?)<\/[Nn][Oo][Ww][Ii][Kk][Ii]>)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createElement("span")).addClass("verbatim").text(match[1]||match[2]).appendTo(w.output))}}),Wikifier.Parser.add({name:"horizontalRule",profiles:["core"],match:"^----+$\\n?|<[Hh][Rr]\\s*/?>\\n?",handler:function(w){jQuery(document.createElement("hr")).appendTo(w.output)}}),Wikifier.Parser.add({name:"emdash",profiles:["core"],match:"--",handler:function(w){jQuery(document.createTextNode("—")).appendTo(w.output)}}),Wikifier.Parser.add({name:"doubleDollarSign",profiles:["core"],match:"\\${2}",handler:function(w){jQuery(document.createTextNode("$")).appendTo(w.output)}}),Wikifier.Parser.add({name:"nakedVariable",profiles:["core"],match:"".concat(Patterns.variable,"(?:(?:\\.").concat(Patterns.identifier,")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\[").concat(Patterns.variable,"\\]))*"),handler:function(w){var result=State.getVar(w.matchText);null==result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"variable",w.matchText,w.matchText):w).output,stringFrom(result))}}),Wikifier.Parser.add({name:"template",profiles:["core"],match:"\\?".concat(Patterns.templateName),handler:function(w){var name=w.matchText.slice(1),template=Template.get(name),result=null;switch(template instanceof Array&&(template=template.random()),_typeof(template)){case"function":try{result=stringFrom(template.call({name:name}))}catch(ex){return throwError(w.output,"cannot execute function template ?".concat(name,": ").concat(ex.message),w.source.slice(w.matchStart,w.nextMatch))}break;case"string":result=template}null===result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"template",w.matchText,w.matchText):w).output,result)}}),Wikifier.Parser.add({name:"heading",profiles:["block"],match:"^!{1,6}",terminator:"\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("h".concat(w.matchLength))).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"table",profiles:["block"],match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,table=jQuery(document.createElement("table")).appendTo(w.output).get(0),prevColumns=[],curRowType=null,$rowContainer=null,rowCount=0;w.nextMatch=w.matchStart;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var nextRowType=match[2];"k"===nextRowType?(table.className=match[1],w.nextMatch+=match[0].length+1):(nextRowType!==curRowType&&(curRowType=nextRowType,$rowContainer=jQuery(document.createElement(this.rowTypes[nextRowType])).appendTo(table)),"c"===curRowType?($rowContainer.css("caption-side",0===rowCount?"top":"bottom"),w.nextMatch+=1,w.subWikify($rowContainer[0],this.rowTerminator)):this.rowHandler(w,jQuery(document.createElement("tr")).appendTo($rowContainer).get(0),prevColumns),++rowCount)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))},rowHandler:function(w,rowEl,prevColumns){var matched,_this12=this,cellRe=new RegExp(this.cellPattern,"gm"),col=0,curColCount=1;do{cellRe.lastIndex=w.nextMatch;var cellMatch=cellRe.exec(w.source);if(matched=cellMatch&&cellMatch.index===w.nextMatch){if("~"===cellMatch[1]){var last=prevColumns[col];last&&(++last.rowCount,last.$element.attr("rowspan",last.rowCount).css("vertical-align","middle")),w.nextMatch=cellMatch.index+cellMatch[0].length-1}else if(">"===cellMatch[1])++curColCount,w.nextMatch=cellMatch.index+cellMatch[0].length-1;else{if(cellMatch[2]){w.nextMatch=cellMatch.index+cellMatch[0].length;break}!function(){++w.nextMatch;for(var css=Wikifier.helpers.inlineCss(w),spaceLeft=!1,spaceRight=!1,$cell=void 0;" "===w.source.substr(w.nextMatch,1);)spaceLeft=!0,++w.nextMatch;"!"===w.source.substr(w.nextMatch,1)?($cell=jQuery(document.createElement("th")).appendTo(rowEl),++w.nextMatch):$cell=jQuery(document.createElement("td")).appendTo(rowEl),prevColumns[col]={rowCount:1,$element:$cell},curColCount>1&&($cell.attr("colspan",curColCount),curColCount=1),w.subWikify($cell[0],_this12.cellTerminator)," "===w.matchText.substr(w.matchText.length-2,1)&&(spaceRight=!0),css.classes.forEach((function(className){return $cell.addClass(className)})),""!==css.id&&$cell.attr("id",css.id),spaceLeft&&spaceRight?css.styles["text-align"]="center":spaceLeft?css.styles["text-align"]="right":spaceRight&&(css.styles["text-align"]="left"),$cell.css(css.styles),w.nextMatch=w.nextMatch-1}()}++col}}while(matched)}}),Wikifier.Parser.add({name:"list",profiles:["block"],match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){w.nextMatch=w.matchStart;var matched,i,destStack=[w.output],curType=null,curLevel=0;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var newType=match[2]?"ol":"ul",newLevel=match[0].length;if(w.nextMatch+=match[0].length,newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();else newLevel===curLevel&&newType!==curType&&(destStack.pop(),destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0)));curLevel=newLevel,curType=newType,w.subWikify(jQuery(document.createElement("li")).appendTo(destStack[destStack.length-1]).get(0),this.terminator)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"commentByBlock",profiles:["core"],match:"(?:/(?:%|\\*))|(?:\x3c!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"lineContinuation",profiles:["core"],match:"\\\\".concat(Patterns.spaceNoTerminator,"*\\n|\\n").concat(Patterns.spaceNoTerminator,"*\\\\|\\n?\\\\").concat(Patterns.spaceNoTerminator,"*$|^").concat(Patterns.spaceNoTerminator,"*\\\\\\n?"),handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"lineBreak",profiles:["core"],match:"\\n|<[Bb][Rr]\\s*/?>",handler:function(w){w.options.nobr||jQuery(document.createElement("br")).appendTo(w.output)}}),Wikifier.Parser.add({name:"htmlCharacterReference",profiles:["core"],match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",handler:function(w){jQuery(document.createDocumentFragment()).append(w.matchText).appendTo(w.output)}}),Wikifier.Parser.add({name:"xmlProlog",profiles:["core"],match:"<\\?[Xx][Mm][Ll][^>]*\\?>",handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"verbatimHtml",profiles:["core"],match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"verbatimScriptTag",profiles:["core"],match:"<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>",lookahead:/(<[Ss][Cc][Rr][Ii][Pp][Tt]*>(?:.|\n)*?<\/[Ss][Cc][Rr][Ii][Pp][Tt]>)/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"styleTag",profiles:["core"],match:"<[Ss][Tt][Yy][Ll][Ee][^>]*>",lookahead:/(<[Ss][Tt][Yy][Ll][Ee]*>)((?:.|\n)*?)(<\/[Ss][Tt][Yy][Ll][Ee]>)/gm,imageMarkup:new RegExp(Patterns.cssImage,"g"),hasImageMarkup:new RegExp(Patterns.cssImage),handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){w.nextMatch=this.lookahead.lastIndex;var css=match[2];this.hasImageMarkup.test(css)&&(this.imageMarkup.lastIndex=0,css=css.replace(this.imageMarkup,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(markup.hasOwnProperty("error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text)}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),jQuery(document.createDocumentFragment()).append(match[1]+css+match[3]).appendTo(w.output)}}}),Wikifier.Parser.add({name:"svgTag",profiles:["core"],match:"<[Ss][Vv][Gg][^>]*>",lookahead:/<(\/?)[Ss][Vv][Gg][^>]*>/gm,namespace:"http://www.w3.org/2000/svg",handler:function(w){var _this13=this;this.lookahead.lastIndex=w.nextMatch;for(var match,depth=1;depth>0&&null!==(match=this.lookahead.exec(w.source));)depth+="/"===match[1]?-1:1;if(0===depth){w.nextMatch=this.lookahead.lastIndex;var svgTag=w.source.slice(w.matchStart,this.lookahead.lastIndex),$frag=jQuery(document.createDocumentFragment()).append(svgTag);$frag.find("a[data-passage],image[data-passage]").each((function(_,el){var tagName=el.tagName.toLowerCase();try{_this13.processAttributeDirectives(el)}catch(ex){return throwError(w.output,"svg|<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}el.hasAttribute("data-passage")&&_this13.processDataAttributes(el,tagName)})),$frag.appendTo(w.output)}},processAttributeDirectives:function(el){_toConsumableArray(el.attributes).forEach((function(_ref10){var name=_ref10.name,value=_ref10.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if("image"===tagName)"data:"!==passage.slice(0,5)&&Story.has(passage)&&(passage=Story.get(passage)).tags.includes("Twine.image")&&el.setAttribute("href",passage.text.trim());else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}}),Wikifier.Parser.add({name:"htmlTag",profiles:["core"],match:"<".concat(Patterns.htmlTagName,"(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>"),tagRe:new RegExp("^<(".concat(Patterns.htmlTagName,")")),mediaTags:["audio","img","source","track","video"],nobrTags:["audio","colgroup","datalist","dl","figure","meter","ol","optgroup","picture","progress","ruby","select","table","tbody","tfoot","thead","tr","ul","video"],voidTags:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],handler:function(w){var tagMatch=this.tagRe.exec(w.matchText),tag=tagMatch&&tagMatch[1],tagName=tag&&tag.toLowerCase();if(tagName){var terminator,terminatorMatch,isVoid=this.voidTags.includes(tagName)||w.matchText.endsWith("/>"),isNobr=this.nobrTags.includes(tagName);if(!isVoid){terminator="<\\/".concat(tagName,"\\s*>");var terminatorRe=new RegExp(terminator,"gim");terminatorRe.lastIndex=w.matchStart,terminatorMatch=terminatorRe.exec(w.source)}if(!isVoid&&!terminatorMatch)return throwError(w.output,"cannot find a closing tag for HTML <".concat(tag,">"),"".concat(w.matchText,"…"));var debugView,output=w.output,el=document.createElement(w.output.tagName);for(el.innerHTML=w.matchText;el.firstChild;)el=el.firstChild;try{this.processAttributeDirectives(el)}catch(ex){return throwError(w.output,"<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}if(el.hasAttribute("data-passage")&&(this.processDataAttributes(el,tagName),Config.debug&&((debugView=new DebugView(w.output,"html-".concat(tagName),tagName,w.matchText)).modes({block:"img"===tagName,nonvoid:terminatorMatch}),output=debugView.output)),terminatorMatch){try{Wikifier.Option.push({nobr:isNobr}),w.subWikify(el,terminator,{ignoreTerminatorCase:!0})}finally{Wikifier.Option.pop()}debugView&&jQuery(el).find(".debug.block").length>0&&debugView.modes({block:!0})}output.appendChild("track"===tagName?el.cloneNode(!0):el)}},processAttributeDirectives:function(el){_toConsumableArray(el.attributes).forEach((function(_ref11){var name=_ref11.name,value=_ref11.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if(this.mediaTags.includes(tagName)){if("data:"!==passage.slice(0,5)&&Story.has(passage)){var parentName,twineTag;switch(passage=Story.get(passage),tagName){case"audio":case"video":twineTag="Twine.".concat(tagName);break;case"img":twineTag="Twine.image";break;case"track":twineTag="Twine.vtt";break;case"source":var $parent=$(el).closest("audio,picture,video");$parent.length&&(parentName=$parent.get(0).tagName.toLowerCase(),twineTag="Twine.".concat("picture"===parentName?"image":parentName))}passage.tags.includes(twineTag)&&(el["picture"===parentName?"srcset":"src"]=passage.text.trim())}}else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}})}();var Template=(_templates=new Map,_validNameRe=new RegExp("^(?:".concat(Patterns.templateName,")$")),_validType=function(template){var templateType=_typeof(template);return"function"===templateType||"string"===templateType},Object.freeze(Object.defineProperties({},{add:{value:function(name,template){if(!(_validType(template)||template instanceof Array&&template.length>0&&template.every(_validType)))throw new TypeError("invalid template type (".concat(name,"); templates must be: functions, strings, or an array of either"));(name instanceof Array?name:[name]).forEach((function(name){if(!_validNameRe.test(name))throw new Error('invalid template name "'.concat(name,'"'));if(_templates.has(name))throw new Error("cannot clobber existing template ?".concat(name));_templates.set(name,template)}))}},delete:{value:function(name){(name instanceof Array?name:[name]).forEach((function(name){return _templates.delete(name)}))}},get:{value:function(name){return _templates.has(name)?_templates.get(name):null}},has:{value:function(name){return _templates.has(name)}},size:{get:function(){return _templates.size}}}))),_templates,_validNameRe,_validType,Macro=function(){var _macros={},_tags={},_validNameRe=new RegExp("^(?:".concat(Patterns.macroName,")$"));function macrosHas(name){return _macros.hasOwnProperty(name)}function tagsRegister(parent,bodyTags){if(!parent)throw new Error("no parent specified");for(var endTags=["/".concat(parent),"end".concat(parent)],allTags=[].concat(endTags,Array.isArray(bodyTags)?bodyTags:[]),i=0;i<allTags.length;++i){var tag=allTags[i];if(macrosHas(tag))throw new Error("cannot register tag for an existing macro");tagsHas(tag)?_tags[tag].includes(parent)||(_tags[tag].push(parent),_tags[tag].sort()):_tags[tag]=[parent]}}function tagsUnregister(parent){if(!parent)throw new Error("no parent specified");Object.keys(_tags).forEach((function(tag){var i=_tags[tag].indexOf(parent);-1!==i&&(1===_tags[tag].length?delete _tags[tag]:_tags[tag].splice(i,1))}))}function tagsHas(name){return _tags.hasOwnProperty(name)}return Object.freeze(Object.defineProperties({},{add:{value:function macrosAdd(name,def){if(Array.isArray(name))name.forEach((function(name){return macrosAdd(name,def)}));else{if(!_validNameRe.test(name))throw new Error('invalid macro name "'.concat(name,'"'));if(macrosHas(name))throw new Error("cannot clobber existing macro <<".concat(name,">>"));if(tagsHas(name))throw new Error("cannot clobber child tag <<".concat(name,">> of parent macro").concat(1===_tags[name].length?"":"s"," <<").concat(_tags[name].join(">>, <<"),">>"));try{if("object"===_typeof(def))_macros[name]=Object.assign(Object.create(null),def,{_MACRO_API:!0});else{if(!macrosHas(def))throw new Error("cannot create alias of nonexistent macro <<".concat(def,">>"));_macros[name]=Object.create(_macros[def],{_ALIAS_OF:{enumerable:!0,value:def}})}Object.defineProperty(_macros,name,{writable:!1})}catch(ex){throw"TypeError"===ex.name?new Error("cannot clobber protected macro <<".concat(name,">>")):new Error("unknown error when attempting to add macro <<".concat(name,">>: [").concat(ex.name,"] ").concat(ex.message))}if(void 0!==_macros[name].tags)if(null==_macros[name].tags)tagsRegister(name);else{if(!Array.isArray(_macros[name].tags))throw new Error('bad value for "tags" property of macro <<'.concat(name,">>"));tagsRegister(name,_macros[name].tags)}}}},delete:{value:function macrosDelete(name){if(Array.isArray(name))name.forEach((function(name){return macrosDelete(name)}));else if(macrosHas(name)){void 0!==_macros[name].tags&&tagsUnregister(name);try{Object.defineProperty(_macros,name,{writable:!0}),delete _macros[name]}catch(ex){throw new Error("unknown error removing macro <<".concat(name,">>: ").concat(ex.message))}}else if(tagsHas(name))throw new Error("cannot remove child tag <<".concat(name,">> of parent macro <<").concat(_tags[name],">>"))}},isEmpty:{value:function(){return 0===Object.keys(_macros).length}},has:{value:macrosHas},get:{value:function(name){var macro=null;return macrosHas(name)&&"function"==typeof _macros[name].handler?macro=_macros[name]:macros.hasOwnProperty(name)&&"function"==typeof macros[name].handler&&(macro=macros[name]),macro}},init:{value:function(){var handler=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"init";Object.keys(_macros).forEach((function(name){"function"==typeof _macros[name][handler]&&_macros[name][handler](name)})),Object.keys(macros).forEach((function(name){"function"==typeof macros[name][handler]&&macros[name][handler](name)}))}},tags:{value:Object.freeze(Object.defineProperties({},{register:{value:tagsRegister},unregister:{value:tagsUnregister},has:{value:tagsHas},get:{value:function(name){return tagsHas(name)?_tags[name]:null}}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){var MacroContext=function(){function MacroContext(contextData){_classCallCheck(this,MacroContext);var context=Object.assign({parent:null,macro:null,name:"",displayName:"",args:null,payload:null,parser:null,source:""},contextData);if(null===context.macro||""===context.name||null===context.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{self:{value:context.macro},name:{value:void 0===context.macro._ALIAS_OF?context.name:context.macro._ALIAS_OF},displayName:{value:context.name},args:{value:context.args},payload:{value:context.payload},source:{value:context.source},parent:{value:context.parent},parser:{value:context.parser},_output:{value:context.parser.output},_shadows:{writable:!0,value:null},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})}return _createClass(MacroContext,[{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"shadows",get:function(){return _toConsumableArray(this._shadows)}},{key:"shadowView",get:function(){var view=new Set;return this.contextSelectAll((function(ctx){return ctx._shadows})).forEach((function(ctx){return ctx._shadows.forEach((function(name){return view.add(name)}))})),_toConsumableArray(view)}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}},{key:"contextHas",value:function(filter){for(var context=this;null!==(context=context.parent);)if(filter(context))return!0;return!1}},{key:"contextSelect",value:function(filter){for(var context=this;null!==(context=context.parent);)if(filter(context))return context;return null}},{key:"contextSelectAll",value:function(filter){for(var result=[],context=this;null!==(context=context.parent);)filter(context)&&result.push(context);return result}},{key:"addShadow",value:function(){var _this14=this;this._shadows||(this._shadows=new Set);for(var varRe=new RegExp("^".concat(Patterns.variable,"$")),_len14=arguments.length,names=new Array(_len14),_key14=0;_key14<_len14;_key14++)names[_key14]=arguments[_key14];names.flat(1/0).forEach((function(name){if("string"!=typeof name)throw new TypeError("variable name must be a string; type: ".concat(_typeof(name)));if(!varRe.test(name))throw new Error('invalid variable name "'.concat(name,'"'));_this14._shadows.add(name)}))}},{key:"createShadowWrapper",value:function(callback,doneCallback,startCallback){var shadowStore,shadowContext=this;return"function"==typeof callback&&(shadowStore={},this.shadowView.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]}))),function(){for(var _len15=arguments.length,args=new Array(_len15),_key15=0;_key15<_len15;_key15++)args[_key15]=arguments[_key15];if("function"==typeof startCallback&&startCallback.apply(this,args),"function"==typeof callback){var contextCache,shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null,macroParser=Wikifier.Parser.get("macro");try{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),contextCache=macroParser.context,macroParser.context=shadowContext,callback.apply(this,args)}finally{contextCache!==undefined&&(macroParser.context=contextCache),shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}"function"==typeof doneCallback&&doneCallback.apply(this,args)}}},{key:"createDebugView",value:function(name,title){return this._debugView=new DebugView(this._output,"macro",name||this.displayName,title||this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(message,source){return throwError(this._output,"<<".concat(this.displayName,">>: ").concat(message),source||this.source)}}]),MacroContext}();return MacroContext}();!function(){if(Macro.add("capture",{skipArgs:!0,tags:null,tsVarRe:new RegExp("(".concat(Patterns.variable,")"),"g"),handler:function(){if(0===this.args.raw.length)return this.error("no story/temporary variable list specified");var valueCache={};try{for(var match,tsVarRe=this.self.tsVarRe;null!==(match=tsVarRe.exec(this.args.raw));){var varName=match[1],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),this.addShadow(varName)}new Wikifier(this.output,this.payload[0].contents)}finally{this.shadows.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}),Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("unset",{skipArgs:!0,jsVarRe:new RegExp("State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");for(var match,jsVarRe=this.self.jsVarRe;null!==(match=jsVarRe.exec(this.args.full));){var store=State[match[1]],name=match[2];store.hasOwnProperty(name)&&delete store[name]}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remember",{skipArgs:!0,jsVarRe:new RegExp("State\\.variables\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}for(var match,remember=storage.get("remember")||{},jsVarRe=this.self.jsVarRe;null!==(match=jsVarRe.exec(this.args.full));){var name=match[1];remember[name]=State.variables[name]}if(!storage.set("remember",remember))return this.error("unknown error, cannot remember: ".concat(this.args.raw));Config.debug&&this.debugView.modes({hidden:!0})},init:function(){var remember=storage.get("remember");remember&&Object.keys(remember).forEach((function(name){return State.variables[name]=remember[name]}))}}),Macro.add("forget",{skipArgs:!0,jsVarRe:new RegExp("State\\.variables\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no story variable list specified");for(var match,remember=storage.get("remember"),jsVarRe=this.self.jsVarRe,needStore=!1;null!==(match=jsVarRe.exec(this.args.full));){var name=match[1];State.variables.hasOwnProperty(name)&&delete State.variables[name],remember&&remember.hasOwnProperty(name)&&(needStore=!0,delete remember[name])}if(needStore)if(0===Object.keys(remember).length){if(!storage.delete("remember"))return this.error("unknown error, cannot update remember store")}else if(!storage.set("remember",remember))return this.error("unknown error, cannot update remember store");Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("run","set"),Macro.add("script",{skipArgs:!0,tags:null,handler:function(){var output=document.createDocumentFragment();try{Scripting.evalJavaScript(this.payload[0].contents,output)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}Config.debug&&this.createDebugView(),output.hasChildNodes()&&this.output.appendChild(output)}}),Macro.add("include",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?(Config.debug&&this.debugView.modes({block:!0}),passage=Story.get(passage),void(this.args[1]?jQuery(document.createElement(this.args[1])).addClass("".concat(passage.domId," macro-").concat(this.name)).attr("data-passage",passage.title).appendTo(this.output):jQuery(this.output)).wiki(passage.processText())):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var result=stringFrom(Scripting.evalJavaScript(this.args.full));null!==result&&new Wikifier(this.output,"-"===this.name?Util.escape(result):result)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}}}),Macro.add("silently",{skipArgs:!0,tags:null,handler:function(){var frag=document.createDocumentFragment();if(new Wikifier(frag,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({block:!0,hidden:!0}),this.output.appendChild(frag);else{var errList=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent}));if(errList.length>0)return this.error("error".concat(1===errList.length?"":"s"," within contents (").concat(errList.join("; "),")"))}}}),Macro.add("type",{isAsync:!0,tags:null,typeId:0,handler:function(){if(0===this.args.length)return this.error("no speed specified");var cursor,speed=Util.fromCssTime(this.args[0]);if(speed<0)return this.error("speed time value must be non-negative (received: ".concat(this.args[0],")"));for(var elClass="",elId="",elTag="div",skipKey=Config.macros.typeSkipKey,start=400,options=this.args.slice(1);options.length>0;){var option=options.shift();switch(option){case"class":if(0===options.length)return this.error("class option missing required class name(s)");if(""===(elClass=options.shift()))throw new Error('class option class name(s) must be non-empty (received: "")');break;case"element":if(0===options.length)return this.error("element option missing required element tag name");if(""===(elTag=options.shift()))throw new Error('element option tag name must be non-empty (received: "")');break;case"id":if(0===options.length)return this.error("id option missing required ID");if(""===(elId=options.shift()))throw new Error('id option ID must be non-empty (received: "")');break;case"keep":cursor="keep";break;case"none":cursor="none";break;case"skipkey":if(0===options.length)return this.error("skipkey option missing required key value");if(""===(skipKey=options.shift()))throw new Error('skipkey option key value must be non-empty (received: "")');break;case"start":if(0===options.length)return this.error("start option missing required time value");var value=options.shift();if((start=Util.fromCssTime(value))<0)throw new Error("start option time value must be non-negative (received: ".concat(value,")"));break;default:return this.error("unknown option: ".concat(option))}}var contents=this.payload[0].contents;if(""!==contents.trim()){Config.debug&&this.debugView.modes({block:!0});var className="macro-".concat(this.name),namespace=".".concat(className),$target=jQuery(document.createElement(elTag)).addClass("".concat(className," ").concat(className,"-target")).appendTo(this.output);TempState.macroTypeQueue||(TempState.macroTypeQueue=[],$(document).off(namespace).one(":passageinit".concat(namespace),(function(){return $(document).off(namespace)})));var startTyping=0===TempState.macroTypeQueue.length,selfId=++this.self.typeId;TempState.macroTypeQueue.push({id:selfId,handler:function(){var $wrapper=jQuery(document.createElement(elTag)).addClass(className);elId&&$wrapper.attr("id",elId),elClass&&$wrapper.addClass(elClass),new Wikifier($wrapper,contents);var passage=State.passage,turn=State.turns;if(!Config.macros.typeVisitedPassages&&State.passages.slice(0,-1).some((function(title){return title===passage}))||$wrapper.find(".error").length>0)return $target.replaceWith($wrapper),TempState.macroTypeQueue.shift(),void(TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().handler());var typer=new NodeTyper({targetNode:$wrapper.get(0),classNames:"none"===cursor?null:"".concat(className,"-cursor")});$target.replaceWith($wrapper);var keydownAndNS="keydown".concat(namespace),typingStopAndNS="".concat(":typingstop").concat(namespace);$(document).off(keydownAndNS).on(keydownAndNS,(function(ev){Util.scrubEventKey(ev.key)!==skipKey||ev.target!==document.body&&ev.target!==document.documentElement||(ev.preventDefault(),$(document).off(keydownAndNS),typer.finish())})).one(typingStopAndNS,(function(){TempState.macroTypeQueue&&(0===TempState.macroTypeQueue.length?jQuery.event.trigger(":typingcomplete"):TempState.macroTypeQueue.first().handler())}));var typeNode=function(){var typeNodeMember=function(typeIntervalId){State.passage===passage&&State.turns===turn&&typer.type()||(typeIntervalId&&clearInterval(typeIntervalId),TempState.macroTypeQueue&&TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().id===selfId&&TempState.macroTypeQueue.shift(),$wrapper.trigger(":typingstop"),$wrapper.addClass("".concat(className,"-done")),"keep"===cursor&&$wrapper.addClass("".concat(className,"-cursor")))};$wrapper.trigger(":typingstart"),typeNodeMember();var typeNodeMemberId=setInterval((function(){return typeNodeMember(typeNodeMemberId)}),speed)};start?setTimeout(typeNode,start):typeNode()}}),startTyping&&(Engine.isPlaying()?$(document).one(":passageend".concat(namespace),(function(){return TempState.macroTypeQueue.first().handler()})):TempState.macroTypeQueue.first().handler())}}}),Macro.add("display","include"),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],elseifWsRe:/^\s*if\b/i,ifAssignRe:/[^!=&^|<>*/%+-]=[^=>]/,handler:function(){var i;try{var len=this.payload.length,elseifWsRe=this.self.elseifWsRe,ifAssignRe=this.self.ifAssignRe;for(i=0;i<len;++i)if("else"===this.payload[i].name){if(this.payload[i].args.raw.length>0)return elseifWsRe.test(this.payload[i].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'.concat(i>0?" (#"+i+")":"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<else>> must be the final clause")}else{if(0===this.payload[i].args.full.length)return this.error("no conditional expression specified for <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#"+i+")":""));if(Config.macros.ifAssignmentError&&ifAssignRe.test(this.payload[i].args.full))return this.error("assignment operator found within <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#"+i+")":""," (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: ").concat(this.payload[i].args.raw))}var evalJavaScript=Scripting.evalJavaScript,success=!1;for(i=0;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"else"===this.payload[i].name||evalJavaScript(this.payload[i].args.full)){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!success,invalid:!success})}}catch(ex){return this.error("bad conditional expression in <<".concat(0===i?"if":"elseif",">> clause").concat(i>0?" (#"+i+")":"",": ").concat("object"===_typeof(ex)?ex.message:ex))}}}),Macro.add("switch",{skipArgs:["switch"],tags:["case","default"],handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var i,result,len=this.payload.length;if(1===len)return this.error("no cases specified");for(i=1;i<len;++i)if("default"===this.payload[i].name){if(this.payload[i].args.length>0)return this.error("<<default>> does not accept values, invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<default>> must be the final case")}else if(0===this.payload[i].args.length)return this.error("no value(s) specified for <<".concat(this.payload[i].name,">> (#").concat(i,")"));try{result=Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}var debugView=this.debugView,success=!1;for(Config.debug&&debugView.modes({nonvoid:!1,hidden:!0}),i=1;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"default"===this.payload[i].name||this.payload[i].args.some((function(val){return val===result}))){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});debugView.modes({nonvoid:!1,hidden:!0,invalid:!success}),this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0,invalid:!success})}}}),Macro.add("for",{skipArgs:!0,tags:null,hasRangeRe:new RegExp("^\\S".concat(Patterns.anyChar,"*?\\s+range\\s+\\S").concat(Patterns.anyChar,"*?$")),rangeRe:new RegExp("^(?:State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")\\s*,\\s*)?State\\.(variables|temporary)\\.(").concat(Patterns.identifier,")\\s+range\\s+(\\S").concat(Patterns.anyChar,"*?)$")),threePartRe:/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/,forInRe:/^\S+\s+in\s+\S+/i,forOfRe:/^\S+\s+of\s+\S+/i,handler:function(){var argsStr=this.args.full.trim(),payload=this.payload[0].contents.replace(/\n$/,"");if(0===argsStr.length)this.self.handleFor.call(this,payload,null,!0,null);else if(this.self.hasRangeRe.test(argsStr)){var parts=argsStr.match(this.self.rangeRe);if(null===parts)return this.error("invalid range form syntax, format: [index ,] value range collection");this.self.handleForRange.call(this,payload,{type:parts[1],name:parts[2]},{type:parts[3],name:parts[4]},parts[5])}else{var init,condition,post;if(-1===argsStr.indexOf(";")){if(this.self.forInRe.test(argsStr))return this.error("invalid syntax, for…in is not supported; see: for…range");if(this.self.forOfRe.test(argsStr))return this.error("invalid syntax, for…of is not supported; see: for…range");condition=argsStr}else{var _parts=argsStr.match(this.self.threePartRe);if(null===_parts)return this.error("invalid 3-part conditional form syntax, format: [init] ; [condition] ; [post]");init=_parts[1],condition=_parts[2].trim(),post=_parts[3],0===condition.length&&(condition=!0)}this.self.handleFor.call(this,payload,init,condition,post)}},handleFor:function(payload,init,condition,post){var evalJavaScript=Scripting.evalJavaScript,first=!0,safety=Config.macros.maxLoopIterations;Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,init)try{evalJavaScript(init)}catch(ex){return this.error("bad init expression: ".concat("object"===_typeof(ex)?ex.message:ex))}for(;evalJavaScript(condition);){if(--safety<0)return this.error("exceeded configured maximum loop iterations (".concat(Config.macros.maxLoopIterations,")"));if(new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(post)try{evalJavaScript(post)}catch(ex){return this.error("bad post expression: ".concat("object"===_typeof(ex)?ex.message:ex))}}}catch(ex){return this.error("bad conditional expression: ".concat("object"===_typeof(ex)?ex.message:ex))}finally{TempState.break=null}},handleForRange:function(payload,indexVar,valueVar,rangeExp){var rangeList,first=!0;try{rangeList=this.self.toRangeList(rangeExp)}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});try{TempState.break=null;for(var i=0;i<rangeList.length;++i)if(indexVar.name&&(State[indexVar.type][indexVar.name]=rangeList[i][0]),State[valueVar.type][valueVar.name]=rangeList[i][1],new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}}catch(ex){return this.error("object"===_typeof(ex)?ex.message:ex)}finally{TempState.break=null}},toRangeList:function(rangeExp){var value,list,evalJavaScript=Scripting.evalJavaScript;try{value=evalJavaScript("{"===rangeExp[0]?"(".concat(rangeExp,")"):rangeExp)}catch(ex){if("object"!==_typeof(ex))throw new Error("bad range expression: ".concat(ex));throw ex.message="bad range expression: ".concat(ex.message),ex}switch(_typeof(value)){case"string":list=[];for(var i=0;i<value.length;){var obj=Util.charAndPosAt(value,i);list.push([i,obj.char]),i=1+obj.end}break;case"object":if(Array.isArray(value))list=value.map((function(val,i){return[i,val]}));else if(value instanceof Set)list=_toConsumableArray(value).map((function(val,i){return[i,val]}));else if(value instanceof Map)list=_toConsumableArray(value.entries());else{if("Object"!==Util.toStringTag(value))throw new Error("unsupported range expression type: ".concat(Util.toStringTag(value)));list=Object.keys(value).map((function(key){return[key,value[key]]}))}break;default:throw new Error("unsupported range expression type: ".concat(_typeof(value)))}return list}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){if(!this.contextHas((function(ctx){return"for"===ctx.name})))return this.error("must only be used in conjunction with its parent macro <<for>>");TempState.break="continue"===this.name?1:2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["button","link"],{isAsync:!0,tags:null,handler:function(){var _this15=this;if(0===this.args.length)return this.error("no ".concat("button"===this.name?"button":"link"," text specified"));var passage,$link=jQuery(document.createElement("button"===this.name?"button":"a"));if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var $image=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo($link);$link.addClass("link-image"),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link}else $link.append(document.createTextNode(this.args[0].text)),passage=this.args[0].link;else $link.wikiWithOptions({profile:"core"},this.args[0]),passage=this.args.length>1?this.args[1]:undefined;null!=passage?($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken")):$link.addClass("link-internal"),$link.addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:null!=passage?"link":"button",one:null!=passage},this.createShadowWrapper(""!==this.payload[0].contents?function(){return Wikifier.wikifyEval(_this15.payload[0].contents.trim())}:null,null!=passage?function(){return Engine.play(passage)}:null)).appendTo(this.output)}}),Macro.add("checkbox",{isAsync:!0,handler:function(){if(this.args.length<3){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("unchecked value"),this.args.length<3&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),uncheckValue=this.args[1],checkValue=this.args[2],el=document.createElement("input");switch(jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:"checkbox",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,this.checked?checkValue:uncheckValue)}))).appendTo(this.output),this.args[3]){case"autocheck":State.getVar(varName)===checkValue?el.checked=!0:State.setVar(varName,uncheckValue);break;case"checked":el.checked=!0,State.setVar(varName,checkValue);break;default:State.setVar(varName,uncheckValue)}}}),Macro.add(["cycle","listbox"],{isAsync:!0,skipArgs:["optionsfrom"],tags:["option","optionsfrom"],handler:function(){var _this16=this;if(0===this.args.length)return this.error("no variable name specified");if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),len=this.payload.length;if(1===len)return this.error("no options specified");for(var config={autoselect:!1,once:!1},i=1;i<this.args.length;++i){var arg=this.args[i];switch(arg){case"once":config.once=!0;break;case"autoselect":config.autoselect=!0;break;default:return this.error("unknown argument: ".concat(arg))}}for(var options=[],tagCount={option:0,optionsfrom:0},selectedIdx=-1,_i5=1;_i5<len;++_i5){var payload=this.payload[_i5];if("option"===payload.name){if(++tagCount.option,0===payload.args.length)return this.error("no arguments specified for <<".concat(payload.name,">> (#").concat(tagCount.option,")"));var option={label:String(payload.args[0])},isSelected=!1;switch(payload.args.length){case 1:option.value=payload.args[0];break;case 2:"selected"===payload.args[1]?(option.value=payload.args[0],isSelected=!0):option.value=payload.args[1];break;default:option.value=payload.args[1],"selected"===payload.args[2]&&(isSelected=!0)}if(options.push(option),isSelected){if(config.autoselect)return this.error("cannot specify both the autoselect and selected keywords");if(-1!==selectedIdx)return this.error("multiple selected keywords specified for <<".concat(payload.name,">> (#").concat(selectedIdx+1," & #").concat(tagCount.option,")"));selectedIdx=options.length-1}}else{var _ret=function(){if(++tagCount.optionsfrom,0===payload.args.full.length)return{v:_this16.error("no expression specified for <<".concat(payload.name,">> (#").concat(tagCount.optionsfrom,")"))};var result=void 0;try{var exp=payload.args.full;result=Scripting.evalJavaScript("{"===exp[0]?"(".concat(exp,")"):exp)}catch(ex){return{v:_this16.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}}if("object"!==_typeof(result)||null===result)return{v:_this16.error("expression must yield a supported collection or generic object (type: ".concat(null===result?"null":_typeof(result),")"))};if(result instanceof Array||result instanceof Set)result.forEach((function(val){return options.push({label:String(val),value:val})}));else if(result instanceof Map)result.forEach((function(val,key){return options.push({label:String(key),value:val})}));else{var oType=Util.toStringTag(result);if("Object"!==oType)return{v:_this16.error("expression must yield a supported collection or generic object (object type: ".concat(oType,")"))};Object.keys(result).forEach((function(key){return options.push({label:key,value:result[key]})}))}}();if("object"===_typeof(_ret))return _ret.v}}if(-1===selectedIdx)if(config.autoselect){var sameValueZero=Util.sameValueZero,curValue=State.getVar(varName),curValueIdx=options.findIndex((function(opt){return sameValueZero(opt.value,curValue)}));selectedIdx=-1===curValueIdx?0:curValueIdx}else selectedIdx=0;if("cycle"===this.name){var lastIdx=options.length-1;if(config.once&&selectedIdx===lastIdx)jQuery(this.output).wikiWithOptions({profile:"core"},options[selectedIdx].label);else{var cycleIdx=selectedIdx;jQuery(document.createElement("a")).wikiWithOptions({profile:"core"},options[selectedIdx].label).attr("id","".concat(this.name,"-").concat(varId)).addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:"button"},this.createShadowWrapper((function(){var $this=$(this);cycleIdx=(cycleIdx+1)%options.length,State.setVar(varName,options[cycleIdx].value),$this.empty().wikiWithOptions({profile:"core"},options[cycleIdx].label),config.once&&cycleIdx===lastIdx&&$this.off().contents().unwrap()}))).appendTo(this.output)}}else{var $select=jQuery(document.createElement("select"));options.forEach((function(opt,i){jQuery(document.createElement("option")).val(i).text(opt.label).appendTo($select)})),$select.attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),tabindex:0}).addClass("macro-".concat(this.name)).val(selectedIdx).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,options[Number(this.value)].value)}))).appendTo(this.output)}State.setVar(varName,options[selectedIdx].value)}}),Macro.add(["linkappend","linkprepend","linkreplace"],{isAsync:!0,tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this17=this;if(0===this.args.length)return this.error("no link text specified");var $link=jQuery(document.createElement("a")),$insert=jQuery(document.createElement("span")),transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]);$link.wikiWithOptions({profile:"core"},this.args[0]).addClass("link-internal macro-".concat(this.name)).ariaClick({namespace:".macros",one:!0},this.createShadowWrapper((function(){if("linkreplace"===_this17.name?$link.remove():$link.wrap('<span class="macro-'.concat(_this17.name,'"></span>')).replaceWith((function(){return $link.html()})),""!==_this17.payload[0].contents){var frag=document.createDocumentFragment();new Wikifier(frag,_this17.payload[0].contents),$insert.append(frag)}transition&&setTimeout((function(){return $insert.removeClass("macro-".concat(_this17.name,"-in"))}),Engine.minDomActionDelay)}))).appendTo(this.output),$insert.addClass("macro-".concat(this.name,"-insert")),transition&&$insert.addClass("macro-".concat(this.name,"-in")),"linkprepend"===this.name?$insert.insertBefore($link):$insert.insertAfter($link)}}),Macro.add(["numberbox","textbox"],{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var asNumber="numberbox"===this.name,defaultValue=asNumber?Number(this.args[1]):this.args[1];if(asNumber&&Number.isNaN(defaultValue))return this.error('default value "'.concat(this.args[1],'" is neither a number nor can it be parsed into a number'));var passage,varId=Util.slugify(varName),el=document.createElement("input"),autofocus=!1;this.args.length>3?(passage=this.args[2],autofocus="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?autofocus=!0:passage=this.args[2]),"object"===_typeof(passage)&&(passage=passage.link),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:asNumber?"number":"text",inputmode:asNumber?"decimal":"text",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,asNumber?Number(this.value):this.value)}))).on("keypress.macros",this.createShadowWrapper((function(ev){13===ev.which&&(ev.preventDefault(),State.setVar(varName,asNumber?Number(this.value):this.value),null!=passage&&Engine.play(passage))}))).appendTo(this.output),asNumber&&(el.step="any"),State.setVar(varName,defaultValue),el.value=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:".concat(el.id)]=function(task){delete postdisplay[task],setTimeout((function(){return el.focus()}),Engine.minDomActionDelay)})}}),Macro.add("radiobutton",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),checkValue=this.args[1],el=document.createElement("input");switch(TempState.hasOwnProperty(this.name)||(TempState[this.name]={}),TempState[this.name].hasOwnProperty(varId)||(TempState[this.name][varId]=0),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId,"-").concat(TempState[this.name][varId]++),name:"".concat(this.name,"-").concat(varId),type:"radio",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){this.checked&&State.setVar(varName,checkValue)}))).appendTo(this.output),this.args[2]){case"autocheck":State.getVar(varName)===checkValue&&(el.checked=!0);break;case"checked":el.checked=!0,State.setVar(varName,checkValue)}}}),Macro.add("textarea",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var varId=Util.slugify(varName),defaultValue=this.args[1],autofocus="autofocus"===this.args[2],el=document.createElement("textarea");jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),rows:4,tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,this.value)}))).appendTo(this.output),State.setVar(varName,defaultValue),el.textContent=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:".concat(el.id)]=function(task){delete postdisplay[task],setTimeout((function(){return el.focus()}),Engine.minDomActionDelay)})}}),Macro.add("click","link"),Macro.add("actions",{handler:function(){for(var $list=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output),i=0;i<this.args.length;++i){var passage=void 0,text=void 0,$image=void 0,setFn=void 0;if("object"===_typeof(this.args[i])?this.args[i].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[i].source),this.args[i].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[i].passage),this.args[i].hasOwnProperty("title")&&$image.attr("title",this.args[i].title),this.args[i].hasOwnProperty("align")&&$image.attr("align",this.args[i].align),passage=this.args[i].link,setFn=this.args[i].setFn):(text=this.args[i].text,passage=this.args[i].link,setFn=this.args[i].setFn):text=passage=this.args[i],!(State.variables.hasOwnProperty("#actions")&&State.variables["#actions"].hasOwnProperty(passage)&&State.variables["#actions"][passage])){var $link=jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo($list),passage,null,function(passage,fn){return function(){State.variables.hasOwnProperty("#actions")||(State.variables["#actions"]={}),State.variables["#actions"][passage]=!0,"function"==typeof fn&&fn()}}(passage,setFn))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text));$image&&$link.addClass("link-image")}}}}),Macro.add(["back","return"],{handler:function(){if(this.args.length>1)return this.error("too many arguments specified, check the documentation for details");var passage,text,$image,$link,momentIndex=-1;if(1===this.args.length&&("object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(passage=this.args[0].link)):(1===this.args[0].count||(text=this.args[0].text),passage=this.args[0].link):1===this.args.length&&(text=this.args[0])),null==passage){for(var i=State.length-2;i>=0;--i)if(State.history[i].title!==State.passage){momentIndex=i,passage=State.history[i].title;break}if(null==passage&&"return"===this.name)for(var _i6=State.expired.length-1;_i6>=0;--_i6)if(State.expired[_i6]!==State.passage){passage=State.expired[_i6];break}}else{if(!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));if("back"===this.name){for(var _i7=State.length-2;_i7>=0;--_i7)if(State.history[_i7].title===passage){momentIndex=_i7;break}if(-1===momentIndex)return this.error('cannot find passage "'.concat(passage,'" in the current story history'))}}if(null==passage)return this.error("cannot find passage");"back"!==this.name||-1!==momentIndex?($link=jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(passage)}:function(){return Engine.goTo(momentIndex)}),$image&&$link.addClass("link-image")):$link=jQuery(document.createElement("span")).addClass("link-disabled"),$link.addClass("macro-".concat(this.name)).append($image||document.createTextNode(text||L10n.get("macro".concat(this.name.toUpperFirst(),"Text")))).appendTo(this.output)}}),Macro.add("choice",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var passage,text,$image,setFn,$link,choiceId=State.passage;if(1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link,setFn=this.args[0].setFn):(text=this.args[0].text,passage=this.args[0].link,setFn=this.args[0].setFn):text=passage=this.args[0]:(passage=this.args[0],text=this.args[1]),State.variables.hasOwnProperty("#choice")&&State.variables["#choice"].hasOwnProperty(choiceId)&&State.variables["#choice"][choiceId])return $link=jQuery(document.createElement("span")).addClass("link-disabled macro-".concat(this.name)).attr("tabindex",-1).append($image||document.createTextNode(text)).appendTo(this.output),void($image&&$link.addClass("link-image"));$link=jQuery(Wikifier.createInternalLink(this.output,passage,null,(function(){State.variables.hasOwnProperty("#choice")||(State.variables["#choice"]={}),State.variables["#choice"][choiceId]=!0,"function"==typeof setFn&&setFn()}))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text)),$image&&$link.addClass("link-image")}}),Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("selector"),this.args.length<2&&errors.push("class names"),this.error("no ".concat(errors.join(" or ")," specified"))}var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));switch(this.name){case"addclass":$targets.addClass(this.args[1].trim());break;case"toggleclass":$targets.toggleClass(this.args[1].trim())}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));this.args.length>1?$targets.removeClass(this.args[1].trim()):$targets.removeClass(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));jQuery(this.output).append($targets.html()),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["append","prepend","replace"],{tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this18=this;if(0===this.args.length)return this.error("no selector specified");var $insert,$targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));if(""!==this.payload[0].contents)switch(this.args.length>1&&this.self.t8nRe.test(this.args[1])?(($insert=jQuery(document.createElement("span"))).addClass("macro-".concat(this.name,"-insert macro-").concat(this.name,"-in")),setTimeout((function(){return $insert.removeClass("macro-".concat(_this18.name,"-in"))}),Engine.minDomActionDelay)):$insert=jQuery(document.createDocumentFragment()),$insert.wiki(this.payload[0].contents),this.name){case"replace":$targets.empty();case"append":$targets.append($insert);break;case"prepend":$targets.prepend($insert)}else"replace"===this.name&&$targets.empty();Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));$targets.remove(),Config.debug&&this.debugView.modes({hidden:!0})}}),Has.audio){var errorOnePlaybackAction=function(cur,prev){return'only one playback action allowed per invocation, "'.concat(cur,'" cannot be combined with "').concat(prev,'"')};Macro.add("audio",{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track and/or group IDs"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var selected;try{selected=SimpleAudio.select(this.args[0])}catch(ex){return this.error(ex.message)}for(var action,fadeTo,loop,mute,passage,time,volume,args=this.args.slice(1),fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors=[];return args.length<1&&_errors.push("seconds"),args.length<2&&_errors.push("level"),this.error("fadeoverto missing required ".concat(_errors.join(" and ")," value").concat(_errors.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"time":if(0===args.length)return this.error("time missing required seconds value");if(raw=args.shift(),time=Number.parseFloat(raw),Number.isNaN(time)||!Number.isFinite(time))return this.error("cannot parse time: ".concat(raw));break;case"loop":case"unloop":loop="loop"===arg;break;case"goto":if(0===args.length)return this.error("goto missing required passage title");if(raw=args.shift(),passage="object"===_typeof(raw)?raw.link:raw,!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));break;default:return this.error("unknown action: ".concat(arg))}}try{if(null!=volume&&selected.volume(volume),null!=time&&selected.time(time),null!=mute&&selected.mute(mute),null!=loop&&selected.loop(loop),null!=passage){var nsEnded="ended.macros.macro-".concat(this.name,"_goto");selected.off(nsEnded).one(nsEnded,(function(){selected.off(nsEnded),Engine.play(passage)}))}switch(action){case"fade":selected.fade(fadeOver,fadeTo);break;case"load":selected.load();break;case"pause":selected.pause();break;case"play":selected.playWhenAllowed();break;case"stop":selected.stop();break;case"unload":selected.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("cacheaudio",{handler:function(){var _this19=this;if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track ID"),this.args.length<2&&errors.push("sources"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim(),oldFmtRe=/^format:\s*([\w-]+)\s*;\s*/i;try{SimpleAudio.tracks.add(id,this.args.slice(1).map((function(source){if(oldFmtRe.test(source)){if(Config.debug)return _this19.error('track ID "'.concat(id,'": format specifier migration required, "format:formatId;" → "formatId|"'));source=source.replace(oldFmtRe,"$1|")}return source})))}catch(ex){return this.error(ex.message)}if(Config.debug&&!SimpleAudio.tracks.get(id).hasSource())return this.error('track ID "'.concat(id,'": no supported audio sources found'));Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("createaudiogroup",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no group ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var groupId=String(this.args[0]).trim(),trackIds=[],i=1,len=this.payload.length;i<len;++i){if(this.payload[i].args.length<1)return this.error("no track ID specified");trackIds.push(String(this.payload[i].args[0]).trim()),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.groups.add(groupId,trackIds)}catch(ex){return this.error(ex.message)}Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("createplaylist",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no list ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");var playlist=Macro.get("playlist");if(null!==playlist.from&&"createplaylist"!==playlist.from)return this.error("a playlist has already been defined with <<setplaylist>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var listId=String(this.args[0]).trim(),trackObjs=[],i=1,len=this.payload.length;i<len;++i){if(0===this.payload[i].args.length)return this.error("no track ID specified");for(var trackObj={id:String(this.payload[i].args[0]).trim()},args=this.payload[i].args.slice(1);args.length>0;){var arg=args.shift(),raw=void 0,parsed=void 0;switch(arg){case"copy":case"own":trackObj.own=!0;break;case"rate":args.length>0&&args.shift();break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),parsed=Number.parseFloat(raw),Number.isNaN(parsed)||!Number.isFinite(parsed))return this.error("cannot parse volume: ".concat(raw));trackObj.volume=parsed;break;default:return this.error("unknown action: ".concat(arg))}}trackObjs.push(trackObj),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.lists.add(listId,trackObjs)}catch(ex){return this.error(ex.message)}null===playlist.from&&(playlist.from="createplaylist"),Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("masteraudio",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var action,mute,muteOnHide,volume,args=this.args.slice(0);args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"mute":case"unmute":mute="mute"===arg;break;case"muteonhide":case"nomuteonhide":muteOnHide="muteonhide"===arg;break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=mute&&SimpleAudio.mute(mute),null!=muteOnHide&&SimpleAudio.muteOnHidden(muteOnHide),null!=volume&&SimpleAudio.volume(volume),action){case"load":SimpleAudio.load();break;case"stop":SimpleAudio.stop();break;case"unload":SimpleAudio.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("playlist",{from:null,handler:function(){var list,args,action,from=this.self.from;if(null===from)return this.error("no playlists have been created");if("createplaylist"===from){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("list ID"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));list=SimpleAudio.lists.get(id),args=this.args.slice(1)}else{if(0===this.args.length)return this.error("no actions specified");list=SimpleAudio.lists.get("setplaylist"),args=this.args.slice(0)}for(var fadeTo,loop,mute,shuffle,volume,fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"skip":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors2=[];return args.length<1&&_errors2.push("seconds"),args.length<2&&_errors2.push("level"),this.error("fadeoverto missing required ".concat(_errors2.join(" and ")," value").concat(_errors2.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"loop":case"unloop":loop="loop"===arg;break;case"shuffle":case"unshuffle":shuffle="shuffle"===arg;break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=volume&&list.volume(volume),null!=mute&&list.mute(mute),null!=loop&&list.loop(loop),null!=shuffle&&list.shuffle(shuffle),action){case"fade":list.fade(fadeOver,fadeTo);break;case"load":list.load();break;case"pause":list.pause();break;case"play":list.playWhenAllowed();break;case"skip":list.skip();break;case"stop":list.stop();break;case"unload":list.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("removeaudiogroup",{handler:function(){if(0===this.args.length)return this.error("no group ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.groups.has(id))return this.error('group "'.concat(id,'" does not exist'));SimpleAudio.groups.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeplaylist",{handler:function(){if(0===this.args.length)return this.error("no list ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));SimpleAudio.lists.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("waitforaudio",{skipArgs:!0,handler:function(){SimpleAudio.loadWithScreen()}}),Macro.add("setplaylist",{handler:function(){if(0===this.args.length)return this.error("no track ID(s) specified");var playlist=Macro.get("playlist");if(null!==playlist.from&&"setplaylist"!==playlist.from)return this.error("playlists have already been defined with <<createplaylist>>");try{SimpleAudio.lists.add("setplaylist",this.args.slice(0))}catch(ex){return this.error(ex.message)}null===playlist.from&&(playlist.from="setplaylist"),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("stopallaudio",{skipArgs:!0,handler:function(){SimpleAudio.select(":all").stop(),Config.debug&&this.debugView.modes({hidden:!0})}})}else Macro.add(["audio","cacheaudio","createaudiogroup","createplaylist","masteraudio","playlist","removeaudiogroup","removeplaylist","waitforaudio","setplaylist","stopallaudio"],{skipArgs:!0,handler:function(){Config.debug&&this.debugView.modes({hidden:!0})}});Macro.add("done",{skipArgs:!0,tags:null,handler:function(){var contents=this.payload[0].contents.trim();""!==contents&&setTimeout(this.createShadowWrapper((function(){return $.wiki(contents)})),Engine.minDomActionDelay)}}),Macro.add("goto",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?void setTimeout((function(){return Engine.play(passage)}),Engine.minDomActionDelay):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("repeat",{isAsync:!0,tags:null,timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){var delay,_this20=this;if(0===this.args.length)return this.error("no time value specified");try{delay=Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0]))}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerInterval(this.createShadowWrapper((function(){var frag=document.createDocumentFragment();new Wikifier(frag,_this20.payload[0].contents);var $output=$wrapper;transition&&($output=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-repeat-in")}),Engine.minDomActionDelay)})),delay)},registerInterval:function(callback,delay){var _this21=this;if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null;timerId=setInterval((function(){if(State.passage!==passage||State.turns!==turn)return clearInterval(timerId),void timers.delete(timerId);var timerIdCache;try{TempState.break=null,TempState.hasOwnProperty("repeatTimerId")&&(timerIdCache=TempState.repeatTimerId),TempState.repeatTimerId=timerId,callback.call(_this21)}finally{void 0!==timerIdCache?TempState.repeatTimerId=timerIdCache:delete TempState.repeatTimerId,TempState.break=null}}),delay),timers.add(timerId),prehistory.hasOwnProperty("#repeat-timers-cleanup")||(prehistory["#repeat-timers-cleanup"]=function(task){delete prehistory[task],timers.forEach((function(timerId){return clearInterval(timerId)})),timers.clear()})}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!TempState.hasOwnProperty("repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var timers=Macro.get("repeat").timers,timerId=TempState.repeatTimerId;clearInterval(timerId),timers.delete(timerId),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("timed",{isAsync:!0,tags:["next"],timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var i,items=[];try{items.push({name:this.name,source:this.source,delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0])),content:this.payload[0].contents})}catch(ex){return this.error("".concat(ex.message," in <<timed>>"))}if(this.payload.length>1)try{var len;for(i=1,len=this.payload.length;i<len;++i)items.push({name:this.payload[i].name,source:this.payload[i].source,delay:0===this.payload[i].args.length?items[items.length-1].delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.payload[i].args[0])),content:this.payload[i].contents})}catch(ex){return this.error("".concat(ex.message," in <<next>> (#").concat(i,")"))}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerTimeout(this.createShadowWrapper((function(item){var frag=document.createDocumentFragment();new Wikifier(frag,item.content);var $output=$wrapper;Config.debug&&"next"===item.name&&($output=jQuery(new DebugView($output[0],"macro",item.name,item.source).output)),transition&&($output=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-timed-in")}),Engine.minDomActionDelay)})),items)},registerTimeout:function(callback,items){if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null,nextItem=items.shift();timerId=setTimeout((function worker(){if(timers.delete(timerId),State.passage===passage&&State.turns===turn){var curItem=nextItem;null!=(nextItem=items.shift())&&(timerId=setTimeout(worker,nextItem.delay),timers.add(timerId)),callback.call(this,curItem)}}),nextItem.delay),timers.add(timerId),prehistory.hasOwnProperty("#timed-timers-cleanup")||(prehistory["#timed-timers-cleanup"]=function(task){delete prehistory[task],timers.forEach((function(timerId){return clearTimeout(timerId)})),timers.clear()})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var widgetCode,widgetName=this.args[0],isNonVoid=this.args.length>1&&"container"===this.args[1];if(Macro.has(widgetName)){if(!Macro.get(widgetName).isWidget)return this.error('cannot clobber existing macro "'.concat(widgetName,'"'));Macro.delete(widgetName)}try{var widgetDef={isWidget:!0,handler:(widgetCode=this.payload[0].contents,function(){var shadowStore={};State.temporary.hasOwnProperty("args")&&(shadowStore._args=State.temporary.args),State.temporary.args=_toConsumableArray(this.args),State.temporary.args.raw=this.args.raw,State.temporary.args.full=this.args.full,this.addShadow("_args"),isNonVoid&&(State.temporary.hasOwnProperty("contents")&&(shadowStore._contents=State.temporary.contents),State.temporary.contents=this.payload[0].contents,this.addShadow("_contents")),State.variables.hasOwnProperty("args")&&(shadowStore.$args=State.variables.args),State.variables.args=State.temporary.args,this.addShadow("$args");try{var resFrag=document.createDocumentFragment(),errList=[];if(new Wikifier(resFrag,widgetCode),Array.from(resFrag.querySelectorAll(".error")).forEach((function(errEl){errList.push(errEl.textContent)})),0!==errList.length)return this.error("error".concat(errList.length>1?"s":""," within widget code (").concat(errList.join("; "),")"));this.output.appendChild(resFrag)}catch(ex){return this.error("cannot execute widget: ".concat(ex.message))}finally{shadowStore.hasOwnProperty("_args")?State.temporary.args=shadowStore._args:delete State.temporary.args,isNonVoid&&(shadowStore.hasOwnProperty("_contents")?State.temporary.contents=shadowStore._contents:delete State.temporary.contents),shadowStore.hasOwnProperty("$args")?State.variables.args=shadowStore.$args:delete State.variables.args}})};isNonVoid&&(widgetDef.tags=[]),Macro.add(widgetName,widgetDef),Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error('cannot create widget macro "'.concat(widgetName,'": ').concat(ex.message))}}})}();var Dialog=function(){var _$overlay=null,_$dialog=null,_$dialogTitle=null,_$dialogBody=null,_lastActive=null,_scrollbarWidth=0,_dialogObserver=null;function dialogClose(ev){return _$dialogBody.trigger(":dialogclosing"),jQuery(document).off(".dialog-close"),_dialogObserver?(_dialogObserver.disconnect(),_dialogObserver=null):_$dialogBody.off(".dialog-resize"),jQuery(window).off(".dialog-resize"),_$dialog.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),_$overlay.removeClass("open"),jQuery(document.documentElement).removeAttr("data-dialog"),_$dialogTitle.empty(),_$dialogBody.empty().removeClass(),null!==_lastActive&&(jQuery(_lastActive).focus(),_lastActive=null),ev&&ev.data&&"function"==typeof ev.data.closeFn&&ev.data.closeFn(ev),_$dialogBody.trigger(":dialogclose"),_$dialogBody.trigger(":dialogclosed"),Dialog}function dialogIsOpen(classNames){return _$dialog.hasClass("open")&&(!classNames||classNames.splitOrEmpty(/\s+/).every((function(cn){return _$dialogBody.hasClass(cn)})))}function dialogOpen(options,closeFn){_$dialogBody.trigger(":dialogopening");var top=jQuery.extend({top:50},options).top;return dialogIsOpen()||(_lastActive=safeActiveElement()),jQuery(document.documentElement).attr("data-dialog","open"),_$overlay.addClass("open"),null!==_$dialogBody[0].querySelector("img")&&_$dialogBody.imagesLoaded().always((function(){return _resizeHandler({data:{top:top}})})),jQuery("body>:not(script,#store-area,tw-storydata,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0),_$dialog.css(_calcPosition(top)).addClass("open").focus(),jQuery(window).on("resize.dialog-resize",null,{top:top},jQuery.throttle(40,_resizeHandler)),Has.mutationObserver?(_dialogObserver=new MutationObserver((function(mutations){for(var i=0;i<mutations.length;++i)if("childList"===mutations[i].type){_resizeHandler({data:{top:top}});break}}))).observe(_$dialogBody[0],{childList:!0,subtree:!0}):_$dialogBody.on("DOMNodeInserted.dialog-resize DOMNodeRemoved.dialog-resize",null,{top:top},jQuery.throttle(40,_resizeHandler)),jQuery(document).one("click.dialog-close",".ui-close",{closeFn:closeFn},(function(ev){dialogClose(ev)})).one("keypress.dialog-close",".ui-close",(function(ev){13!==ev.which&&32!==ev.which||jQuery(this).trigger("click")})),_$dialogBody.trigger(":dialogopen"),_$dialogBody.trigger(":dialogopened"),Dialog}function _calcPosition(topPos){var top=null!=topPos?topPos:50,$parent=jQuery(window),dialogPos={left:"",right:"",top:"",bottom:""};_$dialog.css(dialogPos);var horzSpace=$parent.width()-_$dialog.outerWidth(!0)-1,vertSpace=$parent.height()-_$dialog.outerHeight(!0)-1;return horzSpace<=32+_scrollbarWidth&&(vertSpace-=_scrollbarWidth),vertSpace<=32+_scrollbarWidth&&(horzSpace-=_scrollbarWidth),dialogPos.left=dialogPos.right=horzSpace<=32?16:horzSpace/2>>0,dialogPos.top=vertSpace<=32?dialogPos.bottom=16:vertSpace/2>top?top:dialogPos.bottom=vertSpace/2>>0,Object.keys(dialogPos).forEach((function(key){""!==dialogPos[key]&&(dialogPos[key]+="px")})),dialogPos}function _resizeHandler(ev){var top=ev&&ev.data&&void 0!==ev.data.top?ev.data.top:50;"block"===_$dialog.css("display")&&(_$dialog.css({display:"none"}),_$dialog.css(jQuery.extend({display:""},_calcPosition(top))))}return Object.freeze(Object.defineProperties({},{append:{value:function(){var _$dialogBody2;return(_$dialogBody2=_$dialogBody).append.apply(_$dialogBody2,arguments),Dialog}},body:{value:function(){return _$dialogBody.get(0)}},close:{value:dialogClose},init:{value:function(){if(!document.getElementById("ui-dialog")){_scrollbarWidth=function(){var scrollbarWidth;try{var inner=document.createElement("p"),outer=document.createElement("div");inner.style.width="100%",inner.style.height="200px",outer.style.position="absolute",outer.style.left="0px",outer.style.top="0px",outer.style.width="100px",outer.style.height="100px",outer.style.visibility="hidden",outer.style.overflow="hidden",outer.appendChild(inner),document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="auto";var w2=inner.offsetWidth;w1===w2&&(w2=outer.clientWidth),document.body.removeChild(outer),scrollbarWidth=w1-w2}catch(ex){}return scrollbarWidth||17}();var $elems=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1>'+'<button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'.concat(L10n.get("close"),'"></button>')+'</div><div id="ui-dialog-body"></div></div>');_$overlay=jQuery($elems.find("#ui-overlay").get(0)),_$dialog=jQuery($elems.find("#ui-dialog").get(0)),_$dialogTitle=jQuery($elems.find("#ui-dialog-title").get(0)),_$dialogBody=jQuery($elems.find("#ui-dialog-body").get(0)),$elems.insertBefore("body>script#script-sugarcube")}}},isOpen:{value:dialogIsOpen},open:{value:dialogOpen},resize:{value:function(data){return _resizeHandler("object"===_typeof(data)?{data:data}:undefined)}},setup:{value:function(title,classNames){return _$dialogBody.empty().removeClass(),null!=classNames&&_$dialogBody.addClass(classNames),_$dialogTitle.empty().append((null!=title?String(title):"")||" "),_$dialogBody.get(0)}},wiki:{value:function(){var _$dialogBody3;return(_$dialogBody3=_$dialogBody).wiki.apply(_$dialogBody3,arguments),Dialog}},addClickHandler:{value:function(targets,options,startFn,doneFn,closeFn){return jQuery(targets).ariaClick((function(ev){ev.preventDefault(),"function"==typeof startFn&&startFn(ev),dialogOpen(options,closeFn),"function"==typeof doneFn&&doneFn(ev)}))}}}))}(),Engine=function(){var States=Util.toEnum({Idle:"idle",Playing:"playing",Rendering:"rendering"}),_initDebugViews=[],_state=States.Idle,_lastPlay=null,_outlinePatch=null,_updating=null;function engineGo(offset){var succeded=State.go(offset);return succeded&&engineShow(),succeded}function engineShow(){return enginePlay(State.passage,!0)}function enginePlay(title,noHistory){var passageReadyOutput,passageDoneOutput,passageTitle=title;if(_state=States.Playing,TempState={},State.clearTemporary(),"function"==typeof Config.navigation.override)try{var overrideTitle=Config.navigation.override(passageTitle);overrideTitle&&(passageTitle=overrideTitle)}catch(ex){}var passage=Story.get(passageTitle);if(jQuery.event.trigger({type:":passageinit",passage:passage}),Object.keys(prehistory).forEach((function(task){"function"==typeof prehistory[task]&&prehistory[task].call(passage,task)})),noHistory||State.create(passage.title),document.body.className&&(document.body.className=""),_lastPlay=Util.now(),Object.keys(predisplay).forEach((function(task){"function"==typeof predisplay[task]&&predisplay[task].call(passage,task)})),Story.has("PassageReady"))try{passageReadyOutput=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(ex){console.error(ex),Alert.error("PassageReady",ex.message)}_state=States.Rendering;var dataTags=passage.tags.length>0?passage.tags.join(" "):null,passageEl=document.createElement("div");jQuery(passageEl).attr({id:passage.domId,"data-passage":passage.title,"data-tags":dataTags}).addClass("passage ".concat(passage.className)),jQuery(document.body).attr("data-tags",dataTags).addClass(passage.className),jQuery(document.documentElement).attr("data-tags",dataTags),jQuery.event.trigger({type:":passagestart",content:passageEl,passage:passage}),Object.keys(prerender).forEach((function(task){"function"==typeof prerender[task]&&prerender[task].call(passage,passageEl,task)})),Story.has("PassageHeader")&&new Wikifier(passageEl,Story.get("PassageHeader").processText()),passageEl.appendChild(passage.render()),Story.has("PassageFooter")&&new Wikifier(passageEl,Story.get("PassageFooter").processText()),jQuery.event.trigger({type:":passagerender",content:passageEl,passage:passage}),Object.keys(postrender).forEach((function(task){"function"==typeof postrender[task]&&postrender[task].call(passage,passageEl,task)}));var debugView,containerEl=document.getElementById("passages");if(containerEl.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&Has.transitionEndEvent?_toConsumableArray(containerEl.childNodes).forEach((function(outgoing){var $outgoing=jQuery(outgoing);if(outgoing.nodeType===Node.ELEMENT_NODE&&$outgoing.hasClass("passage")){if($outgoing.hasClass("passage-out"))return;$outgoing.attr({id:"out-".concat($outgoing.attr("id")),"aria-live":"off"}).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?$outgoing.on(Has.transitionEndEvent,(function(ev){ev.propertyName===Config.passages.transitionOut&&$outgoing.remove()})):setTimeout((function(){return $outgoing.remove()}),Math.max(40,Config.passages.transitionOut))}else $outgoing.remove()})):jQuery(containerEl).empty()),jQuery(passageEl).addClass("passage-in").appendTo(containerEl),setTimeout((function(){return jQuery(passageEl).removeClass("passage-in")}),40),Story.has("StoryDisplayTitle")?null===_updating&&Config.ui.updateStoryElements||setDisplayTitle(Story.get("StoryDisplayTitle").processText()):Config.passages.displayTitles&&passage.title!==Config.passages.start&&(document.title="".concat(passage.title," | ").concat(Story.title)),window.scroll(0,0),_state=States.Playing,Story.has("PassageDone"))try{passageDoneOutput=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(ex){console.error(ex),Alert.error("PassageDone",ex.message)}(jQuery.event.trigger({type:":passagedisplay",content:passageEl,passage:passage}),Object.keys(postdisplay).forEach((function(task){"function"==typeof postdisplay[task]&&postdisplay[task].call(passage,task)})),null!==_updating?_updating.forEach((function(pair){jQuery(pair.element).empty(),new Wikifier(pair.element,Story.get(pair.passage).processText().trim())})):Config.ui.updateStoryElements&&UIBar.update(),Config.debug)&&(null!=passageReadyOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady")).modes({hidden:!0}),debugView.append(passageReadyOutput),jQuery(passageEl).prepend(debugView.output)),null!=passageDoneOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone")).modes({hidden:!0}),debugView.append(passageDoneOutput),jQuery(passageEl).append(debugView.output)),1===State.turns&&_initDebugViews.length>0&&jQuery(passageEl).prepend(_initDebugViews));switch(jQuery("#story").find("a[href]:not(.link-external)").addClass("link-external").end().find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),_typeof(Config.saves.autosave)){case"boolean":Config.saves.autosave&&Save.autosave.save();break;case"object":passage.tags.some((function(tag){return Config.saves.autosave.includes(tag)}))&&Save.autosave.save();break;case"function":Config.saves.autosave()&&Save.autosave.save()}return jQuery.event.trigger({type:":passageend",content:passageEl,passage:passage}),_state=States.Idle,_lastPlay=Util.now(),passageEl}function _hideOutlines(){_outlinePatch.set("*:focus{outline:none;}")}return Object.freeze(Object.defineProperties({},{States:{value:States},minDomActionDelay:{value:40},init:{value:function(){var _lastOutlineEvent;jQuery("#init-no-js,#init-lacking").remove(),function(){var $elems=jQuery(document.createDocumentFragment()),markup=Story.has("StoryInterface")&&Story.get("StoryInterface").text.trim();if(markup){UIBar.destroy(),jQuery(document.head).find("#style-core-display").remove(),$elems.append(markup);var $passages=$elems.find("#passages");if(0===$passages.length)throw new Error('no element with ID "passages" found within "StoryInterface" special passage');$passages.empty().not("[aria-live]").attr("aria-live","polite").end(),$elems.find("[data-init-passage]").each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-init-passage" content attribute'));var passage=el.getAttribute("data-init-passage").trim();if(el.hasAttribute("data-passage"))throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> must not contain a "data-passage" content attribute'));if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&jQuery(el).empty().wiki(Story.get(passage).processText().trim())}));var updating=[];$elems.find("[data-passage]").each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-passage" content attribute'));var passage=el.getAttribute("data-passage").trim();if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&updating.push({passage:passage,element:el})})),updating.length>0&&(_updating=updating),Config.ui.updateStoryElements=!1}else $elems.append('<div id="story" role="main"><div id="passages" aria-live="polite"></div></div>');$elems.insertBefore("body>script#script-sugarcube")}(),_outlinePatch=new StyleWrapper(jQuery(document.createElement("style")).attr({id:"style-aria-outlines",type:"text/css"}).appendTo(document.head).get(0)),_hideOutlines(),jQuery(document).on("mousedown.aria-outlines keydown.aria-outlines",(function(ev){ev.type!==_lastOutlineEvent&&(_lastOutlineEvent=ev.type,"keydown"===ev.type?_outlinePatch.clear():_hideOutlines())}))}},start:{value:function(){if(Story.getAllInit().forEach((function(passage){try{var debugBuffer=Wikifier.wikifyEval(passage.text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","".concat(passage.title," [init-tagged]"),"".concat(passage.title," [init-tagged]"));debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("".concat(passage.title," [init-tagged]"),"object"===_typeof(ex)?ex.message:ex)}})),Story.has("StoryInit"))try{var debugBuffer=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("StoryInit","object"===_typeof(ex)?ex.message:ex)}if(null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'.concat(Config.passages.start,'") not found'));if(jQuery(document.documentElement).focus(),State.restore())engineShow();else{var loadStart=!0;switch(_typeof(Config.saves.autoload)){case"boolean":Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(loadStart=!Save.autosave.load());break;case"string":"prompt"===Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(loadStart=!1,UI.buildAutoload(),Dialog.open());break;case"function":Save.autosave.ok()&&Save.autosave.has()&&Config.saves.autoload()&&(loadStart=!Save.autosave.load())}loadStart&&enginePlay(Config.passages.start)}}},restart:{value:function(){LoadScreen.show(),window.scroll(0,0),State.reset(),jQuery.event.trigger(":enginerestart"),window.location.reload()}},state:{get:function(){return _state}},isIdle:{value:function(){return _state===States.Idle}},isPlaying:{value:function(){return _state!==States.Idle}},isRendering:{value:function(){return _state===States.Rendering}},lastPlay:{get:function(){return _lastPlay}},goTo:{value:function(idx){var succeded=State.goTo(idx);return succeded&&engineShow(),succeded}},go:{value:engineGo},backward:{value:function(){return engineGo(-1)}},forward:{value:function(){return engineGo(1)}},show:{value:engineShow},play:{value:enginePlay},display:{value:function(title,link,option){var noHistory=!1;switch(option){case undefined:break;case"replace":case"back":noHistory=!0;break;default:throw new Error('Engine.display option parameter called with obsolete value "'.concat(option,'"; please notify the developer'))}enginePlay(title,noHistory)}}}))}(),Passage=(_tagsToSkip=/^(?:debug|nobr|passage|widget|twine\..*)$/i,function(){function Passage(title,el){var _this22=this;_classCallCheck(this,Passage),Object.defineProperties(this,{title:{value:Util.unescape(title)},element:{value:el||null},tags:{value:Object.freeze(el&&el.hasAttribute("tags")?Array.from(new Set(el.getAttribute("tags").trim().splitOrEmpty(/\s+/))):[])},_excerpt:{writable:!0,value:null}}),Object.defineProperties(this,{domId:{value:"passage-".concat(Util.slugify(this.title))},classes:{value:Object.freeze(0===this.tags.length?[]:_this22.tags.filter((function(tag){return!_tagsToSkip.test(tag)})).map((function(tag){return Util.slugify(tag)})))}})}return _createClass(Passage,[{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){if(null==this.element){var passage=Util.escapeMarkup(this.title),mesg="".concat(L10n.get("errorTitle"),": ").concat(L10n.get("errorNonexistentPassage",{passage:passage}));return'<div class="error-view"><span class="error">'.concat(mesg,"</span></div>")}return this.element.textContent.replace(/\r/g,"")}},{key:"description",value:function(){var descriptions=Config.passages.descriptions;switch(_typeof(descriptions)){case"boolean":if(descriptions)return this.title;break;case"object":if(descriptions.hasOwnProperty(this.title))return descriptions[this.title];break;case"function":var result=descriptions.call(this);if(result)return result}return null===this._excerpt&&(this._excerpt=Passage.getExcerptFromText(this.text)),this._excerpt}},{key:"processText",value:function(){if(null==this.element)return this.text;if(this.tags.includes("Twine.image"))return"[img[".concat(this.text,"]]");var processed=this.text;return Config.passages.onProcess&&(processed=Config.passages.onProcess.call(null,{title:this.title,tags:this.tags,text:processed})),(Config.passages.nobr||this.tags.includes("nobr"))&&(processed=processed.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),processed}},{key:"render",value:function(options){var frag=document.createDocumentFragment();return new Wikifier(frag,this.processText(),options),this._excerpt=Passage.getExcerptFromNode(frag),frag}}],[{key:"getExcerptFromNode",value:function(node,count){if(!node.hasChildNodes())return"";var excerpt=node.textContent.trim();if(""!==excerpt){var excerptRe=new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count>0?count-1:7,"})"));excerpt=excerpt.replace(/\s+/g," ").match(excerptRe)}return excerpt?"".concat(excerpt[1],"…"):"…"}},{key:"getExcerptFromText",value:function(text,count){if(""===text)return"";var excerptRe=new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count>0?count-1:7,"})")),excerpt=text.replace(/<<.*?>>/g," ").replace(/<.*?>/g," ").trim().replace(/^\s*\|.*\|.*?$/gm,"").replace(/\[[<>]?img\[[^\]]*\]\]/g,"").replace(/\[\[([^|\]]*?)(?:(?:\||->|<-)[^\]]*)?\]\]/g,"$1").replace(/^\s*!+(.*?)$/gm,"$1").replace(/'{2}|\/{2}|_{2}|@{2}/g,"").trim().replace(/\s+/g," ").match(excerptRe);return excerpt?"".concat(excerpt[1],"…"):"…"}}]),Passage}()),_tagsToSkip,Save=function(){var Type=Util.toEnum({Autosave:"autosave",Disk:"disk",Serialize:"serialize",Slot:"slot"}),_slotsUBound=-1,_onLoadHandlers=new Set,_onSaveHandlers=new Set;function savesObjGet(){var saves=storage.get("saves");return null===saves?{autosave:null,slots:_appendSlots([],Config.saves.slots)}:saves}function savesObjClear(){return storage.delete("saves"),!0}function autosaveOk(){return"cookie"!==storage.name&&void 0!==Config.saves.autosave}function slotsOk(){return"cookie"!==storage.name&&-1!==_slotsUBound}function slotsCount(){if(!slotsOk())return 0;for(var saves=savesObjGet(),count=0,i=0,iend=saves.slots.length;i<iend;++i)null!==saves.slots[i]&&++count;return count}function _appendSlots(array,num){for(var i=0;i<num;++i)array.push(null);return array}function _savesObjIsEmpty(saves){for(var slots=saves.slots,isSlotsEmpty=!0,i=0,iend=slots.length;i<iend;++i)if(null!==slots[i]){isSlotsEmpty=!1;break}return null===saves.autosave&&isSlotsEmpty}function _savesObjSave(saves){return _savesObjIsEmpty(saves)?(storage.delete("saves"),!0):storage.set("saves",saves)}function _savesObjUpdate(saveObj){if(null==saveObj||"object"!==_typeof(saveObj))return!1;var updated=!1;return saveObj.hasOwnProperty("state")&&saveObj.state.hasOwnProperty("delta")&&saveObj.state.hasOwnProperty("index")||(saveObj.hasOwnProperty("data")?(delete saveObj.mode,saveObj.state={delta:State.deltaEncode(saveObj.data)},delete saveObj.data):saveObj.state.hasOwnProperty("delta")?saveObj.state.hasOwnProperty("index")||delete saveObj.state.mode:(delete saveObj.state.mode,saveObj.state.delta=State.deltaEncode(saveObj.state.history),delete saveObj.state.history),saveObj.state.index=saveObj.state.delta.length-1,updated=!0),saveObj.state.hasOwnProperty("rseed")&&(saveObj.state.seed=saveObj.state.rseed,delete saveObj.state.rseed,saveObj.state.delta.forEach((function(_,i,delta){delta[i].hasOwnProperty("rcount")&&(delta[i].pull=delta[i].rcount,delete delta[i].rcount)})),updated=!0),(saveObj.state.hasOwnProperty("expired")&&"number"==typeof saveObj.state.expired||saveObj.state.hasOwnProperty("unique")||saveObj.state.hasOwnProperty("last"))&&(saveObj.state.hasOwnProperty("expired")&&"number"==typeof saveObj.state.expired&&delete saveObj.state.expired,(saveObj.state.hasOwnProperty("unique")||saveObj.state.hasOwnProperty("last"))&&(saveObj.state.expired=[],saveObj.state.hasOwnProperty("unique")&&(saveObj.state.expired.push(saveObj.state.unique),delete saveObj.state.unique),saveObj.state.hasOwnProperty("last")&&(saveObj.state.expired.push(saveObj.state.last),delete saveObj.state.last)),updated=!0),updated}function _marshal(supplemental,details){if(null!=supplemental&&"object"!==_typeof(supplemental))throw new Error("supplemental parameter must be an object");var saveObj=Object.assign({},supplemental,{id:Config.saves.id,state:State.marshalForSave()});return Config.saves.version&&(saveObj.version=Config.saves.version),_onSaveHandlers.forEach((function(fn){return fn(saveObj,details)})),saveObj.state.delta=State.deltaEncode(saveObj.state.history),delete saveObj.state.history,saveObj}function _unmarshal(saveObj){try{if(_savesObjUpdate(saveObj),!saveObj||!saveObj.hasOwnProperty("id")||!saveObj.hasOwnProperty("state"))throw new Error(L10n.get("errorSaveMissingData"));if(saveObj.state.history=State.deltaDecode(saveObj.state.delta),delete saveObj.state.delta,_onLoadHandlers.forEach((function(fn){return fn(saveObj)})),saveObj.id!==Config.saves.id)throw new Error(L10n.get("errorSaveIdMismatch"));State.unmarshalForSave(saveObj.state),Engine.show()}catch(ex){return UI.alert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("aborting"),".")),!1}return!0}return Object.freeze(Object.defineProperties({},{init:{value:function(){if("cookie"===storage.name)return savesObjClear(),Config.saves.autoload=undefined,Config.saves.autosave=undefined,Config.saves.slots=0,!1;var saves=savesObjGet(),updated=!1;Array.isArray(saves)&&(saves={autosave:null,slots:saves},updated=!0),Config.saves.slots!==saves.slots.length&&(Config.saves.slots<saves.slots.length?(saves.slots.reverse(),saves.slots=saves.slots.filter((function(val){return!(null===val&&this.count>0)||(--this.count,!1)}),{count:saves.slots.length-Config.saves.slots}),saves.slots.reverse()):Config.saves.slots>saves.slots.length&&_appendSlots(saves.slots,Config.saves.slots-saves.slots.length),updated=!0),_savesObjUpdate(saves.autosave)&&(updated=!0);for(var i=0;i<saves.slots.length;++i)_savesObjUpdate(saves.slots[i])&&(updated=!0);return _savesObjIsEmpty(saves)&&(storage.delete("saves"),updated=!1),updated&&_savesObjSave(saves),_slotsUBound=saves.slots.length-1,!0}},get:{value:savesObjGet},clear:{value:savesObjClear},ok:{value:function(){return autosaveOk()||slotsOk()}},autosave:{value:Object.freeze(Object.defineProperties({},{ok:{value:autosaveOk},has:{value:function(){return null!==savesObjGet().autosave}},get:{value:function(){return savesObjGet().autosave}},load:{value:function(){var saves=savesObjGet();return null!==saves.autosave&&_unmarshal(saves.autosave)}},save:{value:function(title,metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return!1;var saves=savesObjGet(),supplemental={title:title||Story.get(State.passage).description(),date:Date.now()};return null!=metadata&&(supplemental.metadata=metadata),saves.autosave=_marshal(supplemental,{type:Type.Autosave}),_savesObjSave(saves)}},delete:{value:function(){var saves=savesObjGet();return saves.autosave=null,_savesObjSave(saves)}}}))},slots:{value:Object.freeze(Object.defineProperties({},{ok:{value:slotsOk},length:{get:function(){return _slotsUBound+1}},isEmpty:{value:function(){return 0===slotsCount()}},count:{value:slotsCount},has:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length||null===saves.slots[slot])}},get:{value:function(slot){if(slot<0||slot>_slotsUBound)return null;var saves=savesObjGet();return slot>=saves.slots.length?null:saves.slots[slot]}},load:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length||null===saves.slots[slot])&&_unmarshal(saves.slots[slot])}},save:{value:function(slot,title,metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed")),!1;if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();if(slot>=saves.slots.length)return!1;var supplemental={title:title||Story.get(State.passage).description(),date:Date.now()};return null!=metadata&&(supplemental.metadata=metadata),saves.slots[slot]=_marshal(supplemental,{type:Type.Slot}),_savesObjSave(saves)}},delete:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length)&&(saves.slots[slot]=null,_savesObjSave(saves))}}}))},export:{value:function(filename,metadata){if("function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed()){var str,now,MM,DD,hh,mm,ss,baseName=null==filename?Story.domId:(str=filename,Util.sanitizeFilename(str).replace(/[_\s\u2013\u2014-]+/g,"-")),saveName="".concat(baseName,"-").concat((now=new Date,MM=now.getMonth()+1,DD=now.getDate(),hh=now.getHours(),mm=now.getMinutes(),ss=now.getSeconds(),MM<10&&(MM="0".concat(MM)),DD<10&&(DD="0".concat(DD)),hh<10&&(hh="0".concat(hh)),mm<10&&(mm="0".concat(mm)),ss<10&&(ss="0".concat(ss)),"".concat(now.getFullYear()).concat(MM).concat(DD,"-").concat(hh).concat(mm).concat(ss)),".save"),supplemental=null==metadata?{}:{metadata:metadata},saveObj=LZString.compressToBase64(JSON.stringify(_marshal(supplemental,{type:Type.Disk})));saveAs(new Blob([saveObj],{type:"text/plain;charset=UTF-8"}),saveName)}else Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed"))}},import:{value:function(event){var file=event.target.files[0],reader=new FileReader;jQuery(reader).one("loadend",(function(){if(reader.error){var ex=reader.error;UI.alert("".concat(L10n.get("errorSaveDiskLoadFailed").toUpperFirst()," (").concat(ex.name,": ").concat(ex.message,").</p><p>").concat(L10n.get("aborting"),"."))}else{var saveObj;try{saveObj=JSON.parse(/\.json$/i.test(file.name)||/^\{/.test(reader.result)?reader.result:LZString.decompressFromBase64(reader.result))}catch(ex){}_unmarshal(saveObj)}})),reader.readAsText(file)}},serialize:{value:function(metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed")),null;var supplemental=null==metadata?{}:{metadata:metadata};return LZString.compressToBase64(JSON.stringify(_marshal(supplemental,{type:Type.Serialize})))}},deserialize:{value:function(base64Str){var saveObj;try{saveObj=JSON.parse(LZString.decompressFromBase64(base64Str))}catch(ex){}return _unmarshal(saveObj)?saveObj.metadata:null}},onLoad:{value:Object.freeze(Object.defineProperties({},{add:{value:function(handler){var valueType=Util.getType(handler);if("function"!==valueType)throw new TypeError("Save.onLoad.add handler parameter must be a function (received: ".concat(valueType,")"));_onLoadHandlers.add(handler)}},clear:{value:function(){_onLoadHandlers.clear()}},delete:{value:function(handler){return _onLoadHandlers.delete(handler)}},size:{get:function(){return _onLoadHandlers.size}}}))},onSave:{value:Object.freeze(Object.defineProperties({},{add:{value:function(handler){var valueType=Util.getType(handler);if("function"!==valueType)throw new TypeError("Save.onSave.add handler parameter must be a function (received: ".concat(valueType,")"));_onSaveHandlers.add(handler)}},clear:{value:function(){_onSaveHandlers.clear()}},delete:{value:function(handler){return _onSaveHandlers.delete(handler)}},size:{get:function(){return _onSaveHandlers.size}}}))}}))}(),Setting=function(){var Types=Util.toEnum({Header:0,Toggle:1,List:2,Range:3}),_definitions=[];function settingsCreate(){return Object.create(null)}function settingsSave(){var savedSettings=settingsCreate();return Object.keys(settings).length>0&&_definitions.filter((function(def){return def.type!==Types.Header&&settings[def.name]!==def.default})).forEach((function(def){return savedSettings[def.name]=settings[def.name]})),0===Object.keys(savedSettings).length?(storage.delete("settings"),!0):storage.set("settings",savedSettings)}function settingsLoad(){var defaultSettings=settingsCreate(),loadedSettings=storage.get("settings")||settingsCreate();_definitions.filter((function(def){return def.type!==Types.Header})).forEach((function(def){return defaultSettings[def.name]=def.default})),window.SugarCube.settings=settings=Object.assign(defaultSettings,loadedSettings)}function settingsClear(){return window.SugarCube.settings=settings=settingsCreate(),storage.delete("settings"),!0}function definitionsAdd(type,name,def){if(arguments.length<3){var errors=[];throw arguments.length<1&&errors.push("type"),arguments.length<2&&errors.push("name"),arguments.length<3&&errors.push("definition"),new Error("missing parameters, no ".concat(errors.join(" or ")," specified"))}if("object"!==_typeof(def))throw new TypeError("definition parameter must be an object");if(definitionsHas(name))throw new Error('cannot clobber existing setting "'.concat(name,'"'));var str,pos,definition={type:type,name:name,label:"string"==typeof def.label?def.label.trim():""};if("string"==typeof def.desc){var desc=def.desc.trim();""!==desc&&(definition.desc=desc)}switch(type){case Types.Header:break;case Types.Toggle:definition.default=!!def.default;break;case Types.List:if(!def.hasOwnProperty("list"))throw new Error("no list specified");if(!Array.isArray(def.list))throw new TypeError("list must be an array");if(0===def.list.length)throw new Error("list must not be empty");if(definition.list=Object.freeze(def.list),null==def.default)definition.default=def.list[0];else{var defaultIndex=def.list.indexOf(def.default);if(-1===defaultIndex)throw new Error("list does not contain default");definition.default=def.list[defaultIndex]}break;case Types.Range:if(!def.hasOwnProperty("min"))throw new Error("no min specified");if("number"!=typeof def.min||Number.isNaN(def.min)||!Number.isFinite(def.min))throw new TypeError("min must be a finite number");if(!def.hasOwnProperty("max"))throw new Error("no max specified");if("number"!=typeof def.max||Number.isNaN(def.max)||!Number.isFinite(def.max))throw new TypeError("max must be a finite number");if(!def.hasOwnProperty("step"))throw new Error("no step specified");if("number"!=typeof def.step||Number.isNaN(def.step)||!Number.isFinite(def.step)||def.step<=0)throw new TypeError("step must be a finite number greater than zero");var stepValidate=function(value){if(fracDigits>0){var ma=Number("".concat(def.min,"e").concat(fracDigits)),sa=Number("".concat(def.step,"e").concat(fracDigits)),_va=Number("".concat(value,"e").concat(fracDigits))-ma;return Number("".concat(_va-_va%sa+ma,"e-").concat(fracDigits))}var va=value-def.min;return va-va%def.step+def.min},fracDigits=(str=String(def.step),-1===(pos=str.lastIndexOf("."))?0:str.length-pos-1);if(stepValidate(def.max)!==def.max)throw new RangeError("max (".concat(def.max,") is not a multiple of the step (").concat(def.step,") plus the min (").concat(def.min,")"));if(definition.max=def.max,definition.min=def.min,definition.step=def.step,null==def.default)definition.default=def.max;else{if("number"!=typeof def.default||Number.isNaN(def.default)||!Number.isFinite(def.default))throw new TypeError("default must be a finite number");if(def.default<def.min)throw new RangeError("default (".concat(def.default,") is less than min (").concat(def.min,")"));if(def.default>def.max)throw new RangeError("default (".concat(def.default,") is greater than max (").concat(def.max,")"));definition.default=def.default}break;default:throw new Error("unknown Setting type: ".concat(type))}"function"==typeof def.onInit&&(definition.onInit=Object.freeze(def.onInit)),"function"==typeof def.onChange&&(definition.onChange=Object.freeze(def.onChange)),_definitions.push(Object.freeze(definition))}function definitionsHas(name){return _definitions.some((function(definition){return definition.name===name}))}function definitionsGet(name){return _definitions.find((function(definition){return definition.name===name}))}return Object.freeze(Object.defineProperties({},{Types:{value:Types},init:{value:function(){if(storage.has("options")){var old=storage.get("options");null!==old&&(window.SugarCube.settings=settings=Object.assign(settingsCreate(),old)),settingsSave(),storage.delete("options")}settingsLoad(),_definitions.forEach((function(def){if(def.hasOwnProperty("onInit")){var thisArg={name:def.name,value:settings[def.name],default:def.default};def.hasOwnProperty("list")&&(thisArg.list=def.list),def.onInit.call(thisArg)}}))}},create:{value:settingsCreate},save:{value:settingsSave},load:{value:settingsLoad},clear:{value:settingsClear},reset:{value:function(name){if(0===arguments.length)settingsClear(),settingsLoad();else{if(null==name||!definitionsHas(name))throw new Error('nonexistent setting "'.concat(name,'"'));var def=definitionsGet(name);def.type!==Types.Header&&(settings[name]=def.default)}return settingsSave()}},forEach:{value:function(callback,thisArg){_definitions.forEach(callback,thisArg)}},add:{value:definitionsAdd},addHeader:{value:function(name,desc){definitionsAdd(Types.Header,name,{desc:desc})}},addToggle:{value:function(){for(var _len16=arguments.length,args=new Array(_len16),_key16=0;_key16<_len16;_key16++)args[_key16]=arguments[_key16];definitionsAdd.apply(void 0,[Types.Toggle].concat(args))}},addList:{value:function(){for(var _len17=arguments.length,args=new Array(_len17),_key17=0;_key17<_len17;_key17++)args[_key17]=arguments[_key17];definitionsAdd.apply(void 0,[Types.List].concat(args))}},addRange:{value:function(){for(var _len18=arguments.length,args=new Array(_len18),_key18=0;_key18<_len18;_key18++)args[_key18]=arguments[_key18];definitionsAdd.apply(void 0,[Types.Range].concat(args))}},isEmpty:{value:function(){return 0===_definitions.length}},has:{value:definitionsHas},get:{value:definitionsGet},delete:{value:function definitionsDelete(name){definitionsHas(name)&&delete settings[name];for(var i=0;i<_definitions.length;++i)if(_definitions[i].name===name){_definitions.splice(i,1),definitionsDelete(name);break}}}}))}(),Story=function(){var _passages={},_inits=[],_scripts=[],_styles=[],_widgets=[],_title="",_ifId="",_domId="";function _storySetTitle(rawTitle){if(null==rawTitle)throw new Error("story title must not be null or undefined");var title=Util.unescape(String(rawTitle)).trim();if(""===title)throw new Error("story title must not be empty or consist solely of whitespace");if(document.title=_title=title,""===(_domId=Util.slugify(_title)))if(""!==_ifId)_domId=_ifId;else for(var i=0,len=_title.length;i<len;++i){var _Util$charAndPosAt2=Util.charAndPosAt(_title,i),char=_Util$charAndPosAt2.char,start=_Util$charAndPosAt2.start,end=_Util$charAndPosAt2.end;_domId+=char.codePointAt(0).toString(16),i+=end-start}}return Object.freeze(Object.defineProperties({},{load:{value:function(){var validationCodeTags=["init","widget"],validationNoCodeTagPassages=["PassageDone","PassageFooter","PassageHeader","PassageReady","StoryAuthor","StoryBanner","StoryCaption","StoryInit","StoryMenu","StoryShare","StorySubtitle"];function validateStartingPassage(passage){if(passage.tags.includesAny(validationCodeTags))throw new Error('starting passage "'.concat(passage.title,'" contains special tags; invalid: "').concat(passage.tags.filter((function(tag){return validationCodeTags.includes(tag)})).sort().join('", "'),'"'))}function validateSpecialPassages(passage){if(validationNoCodeTagPassages.includes(passage.title)){for(var _len19=arguments.length,tags=new Array(_len19>1?_len19-1:0),_key19=1;_key19<_len19;_key19++)tags[_key19-1]=arguments[_key19];throw new Error('special passage "'.concat(passage.title,'" contains special tags; invalid: "').concat(tags.sort().join('", "'),'"'))}var codeTags=[].concat(validationCodeTags),foundTags=[];if(passage.tags.forEach((function(tag){codeTags.includes(tag)&&foundTags.push.apply(foundTags,_toConsumableArray(codeTags.delete(tag)))})),foundTags.length>1)throw new Error('passage "'.concat(passage.title,'" contains multiple special tags; invalid: "').concat(foundTags.sort().join('", "'),'"'))}var $storydata=jQuery("tw-storydata"),startNode=$storydata.attr("startnode")||"";Config.passages.start=null,Config.debug=/\bdebug\b/.test($storydata.attr("options")),$storydata.children("style").each((function(i){_styles.push(new Passage("tw-user-style-".concat(i),this))})),$storydata.children("script").each((function(i){_scripts.push(new Passage("tw-user-script-".concat(i),this))})),$storydata.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])').each((function(){var $this=jQuery(this),pid=$this.attr("pid")||"",passage=new Passage($this.attr("name"),this);pid===startNode&&""!==startNode?(Config.passages.start=passage.title,validateStartingPassage(passage),_passages[passage.title]=passage):passage.tags.includes("init")?(validateSpecialPassages(passage,"init"),_inits.push(passage)):passage.tags.includes("widget")?(validateSpecialPassages(passage,"widget"),_widgets.push(passage)):_passages[passage.title]=passage})),_ifId=$storydata.attr("ifid"),_storySetTitle("MINDWARE"),Config.saves.id=Story.domId}},init:{value:function(){var storyStyle;storyStyle=document.createElement("style"),new StyleWrapper(storyStyle).add(_styles.map((function(style){return style.text.trim()})).join("\n")),jQuery(storyStyle).appendTo(document.head).attr({id:"style-story",type:"text/css"});for(var i=0;i<_scripts.length;++i)try{Scripting.evalJavaScript(_scripts[i].text)}catch(ex){console.error(ex),Alert.error(_scripts[i].title,"object"===_typeof(ex)?ex.message:ex)}for(var _i8=0;_i8<_widgets.length;++_i8)try{Wikifier.wikifyEval(_widgets[_i8].processText())}catch(ex){console.error(ex),Alert.error(_widgets[_i8].title,"object"===_typeof(ex)?ex.message:ex)}}},title:{get:function(){return _title}},domId:{get:function(){return _domId}},ifId:{get:function(){return _ifId}},add:{value:function(passage){if(!(passage instanceof Passage))throw new TypeError("Story.add passage parameter must be an instance of Passage");var title=passage.title;return!_passages.hasOwnProperty(title)&&(_passages[title]=passage,!0)}},has:{value:function(title){var type=_typeof(title);switch(type){case"number":case"string":return _passages.hasOwnProperty(String(title));case"undefined":break;case"object":type=null===title?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.has title parameter cannot be ".concat(type))}},get:{value:function(title){var type=_typeof(title);switch(type){case"number":case"string":var id=String(title);return _passages.hasOwnProperty(id)?_passages[id]:new Passage(id||"(unknown)");case"undefined":break;case"object":type=null===title?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.get title parameter cannot be ".concat(type))}},getAllInit:{value:function(){return Object.freeze(Array.from(_inits))}},getAllRegular:{value:function(){return Object.freeze(Object.assign({},_passages))}},getAllScript:{value:function(){return Object.freeze(Array.from(_scripts))}},getAllStylesheet:{value:function(){return Object.freeze(Array.from(_styles))}},getAllWidget:{value:function(){return Object.freeze(Array.from(_widgets))}},lookup:{value:function(key,value){var sortKey=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"title",results=[];return Object.keys(_passages).forEach((function(name){var passage=_passages[name];"object"===_typeof(passage[key])&&null!==passage[key]?passage[key]instanceof Array&&passage[key].some((function(m){return Util.sameValueZero(m,value)}))&&results.push(passage):Util.sameValueZero(passage[key],value)&&results.push(passage)})),results.sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1})),results}},lookupWith:{value:function(predicate){var sortKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"title";if("function"!=typeof predicate)throw new TypeError("Story.lookupWith predicate parameter must be a function");var results=[];return Object.keys(_passages).forEach((function(name){var passage=_passages[name];predicate(passage)&&results.push(passage)})),results.sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1})),results}}}))}(),UI=function(){function uiAssembleLinkList(passage,listEl){var list=listEl,debugState=Config.debug,cleanState=Config.cleanupWikifierOutput;Config.debug=!1,Config.cleanupWikifierOutput=!1;try{null==list&&(list=document.createElement("ul"));var frag=document.createDocumentFragment();new Wikifier(frag,Story.get(passage).processText().trim());var errors=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "));for(;frag.hasChildNodes();){var node=frag.firstChild;if(node.nodeType===Node.ELEMENT_NODE&&"A"===node.nodeName.toUpperCase()){var li=document.createElement("li");list.appendChild(li),li.appendChild(node)}else frag.removeChild(node)}}finally{Config.cleanupWikifierOutput=cleanState,Config.debug=debugState}return list}function uiOpenAlert(message){jQuery(Dialog.setup(L10n.get("alertTitle"),"alert")).append("<p>".concat(message,'</p><ul class="buttons">')+'<li><button id="alert-ok" class="ui-close">'.concat(L10n.get(["alertOk","ok"]),"</button></li>")+"</ul>");for(var _len20=arguments.length,args=new Array(_len20>1?_len20-1:0),_key20=1;_key20<_len20;_key20++)args[_key20-1]=arguments[_key20];Dialog.open.apply(Dialog,args)}function uiBuildAutoload(){return jQuery(Dialog.setup(L10n.get("autoloadTitle"),"autoload")).append("<p>".concat(L10n.get("autoloadPrompt"),'</p><ul class="buttons">')+'<li><button id="autoload-ok" class="ui-close">'.concat(L10n.get(["autoloadOk","ok"]),"</button></li>")+'<li><button id="autoload-cancel" class="ui-close">'.concat(L10n.get(["autoloadCancel","cancel"]),"</button></li>")+"</ul>"),jQuery(document).one("click.autoload",".ui-close",(function(ev){var isAutoloadOk="autoload-ok"===ev.target.id;jQuery(document).one(":dialogclosed",(function(){isAutoloadOk&&Save.autosave.load()||Engine.play(Config.passages.start)}))})),!0}function uiBuildJumpto(){var list=document.createElement("ul");jQuery(Dialog.setup(L10n.get("jumptoTitle"),"jumpto list")).append(list);for(var expired=State.expired.length,i=State.size-1;i>=0;--i)if(i!==State.activeIndex){var passage=Story.get(State.history[i].title);passage&&passage.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(idx){return function(){return jQuery(document).one(":dialogclosed",(function(){return Engine.goTo(idx)}))}}(i)).addClass("ui-close").text("".concat(L10n.get("jumptoTurn")," ").concat(expired+i+1,": ").concat(passage.description()))).appendTo(list)}list.hasChildNodes()||jQuery(list).append("<li><a><em>".concat(L10n.get("jumptoUnavailable"),"</em></a></li>"))}function uiBuildRestart(){return jQuery(Dialog.setup(L10n.get("restartTitle"),"restart")).append("<p>".concat(L10n.get("restartPrompt"),'</p><ul class="buttons">')+'<li><button id="restart-ok">'.concat(L10n.get(["restartOk","ok"]),"</button></li>")+'<li><button id="restart-cancel" class="ui-close">'.concat(L10n.get(["restartCancel","cancel"]),"</button></li>")+"</ul>").find("#restart-ok").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){return Engine.restart()})),Dialog.close()})),!0}function uiBuildSaves(){var savesAllowed="function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed();function createActionItem(bId,bClass,bText,bAction){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(bId)).html(bText);return bClass&&$btn.addClass(bClass),bAction?$btn.ariaClick(bAction):$btn.ariaDisabled(!0),jQuery(document.createElement("li")).append($btn)}var $dialogBody=jQuery(Dialog.setup(L10n.get("savesTitle"),"saves")),savesOk=Save.ok(),fileOk=Has.fileAPI&&(Config.saves.tryDiskOnMobile||!Browser.isMobile.any());if(savesOk&&$dialogBody.append(function(){function createButton(bId,bClass,bText,bSlot,bAction){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(bId,"-").concat(bSlot)).addClass(bId).html(bText);return bClass&&$btn.addClass(bClass),bAction?"auto"===bSlot?$btn.ariaClick({label:"".concat(bText," ").concat(L10n.get("savesLabelAuto"))},(function(){return bAction()})):$btn.ariaClick({label:"".concat(bText," ").concat(L10n.get("savesLabelSlot")," ").concat(bSlot+1)},(function(){return bAction(bSlot)})):$btn.ariaDisabled(!0),$btn}var saves=Save.get(),$tbody=jQuery(document.createElement("tbody"));if(Save.autosave.ok()){var $tdSlot=jQuery(document.createElement("td")),$tdLoad=jQuery(document.createElement("td")),$tdDesc=jQuery(document.createElement("td")),$tdDele=jQuery(document.createElement("td"));jQuery(document.createElement("b")).attr({title:L10n.get("savesLabelAuto"),"aria-label":L10n.get("savesLabelAuto")}).text("A").appendTo($tdSlot),saves.autosave?($tdLoad.append(createButton("load","ui-close",L10n.get("savesLabelLoad"),"auto",(function(){jQuery(document).one(":dialogclosed",(function(){return Save.autosave.load()}))}))),jQuery(document.createElement("div")).text(saves.autosave.title).appendTo($tdDesc),jQuery(document.createElement("div")).addClass("datestamp").html(saves.autosave.date?"".concat(new Date(saves.autosave.date).toLocaleString()):"<em>".concat(L10n.get("savesUnknownDate"),"</em>")).appendTo($tdDesc),$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),"auto",(function(){Save.autosave.delete(),uiBuildSaves()})))):($tdLoad.append(createButton("load",null,L10n.get("savesLabelLoad"),"auto")),$tdDesc.addClass("empty").text("•  •  •"),$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),"auto"))),jQuery(document.createElement("tr")).append($tdSlot).append($tdLoad).append($tdDesc).append($tdDele).appendTo($tbody)}for(var i=0,iend=saves.slots.length;i<iend;++i){var _$tdSlot=jQuery(document.createElement("td")),_$tdLoad=jQuery(document.createElement("td")),_$tdDesc=jQuery(document.createElement("td")),_$tdDele=jQuery(document.createElement("td"));_$tdSlot.append(document.createTextNode(i+1)),saves.slots[i]?(_$tdLoad.append(createButton("load","ui-close",L10n.get("savesLabelLoad"),i,(function(slot){jQuery(document).one(":dialogclosed",(function(){return Save.slots.load(slot)}))}))),jQuery(document.createElement("div")).text(saves.slots[i].title).appendTo(_$tdDesc),jQuery(document.createElement("div")).addClass("datestamp").html(saves.slots[i].date?"".concat(new Date(saves.slots[i].date).toLocaleString()):"<em>".concat(L10n.get("savesUnknownDate"),"</em>")).appendTo(_$tdDesc),_$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),i,(function(slot){Save.slots.delete(slot),uiBuildSaves()})))):(_$tdLoad.append(createButton("save","ui-close",L10n.get("savesLabelSave"),i,savesAllowed?Save.slots.save:null)),_$tdDesc.addClass("empty").text("•  •  •"),_$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),i))),jQuery(document.createElement("tr")).append(_$tdSlot).append(_$tdLoad).append(_$tdDesc).append(_$tdDele).appendTo($tbody)}return jQuery(document.createElement("table")).attr("id","saves-list").append($tbody)}()),savesOk||fileOk){var $btnBar=jQuery(document.createElement("ul")).addClass("buttons").appendTo($dialogBody);return fileOk&&($btnBar.append(createActionItem("export","ui-close",L10n.get("savesLabelExport"),savesAllowed?function(){return Save.export()}:null)),$btnBar.append(createActionItem("import",null,L10n.get("savesLabelImport"),(function(){return $dialogBody.find("#saves-import-file").trigger("click")}))),jQuery(document.createElement("input")).css({display:"block",visibility:"hidden",position:"fixed",left:"-9999px",top:"-9999px",width:"1px",height:"1px"}).attr({type:"file",id:"saves-import-file",tabindex:-1,"aria-hidden":!0}).on("change",(function(ev){jQuery(document).one(":dialogclosed",(function(){return Save.import(ev)})),Dialog.close()})).appendTo($dialogBody)),savesOk&&$btnBar.append(createActionItem("clear",null,L10n.get("savesLabelClear"),Save.autosave.has()||!Save.slots.isEmpty()?function(){Save.clear(),uiBuildSaves()}:null)),!0}return uiOpenAlert(L10n.get("savesIncapable")),!1}function uiBuildSettings(){var $dialogBody=jQuery(Dialog.setup(L10n.get("settingsTitle"),"settings"));return Setting.forEach((function(control){if(control.type===Setting.Types.Header){var _name=control.name,_id=Util.slugify(_name),$header=jQuery(document.createElement("div")),$heading=jQuery(document.createElement("h2"));return $header.attr("id","header-body-".concat(_id)).append($heading).appendTo($dialogBody),$heading.attr("id","header-heading-".concat(_id)).wiki(_name),void(control.desc&&jQuery(document.createElement("p")).attr("id","header-desc-".concat(_id)).wiki(control.desc).appendTo($header))}var $control,name=control.name,id=Util.slugify(name),$setting=jQuery(document.createElement("div")),$label=jQuery(document.createElement("label")),$controlBox=jQuery(document.createElement("div"));switch(jQuery(document.createElement("div")).append($label).append($controlBox).appendTo($setting),control.desc&&jQuery(document.createElement("p")).attr("id","setting-desc-".concat(id)).wiki(control.desc).appendTo($setting),$label.attr({id:"setting-label-".concat(id),for:"setting-control-".concat(id)}).wiki(control.label),null==settings[name]&&(settings[name]=control.default),control.type){case Setting.Types.Toggle:$control=jQuery(document.createElement("button")),settings[name]?$control.addClass("enabled").text(L10n.get("settingsOn")):$control.text(L10n.get("settingsOff")),$control.ariaClick((function(){settings[name]?(jQuery(this).removeClass("enabled").text(L10n.get("settingsOff")),settings[name]=!1):(jQuery(this).addClass("enabled").text(L10n.get("settingsOn")),settings[name]=!0),Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default})}));break;case Setting.Types.List:$control=jQuery(document.createElement("select"));for(var i=0,iend=control.list.length;i<iend;++i)jQuery(document.createElement("option")).val(i).text(control.list[i]).appendTo($control);$control.val(control.list.indexOf(settings[name])).attr("tabindex",0).on("change",(function(){settings[name]=control.list[Number(this.value)],Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default,list:control.list})}));break;case Setting.Types.Range:($control=jQuery(document.createElement("input"))).attr({type:"range",min:control.min,max:control.max,step:control.step,value:settings[name],tabindex:0}).on("change input",(function(){settings[name]=Number(this.value),Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default,min:control.min,max:control.max,step:control.step})})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),$control.trigger("change"))}))}$control.attr("id","setting-control-".concat(id)).appendTo($controlBox),$setting.attr("id","setting-body-".concat(id)).appendTo($dialogBody)})),$dialogBody.append('<ul class="buttons">'+'<li><button id="settings-ok" class="ui-close">'.concat(L10n.get(["settingsOk","ok"]),"</button></li>")+'<li><button id="settings-reset">'.concat(L10n.get("settingsReset"),"</button></li>")+"</ul>").find("#settings-reset").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){Setting.reset(),window.location.reload()})),Dialog.close()})),!0}function uiBuildShare(){try{jQuery(Dialog.setup(L10n.get("shareTitle"),"share list")).append(uiAssembleLinkList("StoryShare"))}catch(ex){return console.error(ex),Alert.error("StoryShare",ex.message),!1}return!0}return Object.freeze(Object.defineProperties({},{assembleLinkList:{value:uiAssembleLinkList},alert:{value:uiOpenAlert},jumpto:{value:function(){uiBuildJumpto(),Dialog.open.apply(Dialog,arguments)}},restart:{value:function(){uiBuildRestart(),Dialog.open.apply(Dialog,arguments)}},saves:{value:function(){uiBuildSaves(),Dialog.open.apply(Dialog,arguments)}},settings:{value:function(){uiBuildSettings(),Dialog.open.apply(Dialog,arguments)}},share:{value:function(){uiBuildShare(),Dialog.open.apply(Dialog,arguments)}},buildAutoload:{value:uiBuildAutoload},buildJumpto:{value:uiBuildJumpto},buildRestart:{value:uiBuildRestart},buildSaves:{value:uiBuildSaves},buildSettings:{value:uiBuildSettings},buildShare:{value:uiBuildShare},stow:{value:function(){return UIBar.stow()}},unstow:{value:function(){return UIBar.unstow()}},setStoryElements:{value:function(){return UIBar.update()}},isOpen:{value:function(){return Dialog.isOpen.apply(Dialog,arguments)}},body:{value:function(){return Dialog.body()}},setup:{value:function(){return Dialog.setup.apply(Dialog,arguments)}},addClickHandler:{value:function(){return Dialog.addClickHandler.apply(Dialog,arguments)}},open:{value:function(){return Dialog.open.apply(Dialog,arguments)}},close:{value:function(){return Dialog.close.apply(Dialog,arguments)}},resize:{value:function(){return Dialog.resize()}},buildDialogAutoload:{value:uiBuildAutoload},buildDialogJumpto:{value:uiBuildJumpto},buildDialogRestart:{value:uiBuildRestart},buildDialogSaves:{value:uiBuildSaves},buildDialogSettings:{value:uiBuildSettings},buildDialogShare:{value:uiBuildShare},buildLinkListFromPassage:{value:uiAssembleLinkList}}))}(),UIBar=function(){var _$uiBar=null;function uiBarStow(noAnimation){var $story;_$uiBar&&!_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.addClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.minDomActionDelay));return this}function uiBarUpdate(){if(Story.has("StoryDisplayTitle")&&setDisplayTitle(Story.get("StoryDisplayTitle").processText()),_$uiBar){setPageElement("story-banner","StoryBanner"),setPageElement("story-subtitle","StorySubtitle"),setPageElement("story-author","StoryAuthor"),setPageElement("story-caption","StoryCaption");var menuStory=document.getElementById("menu-story");if(null!==menuStory&&(jQuery(menuStory).empty(),Story.has("StoryMenu")))try{UI.assembleLinkList("StoryMenu",menuStory)}catch(ex){console.error(ex),Alert.error("StoryMenu",ex.message)}}}return Object.freeze(Object.defineProperties({},{destroy:{value:function(){_$uiBar&&(_$uiBar.hide(),jQuery(document).off(".ui-bar"),jQuery(document.head).find("#style-ui-bar").remove(),_$uiBar.remove(),_$uiBar=null)}},hide:{value:function(){return _$uiBar&&_$uiBar.hide(),this}},init:{value:function(){if(!document.getElementById("ui-bar")){var toggleLabel,backwardLabel,jumptoLabel,forwardLabel,$backward,$forward,$elems=(toggleLabel=L10n.get("uiBarToggle"),backwardLabel=L10n.get("uiBarBackward"),jumptoLabel=L10n.get("uiBarJumpto"),forwardLabel=L10n.get("uiBarForward"),jQuery(document.createDocumentFragment()).append('<div id="ui-bar" aria-live="polite"><div id="ui-bar-tray">'+'<button id="ui-bar-toggle" tabindex="0" title="'.concat(toggleLabel,'" aria-label="').concat(toggleLabel,'"></button>')+'<div id="ui-bar-history">'+'<button id="history-backward" tabindex="0" title="'.concat(backwardLabel,'" aria-label="').concat(backwardLabel,'"></button>')+'<button id="history-jumpto" tabindex="0" title="'.concat(jumptoLabel,'" aria-label="').concat(jumptoLabel,'"></button>')+'<button id="history-forward" tabindex="0" title="'.concat(forwardLabel,'" aria-label="').concat(forwardLabel,'"></button>')+'</div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core">'+'<li id="menu-item-saves"><a tabindex="0">'.concat(L10n.get("savesTitle"),"</a></li>")+'<li id="menu-item-settings"><a tabindex="0">'.concat(L10n.get("settingsTitle"),"</a></li>")+'<li id="menu-item-restart"><a tabindex="0">'.concat(L10n.get("restartTitle"),"</a></li>")+'<li id="menu-item-share"><a tabindex="0">'.concat(L10n.get("shareTitle"),"</a></li>")+"</ul></nav></div></div>"));_$uiBar=jQuery($elems.find("#ui-bar").get(0)),$elems.insertBefore("body>script#script-sugarcube"),jQuery(document).on(":historyupdate.ui-bar",($backward=jQuery("#history-backward"),$forward=jQuery("#history-forward"),function(){$backward.ariaDisabled(State.length<2),$forward.ariaDisabled(State.length===State.size)}))}}},isHidden:{value:function(){return _$uiBar&&"none"===_$uiBar.css("display")}},isStowed:{value:function(){return _$uiBar&&_$uiBar.hasClass("stowed")}},show:{value:function(){return _$uiBar&&_$uiBar.show(),this}},start:{value:function(){_$uiBar&&(("boolean"==typeof Config.ui.stowBarInitially?Config.ui.stowBarInitially:jQuery(window).width()<=Config.ui.stowBarInitially)&&uiBarStow(!0),jQuery("#ui-bar-toggle").ariaClick({label:L10n.get("uiBarToggle")},(function(){return _$uiBar.toggleClass("stowed")})),Config.history.controls?(jQuery("#history-backward").ariaDisabled(State.length<2).ariaClick({label:L10n.get("uiBarBackward")},(function(){return Engine.backward()})),Story.lookup("tags","bookmark").length>0?jQuery("#history-jumpto").ariaClick({label:L10n.get("uiBarJumpto")},(function(){return UI.jumpto()})):jQuery("#history-jumpto").remove(),jQuery("#history-forward").ariaDisabled(State.length===State.size).ariaClick({label:L10n.get("uiBarForward")},(function(){return Engine.forward()}))):jQuery("#ui-bar-history").remove(),Story.has("StoryDisplayTitle")?setDisplayTitle(Story.get("StoryDisplayTitle").processText()):jQuery("#story-title").text(Story.title),Story.has("StoryCaption")||jQuery("#story-caption").remove(),Story.has("StoryMenu")||jQuery("#menu-story").remove(),Config.ui.updateStoryElements||uiBarUpdate(),jQuery("#menu-item-saves a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSaves(),Dialog.open()})).text(L10n.get("savesTitle")),Setting.isEmpty()?jQuery("#menu-item-settings").remove():jQuery("#menu-item-settings a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSettings(),Dialog.open()})).text(L10n.get("settingsTitle")),jQuery("#menu-item-restart a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildRestart(),Dialog.open()})).text(L10n.get("restartTitle")),Story.has("StoryShare")?jQuery("#menu-item-share a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildShare(),Dialog.open()})).text(L10n.get("shareTitle")):jQuery("#menu-item-share").remove())}},stow:{value:uiBarStow},unstow:{value:function(noAnimation){var $story;return _$uiBar&&_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.removeClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.minDomActionDelay)),this}},update:{value:uiBarUpdate},setStoryElements:{value:uiBarUpdate}}))}(),DebugBar=function(){var _variableRe=new RegExp("^".concat(Patterns.variable,"$")),_numericKeyRe=/^\d+$/,_watchList=[],_$debugBar=null,_$watchBody=null,_$watchList=null,_$turnSelect=null,_stowed=!0;function debugBarStow(){_$debugBar.css("right","-".concat(_$debugBar.outerWidth(),"px")),_stowed=!0,_updateSession()}function debugBarUnstow(){_$debugBar.css("right",0),_stowed=!1,_updateSession()}function debugBarToggle(){_stowed?debugBarUnstow():debugBarStow()}function debugBarWatchAdd(varName){_variableRe.test(varName)&&(_watchList.pushUnique(varName),_watchList.sort(),_updateWatchBody(),_updateWatchList(),_updateSession())}function debugBarWatchAddAll(){Object.keys(State.variables).map((function(name){return _watchList.pushUnique("$".concat(name))})),Object.keys(State.temporary).map((function(name){return _watchList.pushUnique("_".concat(name))})),_watchList.sort(),_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchClear(){for(var i=_watchList.length-1;i>=0;--i)_watchList.pop();_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchDelete(varName){_watchList.delete(varName),_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchDisable(){_debugBarWatchDisableNoUpdate(),_updateSession()}function debugBarWatchEnable(){_debugBarWatchEnableNoUpdate(),_updateSession()}function debugBarWatchIsEnabled(){return!_$watchBody.attr("hidden")}function debugBarWatchToggle(){_$watchBody.attr("hidden")?debugBarWatchEnable():debugBarWatchDisable()}function _debugBarWatchDisableNoUpdate(){_$watchBody.attr({"aria-hidden":!0,hidden:"hidden"})}function _debugBarWatchEnableNoUpdate(){_$watchBody.removeAttr("aria-hidden hidden")}function _clearSession(){session.delete("debugState")}function _hasSession(){return session.has("debugState")}function _updateSession(){session.set("debugState",{stowed:_stowed,watchList:_watchList,watchEnabled:debugBarWatchIsEnabled(),viewsEnabled:DebugView.isEnabled()})}function _updateWatchBody(){if(0!==_watchList.length){for(var delLabel=L10n.get("debugBarDeleteWatch"),$table=jQuery(document.createElement("table")),$tbody=jQuery(document.createElement("tbody")),_loop4=function(i,len){var varName=_watchList[i],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary,$row=jQuery(document.createElement("tr")),$delBtn=jQuery(document.createElement("button")),$code=jQuery(document.createElement("code"));$delBtn.addClass("watch-delete").attr("data-name",varName).ariaClick({one:!0,label:delLabel},(function(){return debugBarWatchDelete(varName)})),$code.text(_toWatchString(store[varKey])),jQuery(document.createElement("td")).append($delBtn).appendTo($row),jQuery(document.createElement("td")).text(varName).appendTo($row),jQuery(document.createElement("td")).append($code).appendTo($row),$row.appendTo($tbody)},i=0,len=_watchList.length;i<len;++i)_loop4(i);$table.append($tbody),_$watchBody.empty().append($table)}else _$watchBody.empty().append("<div>".concat(L10n.get("debugBarNoWatches"),"</div>"))}function _updateWatchList(){var svn=Object.keys(State.variables),tvn=Object.keys(State.temporary);if(0!==svn.length||0!==tvn.length){var names=[].concat(_toConsumableArray(svn.map((function(name){return"$".concat(name)}))),_toConsumableArray(tvn.map((function(name){return"_".concat(name)})))).sort(),options=document.createDocumentFragment();names.delete(_watchList);for(var i=0,len=names.length;i<len;++i)jQuery(document.createElement("option")).val(names[i]).appendTo(options);_$watchList.empty().append(options)}else _$watchList.empty()}function _updateTurnSelect(){for(var histLen=State.size,expLen=State.expired.length,options=document.createDocumentFragment(),i=0;i<histLen;++i)jQuery(document.createElement("option")).val(i).text("".concat(expLen+i+1,". ").concat(Util.escape(State.history[i].title))).appendTo(options);_$turnSelect.empty().ariaDisabled(histLen<2).append(options).val(State.activeIndex)}function _toWatchString(value){if(null===value)return"null";switch(_typeof(value)){case"number":if(Number.isNaN(value))return"NaN";if(!Number.isFinite(value))return"Infinity";case"boolean":case"symbol":case"undefined":return String(value);case"string":return JSON.stringify(value);case"function":return"Function"}var objType=Util.toStringTag(value);if("Date"===objType)return"Date {".concat(value.toLocaleString(),"}");if("RegExp"===objType)return"RegExp ".concat(value.toString());var result=[];if(value instanceof Array||value instanceof Set){for(var list=value instanceof Array?value:Array.from(value),i=0,len=list.length;i<len;++i)result.push(list.hasOwnProperty(i)?_toWatchString(list[i]):"<empty>");return Object.keys(list).filter((function(key){return!_numericKeyRe.test(key)})).forEach((function(key){return result.push("".concat(_toWatchString(key),": ").concat(_toWatchString(list[key])))})),"".concat(objType,"(").concat(list.length,") [").concat(result.join(", "),"]")}return value instanceof Map?(value.forEach((function(val,key){return result.push("".concat(_toWatchString(key)," → ").concat(_toWatchString(val)))})),"".concat(objType,"(").concat(value.size,") {").concat(result.join(", "),"}")):(Object.keys(value).forEach((function(key){return result.push("".concat(_toWatchString(key),": ").concat(_toWatchString(value[key])))})),"".concat(objType," {").concat(result.join(", "),"}"))}return Object.freeze(Object.defineProperties({},{init:{value:function(){var barToggleLabel=L10n.get("debugBarToggle"),watchAddLabel=L10n.get("debugBarAddWatch"),watchAllLabel=L10n.get("debugBarWatchAll"),watchNoneLabel=L10n.get("debugBarWatchNone"),watchToggleLabel=L10n.get("debugBarWatchToggle"),viewsToggleLabel=L10n.get("debugBarViewsToggle");jQuery(document.createDocumentFragment()).append('<div id="debug-bar"><div id="debug-bar-watch">'+"<div>".concat(L10n.get("debugBarNoWatches"),"</div>>")+"</div><div>"+'<button id="debug-bar-watch-toggle" tabindex="0" title="'.concat(watchToggleLabel,'" aria-label="').concat(watchToggleLabel,'">').concat(L10n.get("debugBarLabelWatch"),"</button>")+'<label id="debug-bar-watch-label" for="debug-bar-watch-input">'.concat(L10n.get("debugBarLabelAdd"),"</label>")+'<input id="debug-bar-watch-input" name="debug-bar-watch-input" type="text" list="debug-bar-watch-list" tabindex="0"><datalist id="debug-bar-watch-list" aria-hidden="true" hidden="hidden"></datalist>'+'<button id="debug-bar-watch-add" tabindex="0" title="'.concat(watchAddLabel,'" aria-label="').concat(watchAddLabel,'"></button>')+'<button id="debug-bar-watch-all" tabindex="0" title="'.concat(watchAllLabel,'" aria-label="').concat(watchAllLabel,'"></button>')+'<button id="debug-bar-watch-none" tabindex="0" title="'.concat(watchNoneLabel,'" aria-label="').concat(watchNoneLabel,'"></button>')+"</div><div>"+'<button id="debug-bar-views-toggle" tabindex="0" title="'.concat(viewsToggleLabel,'" aria-label="').concat(viewsToggleLabel,'">').concat(L10n.get("debugBarLabelViews"),"</button>")+'<label id="debug-bar-turn-label" for="debug-bar-turn-select">'.concat(L10n.get("debugBarLabelTurn"),"</label>")+'<select id="debug-bar-turn-select" tabindex="0"></select></div>'+'<button id="debug-bar-toggle" tabindex="0" title="'.concat(barToggleLabel,'" aria-label="').concat(barToggleLabel,'"></button>')+'</div><div id="debug-bar-hint"></div>').appendTo("body"),_$debugBar=jQuery("#debug-bar"),_$watchBody=jQuery(_$debugBar.find("#debug-bar-watch").get(0)),_$watchList=jQuery(_$debugBar.find("#debug-bar-watch-list").get(0)),_$turnSelect=jQuery(_$debugBar.find("#debug-bar-turn-select").get(0));var $barToggle=jQuery(_$debugBar.find("#debug-bar-toggle").get(0)),$watchToggle=jQuery(_$debugBar.find("#debug-bar-watch-toggle").get(0)),$watchInput=jQuery(_$debugBar.find("#debug-bar-watch-input").get(0)),$watchAdd=jQuery(_$debugBar.find("#debug-bar-watch-add").get(0)),$watchAll=jQuery(_$debugBar.find("#debug-bar-watch-all").get(0)),$watchNone=jQuery(_$debugBar.find("#debug-bar-watch-none").get(0)),$viewsToggle=jQuery(_$debugBar.find("#debug-bar-views-toggle").get(0));$barToggle.ariaClick(debugBarToggle),$watchToggle.ariaClick(debugBarWatchToggle),$watchInput.on(":addwatch",(function(){debugBarWatchAdd(this.value.trim()),this.value=""})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),$watchInput.trigger(":addwatch"))})),$watchAdd.ariaClick((function(){return $watchInput.trigger(":addwatch")})),$watchAll.ariaClick(debugBarWatchAddAll),$watchNone.ariaClick(debugBarWatchClear),_$turnSelect.on("change",(function(){Engine.goTo(Number(this.value))})),$viewsToggle.ariaClick((function(){DebugView.toggle(),_updateSession()})),jQuery(document).on(":historyupdate.debug-bar",_updateTurnSelect).on(":passageend.debug-bar",(function(){_updateWatchBody(),_updateWatchList()})).on(":enginerestart.debug-bar",_clearSession),_hasSession()||DebugView.enable()}},isStowed:{value:function(){return _stowed}},start:{value:function(){(function(){if(!_hasSession())return!1;var debugState=session.get("debugState");_stowed=debugState.stowed,_watchList.push.apply(_watchList,_toConsumableArray(debugState.watchList)),debugState.watchEnabled?_debugBarWatchEnableNoUpdate():_debugBarWatchDisableNoUpdate();debugState.viewsEnabled?DebugView.enable():DebugView.disable()})(),_stowed?debugBarStow():debugBarUnstow(),_updateTurnSelect(),_updateWatchBody(),_updateWatchList()}},stow:{value:debugBarStow},toggle:{value:debugBarToggle},unstow:{value:debugBarUnstow},watch:{value:Object.freeze(Object.defineProperties({},{add:{value:debugBarWatchAdd},all:{value:debugBarWatchAddAll},clear:{value:debugBarWatchClear},delete:{value:debugBarWatchDelete},disable:{value:debugBarWatchDisable},enable:{value:debugBarWatchEnable},isEnabled:{value:debugBarWatchIsEnabled},toggle:{value:debugBarWatchToggle}}))}}))}(),LoadScreen=function(){var _locks=new Set,_autoId=0;function loadScreenHide(){jQuery(document.documentElement).removeAttr("data-init")}function loadScreenShow(){jQuery(document.documentElement).attr("data-init","loading")}return Object.freeze(Object.defineProperties({},{init:{value:function(){jQuery(document).on("readystatechange.SugarCube",(function(){_locks.size>0||("complete"===document.readyState?"loading"===jQuery(document.documentElement).attr("data-init")&&(Config.loadDelay>0?setTimeout((function(){0===_locks.size&&loadScreenHide()}),Math.max(Engine.minDomActionDelay,Config.loadDelay)):loadScreenHide()):loadScreenShow())}))}},clear:{value:function(){jQuery(document).off("readystatechange.SugarCube"),_locks.clear(),loadScreenHide()}},hide:{value:loadScreenHide},show:{value:loadScreenShow},lock:{value:function(){return++_autoId,_locks.add(_autoId),loadScreenShow(),_autoId}},unlock:{value:function(id){if(null==id)throw new Error("LoadScreen.unlock called with a null or undefined ID");_locks.has(id)&&_locks.delete(id),0===_locks.size&&jQuery(document).trigger("readystatechange")}}}))}(),version=Object.freeze({title:"SugarCube",major:2,minor:36,patch:1,prerelease:null,build:9717,date:new Date("2021-12-22T05:37:33.467Z"),extensions:{},toString:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,"+").concat(this.build)},short:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.title," (v").concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,")")},long:function(){return"".concat(this.title," v").concat(this.toString()," (").concat(this.date.toUTCString(),")")}}),TempState={},macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={},session=null,settings={},setup={},storage=null,browser=Browser,config=Config,has=Has,History=State,state=State,tale=Story,TempVariables=State.temporary;window.SugarCube={},jQuery((function(){try{var lockId=LoadScreen.lock();LoadScreen.init(),document.normalize&&document.normalize(),Story.load(),storage=SimpleStore.create(Story.domId,!0),session=SimpleStore.create(Story.domId,!1),Dialog.init(),UIBar.init(),Engine.init(),Story.init(),L10n.init(),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(L10n.get("warningNoWebStorage"))),Save.init(),Setting.init(),Macro.init(),Engine.start(),Config.debug&&DebugBar.init();var $window=$(window),vprCheckId=setInterval((function(){$window.width()&&(clearInterval(vprCheckId),UIBar.start(),Config.debug&&DebugBar.start(),jQuery.event.trigger({type:":storyready"}),setTimeout((function(){return LoadScreen.unlock(lockId)}),2*Engine.minDomActionDelay))}),Engine.minDomActionDelay);Object.defineProperty(window,"SugarCube",{value:Object.seal(Object.assign(Object.create(null),{Browser:Browser,Config:Config,Dialog:Dialog,Engine:Engine,Fullscreen:Fullscreen,Has:Has,L10n:L10n,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,SimpleAudio:SimpleAudio,State:State,Story:Story,UI:UI,UIBar:UIBar,DebugBar:DebugBar,Util:Util,Visibility:Visibility,Wikifier:Wikifier,session:session,settings:settings,setup:setup,storage:storage,version:version}))})}catch(ex){return console.error(ex),LoadScreen.clear(),Alert.fatal(null,ex.message,ex)}}))})(window,window.document,jQuery);}
	</script>
</body>
</html>
